diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/ahb2mig_ml605.vhd work/ahb2mig_ml605.vhd
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/ahb2mig_ml605.vhd	2014-04-16 16:51:31.000000000 +0200
+++ work/ahb2mig_ml605.vhd	2019-12-29 15:59:50.112753943 +0100
@@ -39,9 +39,9 @@ package ml605 is
   constant DM_WIDTH  : integer := 8;
   constant DQ_WIDTH  : integer := 64;
   constant DQS_WIDTH : integer := 8;
-  constant ROW_WIDTH : integer := 13;
+  constant ROW_WIDTH : integer := 14;
   constant PAYLOAD_WIDTH : integer := 64;
-  constant ADDR_WIDTH    : integer := 27;
+  constant ADDR_WIDTH    : integer := 28;
 
   type mig_app_in_type is record
       app_wdf_wren  : std_logic;
@@ -314,7 +314,7 @@ begin
    ahbso.hresp   <= ra.hresp;
    ahbso.hrdata <= ahbdrivedata(ra.hrdata);
 
-   migi.app_addr  <= '0' & ra.acc.haddr(28 downto 6) & "000";
+   migi.app_addr  <= "00" & ra.acc.haddr(28 downto 6) & "000";
 
    ddr_ctrl : process(rst, r, ra, migo)
    variable v        : ddr_reg_type;   -- local variables for registers
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/config.vhd work/config.vhd
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/config.vhd	2014-04-16 16:51:31.000000000 +0200
+++ work/config.vhd	2019-12-29 15:59:50.062753814 +0100
@@ -1,82 +1,91 @@
 
-
-
-
-
-
------------------------------------------------------------------------------
--- LEON3 Demonstration design test bench configuration
--- Copyright (C) 2009 Aeroflex Gaisler
-------------------------------------------------------------------------------
-
-
 library techmap;
 use techmap.gencomp.all;
 
+library ieee;
+use ieee.std_logic_1164.all;
+
+library rvex;
+use rvex.common_pkg.all;
+use rvex.core_pkg.all;
+use rvex.cache_pkg.all;
+use rvex.rvsys_grlib_pkg.all;
+
 package config is
--- Technology and synthesis options
+  -- Technology and synthesis options.
   constant CFG_FABTECH : integer := virtex6;
   constant CFG_MEMTECH : integer := virtex6;
   constant CFG_PADTECH : integer := virtex6;
   constant CFG_NOASYNC : integer := 0;
   constant CFG_SCAN : integer := 0;
--- LEON3 processor core
-  constant CFG_LEON3 : integer := 1;
-  constant CFG_NCPU : integer := (1);
-  constant CFG_NWIN : integer := (8);
-  constant CFG_V8 : integer := 16#32# + 4*0;
-  constant CFG_MAC : integer := 0;
-  constant CFG_BP : integer := 1;
-  constant CFG_SVT : integer := 1;
-  constant CFG_RSTADDR : integer := 16#00000#;
-  constant CFG_LDDEL : integer := (1);
-  constant CFG_NOTAG : integer := 0;
-  constant CFG_NWP : integer := (2);
-  constant CFG_PWD : integer := 1*2;
-  constant CFG_FPU : integer := 0 + 16*0 + 32*0;
-  constant CFG_GRFPUSH : integer := 0;
-  constant CFG_ICEN : integer := 1;
-  constant CFG_ISETS : integer := 2;
-  constant CFG_ISETSZ : integer := 8;
-  constant CFG_ILINE : integer := 8;
-  constant CFG_IREPL : integer := 0;
-  constant CFG_ILOCK : integer := 0;
-  constant CFG_ILRAMEN : integer := 0;
-  constant CFG_ILRAMADDR: integer := 16#8E#;
-  constant CFG_ILRAMSZ : integer := 1;
-  constant CFG_DCEN : integer := 1;
-  constant CFG_DSETS : integer := 2;
-  constant CFG_DSETSZ : integer := 4;
-  constant CFG_DLINE : integer := 4;
-  constant CFG_DREPL : integer := 0;
-  constant CFG_DLOCK : integer := 0;
-  constant CFG_DSNOOP : integer := 1*2 + 4*1;
-  constant CFG_DFIXED : integer := 16#0#;
-  constant CFG_DLRAMEN : integer := 0;
-  constant CFG_DLRAMADDR: integer := 16#8F#;
-  constant CFG_DLRAMSZ : integer := 1;
-  constant CFG_MMUEN : integer := 1;
-  constant CFG_ITLBNUM : integer := 8;
-  constant CFG_DTLBNUM : integer := 2;
-  constant CFG_TLB_TYPE : integer := 1 + 0*2;
-  constant CFG_TLB_REP : integer := 1;
-  constant CFG_MMU_PAGE : integer := 0;
-  constant CFG_DSU : integer := 1;
-  constant CFG_ITBSZ : integer := 4;
-  constant CFG_ATBSZ : integer := 4;
-  constant CFG_LEON3FT_EN : integer := 0;
-  constant CFG_IUFT_EN : integer := 0;
-  constant CFG_FPUFT_EN : integer := 0;
-  constant CFG_RF_ERRINJ : integer := 0;
-  constant CFG_CACHE_FT_EN : integer := 0;
-  constant CFG_CACHE_ERRINJ : integer := 0;
-  constant CFG_LEON3_NETLIST: integer := 0;
-  constant CFG_DISAS : integer := 0 + 0;
-  constant CFG_PCLOW : integer := 2;
--- AMBA settings
-  constant CFG_DEFMST : integer := (0);
-  constant CFG_RROBIN : integer := 1;
-  constant CFG_SPLIT : integer := 1;
+  
+  -- r-VEX processor core configuration.
+  constant CFG_NRVEX : integer := 2;
+  constant CFG_RVEX_CFG : rvex_grlib_generic_config_array(0 to CFG_NRVEX-1) := (
+    
+    -- Core 0 configuration.
+    0 => rvex_grlib_cfg(
+      core => rvex_cfg(
+        numLanesLog2          => 3,
+        numLaneGroupsLog2     => 0,
+        numContextsLog2       => 0,
+        bundleAlignLog2       => 1,
+        multiplierLanes       => 2#00000011#,
+        memLaneRevIndex       => 7,
+        numBreakpoints        => 0,
+        forwarding            => 1,
+        limmhFromPreviousPair => 0,
+        resetVectors          => (
+          0 => X"00000000",
+          others => X"00000000"
+        ),
+        traceEnable           => 0,
+        perfCountSize         => 4,
+        cachePerfCountEnable  => 1
+      ),
+      core_valid => true,
+      cache => cache_cfg(
+        instrCacheLinesLog2   => 6,
+        dataCacheLinesLog2    => 9
+      ),
+      cache_valid => true
+    ),
+    
+    -- Core 1 configuration.
+    1 => rvex_grlib_cfg(
+      core => rvex_cfg(
+        numLanesLog2          => 2,
+        numLaneGroupsLog2     => 0,
+        numContextsLog2       => 0,
+        bundleAlignLog2       => 1,
+        multiplierLanes       => 2#0001#,
+        memLaneRevIndex       => 3,
+        numBreakpoints        => 0,
+        forwarding            => 1,
+        limmhFromPreviousPair => 0,
+        resetVectors          => (
+          0 => X"02000000",
+          others => X"00000000"
+        ),
+        traceEnable           => 0,
+        perfCountSize         => 4,
+        cachePerfCountEnable  => 1
+      ),
+      core_valid => true,
+      cache => cache_cfg(
+        instrCacheLinesLog2   => 7,
+        dataCacheLinesLog2    => 9
+      ),
+      cache_valid => true
+    )
+    
+  );
+  
+  -- Total number of processors.
+  constant CFG_NLG : integer := rvex_grlib_num_lane_groups(CFG_RVEX_CFG);
+  constant CFG_NCTXT : integer := rvex_grlib_num_contexts(CFG_RVEX_CFG);
+  
+  -- AMBA settings.
   constant CFG_FPNPEN : integer := 0;
   constant CFG_AHBIO : integer := 16#FFF#;
   constant CFG_APBADDR : integer := 16#800#;
@@ -84,84 +93,14 @@ package config is
   constant CFG_AHB_MONERR : integer := 0;
   constant CFG_AHB_MONWAR : integer := 0;
   constant CFG_AHB_DTRACE : integer := 0;
--- DSU UART
-  constant CFG_AHB_UART : integer := 0;
--- JTAG based DSU interface
-  constant CFG_AHB_JTAG : integer := 1;
--- Ethernet DSU
-  constant CFG_DSU_ETH : integer := 1 + 0 + 0;
-  constant CFG_ETH_BUF : integer := 16;
-  constant CFG_ETH_IPM : integer := 16#C0A8#;
-  constant CFG_ETH_IPL : integer := 16#0033#;
-  constant CFG_ETH_ENM : integer := 16#020789#;
-  constant CFG_ETH_ENL : integer := 16#000123#;
--- LEON2 memory controller
-  constant CFG_MCTRL_LEON2 : integer := 1;
-  constant CFG_MCTRL_RAM8BIT : integer := 1;
-  constant CFG_MCTRL_RAM16BIT : integer := 1;
-  constant CFG_MCTRL_5CS : integer := 0;
-  constant CFG_MCTRL_SDEN : integer := 0;
-  constant CFG_MCTRL_SEPBUS : integer := 0;
-  constant CFG_MCTRL_INVCLK : integer := 0;
-  constant CFG_MCTRL_SD64 : integer := 0;
-  constant CFG_MCTRL_PAGE : integer := 0 + 0;
--- AHB ROM
-  constant CFG_AHBROMEN : integer := 0;
-  constant CFG_AHBROPIP : integer := 0;
-  constant CFG_AHBRODDR : integer := 16#000#;
-  constant CFG_ROMADDR : integer := 16#000#;
-  constant CFG_ROMMASK : integer := 16#E00# + 16#000#;
--- AHB RAM
-  constant CFG_AHBRAMEN : integer := 0;
-  constant CFG_AHBRSZ : integer := 1;
-  constant CFG_AHBRADDR : integer := 16#A00#;
-  constant CFG_AHBRPIPE : integer := 0;
--- Gaisler Ethernet core
-  constant CFG_GRETH : integer := 1;
-  constant CFG_GRETH1G : integer := 0;
-  constant CFG_ETH_FIFO : integer := 16;
-  constant CFG_GRETH_FT : integer := 0;
-  constant CFG_GRETH_EDCLFT : integer := 0;
--- UART 1
-  constant CFG_UART1_ENABLE : integer := 1;
-  constant CFG_UART1_FIFO : integer := 8;
--- LEON3 interrupt controller
-  constant CFG_IRQ3_ENABLE : integer := 1;
-  constant CFG_IRQ3_NSEC : integer := 0;
--- Modular timer
-  constant CFG_GPT_ENABLE : integer := 1;
-  constant CFG_GPT_NTIM : integer := (2);
-  constant CFG_GPT_SW : integer := (16);
-  constant CFG_GPT_TW : integer := (32);
-  constant CFG_GPT_IRQ : integer := (8);
-  constant CFG_GPT_SEPIRQ : integer := 1;
-  constant CFG_GPT_WDOGEN : integer := 0;
-  constant CFG_GPT_WDOG : integer := 16#0#;
--- GPIO port
-  constant CFG_GRGPIO_ENABLE : integer := 1;
-  constant CFG_GRGPIO_IMASK : integer := 16#0000#;
-  constant CFG_GRGPIO_WIDTH : integer := (8);
--- I2C master
-  constant CFG_I2C_ENABLE : integer := 1;
-
--- VGA and PS2/ interface
-  constant CFG_KBD_ENABLE : integer := 0;
-  constant CFG_VGA_ENABLE : integer := 0;
-  constant CFG_SVGA_ENABLE : integer := 1;
-
--- AMBA System ACE Interface Controller
-  constant CFG_GRACECTRL : integer := 1;
-
--- PCIEXP interface
- constant CFG_PCIEXP : integer := 0;
- constant CFG_PCIE_TYPE : integer := 0;
- constant CFG_PCIE_SIM_MAS : integer := 0;
- constant CFG_PCIEXPVID : integer := 16#0#;
- constant CFG_PCIEXPDID : integer := 16#0#;
-  constant CFG_NO_OF_LANES : integer := 1;
--- GRLIB debugging
-  constant CFG_DUART : integer := 0;
--- Xilinx MIG DDR2 controller
+  
+  -- Xilinx MIG DDR2 controller.
   constant CFG_MIG_DDR2 : integer := 1;
-  constant CFG_MIG_CLK4 : integer := 16;
+  --constant CFG_MIG_CLK4 : integer := 30; -- 40 MHz     (5.0ns sync with 200MHz DDR)
+  --constant CFG_MIG_CLK4 : integer := 32; -- 37.5 MHz   (1.6ns sync with 200MHz DDR)
+  --constant CFG_MIG_CLK4 : integer := 33; -- 36.36 MHz  (2.5ns sync with 200MHz DDR)
+  --constant CFG_MIG_CLK4 : integer := 36; -- 33.33 MHz  (5.0ns sync with 200MHz DDR)
+  --constant CFG_MIG_CLK4 : integer := 40; -- 30 MHz     (1.6ns sync with 200MHz DDR)
+    constant CFG_MIG_CLK4 : integer := 60; -- 20 MHz     (5.0ns sync with 200MHz DDR)
+  
 end;
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/gracectrl.vhd work/gracectrl.vhd
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/gracectrl.vhd	1970-01-01 01:00:00.000000000 +0100
+++ work/gracectrl.vhd	2019-12-29 15:59:50.112753943 +0100
@@ -0,0 +1,421 @@
+------------------------------------------------------------------------------
+--  This file is a part of the GRLIB VHDL IP LIBRARY
+--  Copyright (C) 2003 - 2008, Gaisler Research
+--  Copyright (C) 2008 - 2014, Aeroflex Gaisler
+--
+--  This program is free software; you can redistribute it and/or modify
+--  it under the terms of the GNU General Public License as published by
+--  the Free Software Foundation; either version 2 of the License, or
+--  (at your option) any later version.
+--
+--  This program is distributed in the hope that it will be useful,
+--  but WITHOUT ANY WARRANTY; without even the implied warranty of
+--  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+--  GNU General Public License for more details.
+--
+--  You should have received a copy of the GNU General Public License
+--  along with this program; if not, write to the Free Software
+--  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA 
+-------------------------------------------------------------------------------
+-- Entity:      gracectrl
+-- File:        gracectrl.vhd
+-- Author:      Jan Andersson - Gaisler Research AB
+-- Contact:     support@gaisler.com
+-- Description: Provides a GRLIB AMBA AHB slave interface to Xilinx System ACE
+-------------------------------------------------------------------------------
+
+-- NOTE: this gracectrl is modified to work with 32-bit accesses, as the r-VEX
+-- bus bridge cannot do 16-bit or 8-bit accesses.
+
+library ieee;
+use ieee.std_logic_1164.all;
+
+library grlib, gaisler;
+use grlib.amba.all;
+use grlib.devices.all;
+use grlib.stdlib.all;
+use gaisler.misc.all;
+
+entity gracectrl is
+  generic (
+    hindex  : integer := 0;               -- AHB slave index
+    hirq    : integer := 0;               -- Interrupt line
+    haddr   : integer := 16#000#;         -- Base address
+    hmask   : integer := 16#fff#;         -- Area mask
+    split   : integer range 0 to 1 := 0;  -- Enable AMBA SPLIT support
+    swap    : integer range 0 to 1 := 0;
+    oepol   : integer range 0 to 1 := 0;  -- Output enable polarity
+    mode    : integer range 0 to 2 := 0   -- 0: 16-bit mode only
+                                          -- 1: 8-bit mode only
+                                          -- 2: 8-bit, emulate 16-bit 
+    );
+  port (
+    rstn    : in  std_ulogic;
+    clk     : in  std_ulogic;             -- System (AMBA) clock
+    clkace  : in  std_ulogic;             -- System ACE clock
+    ahbsi   : in  ahb_slv_in_type;
+    ahbso   : out ahb_slv_out_type;
+    acei    : in  gracectrl_in_type;
+    aceo    : out gracectrl_out_type
+  );  
+end gracectrl;
+
+architecture rtl of gracectrl is
+
+  -----------------------------------------------------------------------------
+  -- Constants
+  -----------------------------------------------------------------------------
+  constant REVISION : amba_version_type := 0;
+
+  constant HCONFIG : ahb_config_type := (
+    0 => ahb_device_reg(VENDOR_GAISLER, GAISLER_GRACECTRL, 0, REVISION, hirq),
+--    1 => conv_std_logic_vector(swap*4 + mode, 32),
+    4 => ahb_iobar(haddr, hmask), others => zero32);
+
+  constant OUTPUT : std_ulogic := conv_std_logic(oepol = 1);
+  constant INPUT  : std_ulogic := not conv_std_logic(oepol = 1);
+
+  constant ACEDW : integer := 16-8*(mode mod 2);
+  
+  -----------------------------------------------------------------------------
+  -- Functions
+  -----------------------------------------------------------------------------
+  -- purpose: swaps a hword if 'swap' is non-zero and mode is zero,
+  --          otherwise just propagate data
+  function condhswap (d : std_logic_vector)
+    return std_logic_vector is
+    variable dx : std_logic_vector(15 downto 0);
+  begin  -- hswap
+    dx(ACEDW-1 downto 0) := d;
+    if swap /= 0 and mode = 0 then
+      return dx(7 downto 0) & dx(15 downto 8);
+    end if;
+    return dx;
+  end condhswap;
+
+  -----------------------------------------------------------------------------
+  -- Types
+  -----------------------------------------------------------------------------
+
+  type sys_sync_type is record
+     accdone   : std_logic_vector(1 downto 0);
+     irq       : std_logic_vector(2 downto 0);
+  end record;
+  
+  type sys_reg_type is record
+     acc       : std_ulogic;     -- Perform access
+     active    : std_ulogic;     -- Access active
+     sync      : sys_sync_type;
+     -- AHB
+     insplit   : std_ulogic;     -- SPLIT response issued
+     unsplit   : std_ulogic;     -- SPLIT complete not issued
+     irq       : std_ulogic;     -- Interrupt request
+     hwrite    : std_ulogic;
+     hsel      : std_ulogic;
+     hmbsel    : std_logic_vector(0 to 1);
+     haddr     : std_logic_vector(8 downto 0);
+     hready    : std_ulogic;
+     wdata     : std_logic_vector(ACEDW-1 downto 0);
+     hresp     : std_logic_vector(1 downto 0);
+     splmst    : std_logic_vector(log2(NAHBMST)-1 downto 0);   -- SPLIT:ed master
+     hsplit    : std_logic_vector(NAHBMST-1 downto 0);  -- Other SPLIT:ed masters
+     ahbcancel : std_ulogic;     -- Locked access cancels ongoing SPLIT
+                                 -- response
+  end record;
+
+
+  type ace_state_type is (idle, en, rd, done);
+
+  type ace_sync_type is record
+     acc     : std_logic_vector(1 downto 0);
+     rstn    : std_logic_vector(1 downto 0);
+     hwrite  : std_logic_vector(1 downto 0);
+     dummy   : std_logic_vector(1 downto 0);
+  end record;
+  
+  type ace_reg_type is record
+     state     : ace_state_type;
+     sync      : ace_sync_type;
+     accdone   : std_ulogic;
+     rdata     : std_logic_vector(ACEDW-1 downto 0);
+     edone     : std_ulogic;
+     aceo      : gracectrl_out_type;
+  end record;
+    
+  -----------------------------------------------------------------------------
+  -- Signals
+  -----------------------------------------------------------------------------
+  signal r, rin : sys_reg_type;
+  signal s, sin : ace_reg_type;
+    
+begin  -- rtl
+
+  -----------------------------------------------------------------------------
+  -- System clock domain
+  -----------------------------------------------------------------------------
+  combsys: process (r, s, rstn, ahbsi, acei.irq)
+    variable v       : sys_reg_type;
+    variable irq     : std_logic_vector((NAHBIRQ-1) downto 0);
+    variable hsplit  : std_logic_vector(NAHBMST-1 downto 0);
+    variable hwdata  : std_logic_vector(31 downto 0);
+  begin  -- process comb
+    v := r; v.irq := '0'; irq := (others => '0'); irq(hirq) := r.irq;
+    v.hresp := HRESP_OKAY; v.hready := '1'; hsplit := (others => '0');
+    hwdata := ahbreadword(ahbsi.hwdata, r.haddr(4 downto 2)); 
+    
+    -- Sync
+    v.sync.accdone := r.sync.accdone(0) & s.accdone;
+    v.sync.irq     := r.sync.irq(1 downto 0) & acei.irq;
+    
+    -- AHB communication
+    if ahbsi.hready = '1' then
+      if (ahbsi.hsel(hindex) and ahbsi.htrans(1)) = '1' then
+        v.hmbsel := ahbsi.hmbsel(r.hmbsel'range);
+        if split = 0 or (not (r.active or r.acc) or ahbsi.hmastlock) = '1' then
+          v.hready := '0';
+          v.hwrite := ahbsi.hwrite;
+          v.haddr := ahbsi.haddr(8 downto 0);
+          v.hsel := '1';
+          if r.insplit = '0' then
+            v.acc := '1';
+          end if;
+          if split /= 0 then
+            if ahbsi.hmastlock = '0' then
+              v.hresp := HRESP_SPLIT;
+              v.splmst := ahbsi.hmaster;
+              v.unsplit := '1';
+            else
+              v.ahbcancel := r.insplit;
+            end if;
+            v.insplit := not ahbsi.hmastlock;
+          end if;
+        else
+          -- Core is busy, transfer is not locked respond with SPLIT
+          v.hready := '0';
+          if split /= 0 then
+            v.hresp := HRESP_SPLIT;
+            v.hsplit(conv_integer(ahbsi.hmaster)) := '1';
+          end if;
+        end if;
+      else
+        v.hsel := '0';
+      end if;
+    end if;
+
+    if (r.hready = '0') then
+      if (r.hresp = HRESP_OKAY) then v.hready := '0';
+      else v.hresp := r.hresp; end if;
+    end if;    
+
+    if r.acc = '1' then
+      -- Propagate data
+      if r.active = '0' then
+        if mode /= 1 then
+          if r.haddr(1) = '0' then v.wdata := hwdata(ACEDW+15 downto 16);
+          else v.wdata := hwdata(ACEDW-1 downto 0); end if;
+        else
+          case r.haddr(1 downto 0) is
+            when "00" => v.wdata(7 downto 0) := hwdata(31 downto 24);
+            when "01" => v.wdata(7 downto 0) := hwdata(23 downto 16);
+            when "10" => v.wdata(7 downto 0) := hwdata(15 downto 8);
+            when others => v.wdata(7 downto 0) := hwdata(7 downto 0);
+          end case;
+        end if;
+        if mode = 2 then
+          -- Override writes to busmode register
+          if r.haddr(6 downto 1) = zero32(6 downto 1) then
+            v.wdata := (others => '0');  -- Byte
+          end if;
+        end if;
+      end if;
+      -- Remove access signal when access is done
+      if r.sync.accdone(1) = '1' then
+        v.acc := '0';
+      end if;
+      v.active := '1';
+    end if;
+
+    -- AMBA response when access is complete
+    if r.acc = '0' and r.sync.accdone(1) = '0' and r.active = '1' then
+      if split /= 0 and r.unsplit = '1' then
+        hsplit(conv_integer(r.splmst)) := '1';
+        v.unsplit := '0';
+      end if;
+      if ((split = 0 or v.ahbcancel = '0') and
+          (split = 0 or ahbsi.hmaster = r.splmst or r.insplit = '0') and
+          (((ahbsi.hsel(hindex) and ahbsi.hready and ahbsi.htrans(1)) = '1') or
+           ((split = 0 or r.insplit = '0') and r.hready = '0' and r.hresp = HRESP_OKAY))) then
+        v.hresp := HRESP_OKAY;
+        if split /= 0 then
+          v.insplit := '0';
+          v.hsplit := r.hsplit;
+        end if;
+        v.hready := '1';
+        v.hsel := '0';
+        v.active := '0';
+      elsif split /= 0 and v.ahbcancel = '1' then
+        v.acc := '1';
+        v.ahbcancel := '0';
+      end if;
+    end if;
+
+    -- Interrupt request, not filtered, pulsed
+    if (not r.sync.irq(2) and r.sync.irq(1)) = '1' then
+      v.irq := '1';
+    end if;
+    
+    -- Reset
+    if rstn = '0' then
+      v.acc        := '0';
+      v.active     := '0';
+      --
+      v.insplit    := '0';
+      v.unsplit    := '0';
+      v.hready     := '1';
+      v.hwrite     := '0';
+      v.hsel       := '0';
+      v.hmbsel     := (others => '0');
+      v.ahbcancel  := '0';
+    end if;
+    if split = 0 then
+      v.insplit   := '0';
+      v.unsplit   := '0';
+      v.splmst    := (others => '0');
+      v.hsplit    := (others => '0');
+      v.ahbcancel := '0';
+    end if;
+
+    -- Update registers
+    rin <= v;
+
+    -- AHB slave output
+    ahbso.hready  <= r.hready;
+    ahbso.hresp   <= r.hresp;
+    ahbso.hrdata  <= ahbdrivedata(s.rdata); -- Bad, but does not toggle much
+    ahbso.hconfig <= HCONFIG;
+    ahbso.hirq    <= irq;
+    ahbso.hindex  <= hindex;
+    ahbso.hsplit  <= hsplit;
+    
+  end process combsys;
+  
+  regsys: process (clk)
+  begin  -- process reg
+    if rising_edge(clk) then
+      r <= rin;
+    end if;
+  end process regsys;
+
+  -----------------------------------------------------------------------------
+  -- System ACE clock domain
+  -----------------------------------------------------------------------------
+  combace: process (r, s, rstn, acei)
+    variable v       : ace_reg_type;
+  begin  -- process comb
+    v := s;
+    
+    -- Synchronize inputs
+    v.sync.acc := s.sync.acc(0) & r.acc;
+    v.sync.rstn := s.sync.rstn(0) & rstn;
+    v.sync.hwrite := s.sync.hwrite(0) & r.hwrite;
+    if mode = 2 then
+      -- Fake reads from BUSMODE register?
+      v.sync.dummy := s.sync.dummy(0) & not orv(r.haddr(8 downto 3));
+    else
+      v.sync.dummy := (others => '0');
+    end if;
+    
+    case s.state is
+      when idle =>
+        v.aceo.addr := r.haddr(8 downto 2);
+        if mode = 2 then v.aceo.do(7 downto 0) := r.wdata(7 downto 0);
+        else v.aceo.do(r.wdata'range) := condhswap(r.wdata); end if;
+        if s.sync.acc(1) = '1' then
+          v.aceo.cen := '0';
+          v.aceo.doen := INPUT xor r.hwrite;
+          v.state := en;
+        end if;
+        if mode = 2 then v.edone := '0'; end if;
+        
+      when en =>
+        v.aceo.wen := not r.hwrite;
+        if s.sync.hwrite(1) = '1' then
+          v.state := done;
+        else
+          v.state := rd;
+        end if;
+
+      when rd => 
+        v.aceo.oen := '0';
+        v.state := done;
+        
+      when done =>
+        v.aceo.oen := '1';
+        v.aceo.wen := '1';
+        if mode = 2 and s.edone = '0' then
+          -- Keep 16-bit address map
+          v.aceo.addr(0) := '1';
+          v.aceo.do(7 downto 0) := r.wdata(ACEDW-1 downto ACEDW-8);
+          v.rdata(7 downto 0) := acei.di(7 downto 0);
+          v.edone := '1';
+          v.state := en;
+        else
+          v.aceo.cen := '1';
+          if s.accdone = '0' then
+            if mode = 2 then
+              v.rdata(ACEDW-1 downto ACEDW-8) := acei.di(7 downto 0);
+              if s.sync.dummy(1) = '1' then -- Fake read
+                v.rdata := (others => '0'); v.rdata(0) := '1';
+              end if;
+            else
+              v.rdata := condhswap(acei.di)(s.rdata'range);
+            end if;
+            v.accdone := '1';
+          else
+            v.aceo.doen := INPUT;
+          end if;
+          if s.sync.acc(1) = '0' then
+            v.state := idle;
+            v.accdone := '0';
+          end if;
+        end if;
+    end case;
+
+    -- Reset
+    if s.sync.rstn(1) = '0' then
+      v.state     := idle;
+      v.accdone   := '0';
+      v.aceo.cen  := '1';
+      v.aceo.wen  := '1';
+      v.aceo.oen  := '1';
+      v.aceo.doen := INPUT;
+    end if;
+    if mode = 1 then v.aceo.do(15 downto 8) := (others => '0'); end if;
+    if mode /= 2 then v.edone := '0'; end if;
+    
+    -- Update registers
+    sin <= v;
+
+    -- Assign outputs to System ACE
+    aceo <= s.aceo;
+    
+  end process combace;
+    
+  regace: process (clkace)
+  begin  -- process reg
+    if rising_edge(clkace) then
+      s <= sin;
+    end if;
+  end process regace;
+  
+  -- Boot message
+  -- pragma translate_off
+  bootmsg : report_version 
+    generic map (
+      "gracectrl" & tost(hindex) & ": System ACE I/F Controller, rev " &
+      tost(REVISION) & ", irq " & tost(hirq));
+  -- pragma translate_on
+
+end rtl;
+
+
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/grlib_config.vhd work/grlib_config.vhd
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/grlib_config.vhd	2014-04-16 16:51:31.000000000 +0200
+++ work/grlib_config.vhd	2019-12-29 15:59:50.112753943 +0100
@@ -38,7 +38,7 @@ package config is
 -- The value here sets the width of the AMBA AHB data vectors for all
 -- cores in the library.
 --
-constant CFG_AHBDW     : integer := 64;
+constant CFG_AHBDW     : integer := 128;
 
 
 -- CORE_ACDM - Enable AMBA Compliant Data Muxing in cores
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/grlib_mig/mig39.prj work/grlib_mig/mig39.prj
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/grlib_mig/mig39.prj	2014-04-16 16:50:08.000000000 +0200
+++ work/grlib_mig/mig39.prj	2019-12-29 15:59:50.112753943 +0100
@@ -11,14 +11,14 @@
     <IODelayHighPerformanceMode>HIGH</IODelayHighPerformanceMode>
     <InternalVref>0</InternalVref>
     <Controller number="0" >
-        <MemoryDevice>DDR3_SDRAM/SODIMMs/MT4JSF6464HY-1G1</MemoryDevice>
+        <MemoryDevice>DDR3_SDRAM/SODIMMs/MT4JSF12864HZ-1G4</MemoryDevice>
         <TimePeriod>2500</TimePeriod>
         <DataWidth>64</DataWidth>
         <DeepMemory>1</DeepMemory>
         <DataMask>1</DataMask>
         <CustomPart>FALSE</CustomPart>
         <NewPartName></NewPartName>
-        <RowAddress>13</RowAddress>
+        <RowAddress>14</RowAddress>
         <ColAddress>10</ColAddress>
         <BankAddress>3</BankAddress>
         <MasterBanks>25</MasterBanks>
@@ -47,6 +47,7 @@
             <Pin SignalName="ddr3_addr[10]" PINNumber="M16" SignalGroup="Address" Bank="36" />
             <Pin SignalName="ddr3_addr[11]" PINNumber="M15" SignalGroup="Address" Bank="36" />
             <Pin SignalName="ddr3_addr[12]" PINNumber="H15" SignalGroup="Address" Bank="36" />
+            <Pin SignalName="ddr3_addr[13]" PINNumber="J15" SignalGroup="Address" Bank="36" />
             <Pin SignalName="ddr3_addr[1]" PINNumber="A16" SignalGroup="Address" Bank="36" />
             <Pin SignalName="ddr3_addr[2]" PINNumber="B16" SignalGroup="Address" Bank="36" />
             <Pin SignalName="ddr3_addr[3]" PINNumber="E16" SignalGroup="Address" Bank="36" />
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3mp_mig39.ucf work/leon3mp_mig39.ucf
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3mp_mig39.ucf	2014-04-16 16:50:08.000000000 +0200
+++ work/leon3mp_mig39.ucf	2019-12-29 15:59:50.112753943 +0100
@@ -1,160 +1,256 @@
-
-NET "clk_ref_p" TNM_NET = TNM_clk_ref;
-TIMESPEC "TS_clk_ref" = PERIOD "TNM_clk_ref" 5 ns ;
-
-NET "reset" IOSTANDARD = SSTL15;
-NET "reset" LOC = "H10";
-NET "errorn" LOC = "AD24";
-
-NET "address(0)"                      LOC = "AL8";    ## 29 on U4, A1 on U27
-NET "address(1)"                      LOC = "AK8";    ## 25 on U4, B1 on U27
-NET "address(2)"                      LOC = "AC9";    ## 24 on U4, C1 on U27
-NET "address(3)"                      LOC = "AD10";   ## 23 on U4, D1 on U27
-NET "address(4)"                      LOC = "C8";     ## 22 on U4, D2 on U27
-NET "address(5)"                      LOC = "B8";     ## 21 on U4, A2 on U27
-NET "address(6)"                      LOC = "E9";     ## 20 on U4, C2 on U27
-NET "address(7)"                      LOC = "E8";     ## 19 on U4, A3 on U27
-NET "address(8)"                      LOC = "A8";     ## 8  on U4, B3 on U27
-NET "address(9)"                      LOC = "A9";     ## 7  on U4, C3 on U27
-NET "address(10)"                     LOC = "D9";     ## 6  on U4, D3 on U27
-NET "address(11)"                     LOC = "C9";     ## 5  on U4, C4 on U27
-NET "address(12)"                     LOC = "D10";    ## 4  on U4, A5 on U27
-NET "address(13)"                     LOC = "C10";    ## 3  on U4, B5 on U27
-NET "address(14)"                     LOC = "F10";    ## 2  on U4, C5 on U27
-NET "address(15)"                     LOC = "F9";     ## 1  on U4, D7 on U27
-NET "address(16)"                     LOC = "AH8";    ## 55 on U4, D8 on U27
-NET "address(17)"                     LOC = "AG8";    ## 18 on U4, A7 on U27
-NET "address(18)"                     LOC = "AP9";    ## 17 on U4, B7 on U27
-NET "address(19)"                     LOC = "AN9";    ## 16 on U4, C7 on U27
-NET "address(20)"                     LOC = "AF10";   ## 11 on U4, C8 on U27
-NET "address(21)"                     LOC = "AF9";    ## 10 on U4, A8 on U27
-NET "address(22)"                     LOC = "AL9";    ## 9  on U4, G1 on U27
-NET "address(23)"                     LOC = "AA23";   ## 26 on U4
-NET "data(0)"                      LOC = "AF24";   ## 34 on U4, F2 on U27
-NET "data(1)"                      LOC = "AF25";   ## 36 on U4, E2 on U27
-NET "data(2)"                      LOC = "W24";    ## 39 on U4, G3 on U27
-NET "data(3)"                      LOC = "V24";    ## 41 on U4, E4 on U27
-NET "data(4)"                      LOC = "H24";    ## 47 on U4, E5 on U27
-NET "data(5)"                      LOC = "H25";    ## 49 on U4, G5 on U27
-NET "data(6)"                      LOC = "P24";    ## 51 on U4, G6 on U27
-NET "data(7)"                      LOC = "R24";    ## 53 on U4, H7 on U27
-NET "data(8)"                      LOC = "G23";    ## 35 on U4, E1 on U27
-NET "data(9)"                      LOC = "H23";    ## 37 on U4, E3 on U27
-NET "data(10)"                     LOC = "N24";    ## 40 on U4, F3 on U27
-NET "data(11)"                     LOC = "N23";    ## 42 on U4, F4 on U27
-NET "data(12)"                     LOC = "F23";    ## 48 on U4, F5 on U27
-NET "data(13)"                     LOC = "F24";    ## 50 on U4, H5 on U27
-NET "data(14)"                     LOC = "L24";    ## 52 on U4, G7 on U27
-NET "data(15)"                     LOC = "M23";    ## 54 on U4, E7 on U27
-#NET "FLASH_WAIT"                    LOC = "J26";    ## 56 on U4
-NET "writen"                    LOC = "AF23";   ## 14 on U4, G8 on U27
-NET "oen"                    LOC = "AA24";   ## 32 on U4, F8 on U27
-#NET "FPGA_CCLK"                     LOC = "K8";     ##           F1 on U27
-NET "alatch"                 LOC = "AC23";   ##           H1 on U27
-NET "romsn"                    LOC = "Y24";    ## 30 on U4, B4 on U27 (U10 and switch S2.2 setting select either U4 or U27)
-##
-
-NET "erx_col"                       LOC = "AK13";   ## 114 on U80
-NET "erx_crs"                       LOC = "AL13";   ## 115 on U80
-NET "emdint"                       LOC = "AH14";   ## 32  on U80
-NET "emdc"                       LOC = "AP14";   ## 35  on U80
-NET "emdio"                      LOC = "AN14";   ## 33  on U80
-NET "erstn"                     LOC = "AH13";   ## 36  on U80
-NET "erx_clk"                     LOC = "AP11";   ## 7   on U80
-NET "erx_dv"                LOC = "AM13";   ## 4   on U80
-NET "erxd(0)"                      LOC = "AN13";   ## 3   on U80
-NET "erxd(1)"                      LOC = "AF14";   ## 128 on U80
-NET "erxd(2)"                      LOC = "AE14";   ## 126 on U80
-NET "erxd(3)"                      LOC = "AN12";   ## 125 on U80
-NET "erxd(4)"                      LOC = "AM12";   ## 124 on U80
-NET "erxd(5)"                      LOC = "AD11";   ## 123 on U80
-NET "erxd(6)"                      LOC = "AC12";   ## 121 on U80
-NET "erxd(7)"                      LOC = "AC13";   ## 120 on U80
-NET "erx_er"                      LOC = "AG12";   ## 9   on U80
-NET "etx_clk"                     LOC = "AD12";   ## 10  on U80
-NET "etx_en"                LOC = "AJ10";   ## 16  on U80
-NET "egtx_clk"                LOC = "AH12";   ## 14  on U80
-NET "etxd(0)"                      LOC = "AM11";   ## 18  on U80
-NET "etxd(1)"                      LOC = "AL11";   ## 19  on U80
-NET "etxd(2)"                      LOC = "AG10";   ## 20  on U80
-NET "etxd(3)"                      LOC = "AG11";   ## 24  on U80
-NET "etxd(4)"                      LOC = "AL10";   ## 25  on U80
-NET "etxd(5)"                      LOC = "AM10";   ## 26  on U80
-NET "etxd(6)"                      LOC = "AE11";   ## 28  on U80
-NET "etxd(7)"                      LOC = "AF11";   ## 29  on U80
-NET "etx_er"                      LOC = "AH10";   ## 13  on U80
-
-NET "dsurx"                      LOC = "J24";    ## 24  on U34
-NET "dsutx"                      LOC = "J25";    ## 25  on U34
-
-#NET "GPIO_DIP_SW1"                  LOC = "D22";    ## 1   on SW1 DIP switch (active-high)
-#NET "GPIO_DIP_SW2"                  LOC = "C22";    ## 2   on SW1 DIP switch (active-high)
-#NET "GPIO_DIP_SW3"                  LOC = "L21";    ## 3   on SW1 DIP switch (active-high)
-#NET "GPIO_DIP_SW4"                  LOC = "L20";    ## 4   on SW1 DIP switch (active-high)
-#NET "GPIO_DIP_SW5"                  LOC = "C18";    ## 5   on SW1 DIP switch (active-high)
-NET "dsubre"                  LOC = "B18";    ## 6   on SW1 DIP switch (active-high)
-#NET "GPIO_DIP_SW7"                  LOC = "K22";    ## 7   on SW1 DIP switch (active-high)
-#NET "GPIO_DIP_SW8"                  LOC = "K21";    ## 8   on SW1 DIP switch (active-high)
-##
-
-NET "led(0)"                    LOC = "AC22";   ## 2   on LED DS12, 1 on J62
-NET "led(1)"                    LOC = "AC24";   ## 2   on LED DS11, 2 on J62
-NET "led(2)"                    LOC = "AE22";   ## 2   on LED DS9,  3 on J62
-NET "led(3)"                    LOC = "AE23";   ## 2   on LED DS10, 4 on J62
-NET "led(4)"                    LOC = "AB23";   ## 2   on LED DS15, 5 on J62
-NET "led(5)"                    LOC = "AG23";   ## 2   on LED DS14, 6 on J62
-NET "led(6)"                    LOC = "AE24";   ## 2   on LED DS22, 7 on J62
-#NET "led(7)"                    LOC = "AD24";   ## 2   on LED DS21, 8 on J62
-
-NET "dvi_iic_scl"                   LOC = "AN10";   ## 2   on Q5, 15 on U38
-NET "iic_scl_main"               LOC = "AK9";    ## 2   on Q19
-#NET "IIC_SCL_SFP"                   LOC = "AA34";   ## 2   on Q23
-NET "dvi_iic_sda"                   LOC = "AP10";   ## 2   on Q6, 14 on U38
-NET "iic_sda_main"               LOC = "AE9";    ## 2   on Q20
-#NET "IIC_SDA_SFP"                   LOC = "AA33";   ## 2   on Q21
-
-NET "tft_lcd_data(0)"                        LOC = "AJ19";   ## 63 on U38 (thru series R111 47.5 ohm)
-NET "tft_lcd_data(1)"                        LOC = "AH19";   ## 62 on U38 (thru series R110 47.5 ohm)
-NET "tft_lcd_data(2)"                        LOC = "AM17";   ## 61 on U38 (thru series R109 47.5 ohm)
-NET "tft_lcd_data(3)"                        LOC = "AM16";   ## 60 on U38 (thru series R108 47.5 ohm)
-NET "tft_lcd_data(4)"                        LOC = "AD17";   ## 59 on U38 (thru series R107 47.5 ohm)
-NET "tft_lcd_data(5)"                        LOC = "AE17";   ## 58 on U38 (thru series R106 47.5 ohm)
-NET "tft_lcd_data(6)"                        LOC = "AK18";   ## 55 on U38 (thru series R105 47.5 ohm)
-NET "tft_lcd_data(7)"                        LOC = "AK17";   ## 54 on U38 (thru series R104 47.5 ohm)
-NET "tft_lcd_data(8)"                        LOC = "AE18";   ## 53 on U38 (thru series R103 47.5 ohm)
-NET "tft_lcd_data(9)"                        LOC = "AF18";   ## 52 on U38 (thru series R102 47.5 ohm)
-NET "tft_lcd_data(10)"                       LOC = "AL16";   ## 51 on U38 (thru series R101 47.5 ohm)
-NET "tft_lcd_data(11)"                       LOC = "AK16";   ## 50 on U38 (thru series R100 47.5 ohm)
-NET "tft_lcd_de"                        LOC = "AD16";   ## 2  on U38 (thru series R112 47.5 ohm)
-#NET "DVI_GPIO1_FMC_C2M_PG_LS"       LOC = "K9";     ## 18 on U32 (not wired to U38)
-NET "tft_lcd_hsync"                         LOC = "AN17";   ## 4  on U38 (thru series R113 47.5 ohm)
-NET "tft_lcd_reset_b"                LOC = "AP17";   ## 2  on U32 (DVI_RESET_B pin 13 on U38)
-NET "tft_lcd_vsync"                         LOC = "AD15";   ## 5  on U38 (thru series R114 47.5 ohm)
-NET "tft_lcd_clk_n"                    LOC = "AC17";   ## 56 on U38
-NET "tft_lcd_clk_p"                    LOC = "AC18";   ## 57 on U38
-
-#NET "SYSACE_CFGTDI"                 LOC = "AC8";    ## 81  on U19
-NET "sysace_d(0)"                     LOC = "AM15";   ## 66  on U19
-NET "sysace_d(1)"                     LOC = "AJ17";   ## 65  on U19
-NET "sysace_d(2)"                     LOC = "AJ16";   ## 63  on U19
-NET "sysace_d(3)"                     LOC = "AP16";   ## 62  on U19
-NET "sysace_d(4)"                     LOC = "AG16";   ## 61  on U19
-NET "sysace_d(5)"                     LOC = "AH15";   ## 60  on U19
-NET "sysace_d(6)"                     LOC = "AF16";   ## 59  on U19
-NET "sysace_d(7)"                     LOC = "AN15";   ## 58  on U19
-NET "sysace_mpa(0)"                  LOC = "AC15";   ## 70  on U19
-NET "sysace_mpa(1)"                  LOC = "AP15";   ## 69  on U19
-NET "sysace_mpa(2)"                  LOC = "AG17";   ## 68  on U19
-NET "sysace_mpa(3)"                  LOC = "AH17";   ## 67  on U19
-NET "sysace_mpa(4)"                  LOC = "AG15";   ## 45  on U19
-NET "sysace_mpa(5)"                  LOC = "AF15";   ## 44  on U19
-NET "sysace_mpa(6)"                  LOC = "AK14";   ## 43  on U19
-#NET "SYSACE_MPBRDY"                 LOC = "AJ15";   ## 39  on U19
-NET "sysace_mpce"                   LOC = "AJ14";   ## 42  on U19
-NET "sysace_mpirq"                  LOC = "L9";     ## 41  on U19
-NET "sysace_mpoe"                   LOC = "AL15";   ## 77  on U19
-NET "sysace_mpwe"                   LOC = "AL14";   ## 76  on U19
-NET "clk_33"              LOC = "AE16";   ## 93  on U19
+######################################################################################
+## PCI-express signals (copied from reference project)                              ##
+######################################################################################
+#------------------------
+# Clock and Reset Pinout
+#------------------------
+NET "pcie_dma_block.pcie_dma/pcie_ref_clk" TNM_NET = "SYSCLK" ;
+NET "*/pcie_clocking_i/clk_125" TNM_NET = "CLK_125" ;
+NET "*/TxOutClk_bufg" TNM_NET = "TXOUTCLKBUFG";
+
+TIMESPEC "TS_SYSCLK"  = PERIOD "SYSCLK" 250.00 MHz HIGH 50 % ;
+TIMESPEC "TS_CLK_125" = PERIOD "CLK_125" TS_SYSCLK*0.5 HIGH 50 %; # PRIORITY 100 ;
+TIMESPEC "TS_TXOUTCLKBUFG"  = PERIOD "TXOUTCLKBUFG" 250 MHz HIGH 50 %; # PRIORITY 100 ;
+
+NET "sys_reset_n" TIG;
+PIN "*/trn_reset_n_int_i.CLR" TIG ;
+PIN "*/trn_reset_n_i.CLR" TIG ;
+PIN "*/pcie_clocking_i/mmcm_adv_i.RST" TIG ;
+
+#TIMESPEC "TS_TRNLNKUPN" = FROM FFS(*) TO FFS(trn_lnk_up_n_int_i) 4 ns;
+#TIMESPEC "TS_RESETN" = FROM FFS(*) TO FFS(trn_reset_n_i) 4 ns;
+TIMESPEC "TS_RESETN" = FROM FFS(*) TO FFS("pcie_dma_block.pcie_dma/user_reset") 8 ns;
+
+
+#-----------------------------------
+# PCIe Transceiver & Core Locations
+#-----------------------------------
+
+# PCIe Block Placement
+INST "*/pcie_2_0_i/pcie_block_i" LOC = PCIE_X0Y1;
+
+INST "*/pcie_2_0_i/pcie_gt_i/gtx_v6_i/no_of_lanes.GTXD[0].GTX" LOC = GTXE1_X0Y15;
+INST "*/pcie_2_0_i/pcie_gt_i/gtx_v6_i/no_of_lanes.GTXD[1].GTX" LOC = GTXE1_X0Y14;
+INST "*/pcie_2_0_i/pcie_gt_i/gtx_v6_i/no_of_lanes.GTXD[2].GTX" LOC = GTXE1_X0Y13;
+INST "*/pcie_2_0_i/pcie_gt_i/gtx_v6_i/no_of_lanes.GTXD[3].GTX" LOC = GTXE1_X0Y12;
+
+#------------------------
+# Clock and Reset Pinout
+#------------------------
+
+NET  sys_reset_n           LOC  = AE13 | IOSTANDARD = LVCMOS25 | NODELAY;
+
+# 250 MHz Reference Clock
+INST "pcie_dma_block.pcie_dma/pcie_refclk_ibuf" LOC = IBUFDS_GTXE1_X0Y4; # Implies pinout
+
+# MMCM Placment. This constraint selects the MMCM Placement
+INST "*/pcie_clocking_i/mmcm_adv_i" LOC = MMCM_ADV_X0Y7;
+
+######################################################################################
+## Other definitions                                                                ##
+######################################################################################
+
+
+NET "clk_ref_p" TNM_NET = TNM_clk_ref;
+TIMESPEC "TS_clk_ref" = PERIOD "TNM_clk_ref" 5 ns ;
+
+NET "reset" IOSTANDARD = SSTL15;
+NET "reset" LOC = "H10";
+#NET "errorn" LOC = "AD24";
+
+NET "address(0)"                      LOC = "AL8";    ## 29 on U4, A1 on U27
+NET "address(1)"                      LOC = "AK8";    ## 25 on U4, B1 on U27
+NET "address(2)"                      LOC = "AC9";    ## 24 on U4, C1 on U27
+NET "address(3)"                      LOC = "AD10";   ## 23 on U4, D1 on U27
+NET "address(4)"                      LOC = "C8";     ## 22 on U4, D2 on U27
+NET "address(5)"                      LOC = "B8";     ## 21 on U4, A2 on U27
+NET "address(6)"                      LOC = "E9";     ## 20 on U4, C2 on U27
+NET "address(7)"                      LOC = "E8";     ## 19 on U4, A3 on U27
+NET "address(8)"                      LOC = "A8";     ## 8  on U4, B3 on U27
+NET "address(9)"                      LOC = "A9";     ## 7  on U4, C3 on U27
+NET "address(10)"                     LOC = "D9";     ## 6  on U4, D3 on U27
+NET "address(11)"                     LOC = "C9";     ## 5  on U4, C4 on U27
+NET "address(12)"                     LOC = "D10";    ## 4  on U4, A5 on U27
+NET "address(13)"                     LOC = "C10";    ## 3  on U4, B5 on U27
+NET "address(14)"                     LOC = "F10";    ## 2  on U4, C5 on U27
+NET "address(15)"                     LOC = "F9";     ## 1  on U4, D7 on U27
+NET "address(16)"                     LOC = "AH8";    ## 55 on U4, D8 on U27
+NET "address(17)"                     LOC = "AG8";    ## 18 on U4, A7 on U27
+NET "address(18)"                     LOC = "AP9";    ## 17 on U4, B7 on U27
+NET "address(19)"                     LOC = "AN9";    ## 16 on U4, C7 on U27
+NET "address(20)"                     LOC = "AF10";   ## 11 on U4, C8 on U27
+NET "address(21)"                     LOC = "AF9";    ## 10 on U4, A8 on U27
+NET "address(22)"                     LOC = "AL9";    ## 9  on U4, G1 on U27
+NET "address(23)"                     LOC = "AA23";   ## 26 on U4
+NET "data(0)"                      LOC = "AF24";   ## 34 on U4, F2 on U27
+NET "data(1)"                      LOC = "AF25";   ## 36 on U4, E2 on U27
+NET "data(2)"                      LOC = "W24";    ## 39 on U4, G3 on U27
+NET "data(3)"                      LOC = "V24";    ## 41 on U4, E4 on U27
+NET "data(4)"                      LOC = "H24";    ## 47 on U4, E5 on U27
+NET "data(5)"                      LOC = "H25";    ## 49 on U4, G5 on U27
+NET "data(6)"                      LOC = "P24";    ## 51 on U4, G6 on U27
+NET "data(7)"                      LOC = "R24";    ## 53 on U4, H7 on U27
+NET "data(8)"                      LOC = "G23";    ## 35 on U4, E1 on U27
+NET "data(9)"                      LOC = "H23";    ## 37 on U4, E3 on U27
+NET "data(10)"                     LOC = "N24";    ## 40 on U4, F3 on U27
+NET "data(11)"                     LOC = "N23";    ## 42 on U4, F4 on U27
+NET "data(12)"                     LOC = "F23";    ## 48 on U4, F5 on U27
+NET "data(13)"                     LOC = "F24";    ## 50 on U4, H5 on U27
+NET "data(14)"                     LOC = "L24";    ## 52 on U4, G7 on U27
+NET "data(15)"                     LOC = "M23";    ## 54 on U4, E7 on U27
+#NET "FLASH_WAIT"                    LOC = "J26";    ## 56 on U4
+NET "writen"                    LOC = "AF23";   ## 14 on U4, G8 on U27
+NET "oen"                    LOC = "AA24";   ## 32 on U4, F8 on U27
+#NET "FPGA_CCLK"                     LOC = "K8";     ##           F1 on U27
+NET "alatch"                 LOC = "AC23";   ##           H1 on U27
+NET "romsn"                    LOC = "Y24";    ## 30 on U4, B4 on U27 (U10 and switch S2.2 setting select either U4 or U27)
+##
+
+NET "erx_col"                       LOC = "AK13";   ## 114 on U80
+NET "erx_crs"                       LOC = "AL13";   ## 115 on U80
+NET "emdint"                       LOC = "AH14";   ## 32  on U80
+NET "emdc"                       LOC = "AP14";   ## 35  on U80
+NET "emdio"                      LOC = "AN14";   ## 33  on U80
+NET "erstn"                     LOC = "AH13";   ## 36  on U80
+NET "erx_clk"                     LOC = "AP11";   ## 7   on U80
+NET "erx_dv"                LOC = "AM13";   ## 4   on U80
+NET "erxd(0)"                      LOC = "AN13";   ## 3   on U80
+NET "erxd(1)"                      LOC = "AF14";   ## 128 on U80
+NET "erxd(2)"                      LOC = "AE14";   ## 126 on U80
+NET "erxd(3)"                      LOC = "AN12";   ## 125 on U80
+NET "erxd(4)"                      LOC = "AM12";   ## 124 on U80
+NET "erxd(5)"                      LOC = "AD11";   ## 123 on U80
+NET "erxd(6)"                      LOC = "AC12";   ## 121 on U80
+NET "erxd(7)"                      LOC = "AC13";   ## 120 on U80
+NET "erx_er"                      LOC = "AG12";   ## 9   on U80
+NET "etx_clk"                     LOC = "AD12";   ## 10  on U80
+NET "etx_en"                LOC = "AJ10";   ## 16  on U80
+NET "egtx_clk"                LOC = "AH12";   ## 14  on U80
+NET "etxd(0)"                      LOC = "AM11";   ## 18  on U80
+NET "etxd(1)"                      LOC = "AL11";   ## 19  on U80
+NET "etxd(2)"                      LOC = "AG10";   ## 20  on U80
+NET "etxd(3)"                      LOC = "AG11";   ## 24  on U80
+NET "etxd(4)"                      LOC = "AL10";   ## 25  on U80
+NET "etxd(5)"                      LOC = "AM10";   ## 26  on U80
+NET "etxd(6)"                      LOC = "AE11";   ## 28  on U80
+NET "etxd(7)"                      LOC = "AF11";   ## 29  on U80
+NET "etx_er"                      LOC = "AH10";   ## 13  on U80
+
+NET "dsurx"                      LOC = "J24";    ## 24  on U34
+NET "dsutx"                      LOC = "J25";    ## 25  on U34
+
+#NET "GPIO_DIP_SW1"                  LOC = "D22";    ## 1   on SW1 DIP switch (active-high)
+#NET "GPIO_DIP_SW2"                  LOC = "C22";    ## 2   on SW1 DIP switch (active-high)
+#NET "GPIO_DIP_SW3"                  LOC = "L21";    ## 3   on SW1 DIP switch (active-high)
+#NET "GPIO_DIP_SW4"                  LOC = "L20";    ## 4   on SW1 DIP switch (active-high)
+#NET "GPIO_DIP_SW5"                  LOC = "C18";    ## 5   on SW1 DIP switch (active-high)
+NET "dsubre"                  LOC = "B18";    ## 6   on SW1 DIP switch (active-high)
+#NET "GPIO_DIP_SW7"                  LOC = "K22";    ## 7   on SW1 DIP switch (active-high)
+#NET "GPIO_DIP_SW8"                  LOC = "K21";    ## 8   on SW1 DIP switch (active-high)
+##
+
+# LCD display connector abused as GPIO.
+NET "gpio(0)"                    LOC = "T28";   ## RS
+NET "gpio(1)"                    LOC = "AC14";  ## RW
+NET "gpio(2)"                    LOC = "AK12";  ## E
+NET "gpio(3)"                    LOC = "AD14";  ## DB4
+NET "gpio(4)"                    LOC = "AK11";  ## DB5
+NET "gpio(5)"                    LOC = "AJ11";  ## DB6
+NET "gpio(6)"                    LOC = "AE12";  ## DB7
+NET "gpio(*)"                    IOSTANDARD = LVCMOS25;
+
+# LEDs.
+NET "led(0)"                    LOC = "AC22";   ## 1
+NET "led(1)"                    LOC = "AC24";   ## 2
+NET "led(2)"                    LOC = "AE22";   ## 3
+NET "led(3)"                    LOC = "AE23";   ## 4
+NET "led(4)"                    LOC = "AB23";   ## 5
+NET "led(5)"                    LOC = "AG23";   ## 6
+NET "led(6)"                    LOC = "AE24";   ## 7
+NET "led(7)"                    LOC = "AD24";   ## 8
+NET "led(8)"                    LOC = "AP24";   ## C
+NET "led(9)"                    LOC = "AD21";   ## W
+NET "led(10)"                   LOC = "AE21";   ## E
+NET "led(11)"                   LOC = "AH28";   ## S
+NET "led(12)"                   LOC = "AH27";   ## N
+NET "led(*)"                    IOSTANDARD = LVCMOS25;
+
+# GPIO switches.
+NET "dipsw(0)"                   LOC = "D22";   ## 1
+NET "dipsw(1)"                   LOC = "C22";   ## 2
+NET "dipsw(2)"                   LOC = "L21";   ## 3
+NET "dipsw(3)"                   LOC = "L20";   ## 4
+NET "dipsw(4)"                   LOC = "C18";   ## 5
+NET "dipsw(5)"                   LOC = "B18";   ## 6
+NET "dipsw(6)"                   LOC = "K22";   ## 7
+NET "dipsw(7)"                   LOC = "K21";   ## 8
+NET "dipsw(*)"                   IOSTANDARD = LVCMOS15;
+
+# Pushbuttons (except reset).
+NET "pbtn(0)"                    LOC = "G26";   ## C
+NET "pbtn(1)"                    LOC = "H17";   ## W
+NET "pbtn(2)"                    LOC = "G17";   ## E
+NET "pbtn(3)"                    LOC = "A18";   ## S
+NET "pbtn(4)"                    LOC = "A19";   ## N
+NET "pbtn(*)"                    IOSTANDARD = LVCMOS15;
+
+NET "dvi_iic_scl"                   LOC = "AN10";   ## 2   on Q5, 15 on U38
+NET "iic_scl_main"               LOC = "AK9";    ## 2   on Q19
+#NET "IIC_SCL_SFP"                   LOC = "AA34";   ## 2   on Q23
+NET "dvi_iic_sda"                   LOC = "AP10";   ## 2   on Q6, 14 on U38
+NET "iic_sda_main"               LOC = "AE9";    ## 2   on Q20
+#NET "IIC_SDA_SFP"                   LOC = "AA33";   ## 2   on Q21
+
+# PMBUS IIC interface
+NET pmbus_sda LOC=AB10;
+NET pmbus_sda SLEW = SLOW;
+NET pmbus_sda DRIVE = 6;
+NET pmbus_scl LOC=AC10;
+NET pmbus_scl SLEW = SLOW;
+NET pmbus_scl DRIVE = 6;
+
+NET "tft_lcd_data(0)"                        LOC = "AJ19";   ## 63 on U38 (thru series R111 47.5 ohm)
+NET "tft_lcd_data(1)"                        LOC = "AH19";   ## 62 on U38 (thru series R110 47.5 ohm)
+NET "tft_lcd_data(2)"                        LOC = "AM17";   ## 61 on U38 (thru series R109 47.5 ohm)
+NET "tft_lcd_data(3)"                        LOC = "AM16";   ## 60 on U38 (thru series R108 47.5 ohm)
+NET "tft_lcd_data(4)"                        LOC = "AD17";   ## 59 on U38 (thru series R107 47.5 ohm)
+NET "tft_lcd_data(5)"                        LOC = "AE17";   ## 58 on U38 (thru series R106 47.5 ohm)
+NET "tft_lcd_data(6)"                        LOC = "AK18";   ## 55 on U38 (thru series R105 47.5 ohm)
+NET "tft_lcd_data(7)"                        LOC = "AK17";   ## 54 on U38 (thru series R104 47.5 ohm)
+NET "tft_lcd_data(8)"                        LOC = "AE18";   ## 53 on U38 (thru series R103 47.5 ohm)
+NET "tft_lcd_data(9)"                        LOC = "AF18";   ## 52 on U38 (thru series R102 47.5 ohm)
+NET "tft_lcd_data(10)"                       LOC = "AL16";   ## 51 on U38 (thru series R101 47.5 ohm)
+NET "tft_lcd_data(11)"                       LOC = "AK16";   ## 50 on U38 (thru series R100 47.5 ohm)
+NET "tft_lcd_de"                        LOC = "AD16";   ## 2  on U38 (thru series R112 47.5 ohm)
+#NET "DVI_GPIO1_FMC_C2M_PG_LS"       LOC = "K9";     ## 18 on U32 (not wired to U38)
+NET "tft_lcd_hsync"                         LOC = "AN17";   ## 4  on U38 (thru series R113 47.5 ohm)
+NET "tft_lcd_reset_b"                LOC = "AP17";   ## 2  on U32 (DVI_RESET_B pin 13 on U38)
+NET "tft_lcd_vsync"                         LOC = "AD15";   ## 5  on U38 (thru series R114 47.5 ohm)
+NET "tft_lcd_clk_n"                    LOC = "AC17";   ## 56 on U38
+NET "tft_lcd_clk_p"                    LOC = "AC18";   ## 57 on U38
+
+#NET "SYSACE_CFGTDI"                 LOC = "AC8";    ## 81  on U19
+NET "sysace_d(0)"                     LOC = "AM15";   ## 66  on U19
+NET "sysace_d(1)"                     LOC = "AJ17";   ## 65  on U19
+NET "sysace_d(2)"                     LOC = "AJ16";   ## 63  on U19
+NET "sysace_d(3)"                     LOC = "AP16";   ## 62  on U19
+NET "sysace_d(4)"                     LOC = "AG16";   ## 61  on U19
+NET "sysace_d(5)"                     LOC = "AH15";   ## 60  on U19
+NET "sysace_d(6)"                     LOC = "AF16";   ## 59  on U19
+NET "sysace_d(7)"                     LOC = "AN15";   ## 58  on U19
+NET "sysace_mpa(0)"                  LOC = "AC15";   ## 70  on U19
+NET "sysace_mpa(1)"                  LOC = "AP15";   ## 69  on U19
+NET "sysace_mpa(2)"                  LOC = "AG17";   ## 68  on U19
+NET "sysace_mpa(3)"                  LOC = "AH17";   ## 67  on U19
+NET "sysace_mpa(4)"                  LOC = "AG15";   ## 45  on U19
+NET "sysace_mpa(5)"                  LOC = "AF15";   ## 44  on U19
+NET "sysace_mpa(6)"                  LOC = "AK14";   ## 43  on U19
+#NET "SYSACE_MPBRDY"                 LOC = "AJ15";   ## 39  on U19
+NET "sysace_mpce"                   LOC = "AJ14";   ## 42  on U19
+NET "sysace_mpirq"                  LOC = "L9";     ## 41  on U19
+NET "sysace_mpoe"                   LOC = "AL15";   ## 77  on U19
+NET "sysace_mpwe"                   LOC = "AL14";   ## 76  on U19
+NET "clk_33"              LOC = "AE16";   ## 93  on U19
 NET "clk_33" PERIOD = 30.000 ;
 OFFSET = IN : 20.000 : BEFORE clk_33 ;
 OFFSET = OUT : 20.000 : AFTER clk_33 ;
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3mp.ucf work/leon3mp.ucf
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3mp.ucf	2014-04-16 16:50:08.000000000 +0200
+++ work/leon3mp.ucf	2019-12-29 15:59:50.112753943 +0100
@@ -1,544 +1,579 @@
-############################################################################
-## 
-##  Xilinx, Inc. 2006            www.xilinx.com 
-##  Mon Aug 30 10:34:47 2010
-##  Generated by MIG Version 3.6
-##  
-############################################################################
-##  File name :       example_top.ucf
-## 
-##  Details :     Constraints file
-##                    FPGA family:       virtex6
-##                    FPGA:              xc6vlx240t-ff1156
-##                    Speedgrade:        -1
-##                    Design Entry:      VERILOG
-##                    Design:            with Test bench
-##                    No.Of Controllers: 1
-##
-############################################################################ 
-##  Modifications for ML605 with LX240T FPGA
-##  Start with UCF file generated by MIG 3.4 (ISE 12.1 build M.53.d)
-##     
-##  1. Majority of ML605 board specific pin assignments entered via MIG3.4 GUI!
-##     A. Add LOC and IOSTANDARD for LED indicator "heartbeat" 
-##     B. Add LOC and IOSTANDARD for LED indicator "pll_lock" 
-##     C. Comment out "sda" and "scl" signals 
-##     D. ML605 DCI_CASCADE is correct as defined in MIG3.4 GUI.
-##        BANK 26 = left column I/O master; BANK 36 = right column I/O master 
-##  2. Change IOSTANDARD for sys_rst to SSTL15 
-##  3. Board specific clocking definitions
-##     A. Default MIG 3.5 example design assumes 2 clock inputs to design:
-##        1. clk_ref to IDELAY_CTRL element (200 MHz)
-##        2. sys_clk to PLL circuit (SMA inputs)
-##     B. ML605 single clock source, modify constraint file to use 200 MHz 
-##        LVDS clock "clk_ref" input for DDR3 SODIMM design @800 Mbps data rate. 
-##        - Delete sys_clk_p and sys_clk_n inputs (HDL and LOC constraints)
-##        - Comment out sys_clk timing specification
-##        - Modify TS_MC_PHY_INIT_SEL to use value "2.5 ns" in multiplication 
-##  4. Optional: comment out CONFIG_PROHIBIT lines (pins reserved for MIG)
-##     Since this design has LOC'ed I/O don't need to reserve these pins.
-##  5. ML605 MIG3.4 BUFIO pin assignments
-##         BUFIO:0 pin C13 => X2Y137
-##         BUFIO:1 pin L13 => X2Y141
-##         BUFIO:2 pin K14 => X2Y143
-##         BUFIO:3 pin F21 => X1Y179
-##         BUFIO:4 pin B20 => X1Y181
-##         BUFIO:5 pin F25 => X1Y137
-##         BUFIO:6 pin C28 => X1Y141
-##         BUFIO:7 pin D24 => X1Y143
-##  6. ML605 MIG3.4 BUFR pin assignments
-##         BUFR:0 pin M12 => X2Y139
-##         BUFR:1 pin C29 => X1Y139
-##
-############################################################################
-# Timing constraints                                                        #
-############################################################################
-## ML605 comment out the following 2 lines for single 200MHz input clock
-## NET "sys_clk_p" TNM_NET = TNM_sys_clk;
-## TIMESPEC "TS_sys_clk" = PERIOD "TNM_sys_clk" 2.5 ns;
-
-NET "clk_ref_p" TNM_NET = TNM_clk_ref;
-TIMESPEC "TS_clk_ref" = PERIOD "TNM_clk_ref" 5 ns ;
-
-# Constrain BUFR clocks used to synchronize data from IOB to fabric logic
-# Note that ISE cannot infer this from other PERIOD constraints because
-# of the use of OSERDES blocks in the BUFR clock generation path
-NET "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/clk_rsync(?)" TNM_NET = TNM_clk_rsync;
-TIMESPEC "TS_clk_rsync" = PERIOD "TNM_clk_rsync" 5 ns;
-
-# Paths between DQ/DQS ISERDES.Q outputs and CLB flops clocked by falling 
-# edge of BUFR will by design only be used if DYNCLKDIVSEL is asserted for 
-# that particular flop. Mark this path as being a full-cycle, rather than 
-# a half cycle path for timing purposes. NOTE: This constraint forces full-
-# cycle timing to be applied globally for all rising->falling edge paths 
-# in all resynchronizaton clock domains. If the user had modified the logic
-# in the resync clock domain such that other rising->falling edge paths 
-# exist, then constraint below should be modified to utilize pattern 
-# matching to specific affect only the DQ/DQS ISERDES.Q outputs
-TIMEGRP "TG_clk_rsync_rise" = RISING  "TNM_clk_rsync";
-TIMEGRP "TG_clk_rsync_fall" = FALLING "TNM_clk_rsync";
-TIMESPEC "TS_clk_rsync_rise_to_fall" = 
-  FROM "TG_clk_rsync_rise" TO "TG_clk_rsync_fall" "TS_sys_clk" * 2;
-
-# Signal to select between controller and physical layer signals. Four divided by two clock
-# cycles (8 memory clock cycles) are provided by design for the signal to settle down.
-# Used only by the phy modules.
-INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_init/u_ff_phy_init_data_sel" TNM = "TNM_PHY_INIT_SEL";
-TIMESPEC "TS_MC_PHY_INIT_SEL" = FROM "TNM_PHY_INIT_SEL" TO FFS = 10 ns;  ## = "2.5ns * 4" ML605 single clock
-
-disable = reg_sr_o;
-disable = reg_sr_r;
-############################################################################
-########################################################################
-# Controller 0
-# Memory Device: DDR3_SDRAM->SODIMMs->MT4JSF6464HY-1G1
-# Data Width:     64
-# Frequency:      400
-# Time Period:      2500
-# Data Mask:     1
-########################################################################
-
-
-################################################################################
-# I/O STANDARDS
-################################################################################
-
-NET  "ddr3_dq(*)"                               IOSTANDARD = SSTL15_T_DCI;
-NET  "ddr3_addr(*)"                             IOSTANDARD = SSTL15;
-NET  "ddr3_ba(*)"                               IOSTANDARD = SSTL15;
-NET  "ddr3_ras_n"                               IOSTANDARD = SSTL15;
-NET  "ddr3_cas_n"                               IOSTANDARD = SSTL15;
-NET  "ddr3_we_n"                                IOSTANDARD = SSTL15;
-NET  "ddr3_reset_n"                             IOSTANDARD = SSTL15;
-NET  "ddr3_cke(*)"                              IOSTANDARD = SSTL15;
-NET  "ddr3_odt(*)"                              IOSTANDARD = SSTL15;
-NET  "ddr3_cs_n(*)"                             IOSTANDARD = SSTL15;
-NET  "ddr3_dm(*)"                               IOSTANDARD = SSTL15;
-## NET  "sys_clk_p"                                IOSTANDARD = LVDS_25;
-## NET  "sys_clk_n"                                IOSTANDARD = LVDS_25;
-NET  "clk_ref_p"                                IOSTANDARD = LVDS_25;
-NET  "clk_ref_n"                                IOSTANDARD = LVDS_25;
-## NET  "sda"                                      IOSTANDARD = LVCMOS25;
-## NET  "scl"                                      IOSTANDARD = LVCMOS25;
-NET  "reset"                                  IOSTANDARD = SSTL15;      ## ML605 
-#NET  "phy_init_done"                            IOSTANDARD = LVCMOS25;
-NET  "errorn"                                    IOSTANDARD = LVCMOS25;
-NET  "ddr3_dqs_p(*)"                            IOSTANDARD = DIFF_SSTL15_T_DCI;
-NET  "ddr3_dqs_n(*)"                            IOSTANDARD = DIFF_SSTL15_T_DCI;
-NET  "ddr3_ck_p(*)"                             IOSTANDARD = DIFF_SSTL15;
-NET  "ddr3_ck_n(*)"                             IOSTANDARD = DIFF_SSTL15;
-
-################################################################################
-##SAVE attributes to reserve the pins
-################################################################################
-## NET  "sda"                                      S;
-## NET  "scl"                                      S;
-
-###############################################################################
-#DCI_CASCADING
-#Syntax : CONFIG DCI_CASCADE = "<master> <slave1> <slave2> ..";
-###############################################################################
-CONFIG DCI_CASCADE = "26 25";
-CONFIG DCI_CASCADE = "36 35";
-
-
-##################################################################################
-# Location Constraints
-##################################################################################
-NET  "ddr3_dq(0)"                                LOC = "J11" ;          #Bank 35
-NET  "ddr3_dq(1)"                                LOC = "E13" ;          #Bank 35
-NET  "ddr3_dq(2)"                                LOC = "F13" ;          #Bank 35
-NET  "ddr3_dq(3)"                                LOC = "K11" ;          #Bank 35
-NET  "ddr3_dq(4)"                                LOC = "L11" ;          #Bank 35
-NET  "ddr3_dq(5)"                                LOC = "K13" ;          #Bank 35
-NET  "ddr3_dq(6)"                                LOC = "K12" ;          #Bank 35
-NET  "ddr3_dq(7)"                                LOC = "D11" ;          #Bank 35
-NET  "ddr3_dq(8)"                                LOC = "M13" ;          #Bank 35
-NET  "ddr3_dq(9)"                                LOC = "J14" ;          #Bank 35
-NET  "ddr3_dq(10)"                               LOC = "B13" ;          #Bank 35
-NET  "ddr3_dq(11)"                               LOC = "B12" ;          #Bank 35
-NET  "ddr3_dq(12)"                               LOC = "G10" ;          #Bank 35
-NET  "ddr3_dq(13)"                               LOC = "M11" ;          #Bank 35
-NET  "ddr3_dq(14)"                               LOC = "C12" ;          #Bank 35
-NET  "ddr3_dq(15)"                               LOC = "A11" ;          #Bank 35
-NET  "ddr3_dq(16)"                               LOC = "G11" ;          #Bank 35
-NET  "ddr3_dq(17)"                               LOC = "F11" ;          #Bank 35
-NET  "ddr3_dq(18)"                               LOC = "D14" ;          #Bank 35
-NET  "ddr3_dq(19)"                               LOC = "C14" ;          #Bank 35
-NET  "ddr3_dq(20)"                               LOC = "G12" ;          #Bank 35
-NET  "ddr3_dq(21)"                               LOC = "G13" ;          #Bank 35
-NET  "ddr3_dq(22)"                               LOC = "F14" ;          #Bank 35
-NET  "ddr3_dq(23)"                               LOC = "H14" ;          #Bank 35
-NET  "ddr3_dq(24)"                               LOC = "C19" ;          #Bank 26
-NET  "ddr3_dq(25)"                               LOC = "G20" ;          #Bank 26
-NET  "ddr3_dq(26)"                               LOC = "E19" ;          #Bank 26
-NET  "ddr3_dq(27)"                               LOC = "F20" ;          #Bank 26
-NET  "ddr3_dq(28)"                               LOC = "A20" ;          #Bank 26
-NET  "ddr3_dq(29)"                               LOC = "A21" ;          #Bank 26
-NET  "ddr3_dq(30)"                               LOC = "E22" ;          #Bank 26
-NET  "ddr3_dq(31)"                               LOC = "E23" ;          #Bank 26
-NET  "ddr3_dq(32)"                               LOC = "G21" ;          #Bank 26
-NET  "ddr3_dq(33)"                               LOC = "B21" ;          #Bank 26
-NET  "ddr3_dq(34)"                               LOC = "A23" ;          #Bank 26
-NET  "ddr3_dq(35)"                               LOC = "A24" ;          #Bank 26
-NET  "ddr3_dq(36)"                               LOC = "C20" ;          #Bank 26
-NET  "ddr3_dq(37)"                               LOC = "D20" ;          #Bank 26
-NET  "ddr3_dq(38)"                               LOC = "J20" ;          #Bank 26
-NET  "ddr3_dq(39)"                               LOC = "G22" ;          #Bank 26
-NET  "ddr3_dq(40)"                               LOC = "D26" ;          #Bank 25
-NET  "ddr3_dq(41)"                               LOC = "F26" ;          #Bank 25
-NET  "ddr3_dq(42)"                               LOC = "B26" ;          #Bank 25
-NET  "ddr3_dq(43)"                               LOC = "E26" ;          #Bank 25
-NET  "ddr3_dq(44)"                               LOC = "C24" ;          #Bank 25
-NET  "ddr3_dq(45)"                               LOC = "D25" ;          #Bank 25
-NET  "ddr3_dq(46)"                               LOC = "D27" ;          #Bank 25
-NET  "ddr3_dq(47)"                               LOC = "C25" ;          #Bank 25
-NET  "ddr3_dq(48)"                               LOC = "C27" ;          #Bank 25
-NET  "ddr3_dq(49)"                               LOC = "B28" ;          #Bank 25
-NET  "ddr3_dq(50)"                               LOC = "D29" ;          #Bank 25
-NET  "ddr3_dq(51)"                               LOC = "B27" ;          #Bank 25
-NET  "ddr3_dq(52)"                               LOC = "G27" ;          #Bank 25
-NET  "ddr3_dq(53)"                               LOC = "A28" ;          #Bank 25
-NET  "ddr3_dq(54)"                               LOC = "E24" ;          #Bank 25
-NET  "ddr3_dq(55)"                               LOC = "G25" ;          #Bank 25
-NET  "ddr3_dq(56)"                               LOC = "F28" ;          #Bank 25
-NET  "ddr3_dq(57)"                               LOC = "B31" ;          #Bank 25
-NET  "ddr3_dq(58)"                               LOC = "H29" ;          #Bank 25
-NET  "ddr3_dq(59)"                               LOC = "H28" ;          #Bank 25
-NET  "ddr3_dq(60)"                               LOC = "B30" ;          #Bank 25
-NET  "ddr3_dq(61)"                               LOC = "A30" ;          #Bank 25
-NET  "ddr3_dq(62)"                               LOC = "E29" ;          #Bank 25
-NET  "ddr3_dq(63)"                               LOC = "F29" ;          #Bank 25
-NET  "ddr3_addr(12)"                             LOC = "H15" ;          #Bank 36
-NET  "ddr3_addr(11)"                             LOC = "M15" ;          #Bank 36
-NET  "ddr3_addr(10)"                             LOC = "M16" ;          #Bank 36
-NET  "ddr3_addr(9)"                              LOC = "F15" ;          #Bank 36
-NET  "ddr3_addr(8)"                              LOC = "G15" ;          #Bank 36
-NET  "ddr3_addr(7)"                              LOC = "B15" ;          #Bank 36
-NET  "ddr3_addr(6)"                              LOC = "A15" ;          #Bank 36
-NET  "ddr3_addr(5)"                              LOC = "J17" ;          #Bank 36
-NET  "ddr3_addr(4)"                              LOC = "D16" ;          #Bank 36
-NET  "ddr3_addr(3)"                              LOC = "E16" ;          #Bank 36
-NET  "ddr3_addr(2)"                              LOC = "B16" ;          #Bank 36
-NET  "ddr3_addr(1)"                              LOC = "A16" ;          #Bank 36
-NET  "ddr3_addr(0)"                              LOC = "L14" ;          #Bank 36
-NET  "ddr3_ba(2)"                                LOC = "L15" ;          #Bank 36
-NET  "ddr3_ba(1)"                                LOC = "J19" ;          #Bank 36
-NET  "ddr3_ba(0)"                                LOC = "K19" ;          #Bank 36
-NET  "ddr3_ras_n"                                LOC = "L19" ;          #Bank 36
-NET  "ddr3_cas_n"                                LOC = "C17" ;          #Bank 36
-NET  "ddr3_we_n"                                 LOC = "B17" ;          #Bank 36
-NET  "ddr3_reset_n"                              LOC = "E18" ;          #Bank 36
-NET  "ddr3_cke(0)"                               LOC = "M18" ;          #Bank 36
-NET  "ddr3_odt(0)"                               LOC = "F18" ;          #Bank 36
-NET  "ddr3_cs_n(0)"                              LOC = "K18" ;          #Bank 36
-NET  "ddr3_dm(0)"                                LOC = "E11" ;          #Bank 35
-NET  "ddr3_dm(1)"                                LOC = "B11" ;          #Bank 35
-NET  "ddr3_dm(2)"                                LOC = "E14" ;          #Bank 35
-NET  "ddr3_dm(3)"                                LOC = "D19" ;          #Bank 26
-NET  "ddr3_dm(4)"                                LOC = "B22" ;          #Bank 26
-NET  "ddr3_dm(5)"                                LOC = "A26" ;          #Bank 25
-NET  "ddr3_dm(6)"                                LOC = "A29" ;          #Bank 25
-NET  "ddr3_dm(7)"                                LOC = "A31" ;          #Bank 25
-## NET  "sys_clk_p"                                 LOC = "J9" ;          #Bank 34
-## NET  "sys_clk_n"                                 LOC = "H9" ;          #Bank 34
-NET  "clk_ref_p"                                 LOC = "J9" ;          #Bank 34
-NET  "clk_ref_n"                                 LOC = "H9" ;          #Bank 34
-## NET  "sda"                                       LOC = "F9" ;          #Bank 34
-## NET  "scl"                                       LOC = "F10" ;          #Bank 34
-NET  "reset"                                   LOC = "H10" ;          #ML605 CPU_RESET switch
-#NET  "phy_init_done"                             LOC = "AE23" ;         #ML605 GPIO LED 3
-NET  "errorn"                                     LOC = "AD24" ;         #ML605 GPIO LED 2
-NET  "ddr3_dqs_p(0)"                             LOC = "D12" ;          #Bank 35
-NET  "ddr3_dqs_n(0)"                             LOC = "E12" ;          #Bank 35
-NET  "ddr3_dqs_p(1)"                             LOC = "H12" ;          #Bank 35
-NET  "ddr3_dqs_n(1)"                             LOC = "J12" ;          #Bank 35
-NET  "ddr3_dqs_p(2)"                             LOC = "A13" ;          #Bank 35
-NET  "ddr3_dqs_n(2)"                             LOC = "A14" ;          #Bank 35
-NET  "ddr3_dqs_p(3)"                             LOC = "H19" ;          #Bank 26
-NET  "ddr3_dqs_n(3)"                             LOC = "H20" ;          #Bank 26
-NET  "ddr3_dqs_p(4)"                             LOC = "B23" ;          #Bank 26
-NET  "ddr3_dqs_n(4)"                             LOC = "C23" ;          #Bank 26
-NET  "ddr3_dqs_p(5)"                             LOC = "B25" ;          #Bank 25
-NET  "ddr3_dqs_n(5)"                             LOC = "A25" ;          #Bank 25
-NET  "ddr3_dqs_p(6)"                             LOC = "H27" ;          #Bank 25
-NET  "ddr3_dqs_n(6)"                             LOC = "G28" ;          #Bank 25
-NET  "ddr3_dqs_p(7)"                             LOC = "C30" ;          #Bank 25
-NET  "ddr3_dqs_n(7)"                             LOC = "D30" ;          #Bank 25
-NET  "ddr3_ck_p(0)"                              LOC = "G18" ;          #Bank 36
-NET  "ddr3_ck_n(0)"                              LOC = "H18" ;          #Bank 36
-
-
-##################################################################################################
-##The following locations must be reserved and cannot be used for external I/O because          ##
-##the I/O elements associated with these sites (IODELAY, OSERDES, and associated routing)       ##
-##are used to generate and route the clocks necessary for read data capture and synchronization ##
-##to the core clock domain. These pins should not be routed out on the user's PCB               ##
-##################################################################################################
-
-##################################################################################################
-##The logic of this pin is used internally to drive a BUFR in the column. This chosen pin must  ##
-##be a clock pin capable of spanning to all of the banks containing data bytes in the particular##
-##column. That is, all byte groups must be within +/- 1 bank of this pin. This pin cannot be    ##
-##used for other functions and should not be connected externally. If a different pin is chosen,##
-##he corresponding LOC constraint must also be changed.                                         ##
-##################################################################################################
-
-CONFIG PROHIBIT = C29,M12;
-
-######################################################################################
-##Place RSYNC OSERDES and IODELAY:                                                  ##
-######################################################################################
-
-##Site: C29 -- Bank 25
-INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_loop_col1.u_oserdes_rsync"
-  LOC = "OLOGIC_X1Y139";
-INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_loop_col1.u_odelay_rsync"
-  LOC = "IODELAY_X1Y139";
-
-INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_loop_col1.u_bufr_rsync"
-  LOC = "BUFR_X1Y6";
-
-##Site: M12 -- Bank 35
-INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_loop_col0.u_oserdes_rsync"
-  LOC = "OLOGIC_X2Y139";
-INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_loop_col0.u_odelay_rsync"
-  LOC = "IODELAY_X2Y139";
-
-INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_loop_col0.u_bufr_rsync"
-  LOC = "BUFR_X2Y6";
-
-##################################################################################################
-##The logic of this pin is used internally to drive a BUFIO for the byte group. Any clock       ##
-##capable pin in the same bank as the data byte group (DQS, DQ, DM if used) can be used for     ##
-##this pin. This pin cannot be used for other functions and should not be connected externally. ##
-##If a different pin is chosen, the corresponding LOC constraint must also be changed.          ##
-##################################################################################################
-
-CONFIG PROHIBIT = B20,C13,C28,D24,F21,F25,K14,L13;
-
-######################################################################################
-##Place CPT OSERDES and IODELAY:                                                    ##
-######################################################################################
-
-##Site: C13 -- Bank 35
-INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*0*u_oserdes_cpt"
-  LOC = "OLOGIC_X2Y137";
-INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*0*u_odelay_cpt"
-  LOC = "IODELAY_X2Y137";
-
-##Site: L13 -- Bank 35
-INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*1*u_oserdes_cpt"
-  LOC = "OLOGIC_X2Y141";
-INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*1*u_odelay_cpt"
-  LOC = "IODELAY_X2Y141";
-
-##Site: K14 -- Bank 35
-INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*2*u_oserdes_cpt"
-  LOC = "OLOGIC_X2Y143";
-INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*2*u_odelay_cpt"
-  LOC = "IODELAY_X2Y143";
-
-##Site: F21 -- Bank 26
-INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*3*u_oserdes_cpt"
-  LOC = "OLOGIC_X1Y179";
-INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*3*u_odelay_cpt"
-  LOC = "IODELAY_X1Y179";
-
-##Site: B20 -- Bank 26
-INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*4*u_oserdes_cpt"
-  LOC = "OLOGIC_X1Y181";
-INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*4*u_odelay_cpt"
-  LOC = "IODELAY_X1Y181";
-
-##Site: F25 -- Bank 25
-INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*5*u_oserdes_cpt"
-  LOC = "OLOGIC_X1Y137";
-INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*5*u_odelay_cpt"
-  LOC = "IODELAY_X1Y137";
-
-##Site: C28 -- Bank 25
-INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*6*u_oserdes_cpt"
-  LOC = "OLOGIC_X1Y141";
-INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*6*u_odelay_cpt"
-  LOC = "IODELAY_X1Y141";
-
-##Site: D24 -- Bank 25
-INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*7*u_oserdes_cpt"
-  LOC = "OLOGIC_X1Y143";
-INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*7*u_odelay_cpt"
-  LOC = "IODELAY_X1Y143";
-
-
-######################################################################################
-## MMCM_ADV CONSTRAINTS                                                             ##
-######################################################################################
-
-INST "ddr3ctrl/u_infrastructure/u_mmcm_adv"      LOC = "MMCM_ADV_X0Y8"; #Banks 16, 26, 36
-
-
-
-###########################################################################
-##  ML605 additions
-###########################################################################
-#NET  "pll_lock"                 IOSTANDARD = LVCMOS25;
-#NET  "heartbeat"                IOSTANDARD = LVCMOS25;
-
-#NET  "heartbeat"                LOC = "AC24";   # ML605 GPIO LED 1
-#NET  "pll_lock"                 LOC = "AC22" ;  # ML605 GPIO LED 0
-
-
-NET "address(0)"                      LOC = "AL8";    ## 29 on U4, A1 on U27
-NET "address(1)"                      LOC = "AK8";    ## 25 on U4, B1 on U27
-NET "address(2)"                      LOC = "AC9";    ## 24 on U4, C1 on U27
-NET "address(3)"                      LOC = "AD10";   ## 23 on U4, D1 on U27
-NET "address(4)"                      LOC = "C8";     ## 22 on U4, D2 on U27
-NET "address(5)"                      LOC = "B8";     ## 21 on U4, A2 on U27
-NET "address(6)"                      LOC = "E9";     ## 20 on U4, C2 on U27
-NET "address(7)"                      LOC = "E8";     ## 19 on U4, A3 on U27
-NET "address(8)"                      LOC = "A8";     ## 8  on U4, B3 on U27
-NET "address(9)"                      LOC = "A9";     ## 7  on U4, C3 on U27
-NET "address(10)"                     LOC = "D9";     ## 6  on U4, D3 on U27
-NET "address(11)"                     LOC = "C9";     ## 5  on U4, C4 on U27
-NET "address(12)"                     LOC = "D10";    ## 4  on U4, A5 on U27
-NET "address(13)"                     LOC = "C10";    ## 3  on U4, B5 on U27
-NET "address(14)"                     LOC = "F10";    ## 2  on U4, C5 on U27
-NET "address(15)"                     LOC = "F9";     ## 1  on U4, D7 on U27
-NET "address(16)"                     LOC = "AH8";    ## 55 on U4, D8 on U27
-NET "address(17)"                     LOC = "AG8";    ## 18 on U4, A7 on U27
-NET "address(18)"                     LOC = "AP9";    ## 17 on U4, B7 on U27
-NET "address(19)"                     LOC = "AN9";    ## 16 on U4, C7 on U27
-NET "address(20)"                     LOC = "AF10";   ## 11 on U4, C8 on U27
-NET "address(21)"                     LOC = "AF9";    ## 10 on U4, A8 on U27
-NET "address(22)"                     LOC = "AL9";    ## 9  on U4, G1 on U27
-NET "address(23)"                     LOC = "AA23";   ## 26 on U4
-NET "data(0)"                      LOC = "AF24";   ## 34 on U4, F2 on U27
-NET "data(1)"                      LOC = "AF25";   ## 36 on U4, E2 on U27
-NET "data(2)"                      LOC = "W24";    ## 39 on U4, G3 on U27
-NET "data(3)"                      LOC = "V24";    ## 41 on U4, E4 on U27
-NET "data(4)"                      LOC = "H24";    ## 47 on U4, E5 on U27
-NET "data(5)"                      LOC = "H25";    ## 49 on U4, G5 on U27
-NET "data(6)"                      LOC = "P24";    ## 51 on U4, G6 on U27
-NET "data(7)"                      LOC = "R24";    ## 53 on U4, H7 on U27
-NET "data(8)"                      LOC = "G23";    ## 35 on U4, E1 on U27
-NET "data(9)"                      LOC = "H23";    ## 37 on U4, E3 on U27
-NET "data(10)"                     LOC = "N24";    ## 40 on U4, F3 on U27
-NET "data(11)"                     LOC = "N23";    ## 42 on U4, F4 on U27
-NET "data(12)"                     LOC = "F23";    ## 48 on U4, F5 on U27
-NET "data(13)"                     LOC = "F24";    ## 50 on U4, H5 on U27
-NET "data(14)"                     LOC = "L24";    ## 52 on U4, G7 on U27
-NET "data(15)"                     LOC = "M23";    ## 54 on U4, E7 on U27
-#NET "FLASH_WAIT"                    LOC = "J26";    ## 56 on U4
-NET "writen"                    LOC = "AF23";   ## 14 on U4, G8 on U27
-NET "oen"                    LOC = "AA24";   ## 32 on U4, F8 on U27
-#NET "FPGA_CCLK"                     LOC = "K8";     ##           F1 on U27
-NET "alatch"                 LOC = "AC23";   ##           H1 on U27
-NET "romsn"                    LOC = "Y24";    ## 30 on U4, B4 on U27 (U10 and switch S2.2 setting select either U4 or U27)
-##
-
-NET "erx_col"                       LOC = "AK13";   ## 114 on U80
-NET "erx_crs"                       LOC = "AL13";   ## 115 on U80
-NET "emdint"                       LOC = "AH14";   ## 32  on U80
-NET "emdc"                       LOC = "AP14";   ## 35  on U80
-NET "emdio"                      LOC = "AN14";   ## 33  on U80
-NET "erstn"                     LOC = "AH13";   ## 36  on U80
-NET "erx_clk"                     LOC = "AP11";   ## 7   on U80
-NET "erx_dv"                LOC = "AM13";   ## 4   on U80
-NET "erxd(0)"                      LOC = "AN13";   ## 3   on U80
-NET "erxd(1)"                      LOC = "AF14";   ## 128 on U80
-NET "erxd(2)"                      LOC = "AE14";   ## 126 on U80
-NET "erxd(3)"                      LOC = "AN12";   ## 125 on U80
-NET "erxd(4)"                      LOC = "AM12";   ## 124 on U80
-NET "erxd(5)"                      LOC = "AD11";   ## 123 on U80
-NET "erxd(6)"                      LOC = "AC12";   ## 121 on U80
-NET "erxd(7)"                      LOC = "AC13";   ## 120 on U80
-NET "erx_er"                      LOC = "AG12";   ## 9   on U80
-NET "etx_clk"                     LOC = "AD12";   ## 10  on U80
-NET "etx_en"                LOC = "AJ10";   ## 16  on U80
-NET "egtx_clk"                LOC = "AH12";   ## 14  on U80
-NET "etxd(0)"                      LOC = "AM11";   ## 18  on U80
-NET "etxd(1)"                      LOC = "AL11";   ## 19  on U80
-NET "etxd(2)"                      LOC = "AG10";   ## 20  on U80
-NET "etxd(3)"                      LOC = "AG11";   ## 24  on U80
-NET "etxd(4)"                      LOC = "AL10";   ## 25  on U80
-NET "etxd(5)"                      LOC = "AM10";   ## 26  on U80
-NET "etxd(6)"                      LOC = "AE11";   ## 28  on U80
-NET "etxd(7)"                      LOC = "AF11";   ## 29  on U80
-NET "etx_er"                      LOC = "AH10";   ## 13  on U80
-
-NET "dsurx"                      LOC = "J24";    ## 24  on U34
-NET "dsutx"                      LOC = "J25";    ## 25  on U34
-
-#NET "GPIO_DIP_SW1"                  LOC = "D22";    ## 1   on SW1 DIP switch (active-high)
-#NET "GPIO_DIP_SW2"                  LOC = "C22";    ## 2   on SW1 DIP switch (active-high)
-#NET "GPIO_DIP_SW3"                  LOC = "L21";    ## 3   on SW1 DIP switch (active-high)
-#NET "GPIO_DIP_SW4"                  LOC = "L20";    ## 4   on SW1 DIP switch (active-high)
-#NET "GPIO_DIP_SW5"                  LOC = "C18";    ## 5   on SW1 DIP switch (active-high)
-NET "dsubre"                  LOC = "B18";    ## 6   on SW1 DIP switch (active-high)
-#NET "GPIO_DIP_SW7"                  LOC = "K22";    ## 7   on SW1 DIP switch (active-high)
-#NET "GPIO_DIP_SW8"                  LOC = "K21";    ## 8   on SW1 DIP switch (active-high)
-##
-
-NET "led(0)"                    LOC = "AC22";   ## 2   on LED DS12, 1 on J62
-NET "led(1)"                    LOC = "AC24";   ## 2   on LED DS11, 2 on J62
-NET "led(2)"                    LOC = "AE22";   ## 2   on LED DS9,  3 on J62
-NET "led(3)"                    LOC = "AE23";   ## 2   on LED DS10, 4 on J62
-NET "led(4)"                    LOC = "AB23";   ## 2   on LED DS15, 5 on J62
-NET "led(4)"                    LOC = "AB23";   ## 2   on LED DS15, 5 on J62
-NET "led(5)"                    LOC = "AG23";   ## 2   on LED DS14, 6 on J62
-#NET "GPIO_LED_5"                    LOC = "AG23";   ## 2   on LED DS14, 6 on J62
-#NET "GPIO_LED_6"                    LOC = "AE24";   ## 2   on LED DS22, 7 on J62
-#NET "GPIO_LED_7"                    LOC = "AD24";   ## 2   on LED DS21, 8 on J62
-
-NET "dvi_iic_scl"                   LOC = "AN10";   ## 2   on Q5, 15 on U38
-NET "iic_scl_main"               LOC = "AK9";    ## 2   on Q19
-#NET "IIC_SCL_SFP"                   LOC = "AA34";   ## 2   on Q23
-NET "dvi_iic_sda"                   LOC = "AP10";   ## 2   on Q6, 14 on U38
-NET "iic_sda_main"               LOC = "AE9";    ## 2   on Q20
-#NET "IIC_SDA_SFP"                   LOC = "AA33";   ## 2   on Q21
-
-NET "tft_lcd_data(0)"                        LOC = "AJ19";   ## 63 on U38 (thru series R111 47.5 ohm)
-NET "tft_lcd_data(1)"                        LOC = "AH19";   ## 62 on U38 (thru series R110 47.5 ohm)
-NET "tft_lcd_data(2)"                        LOC = "AM17";   ## 61 on U38 (thru series R109 47.5 ohm)
-NET "tft_lcd_data(3)"                        LOC = "AM16";   ## 60 on U38 (thru series R108 47.5 ohm)
-NET "tft_lcd_data(4)"                        LOC = "AD17";   ## 59 on U38 (thru series R107 47.5 ohm)
-NET "tft_lcd_data(5)"                        LOC = "AE17";   ## 58 on U38 (thru series R106 47.5 ohm)
-NET "tft_lcd_data(6)"                        LOC = "AK18";   ## 55 on U38 (thru series R105 47.5 ohm)
-NET "tft_lcd_data(7)"                        LOC = "AK17";   ## 54 on U38 (thru series R104 47.5 ohm)
-NET "tft_lcd_data(8)"                        LOC = "AE18";   ## 53 on U38 (thru series R103 47.5 ohm)
-NET "tft_lcd_data(9)"                        LOC = "AF18";   ## 52 on U38 (thru series R102 47.5 ohm)
-NET "tft_lcd_data(10)"                       LOC = "AL16";   ## 51 on U38 (thru series R101 47.5 ohm)
-NET "tft_lcd_data(11)"                       LOC = "AK16";   ## 50 on U38 (thru series R100 47.5 ohm)
-NET "tft_lcd_de"                        LOC = "AD16";   ## 2  on U38 (thru series R112 47.5 ohm)
-#NET "DVI_GPIO1_FMC_C2M_PG_LS"       LOC = "K9";     ## 18 on U32 (not wired to U38)
-NET "tft_lcd_hsync"                         LOC = "AN17";   ## 4  on U38 (thru series R113 47.5 ohm)
-NET "tft_lcd_reset_b"                LOC = "AP17";   ## 2  on U32 (DVI_RESET_B pin 13 on U38)
-NET "tft_lcd_vsync"                         LOC = "AD15";   ## 5  on U38 (thru series R114 47.5 ohm)
-NET "tft_lcd_clk_n"                    LOC = "AC17";   ## 56 on U38
-NET "tft_lcd_clk_p"                    LOC = "AC18";   ## 57 on U38
-
-#NET "SYSACE_CFGTDI"                 LOC = "AC8";    ## 81  on U19
-NET "sysace_d(0)"                     LOC = "AM15";   ## 66  on U19
-NET "sysace_d(1)"                     LOC = "AJ17";   ## 65  on U19
-NET "sysace_d(2)"                     LOC = "AJ16";   ## 63  on U19
-NET "sysace_d(3)"                     LOC = "AP16";   ## 62  on U19
-NET "sysace_d(4)"                     LOC = "AG16";   ## 61  on U19
-NET "sysace_d(5)"                     LOC = "AH15";   ## 60  on U19
-NET "sysace_d(6)"                     LOC = "AF16";   ## 59  on U19
-NET "sysace_d(7)"                     LOC = "AN15";   ## 58  on U19
-NET "sysace_mpa(0)"                  LOC = "AC15";   ## 70  on U19
-NET "sysace_mpa(1)"                  LOC = "AP15";   ## 69  on U19
-NET "sysace_mpa(2)"                  LOC = "AG17";   ## 68  on U19
-NET "sysace_mpa(3)"                  LOC = "AH17";   ## 67  on U19
-NET "sysace_mpa(4)"                  LOC = "AG15";   ## 45  on U19
-NET "sysace_mpa(5)"                  LOC = "AF15";   ## 44  on U19
-NET "sysace_mpa(6)"                  LOC = "AK14";   ## 43  on U19
-#NET "SYSACE_MPBRDY"                 LOC = "AJ15";   ## 39  on U19
-NET "sysace_mpce"                   LOC = "AJ14";   ## 42  on U19
-NET "sysace_mpirq"                  LOC = "L9";     ## 41  on U19
-NET "sysace_mpoe"                   LOC = "AL15";   ## 77  on U19
-NET "sysace_mpwe"                   LOC = "AL14";   ## 76  on U19
-NET "clk_33"              LOC = "AE16";   ## 93  on U19
+############################################################################
+## 
+##  Xilinx, Inc. 2006            www.xilinx.com 
+##  Mon Aug 30 10:34:47 2010
+##  Generated by MIG Version 3.6
+##  
+############################################################################
+##  File name :       example_top.ucf
+## 
+##  Details :     Constraints file
+##                    FPGA family:       virtex6
+##                    FPGA:              xc6vlx240t-ff1156
+##                    Speedgrade:        -1
+##                    Design Entry:      VERILOG
+##                    Design:            with Test bench
+##                    No.Of Controllers: 1
+##
+############################################################################ 
+##  Modifications for ML605 with LX240T FPGA
+##  Start with UCF file generated by MIG 3.4 (ISE 12.1 build M.53.d)
+##     
+##  1. Majority of ML605 board specific pin assignments entered via MIG3.4 GUI!
+##     A. Add LOC and IOSTANDARD for LED indicator "heartbeat" 
+##     B. Add LOC and IOSTANDARD for LED indicator "pll_lock" 
+##     C. Comment out "sda" and "scl" signals 
+##     D. ML605 DCI_CASCADE is correct as defined in MIG3.4 GUI.
+##        BANK 26 = left column I/O master; BANK 36 = right column I/O master 
+##  2. Change IOSTANDARD for sys_rst to SSTL15 
+##  3. Board specific clocking definitions
+##     A. Default MIG 3.5 example design assumes 2 clock inputs to design:
+##        1. clk_ref to IDELAY_CTRL element (200 MHz)
+##        2. sys_clk to PLL circuit (SMA inputs)
+##     B. ML605 single clock source, modify constraint file to use 200 MHz 
+##        LVDS clock "clk_ref" input for DDR3 SODIMM design @800 Mbps data rate. 
+##        - Delete sys_clk_p and sys_clk_n inputs (HDL and LOC constraints)
+##        - Comment out sys_clk timing specification
+##        - Modify TS_MC_PHY_INIT_SEL to use value "2.5 ns" in multiplication 
+##  4. Optional: comment out CONFIG_PROHIBIT lines (pins reserved for MIG)
+##     Since this design has LOC'ed I/O don't need to reserve these pins.
+##  5. ML605 MIG3.4 BUFIO pin assignments
+##         BUFIO:0 pin C13 => X2Y137
+##         BUFIO:1 pin L13 => X2Y141
+##         BUFIO:2 pin K14 => X2Y143
+##         BUFIO:3 pin F21 => X1Y179
+##         BUFIO:4 pin B20 => X1Y181
+##         BUFIO:5 pin F25 => X1Y137
+##         BUFIO:6 pin C28 => X1Y141
+##         BUFIO:7 pin D24 => X1Y143
+##  6. ML605 MIG3.4 BUFR pin assignments
+##         BUFR:0 pin M12 => X2Y139
+##         BUFR:1 pin C29 => X1Y139
+##
+############################################################################
+# Timing constraints                                                        #
+############################################################################
+## ML605 comment out the following 2 lines for single 200MHz input clock
+## NET "sys_clk_p" TNM_NET = TNM_sys_clk;
+## TIMESPEC "TS_sys_clk" = PERIOD "TNM_sys_clk" 2.5 ns;
+
+NET "clk_ref_p" TNM_NET = TNM_clk_ref;
+TIMESPEC "TS_clk_ref" = PERIOD "TNM_clk_ref" 5 ns ;
+
+# Constrain BUFR clocks used to synchronize data from IOB to fabric logic
+# Note that ISE cannot infer this from other PERIOD constraints because
+# of the use of OSERDES blocks in the BUFR clock generation path
+NET "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/clk_rsync(?)" TNM_NET = TNM_clk_rsync;
+TIMESPEC "TS_clk_rsync" = PERIOD "TNM_clk_rsync" 5 ns;
+
+# Paths between DQ/DQS ISERDES.Q outputs and CLB flops clocked by falling 
+# edge of BUFR will by design only be used if DYNCLKDIVSEL is asserted for 
+# that particular flop. Mark this path as being a full-cycle, rather than 
+# a half cycle path for timing purposes. NOTE: This constraint forces full-
+# cycle timing to be applied globally for all rising->falling edge paths 
+# in all resynchronizaton clock domains. If the user had modified the logic
+# in the resync clock domain such that other rising->falling edge paths 
+# exist, then constraint below should be modified to utilize pattern 
+# matching to specific affect only the DQ/DQS ISERDES.Q outputs
+TIMEGRP "TG_clk_rsync_rise" = RISING  "TNM_clk_rsync";
+TIMEGRP "TG_clk_rsync_fall" = FALLING "TNM_clk_rsync";
+TIMESPEC "TS_clk_rsync_rise_to_fall" = 
+  FROM "TG_clk_rsync_rise" TO "TG_clk_rsync_fall" "TS_sys_clk" * 2;
+
+# Signal to select between controller and physical layer signals. Four divided by two clock
+# cycles (8 memory clock cycles) are provided by design for the signal to settle down.
+# Used only by the phy modules.
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_init/u_ff_phy_init_data_sel" TNM = "TNM_PHY_INIT_SEL";
+TIMESPEC "TS_MC_PHY_INIT_SEL" = FROM "TNM_PHY_INIT_SEL" TO FFS = 10 ns;  ## = "2.5ns * 4" ML605 single clock
+
+disable = reg_sr_o;
+disable = reg_sr_r;
+############################################################################
+########################################################################
+# Controller 0
+# Memory Device: DDR3_SDRAM->SODIMMs->MT4JSF6464HY-1G1
+# Data Width:     64
+# Frequency:      400
+# Time Period:      2500
+# Data Mask:     1
+########################################################################
+
+
+################################################################################
+# I/O STANDARDS
+################################################################################
+
+NET  "ddr3_dq(*)"                               IOSTANDARD = SSTL15_T_DCI;
+NET  "ddr3_addr(*)"                             IOSTANDARD = SSTL15;
+NET  "ddr3_ba(*)"                               IOSTANDARD = SSTL15;
+NET  "ddr3_ras_n"                               IOSTANDARD = SSTL15;
+NET  "ddr3_cas_n"                               IOSTANDARD = SSTL15;
+NET  "ddr3_we_n"                                IOSTANDARD = SSTL15;
+NET  "ddr3_reset_n"                             IOSTANDARD = SSTL15;
+NET  "ddr3_cke(*)"                              IOSTANDARD = SSTL15;
+NET  "ddr3_odt(*)"                              IOSTANDARD = SSTL15;
+NET  "ddr3_cs_n(*)"                             IOSTANDARD = SSTL15;
+NET  "ddr3_dm(*)"                               IOSTANDARD = SSTL15;
+## NET  "sys_clk_p"                                IOSTANDARD = LVDS_25;
+## NET  "sys_clk_n"                                IOSTANDARD = LVDS_25;
+NET  "clk_ref_p"                                IOSTANDARD = LVDS_25;
+NET  "clk_ref_n"                                IOSTANDARD = LVDS_25;
+## NET  "sda"                                      IOSTANDARD = LVCMOS25;
+## NET  "scl"                                      IOSTANDARD = LVCMOS25;
+NET  "reset"                                  IOSTANDARD = SSTL15;      ## ML605 
+#NET  "phy_init_done"                            IOSTANDARD = LVCMOS25;
+NET  "errorn"                                    IOSTANDARD = LVCMOS25;
+NET  "ddr3_dqs_p(*)"                            IOSTANDARD = DIFF_SSTL15_T_DCI;
+NET  "ddr3_dqs_n(*)"                            IOSTANDARD = DIFF_SSTL15_T_DCI;
+NET  "ddr3_ck_p(*)"                             IOSTANDARD = DIFF_SSTL15;
+NET  "ddr3_ck_n(*)"                             IOSTANDARD = DIFF_SSTL15;
+
+################################################################################
+##SAVE attributes to reserve the pins
+################################################################################
+## NET  "sda"                                      S;
+## NET  "scl"                                      S;
+
+###############################################################################
+#DCI_CASCADING
+#Syntax : CONFIG DCI_CASCADE = "<master> <slave1> <slave2> ..";
+###############################################################################
+CONFIG DCI_CASCADE = "26 25";
+CONFIG DCI_CASCADE = "36 35";
+
+
+##################################################################################
+# Location Constraints
+##################################################################################
+NET  "ddr3_dq(0)"                                LOC = "J11" ;          #Bank 35
+NET  "ddr3_dq(1)"                                LOC = "E13" ;          #Bank 35
+NET  "ddr3_dq(2)"                                LOC = "F13" ;          #Bank 35
+NET  "ddr3_dq(3)"                                LOC = "K11" ;          #Bank 35
+NET  "ddr3_dq(4)"                                LOC = "L11" ;          #Bank 35
+NET  "ddr3_dq(5)"                                LOC = "K13" ;          #Bank 35
+NET  "ddr3_dq(6)"                                LOC = "K12" ;          #Bank 35
+NET  "ddr3_dq(7)"                                LOC = "D11" ;          #Bank 35
+NET  "ddr3_dq(8)"                                LOC = "M13" ;          #Bank 35
+NET  "ddr3_dq(9)"                                LOC = "J14" ;          #Bank 35
+NET  "ddr3_dq(10)"                               LOC = "B13" ;          #Bank 35
+NET  "ddr3_dq(11)"                               LOC = "B12" ;          #Bank 35
+NET  "ddr3_dq(12)"                               LOC = "G10" ;          #Bank 35
+NET  "ddr3_dq(13)"                               LOC = "M11" ;          #Bank 35
+NET  "ddr3_dq(14)"                               LOC = "C12" ;          #Bank 35
+NET  "ddr3_dq(15)"                               LOC = "A11" ;          #Bank 35
+NET  "ddr3_dq(16)"                               LOC = "G11" ;          #Bank 35
+NET  "ddr3_dq(17)"                               LOC = "F11" ;          #Bank 35
+NET  "ddr3_dq(18)"                               LOC = "D14" ;          #Bank 35
+NET  "ddr3_dq(19)"                               LOC = "C14" ;          #Bank 35
+NET  "ddr3_dq(20)"                               LOC = "G12" ;          #Bank 35
+NET  "ddr3_dq(21)"                               LOC = "G13" ;          #Bank 35
+NET  "ddr3_dq(22)"                               LOC = "F14" ;          #Bank 35
+NET  "ddr3_dq(23)"                               LOC = "H14" ;          #Bank 35
+NET  "ddr3_dq(24)"                               LOC = "C19" ;          #Bank 26
+NET  "ddr3_dq(25)"                               LOC = "G20" ;          #Bank 26
+NET  "ddr3_dq(26)"                               LOC = "E19" ;          #Bank 26
+NET  "ddr3_dq(27)"                               LOC = "F20" ;          #Bank 26
+NET  "ddr3_dq(28)"                               LOC = "A20" ;          #Bank 26
+NET  "ddr3_dq(29)"                               LOC = "A21" ;          #Bank 26
+NET  "ddr3_dq(30)"                               LOC = "E22" ;          #Bank 26
+NET  "ddr3_dq(31)"                               LOC = "E23" ;          #Bank 26
+NET  "ddr3_dq(32)"                               LOC = "G21" ;          #Bank 26
+NET  "ddr3_dq(33)"                               LOC = "B21" ;          #Bank 26
+NET  "ddr3_dq(34)"                               LOC = "A23" ;          #Bank 26
+NET  "ddr3_dq(35)"                               LOC = "A24" ;          #Bank 26
+NET  "ddr3_dq(36)"                               LOC = "C20" ;          #Bank 26
+NET  "ddr3_dq(37)"                               LOC = "D20" ;          #Bank 26
+NET  "ddr3_dq(38)"                               LOC = "J20" ;          #Bank 26
+NET  "ddr3_dq(39)"                               LOC = "G22" ;          #Bank 26
+NET  "ddr3_dq(40)"                               LOC = "D26" ;          #Bank 25
+NET  "ddr3_dq(41)"                               LOC = "F26" ;          #Bank 25
+NET  "ddr3_dq(42)"                               LOC = "B26" ;          #Bank 25
+NET  "ddr3_dq(43)"                               LOC = "E26" ;          #Bank 25
+NET  "ddr3_dq(44)"                               LOC = "C24" ;          #Bank 25
+NET  "ddr3_dq(45)"                               LOC = "D25" ;          #Bank 25
+NET  "ddr3_dq(46)"                               LOC = "D27" ;          #Bank 25
+NET  "ddr3_dq(47)"                               LOC = "C25" ;          #Bank 25
+NET  "ddr3_dq(48)"                               LOC = "C27" ;          #Bank 25
+NET  "ddr3_dq(49)"                               LOC = "B28" ;          #Bank 25
+NET  "ddr3_dq(50)"                               LOC = "D29" ;          #Bank 25
+NET  "ddr3_dq(51)"                               LOC = "B27" ;          #Bank 25
+NET  "ddr3_dq(52)"                               LOC = "G27" ;          #Bank 25
+NET  "ddr3_dq(53)"                               LOC = "A28" ;          #Bank 25
+NET  "ddr3_dq(54)"                               LOC = "E24" ;          #Bank 25
+NET  "ddr3_dq(55)"                               LOC = "G25" ;          #Bank 25
+NET  "ddr3_dq(56)"                               LOC = "F28" ;          #Bank 25
+NET  "ddr3_dq(57)"                               LOC = "B31" ;          #Bank 25
+NET  "ddr3_dq(58)"                               LOC = "H29" ;          #Bank 25
+NET  "ddr3_dq(59)"                               LOC = "H28" ;          #Bank 25
+NET  "ddr3_dq(60)"                               LOC = "B30" ;          #Bank 25
+NET  "ddr3_dq(61)"                               LOC = "A30" ;          #Bank 25
+NET  "ddr3_dq(62)"                               LOC = "E29" ;          #Bank 25
+NET  "ddr3_dq(63)"                               LOC = "F29" ;          #Bank 25
+NET  "ddr3_addr(13)"                             LOC = "J15" ;          #Bank 36
+NET  "ddr3_addr(12)"                             LOC = "H15" ;          #Bank 36
+NET  "ddr3_addr(11)"                             LOC = "M15" ;          #Bank 36
+NET  "ddr3_addr(10)"                             LOC = "M16" ;          #Bank 36
+NET  "ddr3_addr(9)"                              LOC = "F15" ;          #Bank 36
+NET  "ddr3_addr(8)"                              LOC = "G15" ;          #Bank 36
+NET  "ddr3_addr(7)"                              LOC = "B15" ;          #Bank 36
+NET  "ddr3_addr(6)"                              LOC = "A15" ;          #Bank 36
+NET  "ddr3_addr(5)"                              LOC = "J17" ;          #Bank 36
+NET  "ddr3_addr(4)"                              LOC = "D16" ;          #Bank 36
+NET  "ddr3_addr(3)"                              LOC = "E16" ;          #Bank 36
+NET  "ddr3_addr(2)"                              LOC = "B16" ;          #Bank 36
+NET  "ddr3_addr(1)"                              LOC = "A16" ;          #Bank 36
+NET  "ddr3_addr(0)"                              LOC = "L14" ;          #Bank 36
+NET  "ddr3_ba(2)"                                LOC = "L15" ;          #Bank 36
+NET  "ddr3_ba(1)"                                LOC = "J19" ;          #Bank 36
+NET  "ddr3_ba(0)"                                LOC = "K19" ;          #Bank 36
+NET  "ddr3_ras_n"                                LOC = "L19" ;          #Bank 36
+NET  "ddr3_cas_n"                                LOC = "C17" ;          #Bank 36
+NET  "ddr3_we_n"                                 LOC = "B17" ;          #Bank 36
+NET  "ddr3_reset_n"                              LOC = "E18" ;          #Bank 36
+NET  "ddr3_cke(0)"                               LOC = "M18" ;          #Bank 36
+NET  "ddr3_odt(0)"                               LOC = "F18" ;          #Bank 36
+NET  "ddr3_cs_n(0)"                              LOC = "K18" ;          #Bank 36
+NET  "ddr3_dm(0)"                                LOC = "E11" ;          #Bank 35
+NET  "ddr3_dm(1)"                                LOC = "B11" ;          #Bank 35
+NET  "ddr3_dm(2)"                                LOC = "E14" ;          #Bank 35
+NET  "ddr3_dm(3)"                                LOC = "D19" ;          #Bank 26
+NET  "ddr3_dm(4)"                                LOC = "B22" ;          #Bank 26
+NET  "ddr3_dm(5)"                                LOC = "A26" ;          #Bank 25
+NET  "ddr3_dm(6)"                                LOC = "A29" ;          #Bank 25
+NET  "ddr3_dm(7)"                                LOC = "A31" ;          #Bank 25
+## NET  "sys_clk_p"                                 LOC = "J9" ;          #Bank 34
+## NET  "sys_clk_n"                                 LOC = "H9" ;          #Bank 34
+NET  "clk_ref_p"                                 LOC = "J9" ;          #Bank 34
+NET  "clk_ref_n"                                 LOC = "H9" ;          #Bank 34
+## NET  "sda"                                       LOC = "F9" ;          #Bank 34
+## NET  "scl"                                       LOC = "F10" ;          #Bank 34
+NET  "reset"                                   LOC = "H10" ;          #ML605 CPU_RESET switch
+#NET  "phy_init_done"                             LOC = "AE23" ;         #ML605 GPIO LED 3
+NET  "errorn"                                     LOC = "AD24" ;         #ML605 GPIO LED 2
+NET  "ddr3_dqs_p(0)"                             LOC = "D12" ;          #Bank 35
+NET  "ddr3_dqs_n(0)"                             LOC = "E12" ;          #Bank 35
+NET  "ddr3_dqs_p(1)"                             LOC = "H12" ;          #Bank 35
+NET  "ddr3_dqs_n(1)"                             LOC = "J12" ;          #Bank 35
+NET  "ddr3_dqs_p(2)"                             LOC = "A13" ;          #Bank 35
+NET  "ddr3_dqs_n(2)"                             LOC = "A14" ;          #Bank 35
+NET  "ddr3_dqs_p(3)"                             LOC = "H19" ;          #Bank 26
+NET  "ddr3_dqs_n(3)"                             LOC = "H20" ;          #Bank 26
+NET  "ddr3_dqs_p(4)"                             LOC = "B23" ;          #Bank 26
+NET  "ddr3_dqs_n(4)"                             LOC = "C23" ;          #Bank 26
+NET  "ddr3_dqs_p(5)"                             LOC = "B25" ;          #Bank 25
+NET  "ddr3_dqs_n(5)"                             LOC = "A25" ;          #Bank 25
+NET  "ddr3_dqs_p(6)"                             LOC = "H27" ;          #Bank 25
+NET  "ddr3_dqs_n(6)"                             LOC = "G28" ;          #Bank 25
+NET  "ddr3_dqs_p(7)"                             LOC = "C30" ;          #Bank 25
+NET  "ddr3_dqs_n(7)"                             LOC = "D30" ;          #Bank 25
+NET  "ddr3_ck_p(0)"                              LOC = "G18" ;          #Bank 36
+NET  "ddr3_ck_n(0)"                              LOC = "H18" ;          #Bank 36
+
+
+##################################################################################################
+##The following locations must be reserved and cannot be used for external I/O because          ##
+##the I/O elements associated with these sites (IODELAY, OSERDES, and associated routing)       ##
+##are used to generate and route the clocks necessary for read data capture and synchronization ##
+##to the core clock domain. These pins should not be routed out on the user's PCB               ##
+##################################################################################################
+
+##################################################################################################
+##The logic of this pin is used internally to drive a BUFR in the column. This chosen pin must  ##
+##be a clock pin capable of spanning to all of the banks containing data bytes in the particular##
+##column. That is, all byte groups must be within +/- 1 bank of this pin. This pin cannot be    ##
+##used for other functions and should not be connected externally. If a different pin is chosen,##
+##he corresponding LOC constraint must also be changed.                                         ##
+##################################################################################################
+
+CONFIG PROHIBIT = C29,M12;
+
+######################################################################################
+##Place RSYNC OSERDES and IODELAY:                                                  ##
+######################################################################################
+
+##Site: C29 -- Bank 25
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_loop_col1.u_oserdes_rsync"
+  LOC = "OLOGIC_X1Y139";
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_loop_col1.u_odelay_rsync"
+  LOC = "IODELAY_X1Y139";
+
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_loop_col1.u_bufr_rsync"
+  LOC = "BUFR_X1Y6";
+
+##Site: M12 -- Bank 35
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_loop_col0.u_oserdes_rsync"
+  LOC = "OLOGIC_X2Y139";
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_loop_col0.u_odelay_rsync"
+  LOC = "IODELAY_X2Y139";
+
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_loop_col0.u_bufr_rsync"
+  LOC = "BUFR_X2Y6";
+
+##################################################################################################
+##The logic of this pin is used internally to drive a BUFIO for the byte group. Any clock       ##
+##capable pin in the same bank as the data byte group (DQS, DQ, DM if used) can be used for     ##
+##this pin. This pin cannot be used for other functions and should not be connected externally. ##
+##If a different pin is chosen, the corresponding LOC constraint must also be changed.          ##
+##################################################################################################
+
+CONFIG PROHIBIT = B20,C13,C28,D24,F21,F25,K14,L13;
+
+######################################################################################
+##Place CPT OSERDES and IODELAY:                                                    ##
+######################################################################################
+
+##Site: C13 -- Bank 35
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*0*u_oserdes_cpt"
+  LOC = "OLOGIC_X2Y137";
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*0*u_odelay_cpt"
+  LOC = "IODELAY_X2Y137";
+
+##Site: L13 -- Bank 35
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*1*u_oserdes_cpt"
+  LOC = "OLOGIC_X2Y141";
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*1*u_odelay_cpt"
+  LOC = "IODELAY_X2Y141";
+
+##Site: K14 -- Bank 35
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*2*u_oserdes_cpt"
+  LOC = "OLOGIC_X2Y143";
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*2*u_odelay_cpt"
+  LOC = "IODELAY_X2Y143";
+
+##Site: F21 -- Bank 26
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*3*u_oserdes_cpt"
+  LOC = "OLOGIC_X1Y179";
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*3*u_odelay_cpt"
+  LOC = "IODELAY_X1Y179";
+
+##Site: B20 -- Bank 26
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*4*u_oserdes_cpt"
+  LOC = "OLOGIC_X1Y181";
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*4*u_odelay_cpt"
+  LOC = "IODELAY_X1Y181";
+
+##Site: F25 -- Bank 25
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*5*u_oserdes_cpt"
+  LOC = "OLOGIC_X1Y137";
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*5*u_odelay_cpt"
+  LOC = "IODELAY_X1Y137";
+
+##Site: C28 -- Bank 25
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*6*u_oserdes_cpt"
+  LOC = "OLOGIC_X1Y141";
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*6*u_odelay_cpt"
+  LOC = "IODELAY_X1Y141";
+
+##Site: D24 -- Bank 25
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*7*u_oserdes_cpt"
+  LOC = "OLOGIC_X1Y143";
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*7*u_odelay_cpt"
+  LOC = "IODELAY_X1Y143";
+
+
+######################################################################################
+## MMCM_ADV CONSTRAINTS                                                             ##
+######################################################################################
+
+INST "ddr3ctrl/u_infrastructure/u_mmcm_adv"      LOC = "MMCM_ADV_X0Y8"; #Banks 16, 26, 36
+
+
+
+###########################################################################
+##  ML605 additions
+###########################################################################
+#NET  "pll_lock"                 IOSTANDARD = LVCMOS25;
+#NET  "heartbeat"                IOSTANDARD = LVCMOS25;
+
+#NET  "heartbeat"                LOC = "AC24";   # ML605 GPIO LED 1
+#NET  "pll_lock"                 LOC = "AC22" ;  # ML605 GPIO LED 0
+
+
+NET "address(0)"                      LOC = "AL8";    ## 29 on U4, A1 on U27
+NET "address(1)"                      LOC = "AK8";    ## 25 on U4, B1 on U27
+NET "address(2)"                      LOC = "AC9";    ## 24 on U4, C1 on U27
+NET "address(3)"                      LOC = "AD10";   ## 23 on U4, D1 on U27
+NET "address(4)"                      LOC = "C8";     ## 22 on U4, D2 on U27
+NET "address(5)"                      LOC = "B8";     ## 21 on U4, A2 on U27
+NET "address(6)"                      LOC = "E9";     ## 20 on U4, C2 on U27
+NET "address(7)"                      LOC = "E8";     ## 19 on U4, A3 on U27
+NET "address(8)"                      LOC = "A8";     ## 8  on U4, B3 on U27
+NET "address(9)"                      LOC = "A9";     ## 7  on U4, C3 on U27
+NET "address(10)"                     LOC = "D9";     ## 6  on U4, D3 on U27
+NET "address(11)"                     LOC = "C9";     ## 5  on U4, C4 on U27
+NET "address(12)"                     LOC = "D10";    ## 4  on U4, A5 on U27
+NET "address(13)"                     LOC = "C10";    ## 3  on U4, B5 on U27
+NET "address(14)"                     LOC = "F10";    ## 2  on U4, C5 on U27
+NET "address(15)"                     LOC = "F9";     ## 1  on U4, D7 on U27
+NET "address(16)"                     LOC = "AH8";    ## 55 on U4, D8 on U27
+NET "address(17)"                     LOC = "AG8";    ## 18 on U4, A7 on U27
+NET "address(18)"                     LOC = "AP9";    ## 17 on U4, B7 on U27
+NET "address(19)"                     LOC = "AN9";    ## 16 on U4, C7 on U27
+NET "address(20)"                     LOC = "AF10";   ## 11 on U4, C8 on U27
+NET "address(21)"                     LOC = "AF9";    ## 10 on U4, A8 on U27
+NET "address(22)"                     LOC = "AL9";    ## 9  on U4, G1 on U27
+NET "address(23)"                     LOC = "AA23";   ## 26 on U4
+NET "data(0)"                      LOC = "AF24";   ## 34 on U4, F2 on U27
+NET "data(1)"                      LOC = "AF25";   ## 36 on U4, E2 on U27
+NET "data(2)"                      LOC = "W24";    ## 39 on U4, G3 on U27
+NET "data(3)"                      LOC = "V24";    ## 41 on U4, E4 on U27
+NET "data(4)"                      LOC = "H24";    ## 47 on U4, E5 on U27
+NET "data(5)"                      LOC = "H25";    ## 49 on U4, G5 on U27
+NET "data(6)"                      LOC = "P24";    ## 51 on U4, G6 on U27
+NET "data(7)"                      LOC = "R24";    ## 53 on U4, H7 on U27
+NET "data(8)"                      LOC = "G23";    ## 35 on U4, E1 on U27
+NET "data(9)"                      LOC = "H23";    ## 37 on U4, E3 on U27
+NET "data(10)"                     LOC = "N24";    ## 40 on U4, F3 on U27
+NET "data(11)"                     LOC = "N23";    ## 42 on U4, F4 on U27
+NET "data(12)"                     LOC = "F23";    ## 48 on U4, F5 on U27
+NET "data(13)"                     LOC = "F24";    ## 50 on U4, H5 on U27
+NET "data(14)"                     LOC = "L24";    ## 52 on U4, G7 on U27
+NET "data(15)"                     LOC = "M23";    ## 54 on U4, E7 on U27
+#NET "FLASH_WAIT"                    LOC = "J26";    ## 56 on U4
+NET "writen"                    LOC = "AF23";   ## 14 on U4, G8 on U27
+NET "oen"                    LOC = "AA24";   ## 32 on U4, F8 on U27
+#NET "FPGA_CCLK"                     LOC = "K8";     ##           F1 on U27
+NET "alatch"                 LOC = "AC23";   ##           H1 on U27
+NET "romsn"                    LOC = "Y24";    ## 30 on U4, B4 on U27 (U10 and switch S2.2 setting select either U4 or U27)
+##
+
+NET "erx_col"                       LOC = "AK13";   ## 114 on U80
+NET "erx_crs"                       LOC = "AL13";   ## 115 on U80
+NET "emdint"                       LOC = "AH14";   ## 32  on U80
+NET "emdc"                       LOC = "AP14";   ## 35  on U80
+NET "emdio"                      LOC = "AN14";   ## 33  on U80
+NET "erstn"                     LOC = "AH13";   ## 36  on U80
+NET "erx_clk"                     LOC = "AP11";   ## 7   on U80
+NET "erx_dv"                LOC = "AM13";   ## 4   on U80
+NET "erxd(0)"                      LOC = "AN13";   ## 3   on U80
+NET "erxd(1)"                      LOC = "AF14";   ## 128 on U80
+NET "erxd(2)"                      LOC = "AE14";   ## 126 on U80
+NET "erxd(3)"                      LOC = "AN12";   ## 125 on U80
+NET "erxd(4)"                      LOC = "AM12";   ## 124 on U80
+NET "erxd(5)"                      LOC = "AD11";   ## 123 on U80
+NET "erxd(6)"                      LOC = "AC12";   ## 121 on U80
+NET "erxd(7)"                      LOC = "AC13";   ## 120 on U80
+NET "erx_er"                      LOC = "AG12";   ## 9   on U80
+NET "etx_clk"                     LOC = "AD12";   ## 10  on U80
+NET "etx_en"                LOC = "AJ10";   ## 16  on U80
+NET "egtx_clk"                LOC = "AH12";   ## 14  on U80
+NET "etxd(0)"                      LOC = "AM11";   ## 18  on U80
+NET "etxd(1)"                      LOC = "AL11";   ## 19  on U80
+NET "etxd(2)"                      LOC = "AG10";   ## 20  on U80
+NET "etxd(3)"                      LOC = "AG11";   ## 24  on U80
+NET "etxd(4)"                      LOC = "AL10";   ## 25  on U80
+NET "etxd(5)"                      LOC = "AM10";   ## 26  on U80
+NET "etxd(6)"                      LOC = "AE11";   ## 28  on U80
+NET "etxd(7)"                      LOC = "AF11";   ## 29  on U80
+NET "etx_er"                      LOC = "AH10";   ## 13  on U80
+
+NET "dsurx"                      LOC = "J24";    ## 24  on U34
+NET "dsutx"                      LOC = "J25";    ## 25  on U34
+
+#NET "GPIO_DIP_SW1"                  LOC = "D22";    ## 1   on SW1 DIP switch (active-high)
+#NET "GPIO_DIP_SW2"                  LOC = "C22";    ## 2   on SW1 DIP switch (active-high)
+#NET "GPIO_DIP_SW3"                  LOC = "L21";    ## 3   on SW1 DIP switch (active-high)
+#NET "GPIO_DIP_SW4"                  LOC = "L20";    ## 4   on SW1 DIP switch (active-high)
+#NET "GPIO_DIP_SW5"                  LOC = "C18";    ## 5   on SW1 DIP switch (active-high)
+#NET "dsubre"                  LOC = "B18";    ## 6   on SW1 DIP switch (active-high)
+#NET "GPIO_DIP_SW7"                  LOC = "K22";    ## 7   on SW1 DIP switch (active-high)
+#NET "GPIO_DIP_SW8"                  LOC = "K21";    ## 8   on SW1 DIP switch (active-high)
+##
+
+# LCD display connector abused as GPIO.
+NET "gpio(0)"                    LOC = "T28";   ## RS
+NET "gpio(1)"                    LOC = "AC14";  ## RW
+NET "gpio(2)"                    LOC = "AK12";  ## E
+NET "gpio(3)"                    LOC = "AD14";  ## DB4
+NET "gpio(4)"                    LOC = "AK11";  ## DB5
+NET "gpio(5)"                    LOC = "AJ11";  ## DB6
+NET "gpio(6)"                    LOC = "AE12";  ## DB7
+NET "gpio(*)"                    IOSTANDARD = LVCMOS25;
+
+# LEDs.
+NET "led(0)"                    LOC = "AC22";   ## 1
+NET "led(1)"                    LOC = "AC24";   ## 2
+NET "led(2)"                    LOC = "AE22";   ## 3
+NET "led(3)"                    LOC = "AE23";   ## 4
+NET "led(4)"                    LOC = "AB23";   ## 5
+NET "led(5)"                    LOC = "AG23";   ## 6
+NET "led(6)"                    LOC = "AE24";   ## 7
+NET "led(7)"                    LOC = "AD24";   ## 8
+NET "led(8)"                    LOC = "AP24";   ## C
+NET "led(9)"                    LOC = "AD21";   ## W
+NET "led(10)"                   LOC = "AE21";   ## E
+NET "led(11)"                   LOC = "AH28";   ## S
+NET "led(12)"                   LOC = "AH27";   ## N
+NET "led(*)"                    IOSTANDARD = LVCMOS25;
+
+# GPIO switches.
+NET "dipsw(0)"                   LOC = "D22";   ## 1
+NET "dipsw(1)"                   LOC = "C22";   ## 2
+NET "dipsw(2)"                   LOC = "L21";   ## 3
+NET "dipsw(3)"                   LOC = "L20";   ## 4
+NET "dipsw(4)"                   LOC = "C18";   ## 5
+NET "dipsw(5)"                   LOC = "B18";   ## 6
+NET "dipsw(7)"                   LOC = "K22";   ## 7
+NET "dipsw(8)"                   LOC = "K21";   ## 8
+NET "dipsw(*)"                   IOSTANDARD = LVCMOS15;
+
+# Pushbuttons (except reset).
+NET "pbtn(0)"                    LOC = "G26";   ## C
+NET "pbtn(1)"                    LOC = "H17";   ## W
+NET "pbtn(2)"                    LOC = "G17";   ## E
+NET "pbtn(3)"                    LOC = "A18";   ## S
+NET "pbtn(4)"                    LOC = "A19";   ## N
+NET "pbtn(*)"                    IOSTANDARD = LVCMOS15;
+
+NET "dvi_iic_scl"                   LOC = "AN10";   ## 2   on Q5, 15 on U38
+NET "iic_scl_main"               LOC = "AK9";    ## 2   on Q19
+#NET "IIC_SCL_SFP"                   LOC = "AA34";   ## 2   on Q23
+NET "dvi_iic_sda"                   LOC = "AP10";   ## 2   on Q6, 14 on U38
+NET "iic_sda_main"               LOC = "AE9";    ## 2   on Q20
+#NET "IIC_SDA_SFP"                   LOC = "AA33";   ## 2   on Q21
+
+NET "tft_lcd_data(0)"                        LOC = "AJ19";   ## 63 on U38 (thru series R111 47.5 ohm)
+NET "tft_lcd_data(1)"                        LOC = "AH19";   ## 62 on U38 (thru series R110 47.5 ohm)
+NET "tft_lcd_data(2)"                        LOC = "AM17";   ## 61 on U38 (thru series R109 47.5 ohm)
+NET "tft_lcd_data(3)"                        LOC = "AM16";   ## 60 on U38 (thru series R108 47.5 ohm)
+NET "tft_lcd_data(4)"                        LOC = "AD17";   ## 59 on U38 (thru series R107 47.5 ohm)
+NET "tft_lcd_data(5)"                        LOC = "AE17";   ## 58 on U38 (thru series R106 47.5 ohm)
+NET "tft_lcd_data(6)"                        LOC = "AK18";   ## 55 on U38 (thru series R105 47.5 ohm)
+NET "tft_lcd_data(7)"                        LOC = "AK17";   ## 54 on U38 (thru series R104 47.5 ohm)
+NET "tft_lcd_data(8)"                        LOC = "AE18";   ## 53 on U38 (thru series R103 47.5 ohm)
+NET "tft_lcd_data(9)"                        LOC = "AF18";   ## 52 on U38 (thru series R102 47.5 ohm)
+NET "tft_lcd_data(10)"                       LOC = "AL16";   ## 51 on U38 (thru series R101 47.5 ohm)
+NET "tft_lcd_data(11)"                       LOC = "AK16";   ## 50 on U38 (thru series R100 47.5 ohm)
+NET "tft_lcd_de"                        LOC = "AD16";   ## 2  on U38 (thru series R112 47.5 ohm)
+#NET "DVI_GPIO1_FMC_C2M_PG_LS"       LOC = "K9";     ## 18 on U32 (not wired to U38)
+NET "tft_lcd_hsync"                         LOC = "AN17";   ## 4  on U38 (thru series R113 47.5 ohm)
+NET "tft_lcd_reset_b"                LOC = "AP17";   ## 2  on U32 (DVI_RESET_B pin 13 on U38)
+NET "tft_lcd_vsync"                         LOC = "AD15";   ## 5  on U38 (thru series R114 47.5 ohm)
+NET "tft_lcd_clk_n"                    LOC = "AC17";   ## 56 on U38
+NET "tft_lcd_clk_p"                    LOC = "AC18";   ## 57 on U38
+
+#NET "SYSACE_CFGTDI"                 LOC = "AC8";    ## 81  on U19
+NET "sysace_d(0)"                     LOC = "AM15";   ## 66  on U19
+NET "sysace_d(1)"                     LOC = "AJ17";   ## 65  on U19
+NET "sysace_d(2)"                     LOC = "AJ16";   ## 63  on U19
+NET "sysace_d(3)"                     LOC = "AP16";   ## 62  on U19
+NET "sysace_d(4)"                     LOC = "AG16";   ## 61  on U19
+NET "sysace_d(5)"                     LOC = "AH15";   ## 60  on U19
+NET "sysace_d(6)"                     LOC = "AF16";   ## 59  on U19
+NET "sysace_d(7)"                     LOC = "AN15";   ## 58  on U19
+NET "sysace_mpa(0)"                  LOC = "AC15";   ## 70  on U19
+NET "sysace_mpa(1)"                  LOC = "AP15";   ## 69  on U19
+NET "sysace_mpa(2)"                  LOC = "AG17";   ## 68  on U19
+NET "sysace_mpa(3)"                  LOC = "AH17";   ## 67  on U19
+NET "sysace_mpa(4)"                  LOC = "AG15";   ## 45  on U19
+NET "sysace_mpa(5)"                  LOC = "AF15";   ## 44  on U19
+NET "sysace_mpa(6)"                  LOC = "AK14";   ## 43  on U19
+#NET "SYSACE_MPBRDY"                 LOC = "AJ15";   ## 39  on U19
+NET "sysace_mpce"                   LOC = "AJ14";   ## 42  on U19
+NET "sysace_mpirq"                  LOC = "L9";     ## 41  on U19
+NET "sysace_mpoe"                   LOC = "AL15";   ## 77  on U19
+NET "sysace_mpwe"                   LOC = "AL14";   ## 76  on U19
+NET "clk_33"              LOC = "AE16";   ## 93  on U19
 NET "clk_33" PERIOD = 30.000 ;
 OFFSET = IN : 20.000 : BEFORE clk_33 ;
 OFFSET = OUT : 20.000 : AFTER clk_33 ;
@@ -585,29 +620,89 @@ OFFSET = OUT : 12.000 : AFTER gmiiclk_p;
 
 INST "uddr3ctrl/_infrastructure/u_mmcm_adv"      LOC = "MMCM_ADV_X0Y8"; #Banks 16, 26, 36
 
-# Constrain BUFR clocks used to synchronize data from IOB to fabric logic
-# Note that ISE cannot infer this from other PERIOD constraints because
-# of the use of OSERDES blocks in the BUFR clock generation path
-NET "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/clk_rsync[?]" TNM_NET = TNM_clk_rsync_xst;
-TIMESPEC "TS_clk_rsync_xst" = PERIOD "TNM_clk_rsync_xst" 5 ns;
-
-# Paths between DQ/DQS ISERDES.Q outputs and CLB flops clocked by falling 
-# edge of BUFR will by design only be used if DYNCLKDIVSEL is asserted for 
-# that particular flop. Mark this path as being a full-cycle, rather than 
-# a half cycle path for timing purposes. NOTE: This constraint forces full-
-# cycle timing to be applied globally for all rising->falling edge paths 
-# in all resynchronizaton clock domains. If the user had modified the logic
-# in the resync clock domain such that other rising->falling edge paths 
-# exist, then constraint below should be modified to utilize pattern 
-# matching to specific affect only the DQ/DQS ISERDES.Q outputs
-TIMEGRP "TG_clk_rsync_rise_xst" = RISING  "TNM_clk_rsync_xst";
-TIMEGRP "TG_clk_rsync_fall_xst" = FALLING "TNM_clk_rsync_xst";
-TIMESPEC "TS_clk_rsync_rise_to_fall_xst" = 
-  FROM "TG_clk_rsync_rise_xst" TO "TG_clk_rsync_fall_xst" "TS_sys_clk" * 2;
-
-# Signal to select between controller and physical layer signals. Four divided by two clock
-# cycles (8 memory clock cycles) are provided by design for the signal to settle down.
-# Used only by the phy modules.
-#INST "u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_init/u_ff_phy_init_data_sel" TNM = "TNM_PHY_INIT_SEL";
-#TIMESPEC "TS_MC_PHY_INIT_SEL" = FROM "TNM_PHY_INIT_SEL" TO FFS = 10 ns;  ## = "2.5ns * 4" ML605 single clock
+# Constrain BUFR clocks used to synchronize data from IOB to fabric logic
+# Note that ISE cannot infer this from other PERIOD constraints because
+# of the use of OSERDES blocks in the BUFR clock generation path
+NET "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/clk_rsync[?]" TNM_NET = TNM_clk_rsync_xst;
+TIMESPEC "TS_clk_rsync_xst" = PERIOD "TNM_clk_rsync_xst" 5 ns;
+
+# Paths between DQ/DQS ISERDES.Q outputs and CLB flops clocked by falling 
+# edge of BUFR will by design only be used if DYNCLKDIVSEL is asserted for 
+# that particular flop. Mark this path as being a full-cycle, rather than 
+# a half cycle path for timing purposes. NOTE: This constraint forces full-
+# cycle timing to be applied globally for all rising->falling edge paths 
+# in all resynchronizaton clock domains. If the user had modified the logic
+# in the resync clock domain such that other rising->falling edge paths 
+# exist, then constraint below should be modified to utilize pattern 
+# matching to specific affect only the DQ/DQS ISERDES.Q outputs
+TIMEGRP "TG_clk_rsync_rise_xst" = RISING  "TNM_clk_rsync_xst";
+TIMEGRP "TG_clk_rsync_fall_xst" = FALLING "TNM_clk_rsync_xst";
+TIMESPEC "TS_clk_rsync_rise_to_fall_xst" = 
+  FROM "TG_clk_rsync_rise_xst" TO "TG_clk_rsync_fall_xst" "TS_sys_clk" * 2;
+
+# Signal to select between controller and physical layer signals. Four divided by two clock
+# cycles (8 memory clock cycles) are provided by design for the signal to settle down.
+# Used only by the phy modules.
+#INST "u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_init/u_ff_phy_init_data_sel" TNM = "TNM_PHY_INIT_SEL";
+#TIMESPEC "TS_MC_PHY_INIT_SEL" = FROM "TNM_PHY_INIT_SEL" TO FFS = 10 ns;  ## = "2.5ns * 4" ML605 single clock
+
+
+
+######################################################################################
+## DDR-PHY TIMEOUT BLOCK CONSTRAINTS                                                ##
+######################################################################################
+
+# Ignore timing on the following two signals. They cross clock domains, but are
+# treated as "external" asynchronous signals, so their timing is irrelevant.
+NET "reset_block/lockTimeoutRst" TIG;
+NET "reset_block/lockTimeout" TIG;
+
+
+
+######################################################################################
+## PCI-express signals (copied from reference project)                              ##
+######################################################################################
+#------------------------
+# Clock and Reset Pinout
+#------------------------
+NET "pcie_ref_clk" TNM_NET = "SYSCLK" ;
+NET "*/pcie_clocking_i/clk_125" TNM_NET = "CLK_125" ;
+NET "*/TxOutClk_bufg" TNM_NET = "TXOUTCLKBUFG";
+
+TIMESPEC "TS_SYSCLK"  = PERIOD "SYSCLK" 250.00 MHz HIGH 50 % ;
+TIMESPEC "TS_CLK_125" = PERIOD "CLK_125" TS_SYSCLK*0.5 HIGH 50 %; # PRIORITY 100 ;
+TIMESPEC "TS_TXOUTCLKBUFG"  = PERIOD "TXOUTCLKBUFG" 250 MHz HIGH 50 %; # PRIORITY 100 ;
+
+NET "sys_reset_n" TIG;
+PIN "*/trn_reset_n_int_i.CLR" TIG ;
+PIN "*/trn_reset_n_i.CLR" TIG ;
+PIN "*/pcie_clocking_i/mmcm_adv_i.RST" TIG ;
+
+#TIMESPEC "TS_TRNLNKUPN" = FROM FFS(*) TO FFS(trn_lnk_up_n_int_i) 4 ns;
+#TIMESPEC "TS_RESETN" = FROM FFS(*) TO FFS(trn_reset_n_i) 4 ns;
+TIMESPEC "TS_RESETN" = FROM FFS(*) TO FFS(user_reset) 8 ns;
+
+
+#-----------------------------------
+# PCIe Transceiver & Core Locations
+#-----------------------------------
+
+# PCIe Block Placement
+INST "*/pcie_2_0_i/pcie_block_i" LOC = PCIE_X0Y1;
+
+INST "*/pcie_2_0_i/pcie_gt_i/gtx_v6_i/no_of_lanes.GTXD[0].GTX" LOC = GTXE1_X0Y15;
+INST "*/pcie_2_0_i/pcie_gt_i/gtx_v6_i/no_of_lanes.GTXD[1].GTX" LOC = GTXE1_X0Y14;
+INST "*/pcie_2_0_i/pcie_gt_i/gtx_v6_i/no_of_lanes.GTXD[2].GTX" LOC = GTXE1_X0Y13;
+INST "*/pcie_2_0_i/pcie_gt_i/gtx_v6_i/no_of_lanes.GTXD[3].GTX" LOC = GTXE1_X0Y12;
+
+#------------------------
+# Clock and Reset Pinout
+#------------------------
+
+NET  sys_reset_n           LOC  = AE13 | IOSTANDARD = LVCMOS25 | NODELAY;
+
+# 250 MHz Reference Clock
+INST "pcie_refclk_ibuf" LOC = IBUFDS_GTXE1_X0Y4; # Implies pinout
 
+# MMCM Placment. This constraint selects the MMCM Placement
+INST "*/pcie_clocking_i/mmcm_adv_i" LOC = MMCM_ADV_X0Y7;
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3mp.vhd work/leon3mp.vhd
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3mp.vhd	2014-04-16 16:51:31.000000000 +0200
+++ work/leon3mp.vhd	2019-12-29 15:59:50.112753943 +0100
@@ -18,7 +18,7 @@
 --
 --  You should have received a copy of the GNU General Public License
 --  along with this program; if not, write to the Free Software
---  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA 
+--  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
 ------------------------------------------------------------------------------
 
 library ieee;
@@ -45,808 +45,1014 @@ library esa;
 use esa.memoryctrl.all;
 use work.config.all;
 use work.ml605.all;
-use work.pcie.all;
 -- pragma translate_off
 use gaisler.sim.all;
 -- pragma translate_on
+library rvex;
+use rvex.common_pkg.all;
+use rvex.bus_pkg.all;
+use rvex.bus_addrConv_pkg.all;
+use rvex.core_pkg.all;
+use rvex.cache_pkg.all;
+use rvex.rvsys_grlib_pkg.all;
+-- pragma translate_off
+use rvex.utils_pkg.all;
+use rvex.simUtils_pkg.all;
+use rvex.simUtils_mem_pkg.all;
+-- pragma translate_on
+library unisim;
+use unisim.vcomponents.all;
+library work;
+use work.platform_version_pkg.all;
 
 entity leon3mp is
   generic (
     fabtech  : integer := CFG_FABTECH;
     memtech  : integer := CFG_MEMTECH;
     padtech  : integer := CFG_PADTECH;
-    disas    : integer := CFG_DISAS;     -- Enable disassembly to console
-    dbguart  : integer := CFG_DUART;     -- Print UART on console
-    pclow    : integer := CFG_PCLOW;
-    SIM_BYPASS_INIT_CAL : string := "OFF"
-    );
+    SIM_BYPASS_INIT_CAL : string := "OFF";
+    DISABLE_DDR_SIM : boolean := false
+  );
   port (
-    reset     : in    std_ulogic;
-    errorn    : out   std_ulogic;
-    clk_ref_p     : in    std_logic;
-    clk_ref_n     : in    std_logic;
-
-    -- PROM interface
-    address   : out   std_logic_vector(23 downto 0);
-    data      : inout std_logic_vector(15 downto 0);
-    romsn     : out   std_ulogic;
-    oen       : out   std_ulogic;
-    writen    : out   std_ulogic;
-    alatch    : out   std_ulogic;
-
-    -- DDR3 memory
-    ddr3_dq       : inout std_logic_vector(DQ_WIDTH-1 downto 0);
-    ddr3_dm       : out   std_logic_vector(DM_WIDTH-1 downto 0);
-    ddr3_addr     : out   std_logic_vector(ROW_WIDTH-1 downto 0);
-    ddr3_ba       : out   std_logic_vector(BANK_WIDTH-1 downto 0);
-    ddr3_ras_n    : out   std_logic;
-    ddr3_cas_n    : out   std_logic;
-    ddr3_we_n     : out   std_logic;
-    ddr3_reset_n  : out   std_logic;
-    ddr3_cs_n     : out   std_logic_vector((CS_WIDTH*nCS_PER_RANK)-1 downto 0);
-    ddr3_odt      : out   std_logic_vector((CS_WIDTH*nCS_PER_RANK)-1 downto 0);
-    ddr3_cke      : out   std_logic_vector(CKE_WIDTH-1 downto 0);
-    ddr3_dqs_p    : inout std_logic_vector(DQS_WIDTH-1 downto 0);
-    ddr3_dqs_n    : inout std_logic_vector(DQS_WIDTH-1 downto 0);
-    ddr3_ck_p     : out   std_logic_vector(CK_WIDTH-1 downto 0);
-    ddr3_ck_n     : out   std_logic_vector(CK_WIDTH-1 downto 0);
-
-    -- Debug support unit
-    dsubre    : in    std_ulogic;       -- Debug Unit break (connect to button)
-
-    -- AHB Uart
-    dsurx     : in    std_ulogic;
-    dsutx     : out   std_ulogic;
-
-    -- Ethernet signals
-    gmiiclk_p : in    std_ulogic;
-    gmiiclk_n : in    std_ulogic;
-    egtx_clk  : out   std_ulogic;
-    etx_clk   : in    std_ulogic;
-    erx_clk   : in    std_ulogic;
-    erxd      : in    std_logic_vector(7 downto 0);
-    erx_dv    : in    std_ulogic;
-    erx_er    : in    std_ulogic;
-    erx_col   : in    std_ulogic;
-    erx_crs   : in    std_ulogic;
-    emdint    : in std_ulogic;
-    etxd      : out   std_logic_vector(7 downto 0);
-    etx_en    : out   std_ulogic;
-    etx_er    : out   std_ulogic;
-    emdc      : out   std_ulogic;
-    emdio     : inout std_logic;
-    erstn     : out   std_ulogic;
-
-    iic_scl_main    : inout std_ulogic;
-    iic_sda_main    : inout std_ulogic;
-
-    dvi_iic_scl     : inout std_logic;
-    dvi_iic_sda     : inout std_logic;
-
-    tft_lcd_data    : out std_logic_vector(11 downto 0);
-    tft_lcd_clk_p   : out std_ulogic;
-    tft_lcd_clk_n   : out std_ulogic;
-    tft_lcd_hsync   : out std_ulogic;
-    tft_lcd_vsync   : out std_ulogic;
-    tft_lcd_de      : out std_ulogic;
-    tft_lcd_reset_b : out std_ulogic;
-
-    clk_33          : in  std_ulogic;	-- SYSACE clock
-    sysace_mpa      : out std_logic_vector(6 downto 0);
-    sysace_mpce     : out std_ulogic;
-    sysace_mpirq    : in  std_ulogic;
-    sysace_mpoe     : out std_ulogic;
-    sysace_mpwe     : out std_ulogic;
-    sysace_d        : inout std_logic_vector(7 downto 0);
-
-    pci_exp_txp : out std_logic_vector(CFG_NO_OF_LANES-1 downto 0);
-    pci_exp_txn : out std_logic_vector(CFG_NO_OF_LANES-1 downto 0);
-    pci_exp_rxp : in std_logic_vector(CFG_NO_OF_LANES-1 downto 0);
-    pci_exp_rxn : in std_logic_vector(CFG_NO_OF_LANES-1 downto 0);
-
-    sys_clk_p   : in  std_logic;
-    sys_clk_n   : in  std_logic;
-    sys_reset_n : in  std_logic;
-
-
-    -- Output signals to LEDs
-    led       : out   std_logic_vector(6 downto 0)
-    );
+    
+    -- System control.
+    reset                       : in    std_ulogic;
+    clk_ref_p                   : in    std_logic; -- 200 MHz.
+    clk_ref_n                   : in    std_logic;
+    gmiiclk_p                   : in    std_ulogic; -- 125 MHz.
+    gmiiclk_n                   : in    std_ulogic;
+    clk_33                      : in    std_ulogic; -- 33 MHz.
+    
+    -- DDR3 memory.
+    ddr3_dq                     : inout std_logic_vector(DQ_WIDTH-1 downto 0);
+    ddr3_dm                     : out   std_logic_vector(DM_WIDTH-1 downto 0);
+    ddr3_addr                   : out   std_logic_vector(ROW_WIDTH-1 downto 0);
+    ddr3_ba                     : out   std_logic_vector(BANK_WIDTH-1 downto 0);
+    ddr3_ras_n                  : out   std_logic;
+    ddr3_cas_n                  : out   std_logic;
+    ddr3_we_n                   : out   std_logic;
+    ddr3_reset_n                : out   std_logic;
+    ddr3_cs_n                   : out   std_logic_vector((CS_WIDTH*nCS_PER_RANK)-1 downto 0);
+    ddr3_odt                    : out   std_logic_vector((CS_WIDTH*nCS_PER_RANK)-1 downto 0);
+    ddr3_cke                    : out   std_logic_vector(CKE_WIDTH-1 downto 0);
+    ddr3_dqs_p                  : inout std_logic_vector(DQS_WIDTH-1 downto 0);
+    ddr3_dqs_n                  : inout std_logic_vector(DQS_WIDTH-1 downto 0);
+    ddr3_ck_p                   : out   std_logic_vector(CK_WIDTH-1 downto 0);
+    ddr3_ck_n                   : out   std_logic_vector(CK_WIDTH-1 downto 0);
+
+    -- Debug UART.
+    dsurx                       : in    std_ulogic;
+    dsutx                       : out   std_ulogic;
+    
+    -- GPIO.
+    led                         : inout std_logic_vector(12 downto 0) := (others => '0'); -- LEDs (1..8, CWESN)
+    dipsw                       : in    std_logic_vector(7 downto 0)  := (others => '0'); -- DIP switches (1..8)
+    pbtn                        : in    std_logic_vector(4 downto 0)  := (others => '0')  -- Pushbuttons (CWESN)
+    
+  );
 end;
 
 architecture rtl of leon3mp is
-
-  signal vcc : std_logic;
-  signal gnd : std_logic;
-
-  signal memi : memory_in_type;
-  signal memo : memory_out_type;
-  signal wpo  : wprot_out_type;
-
-  signal gpioi : gpio_in_type;
-  signal gpioo : gpio_out_type;
-
-  signal apbi  : apb_slv_in_type;
-  signal apbo  : apb_slv_out_vector := (others => apb_none);
-  signal ahbsi : ahb_slv_in_type;
-  signal ahbso : ahb_slv_out_vector := (others => ahbs_none);
-  signal ahbmi : ahb_mst_in_type;
-  signal ahbmo : ahb_mst_out_vector := (others => ahbm_none);
-
-  signal u1i, dui : uart_in_type;
-  signal u1o, duo : uart_out_type;
-
-  signal irqi : irq_in_vector(0 to CFG_NCPU-1);
-  signal irqo : irq_out_vector(0 to CFG_NCPU-1);
-
-  signal dbgi : l3_debug_in_vector(0 to CFG_NCPU-1);
-  signal dbgo : l3_debug_out_vector(0 to CFG_NCPU-1);
-
-  signal dsui : dsu_in_type;
-  signal dsuo : dsu_out_type;
-
-  signal fpi : grfpu_in_vector_type;
-  signal fpo : grfpu_out_vector_type;
-
-  signal ethi : eth_in_type;
-  signal etho : eth_out_type;
-
-  signal gpti : gptimer_in_type;
-
-  signal lclk, clk_ddr, lclk200      : std_ulogic;
-  signal clkm, rstn, clkml  : std_ulogic;
-  signal tck, tms, tdi, tdo : std_ulogic;
-  signal rstraw             : std_logic;
-  signal lock               : std_logic;
-
-  signal tb_rst        : std_logic;
-  signal tb_clk        : std_logic;
-  signal phy_init_done : std_logic;
-  signal lerrorn        : std_logic;
-
-  -- RS232 APB Uart
-  signal rxd1 : std_logic;
-  signal txd1 : std_logic;
-
--- VGA
-  signal vgao  : apbvga_out_type;
-  signal lcd_datal : std_logic_vector(11 downto 0);
-  signal lcd_hsyncl, lcd_vsyncl, lcd_del, lcd_reset_bl : std_ulogic;
-  signal clk_sel : std_logic_vector(1 downto 0);
-  signal clk100 : std_ulogic;
-  signal clkvga, clkvga_p, clkvga_n : std_ulogic;
-
--- IIC
-
-  signal i2ci, dvi_i2ci : i2c_in_type;
-  signal i2co, dvi_i2co : i2c_out_type;
-
--- SYSACE
-  signal clkace : std_ulogic;
-  signal acei   : gracectrl_in_type;
-  signal aceo   : gracectrl_out_type;
-
-  -- Used for connecting input/output signals to the DDR3 controller
-  signal migi		: mig_app_in_type;
-  signal migo		: mig_app_out_type;
-
-  attribute keep                     : boolean;
-  attribute syn_keep                 : boolean;
-  attribute syn_preserve             : boolean;
-  attribute syn_keep of lock         : signal is true;
-  attribute syn_keep of clk_ddr        : signal is true;
-  attribute syn_keep of clkm         : signal is true;
-  attribute syn_preserve of clkm     : signal is true;
-  attribute syn_preserve of clk_ddr     : signal is true;
-  attribute keep of lock             : signal is true;
-  attribute keep of clkm             : signal is true;
-  attribute keep of clk_ddr             : signal is true;
-
-  constant VCO_FREQ  : integer := 1200000;                               -- MMCM VCO frequency in KHz
-  constant CPU_FREQ   : integer := VCO_FREQ / CFG_MIG_CLK4;  -- cpu frequency in KHz
-  constant I2C_FILTER : integer := (CPU_FREQ*5+50000)/100000+1;
-
+  
+  -- Attribute declarations.
+  attribute keep                  : boolean;
+  attribute syn_keep              : boolean;
+  attribute syn_preserve          : boolean;
+  
+  -- Clocks.
+  constant VCO_FREQ               : integer := 1200000; -- MMCM VCO frequency in KHz
+  
+  signal clk125                   : std_ulogic; -- 125 MHz from ethernet osc.
+  signal clk100                   : std_ulogic; -- 100 MHz clock generated by the MIG.
+  signal clk33                    : std_ulogic; -- 33 MHz from sysACE osc.
+  
+  signal clkm                     : std_ulogic;
+  attribute syn_keep       of clkm: signal is true;
+  attribute syn_preserve   of clkm: signal is true;
+  attribute keep           of clkm: signal is true;
+  constant CLKM_FREQ              : integer := VCO_FREQ / CFG_MIG_CLK4;
+  
+  -- PPL lock/reset bullshit.
+  signal rstn                     : std_ulogic;
+  signal rstraw                   : std_logic;
+  signal lock                     : std_logic;
+  attribute syn_keep       of lock: signal is true;
+  attribute keep           of lock: signal is true;
+  
+  -- Memory controller stuff.
+  signal migi		                  : mig_app_in_type;
+  signal migo		                  : mig_app_out_type;
+  signal clkddr                   : std_ulogic;
+  attribute syn_keep     of clkddr: signal is true;
+  attribute syn_preserve of clkddr: signal is true;
+  attribute keep         of clkddr: signal is true;
+  signal phy_init_done            : std_logic;
+
+  -- AHB/APB/r-VEX bus.
+  constant N_RVB_SLAVES           : integer := CFG_NRVEX + 3;
+  signal apbi                     : apb_slv_in_type;
+  signal apbo                     : apb_slv_out_vector := (others => apb_none);
+  signal ahbsi                    : ahb_slv_in_type;
+  signal ahbso                    : ahb_slv_out_vector := (others => ahbs_none);
+  signal ahbmi                    : ahb_mst_in_type;
+  signal ahbmo                    : ahb_mst_out_vector := (others => ahbm_none);
+  signal rvbmo                    : bus_mst2slv_type;
+  signal rvbmi                    : bus_slv2mst_type;
+  signal rvbsi                    : bus_mst2slv_array(0 to N_RVB_SLAVES - 1);
+  signal rvbso                    : bus_slv2mst_array(0 to N_RVB_SLAVES - 1);
+  
+  -- Interrupt requests.
+  constant NIRQ                   : natural := 2;
+  signal irq                      : std_logic_vector(NIRQ downto 1) := (others => '0');
+  
+  -- Interrupt control/r-VEX interface signals.
+  signal irq2rv_irq               : std_logic_vector(CFG_NCTXT-1 downto 0);
+  signal irq2rv_irqID             : rvex_address_array(CFG_NCTXT-1 downto 0);
+  signal rv2irq_irqAck            : std_logic_vector(CFG_NCTXT-1 downto 0);
+  signal busy2rv_run              : std_logic_vector(CFG_NCTXT-1 downto 0);
+  signal irq2busy_run             : std_logic_vector(CFG_NCTXT-1 downto 0);
+  signal rv2irq_idle              : std_logic_vector(CFG_NCTXT-1 downto 0);
+  signal rv2irq_break             : std_logic_vector(CFG_NCTXT-1 downto 0);
+  signal irq2rv_reset             : std_logic_vector(CFG_NCTXT-1 downto 0);
+  signal irq2rv_resetVect         : rvex_address_array(CFG_NCTXT-1 downto 0);
+  signal rv2irq_done              : std_logic_vector(CFG_NCTXT-1 downto 0);
+  
+  -- Trace stall broadcasting signals.
+  signal rv2rctrl_traceStall      : std_logic_vector(CFG_NRVEX-1 downto 0);
+  signal rctrl2any_traceStall     : std_logic;
+  
+  -- Misc.
+  signal dipsw_int                : std_logic_vector(7 downto 0);
+  
 begin
+  
+  ------------------------------------------------------------------------------
+  -- Clocking stuff
+  ------------------------------------------------------------------------------
+  
+  -- 125 MHz clock from the Ethernet oscillator.
+  gtxclk0 : entity work.gtxclk
+    port map (
+      clk_p   => gmiiclk_p,
+      clk_n   => gmiiclk_n,
+      clkint  => clk125,
+      clkout  => open
+    );
+  
+  -- 33 MHz clock from the system ACE oscillator.
+  clk_33_pad : clkpad
+    generic map (
+      level   => cmos,
+      voltage => x25v,
+      tech    => padtech
+    )
+    port map (
+      pad     => clk_33,
+      o       => clk33
+    );
+  
+  -- PLL lock signal.
+  lock <= phy_init_done;
+  led(1) <= phy_init_done;
+  
+  
+  ------------------------------------------------------------------------------
+  -- Reset stuff
+  ------------------------------------------------------------------------------
+  
+  reset_block: block is
 
-----------------------------------------------------------------------
----  Reset and Clock generation  -------------------------------------
-----------------------------------------------------------------------
-
-  vcc <= '1';
-  gnd <= '0';
-  alatch <= '0';
-  erstn <= rstn;
-
-  -- Glitch free reset that can be used for the Eth Phy and flash memory
-
-  rst0 : rstgen generic map (acthigh => 1)
-    port map (reset, clkm, lock, rstn, rstraw);
-
-----------------------------------------------------------------------
----  AHB CONTROLLER --------------------------------------------------
-----------------------------------------------------------------------
-
-  ahb0 : ahbctrl
-    generic map (defmast => CFG_DEFMST, split => CFG_SPLIT,
-                 rrobin  => CFG_RROBIN, ioaddr => CFG_AHBIO, ioen => 1,
-                 nahbm => CFG_NCPU+CFG_AHB_UART+CFG_AHB_JTAG+CFG_GRETH+CFG_SVGA_ENABLE+CFG_PCIEXP,
-                 nahbs => 9)
-    port map (rstn, clkm, ahbmi, ahbmo, ahbsi, ahbso);
-
-----------------------------------------------------------------------
----  LEON3 processor and DSU -----------------------------------------
-----------------------------------------------------------------------
-
-  -- LEON3 processor
-  nosh : if CFG_GRFPUSH = 0 generate
-    cpu : for i in 0 to CFG_NCPU-1 generate
-      l3ft : if CFG_LEON3FT_EN /= 0 generate
-        leon3ft0 : leon3ft		-- LEON3 processor
-        generic map (i, fabtech, memtech, CFG_NWIN, CFG_DSU, CFG_FPU*(1-CFG_GRFPUSH), CFG_V8,
-  	  0, CFG_MAC, pclow, CFG_NOTAG, CFG_NWP, CFG_ICEN, CFG_IREPL, CFG_ISETS, CFG_ILINE,
-	  CFG_ISETSZ, CFG_ILOCK, CFG_DCEN, CFG_DREPL, CFG_DSETS, CFG_DLINE, CFG_DSETSZ,
-	  CFG_DLOCK, CFG_DSNOOP, CFG_ILRAMEN, CFG_ILRAMSZ, CFG_ILRAMADDR, CFG_DLRAMEN,
-          CFG_DLRAMSZ, CFG_DLRAMADDR, CFG_MMUEN, CFG_ITLBNUM, CFG_DTLBNUM, CFG_TLB_TYPE, CFG_TLB_REP,
-          CFG_LDDEL, disas, CFG_ITBSZ, CFG_PWD, CFG_SVT, CFG_RSTADDR, CFG_NCPU-1,
-	  CFG_IUFT_EN, CFG_FPUFT_EN, CFG_CACHE_FT_EN, CFG_RF_ERRINJ,
-	  CFG_CACHE_ERRINJ, CFG_DFIXED, CFG_LEON3_NETLIST, CFG_SCAN, CFG_MMU_PAGE)
-        port map (clkm, rstn, ahbmi, ahbmo(i), ahbsi, ahbso,
-    		irqi(i), irqo(i), dbgi(i), dbgo(i), clkm);
-      end generate;
-
-      l3s : if CFG_LEON3FT_EN = 0 generate
-        u0 : leon3s 		-- LEON3 processor
-        generic map (i, fabtech, memtech, CFG_NWIN, CFG_DSU, CFG_FPU*(1-CFG_GRFPUSH), CFG_V8,
-	  0, CFG_MAC, pclow, CFG_NOTAG, CFG_NWP, CFG_ICEN, CFG_IREPL, CFG_ISETS, CFG_ILINE,
-	  CFG_ISETSZ, CFG_ILOCK, CFG_DCEN, CFG_DREPL, CFG_DSETS, CFG_DLINE, CFG_DSETSZ,
-	  CFG_DLOCK, CFG_DSNOOP, CFG_ILRAMEN, CFG_ILRAMSZ, CFG_ILRAMADDR, CFG_DLRAMEN,
-          CFG_DLRAMSZ, CFG_DLRAMADDR, CFG_MMUEN, CFG_ITLBNUM, CFG_DTLBNUM, CFG_TLB_TYPE, CFG_TLB_REP,
-          CFG_LDDEL, disas, CFG_ITBSZ, CFG_PWD, CFG_SVT, CFG_RSTADDR, CFG_NCPU-1,
-	  CFG_DFIXED, CFG_SCAN, CFG_MMU_PAGE)
-        port map (clkm, rstn, ahbmi, ahbmo(i), ahbsi, ahbso,
-    		irqi(i), irqo(i), dbgi(i), dbgo(i));
-      end generate;
-    end generate;
-  end generate;
-
-  sh : if CFG_GRFPUSH = 1 generate
-    cpu : for i in 0 to CFG_NCPU-1 generate
-      l3ft : if CFG_LEON3FT_EN /= 0 generate
-        leon3ft0 : leon3ftsh		-- LEON3 processor
-        generic map (i, fabtech, memtech, CFG_NWIN, CFG_DSU, CFG_FPU, CFG_V8,
-  	  0, CFG_MAC, pclow, CFG_NOTAG, CFG_NWP, CFG_ICEN, CFG_IREPL, CFG_ISETS, CFG_ILINE,
-	  CFG_ISETSZ, CFG_ILOCK, CFG_DCEN, CFG_DREPL, CFG_DSETS, CFG_DLINE, CFG_DSETSZ,
-	  CFG_DLOCK, CFG_DSNOOP, CFG_ILRAMEN, CFG_ILRAMSZ, CFG_ILRAMADDR, CFG_DLRAMEN,
-          CFG_DLRAMSZ, CFG_DLRAMADDR, CFG_MMUEN, CFG_ITLBNUM, CFG_DTLBNUM, CFG_TLB_TYPE, CFG_TLB_REP,
-          CFG_LDDEL, disas, CFG_ITBSZ, CFG_PWD, CFG_SVT, CFG_RSTADDR, CFG_NCPU-1,
-	  CFG_IUFT_EN, CFG_FPUFT_EN, CFG_CACHE_FT_EN, CFG_RF_ERRINJ,
-	  CFG_CACHE_ERRINJ, CFG_DFIXED, CFG_LEON3_NETLIST, CFG_SCAN, CFG_MMU_PAGE)
-        port map (clkm, rstn, ahbmi, ahbmo(i), ahbsi, ahbso,
-    		irqi(i), irqo(i), dbgi(i), dbgo(i), clkm,  fpi(i), fpo(i));
-
-      end generate;
-      l3s : if CFG_LEON3FT_EN = 0 generate
-        u0 : leon3sh 		-- LEON3 processor
-        generic map (i, fabtech, memtech, CFG_NWIN, CFG_DSU, CFG_FPU, CFG_V8,
-	  0, CFG_MAC, pclow, CFG_NOTAG, CFG_NWP, CFG_ICEN, CFG_IREPL, CFG_ISETS, CFG_ILINE,
-	  CFG_ISETSZ, CFG_ILOCK, CFG_DCEN, CFG_DREPL, CFG_DSETS, CFG_DLINE, CFG_DSETSZ,
-	  CFG_DLOCK, CFG_DSNOOP, CFG_ILRAMEN, CFG_ILRAMSZ, CFG_ILRAMADDR, CFG_DLRAMEN,
-          CFG_DLRAMSZ, CFG_DLRAMADDR, CFG_MMUEN, CFG_ITLBNUM, CFG_DTLBNUM, CFG_TLB_TYPE, CFG_TLB_REP,
-          CFG_LDDEL, disas, CFG_ITBSZ, CFG_PWD, CFG_SVT, CFG_RSTADDR, CFG_NCPU-1,
-	  CFG_DFIXED, CFG_SCAN, CFG_MMU_PAGE)
-        port map (clkm, rstn, ahbmi, ahbmo(i), ahbsi, ahbso,
-    		irqi(i), irqo(i), dbgi(i), dbgo(i), fpi(i), fpo(i));
-      end generate;
-    end generate;
-
-    grfpush0 : grfpushwx generic map ((CFG_FPU-1), CFG_NCPU, fabtech)
-    port map (clkm, rstn, fpi, fpo);
-
-  end generate;
-
-  lerrorn <= dbgo(0).error and rstn;
-  error_pad : odpad generic map (level => cmos, voltage => x25v, tech => padtech) port map (errorn, lerrorn);
-
-  dsugen : if CFG_DSU = 1 generate
-    -- LEON3 Debug Support Unit
-    dsugen : if CFG_DSU = 1 generate
-      dsu0 : dsu3
-        generic map (hindex => 2, haddr => 16#900#, hmask => 16#F00#,
-                     ncpu   => CFG_NCPU, tbits => 30, tech => memtech, irq => 0, kbytes => CFG_ATBSZ)
-        port map (rstn, clkm, ahbmi, ahbsi, ahbso(2), dbgo, dbgi, dsui, dsuo);
-
-      dsubre_pad : inpad generic map (level => cmos, voltage => x15v, tech  => padtech) port map (dsubre, dsui.break);
-
-      dsui.enable <= '1';
-      led(2) <= dsuo.active;
-    end generate;
-  end generate;
-  nodsu : if CFG_DSU = 0 generate
-    ahbso(2) <= ahbs_none; dsuo.tstop <= '0'; dsuo.active <= '0';
-  end generate;
-
-  -- Debug UART
-  dcomgen : if CFG_AHB_UART = 1 generate
-    dcom0 : ahbuart
-      generic map (hindex => CFG_NCPU, pindex => 4, paddr => 7)
-      port map (rstn, clkm, dui, duo, apbi, apbo(4), ahbmi, ahbmo(CFG_NCPU));
-    dsurx_pad : inpad generic map (level => cmos, voltage => x25v, tech  => padtech) port map (dsurx, dui.rxd);
-    dsutx_pad : outpad generic map (level => cmos, voltage => x25v, tech => padtech) port map (dsutx, duo.txd);
-    led(0) <= not dui.rxd;
-    led(1) <= not duo.txd;
-  end generate;
-  nouah : if CFG_AHB_UART = 0 generate apbo(4) <= apb_none; end generate;
-
-  ahbjtaggen0 :if CFG_AHB_JTAG = 1 generate
-    ahbjtag0 : ahbjtag generic map(tech => fabtech, hindex => CFG_NCPU+CFG_AHB_UART)
-      port map(rstn, clkm, tck, tms, tdi, tdo, ahbmi, ahbmo(CFG_NCPU+CFG_AHB_UART),
-               open, open, open, open, open, open, open, gnd);
-  end generate;
-
-----------------------------------------------------------------------
----  Memory controllers ----------------------------------------------
-----------------------------------------------------------------------
-
-  mg2 : if CFG_MCTRL_LEON2 = 1 generate        -- LEON2 memory controller
-    sr1 : mctrl generic map (hindex => 5, pindex => 0, paddr => 0,
-	ram8 => CFG_MCTRL_RAM8BIT, ram16 => CFG_MCTRL_RAM16BIT, iomask => 0, rammask => 0)
-      port map (rstn, clkm, memi, memo, ahbsi, ahbso(5), apbi, apbo(0), wpo, open);
-  end generate;
-
-  memi.brdyn  <= '1';
-  memi.bexcn  <= '1';
-  memi.writen <= '1';
-  memi.wrn    <= "1111";
-  memi.bwidth <= "01";
-
-  mg0 : if (CFG_MCTRL_LEON2 = 0) generate
-    apbo(0) <= apb_none;
-    ahbso(5) <= ahbs_none;
-    roms_pad : outpad generic map (level => cmos, voltage => x25v, tech => padtech)
-      port map (romsn, vcc);
-    memo.bdrive(0) <= '1';
-  end generate;
-
-  mgpads : if (CFG_MCTRL_LEON2 /= 0) generate
-    addr_pad : outpadv generic map (level => cmos, voltage => x25v, tech => padtech, width => 24)
-      port map (address, memo.address(24 downto 1));
-    roms_pad : outpad generic map (level => cmos, voltage => x25v, tech => padtech)
-      port map (romsn, memo.romsn(0));
-    oen_pad : outpad generic map (level => cmos, voltage => x25v, tech => padtech)
-      port map (oen, memo.oen);
-    wri_pad : outpad generic map (level => cmos, voltage => x25v, tech => padtech)
-      port map (writen, memo.writen);
-  end generate;
-
-  bdr : iopadvv generic map (level => cmos, voltage => x25v, tech => padtech, width => 16)
-    port map (data(15 downto 0), memo.data(31 downto 16),
-              memo.vbdrive(31 downto 16), memi.data(31 downto 16));
-
-----------------------------------------------------------------------
----  DDR3 memory controller ------------------------------------------
-----------------------------------------------------------------------
-
---  mig_gen : if (CFG_MIG_DDR2 = 1) generate
-
-    ahb2mig0 : ahb2mig_ml605
-      generic map ( hindex => 0, haddr => 16#400#, hmask => 16#E00#,
-    MHz => 400, Mbyte => 512, nosync => boolean'pos(CFG_MIG_CLK4=12)) --CFG_CLKDIV/12)
+    signal lockTimeoutRst   : std_logic;
+    signal lockTimeoutA     : unsigned(12 downto 0) := (others => '0');
+    signal lockTimeoutB     : unsigned(13 downto 0) := (others => '0');
+    signal lockTimeout      : std_logic;
+    signal resetOrTimeout   : std_logic;
+
+    -- lockTimeoutRst and lockTimeout cross two independent clock domains.
+    -- Their timing is completely irrelevant because they're treated as
+    -- asynchronous signals, so we need to disable timing checking for these
+    -- signals. To do that, we can't have them be optimized away, so we need
+    -- to attach the KEEP property to them. The actual TIG constraint has to
+    -- be placed in the UCF file.
+    attribute KEEP                    : string;
+    attribute KEEP of lockTimeoutRst  : signal is "TRUE";
+    attribute KEEP of lockTimeout     : signal is "TRUE";
+
+  begin
+
+    -- Generate reset signal for the clock lock/PHY init timeout.
+    lockTimeoutRst <= reset or lock;
+
+    -- Generate the lock/PHY timeout counters. Use the clkace 33 MHz clock
+    -- signal for this instead of clkm, because clkace always runs,
+    -- whereas clkm comes from an MMCM in the MIG, which is reset when
+    -- we generate a timeout.
+    lock_timeout_proc: process (clk33) is
+    begin
+      if rising_edge(clk33) then
+        if lockTimeoutRst = '1' then
+          lockTimeoutA  <= (others => '0');
+          lockTimeoutB  <= (others => '0');
+          lockTimeout   <= '0';
+        else
+          if lockTimeoutA(12) = '0' then
+            lockTimeoutA <= lockTimeoutA + 1;
+          else
+            lockTimeoutA <= (others => '0');
+            if lockTimeoutB(13) = '0' then
+              lockTimeoutB <= lockTimeoutB + 1;
+            else
+              lockTimeoutB <= (others => '0');
+            end if;
+          end if;
+          lockTimeout <= lockTimeoutB(12) and lockTimeoutB(11)
+                     and lockTimeoutB(10) and lockTimeoutB(9);
+        end if;
+      end if;
+    end process;
+
+    -- Combine the incoming reset signal with the lock timeout.
+    resetOrTimeout <= reset or lockTimeout;
+
+    -- Original reset generator.
+    rst0 : rstgen
+      generic map (
+        acthigh   => 1
+      )
       port map (
-    rst => rstn, clk_ahb => clkm, clk_ddr => clk_ddr,
-    ahbsi => ahbsi, ahbso => ahbso(0), migi => migi, migo => migo);
+        rstin     => resetOrTimeout,
+        clk       => clkm,
+        clklock   => lock,
+        rstout    => rstn,
+        rstoutraw => rstraw
+      );
 
-    ddr3ctrl : entity work.mig_37
-     generic map (SIM_BYPASS_INIT_CAL => SIM_BYPASS_INIT_CAL,CLKOUT_DIVIDE4 => work.config.CFG_MIG_CLK4)
-     port map(
-      clk_ref_p         =>   clk_ref_p,
-      clk_ref_n         =>   clk_ref_n,
-      ddr3_dq           =>   ddr3_dq,
-      ddr3_addr         =>   ddr3_addr,
-      ddr3_ba           =>   ddr3_ba,
-      ddr3_ras_n        =>   ddr3_ras_n,
-      ddr3_cas_n        =>   ddr3_cas_n,
-      ddr3_we_n         =>   ddr3_we_n,
-      ddr3_reset_n      =>   ddr3_reset_n,
-      ddr3_cs_n         =>   ddr3_cs_n,
-      ddr3_odt          =>   ddr3_odt,
-      ddr3_cke          =>   ddr3_cke,
-      ddr3_dm           =>   ddr3_dm,
-      ddr3_dqs_p        =>   ddr3_dqs_p,
-      ddr3_dqs_n        =>   ddr3_dqs_n,
-      ddr3_ck_p         =>   ddr3_ck_p,
-      ddr3_ck_n         =>   ddr3_ck_n,
-      app_wdf_wren      =>   migi.app_wdf_wren,
-      app_wdf_data      =>   migi.app_wdf_data,
-      app_wdf_mask      =>   migi.app_wdf_mask,
-      app_wdf_end       =>   migi.app_wdf_end,
-      app_addr          =>   migi.app_addr,
-      app_cmd           =>   migi.app_cmd,
-      app_en            =>   migi.app_en,
-      app_rdy           =>   migo.app_rdy,
-      app_wdf_rdy       =>   migo.app_wdf_rdy,
-      app_rd_data       =>   migo.app_rd_data,
-      app_rd_data_valid =>   migo.app_rd_data_valid,
-      tb_rst            =>   open,
-      tb_clk            =>   clk_ddr,
-      clk_ahb           =>   clkm,
-      clk100            =>   clk100,
-      phy_init_done     =>   phy_init_done,
-      sys_rst_13        =>   reset,
-      sys_rst_14        =>   rstraw
+  end block;
+  
+  
+  ------------------------------------------------------------------------------
+  -- Bus control
+  ------------------------------------------------------------------------------
+  -- Masters:
+  --   0: r-VEX lane group 0
+  --   1: r-VEX lane group 1
+  --   2: r-VEX lane group 2
+  --   3: r-VEX lane group 3
+  --   4: ahbjtag
+  --   5: bus2ahb (debug UART)
+  --
+  -- AHB slaves:
+  --   0: ahb2mig     0x00000000..0x3FFFFFFF
+  --   1: apbctrl     0x80000000..0x8FFFFFFF
+  --   2: ahb2bus     0xD0000000..0xDFFFFFFF
+  --
+  -- APB slaves:
+  --   0: gpio        0x80000500..0x800005FF
+  --
+  -- r-VEX bus slaves:
+  --   r-VEX i        0xD00i0000..0xD00iFFFF
+  --   debug UART     0xD1000000..0xD1000007                IRQ 2
+  --   irq controller 0xD2000000..0xD20007FF
+  --
+  -- Memory map:
+  --    .-----------.---------------.------------.-----.----------------------------------------------.
+  --    | Periph.   | Address space | Bw. compat.| IRQ | Description                                  |
+  --    |- - - - - -+- - - - - - - - `------. - -+- - -+- - - - - - - - - - - - - - - - - - - - - - - |
+  --    | ahbmig    | 0x00000000..0x3FFFFFFF | * |     | Main memory                                  |
+  --    | ---       | 0x40000000..0x800004FF |   |     | ---                                          |
+  --    | gpio      | 0x80000500..0x800005FF |   |     | Switches, buttons, LEDs                      |
+  --    | ---       | 0x80000600..0xCFFFFFFF |   |     | ---                                          |
+  --    | rvex      | 0xD0000000..0xD0001FFF | * |     | Primary r-VEX core                           |
+  --    | trace     | 0xD0002000..0xD0003FFF | * |     | Trace buffer for primary r-VEX core          |
+  --    | ---       | 0xD0004000..0xD00FFFFF |   |     | ---                                          |
+  --    | rvex      | 0xD0100000..0xD0101FFF | * |     | Second r-VEX core (if instantiated)          |
+  --    | trace     | 0xD0102000..0xD0103FFF | * |     | Trace buffer for second r-VEX core           |
+  --    | ---       | 0xD0104000..0xD01FFFFF |   |     | ---                                          |
+  --    | ...       | ...................... |   |     | ...                                          |
+  --    | ---       | 0xD0x04000..0xD0FFFFFF |   |     | ---                                          |
+  --    | dbguart   | 0xD1000000..0xD1000007 | * | 2   | Debug UART                                   |
+  --    | ---       | 0xD1000008..0xD1FFFFFF |   |     | ---                                          |
+  --    | irq ctrl  | 0xD2000000..0xD20007FF |   | 1   | Interrupt controller and timer               |
+  --    | ---       | 0xD2000800..0xD2FFFFFF |   |     | ---                                          |
+  --    | busy_cnt  | 0xD3000000..0xD3000003 |   |     | Overall cycle counter                        |
+  --    | ---       | 0xD3000004..0xFFFFFFFF |   |     | ---                                          |
+  --    '-----------'------------------------'---'-----'----------------------------------------------'
+  --
+  -- Bw. compat.: backwards compatible with old grlib platform.
+  
+  -- AHB controller.
+  ahb : ahbctrl
+    generic map (
+      rrobin                    => 1,
+      nahbm                     => CFG_NLG+2,
+      nahbs                     => 3
+    )
+    port map (
+      rst                       => rstn,
+      clk                       => clkm,
+      msti                      => ahbmi,
+      msto                      => ahbmo,
+      slvi                      => ahbsi,
+      slvo                      => ahbso
     );
-
-    led(3)  <= phy_init_done;
-    led(4)  <= rstn;
-    led(5)  <= reset;
-    led(6)  <= '0';
-    lock    <= phy_init_done; -- and cgo.clklock;
-
---    end generate;
---    noddr : if (CFG_DDR2SP+CFG_MIG_DDR2) = 0 generate lock <= cgo.clklock; end generate;
- 
-----------------------------------------------------------------------
----  System ACE I/F Controller ---------------------------------------
-----------------------------------------------------------------------
-
-  grace: if CFG_GRACECTRL = 1 generate
-    grace0 : gracectrl generic map (hindex => 7, hirq => 10, mode => 2,
-        haddr => 16#002#, hmask => 16#fff#, split => CFG_SPLIT)
-      port map (rstn, clkm, clkace, ahbsi, ahbso(7), acei, aceo);
-  end generate;
-  nograce: if CFG_GRACECTRL /= 1 generate
-    aceo <= gracectrl_none;
-  end generate;
-
-  clk_33_pad : clkpad generic map (level => cmos, voltage => x25v, tech => padtech)
-        port map (clk_33, clkace);
-  sysace_mpa_pads : outpadv generic map (level => cmos, voltage => x25v, width => 7, tech => padtech)
-    port map (sysace_mpa, aceo.addr);
-  sysace_mpce_pad : outpad generic map (level => cmos, voltage => x25v, tech => padtech)
-    port map (sysace_mpce, aceo.cen);
-  sysace_d_pads : iopadv generic map (level => cmos, voltage => x25v, tech => padtech, width => 8)
-    port map (sysace_d(7 downto 0), aceo.do(7 downto 0), aceo.doen, acei.di(7 downto 0));
-  acei.di(15 downto 8) <= (others => '0');
-  sysace_mpoe_pad : outpad generic map (level => cmos, voltage => x25v, tech => padtech)
-    port map (sysace_mpoe, aceo.oen);
-  sysace_mpwe_pad : outpad generic map (level => cmos, voltage => x25v, tech => padtech)
-    port map (sysace_mpwe, aceo.wen);
-  sysace_mpirq_pad : inpad generic map (level => cmos, voltage => x25v, tech => padtech)
-    port map (sysace_mpirq, acei.irq);
-
------------------PCI-EXPRESS-Master-Target------------------------------------------
-    pcie_mt : if CFG_PCIE_TYPE = 1 generate	-- master/target without fifo
-EP: pcie_master_target_virtex
-  generic map (
-    fabtech          => fabtech,
-    hmstndx          => CFG_NCPU+CFG_AHB_UART+CFG_AHB_JTAG+CFG_GRETH+CFG_SVGA_ENABLE,
-    hslvndx          => 8,
-    abits            => 21,
-    device_id        => CFG_PCIEXPDID,	       -- PCIE device ID
-    vendor_id        => CFG_PCIEXPVID,	 -- PCIE vendor ID
-    pcie_bar_mask    => 16#FFE#,
-    nsync            => 2,   -- 1 or 2 sync regs between clocks
-    haddr            => 16#a00#,    
-    hmask            => 16#fff#,   
-    pindex           => 5,   
-    paddr            => 5,   
-    pmask            => 16#fff#,
-    Master           => CFG_PCIE_SIM_MAS,  
-    lane_width       => CFG_NO_OF_LANES  
-          )
-  port map( 
-    rst              => rstn,
-    clk              => clkm,
-    -- System Interface
-    sys_clk_p        => sys_clk_p,
-    sys_clk_n        => sys_clk_n,
-    sys_reset_n      => sys_reset_n,
-    -- PCI Express Fabric Interface
-    pci_exp_txp      => pci_exp_txp,
-    pci_exp_txn      => pci_exp_txn,
-    pci_exp_rxp      => pci_exp_rxp,
-    pci_exp_rxn      => pci_exp_rxn,
-    
-    ahbso            => ahbso(8),        
-    ahbsi            => ahbsi,         
-    apbi             => apbi,	      
-    apbo             => apbo(5),	      
-    ahbmi            => ahbmi,
-    ahbmo            => ahbmo(CFG_NCPU+CFG_AHB_UART+CFG_AHB_JTAG+CFG_GRETH+CFG_SVGA_ENABLE)    
-  );
-    end generate;
-------------------PCI-EXPRESS-Master-FIFO------------------------------------------
-pcie_mf : if CFG_PCIE_TYPE = 3 generate	-- master with fifo and DMA
-dma:pciedma
-      generic map (fabtech => fabtech, memtech => memtech, dmstndx =>(CFG_NCPU+CFG_AHB_UART+CFG_AHB_JTAG+CFG_GRETH+CFG_SVGA_ENABLE), 
-	  dapbndx => 8, dapbaddr => 8,dapbirq => 8, blength => 12, abits => 21,
-	  device_id => CFG_PCIEXPDID, vendor_id => CFG_PCIEXPVID, pcie_bar_mask => 16#FFE#,
-	  slvndx => 8, apbndx => 5, apbaddr => 5, haddr => 16#A00#,hmask=> 16#FFF#,
-	  nsync => 2,lane_width => CFG_NO_OF_LANES)
-
-port map( 
-    rst          => rstn,
-    clk          => clkm,
-    -- System Interface
-    sys_clk_p    => sys_clk_p,
-    sys_clk_n    => sys_clk_n,
-    sys_reset_n  => sys_reset_n,
-    -- PCI Express Fabric Interface
-    pci_exp_txp  => pci_exp_txp,
-    pci_exp_txn  => pci_exp_txn,
-    pci_exp_rxp  => pci_exp_rxp,
-    pci_exp_rxn  => pci_exp_rxn,
-    
-    dapbo        => apbo(8),
-    dahbmo       => ahbmo((CFG_NCPU+CFG_AHB_UART+CFG_AHB_JTAG+CFG_GRETH+CFG_SVGA_ENABLE)),
-    apbi         => apbi,
-    apbo         => apbo(5),
-    ahbmi        => ahbmi,
-    ahbsi        => ahbsi,
-    ahbso        => ahbso(8)
   
-  );
-    end generate;
-----------------------------------------------------------------------
-pcie_mf_no_dma: if CFG_PCIE_TYPE = 2 generate	-- master with fifo 
-EP:pcie_master_fifo_virtex
-generic map (fabtech => fabtech, memtech => memtech, 
-   hslvndx => 8, abits => 21, device_id => CFG_PCIEXPDID, vendor_id => CFG_PCIEXPVID,
-   pcie_bar_mask => 16#FFE#, pindex => 5, paddr => 5,
-  haddr => 16#A00#, hmask => 16#FFF#, nsync => 2, lane_width => CFG_NO_OF_LANES)
-port map( 
-    rst          => rstn,
-    clk          => clkm,
-    -- System Interface
-    sys_clk_p    => sys_clk_p,
-    sys_clk_n    => sys_clk_n,
-    sys_reset_n  => sys_reset_n,
-    -- PCI Express Fabric Interface
-    pci_exp_txp  => pci_exp_txp,
-    pci_exp_txn  => pci_exp_txn,
-    pci_exp_rxp  => pci_exp_rxp,
-    pci_exp_rxn  => pci_exp_rxn,
-    
-    ahbso        => ahbso(8),        
-    ahbsi        => ahbsi,         
-    apbi         => apbi,        
-    apbo         => apbo(5)        
-  );
-end generate;
-----------------------------------------------------------------------
-
----  APB Bridge and various periherals -------------------------------
-----------------------------------------------------------------------
+  -- APB bridge.
+  apb : apbctrl
+    generic map (
+      hindex                    => 1,
+      haddr                     => 16#800#,
+      hmask                     => 16#F00#,
+      nslaves                   => 1
+    )
+    port map (
+      rst                       => rstn,
+      clk                       => clkm,
+      ahbi                      => ahbsi,
+      ahbo                      => ahbso(1),
+      apbi                      => apbi,
+      apbo                      => apbo
+    );
+  
+  
+  -- r-VEX bus bridge.
+  rvex_bus_bridge_block: block is
 
-  -- APB Bridge
-  apb0 : apbctrl
-    generic map (hindex => 1, haddr => CFG_APBADDR)
-    port map (rstn, clkm, ahbsi, ahbso(1), apbi, apbo);
+    signal reset        : std_logic;
+    signal clk          : std_logic;
+    
+    -- Busses between the demuxer and the bus stages.
+    signal rvbsi_s      : bus_mst2slv_array(0 to N_RVB_SLAVES - 1);
+    signal rvbso_s      : bus_slv2mst_array(0 to N_RVB_SLAVES - 1);
+  
+    function addr_map return addrRangeAndMapping_array is
+      variable retval : addrRangeAndMapping_array(0 to N_RVB_SLAVES - 1);
+      variable i : natural;
+    begin
+      i := 0;
+      
+      -- Processors.
+      for c in 0 to CFG_NRVEX - 1 loop
+        retval(i) := addrRangeAndMap(
+          match => "------00" & std_logic_vector(to_unsigned(c, 4)) & "----" & "--------" & "--------"
+        );
+        i := i + 1;
+      end loop;
+      
+      -- Debug UART.
+      retval(i) := addrRangeAndMap(
+        match => "------01" & "--------" & "--------" & "--------"
+      );
+      i := i + 1;
+      
+      -- Interrupt controller/timer.
+      retval(i) := addrRangeAndMap(
+        match => "------10" & "--------" & "--------" & "--------"
+      );
+      i := i + 1;
+      
+      -- Busy LED/performance counter.
+      retval(i) := addrRangeAndMap(
+        match => "------11" & "--------" & "--------" & "--------"
+      );
+      i := i + 1;
+      
+      return retval;
+    end function;
+
+  begin
+
+    reset <= not rstn;
+    clk <= clkm;
+
+    -- Instantiate the bus bridge.
+    rvex_bus_bridge_inst: entity rvex.ahb2bus
+      generic map (
+        AHB_INDEX       => 2,
+        AHB_ADDR        => 16#D00#,
+        AHB_MASK        => 16#F00#,
+        AHB_VENDOR_ID   => VENDOR_TUDELFT,
+        AHB_DEVICE_ID   => TUDELFT_BRIDGE
+      )
+      port map (
+        reset           => reset,
+        clk             => clk,
+        ahb2bridge      => ahbsi,
+        bridge2ahb      => ahbso(2),
+        bridge2bus      => rvbmo,
+        bus2bridge      => rvbmi
+      );
 
-  -- Interrupt controller
-  irqctrl : if CFG_IRQ3_ENABLE /= 0 generate
-    irqctrl0 : irqmp
-      generic map (pindex => 2, paddr => 2, ncpu => CFG_NCPU)
-      port map (rstn, clkm, apbi, apbo(2), irqo, irqi);
-  end generate;
-  irq3 : if CFG_IRQ3_ENABLE = 0 generate
-    x : for i in 0 to CFG_NCPU-1 generate
-      irqi(i).irl <= "0000";
+    -- Instantiate the demuxer.
+    rvex_bus_bridge_demux: entity rvex.bus_demux
+      generic map (
+        ADDRESS_MAP     => addr_map
+      )
+      port map (
+        reset           => reset,
+        clk             => clk,
+        clkEn           => '1',
+        mst2demux       => rvbmo,
+        demux2mst       => rvbmi,
+        demux2slv       => rvbsi_s,
+        slv2demux       => rvbso_s
+      );
+    
+    -- Generate the bus stage registers to make routing a bit easier.
+    rvex_bus_stages: for i in 0 to N_RVB_SLAVES - 1 generate
+      rvex_bus_stage: entity rvex.bus_stage
+        port map (
+          reset           => reset,
+          clk             => clk,
+          clkEn           => '1',
+          mst2stage       => rvbsi_s(i),
+          stage2mst       => rvbso_s(i),
+          stage2slv       => rvbsi(i),
+          slv2stage       => rvbso(i)
+        );
     end generate;
-    apbo(2) <= apb_none;
-  end generate;
-
-  -- Time Unit
-  gpt : if CFG_GPT_ENABLE /= 0 generate
-    timer0 : gptimer
-      generic map (pindex => 3, paddr => 3, pirq => CFG_GPT_IRQ,
-                   sepirq => CFG_GPT_SEPIRQ, sbits => CFG_GPT_SW,
-                   ntimers => CFG_GPT_NTIM, nbits  => CFG_GPT_TW)
-      port map (rstn, clkm, apbi, apbo(3), gpti, open);
-    gpti.dhalt  <= dsuo.tstop;
-    gpti.extclk <= '0';
-  end generate;
-  notim : if CFG_GPT_ENABLE = 0 generate apbo(3) <= apb_none; end generate;
-
-  -- GPIO Unit
-  gpio0 : if CFG_GRGPIO_ENABLE /= 0 generate
-    grgpio0: grgpio
-      generic map(pindex => 11, paddr => 11, imask => CFG_GRGPIO_IMASK, nbits => 12)
-      port map(rstn, clkm, apbi, apbo(11), gpioi, gpioo);
-  end generate;
-
-  ua1 : if CFG_UART1_ENABLE /= 0 generate
-    uart1 : apbuart                     -- UART 1
-      generic map (pindex   => 1, paddr => 1, pirq => 2, console => dbguart, fifosize => CFG_UART1_FIFO)
-      port map (rstn, clkm, apbi, apbo(1), u1i, u1o);
-    u1i.rxd    <= rxd1;
-    u1i.ctsn   <= '0';
-    u1i.extclk <= '0';
-    txd1       <= u1o.txd;
-    serrx_pad : inpad generic map (level => cmos, voltage => x25v, tech  => padtech) port map (dsurx, rxd1);
-    sertx_pad : outpad generic map (level => cmos, voltage => x25v, tech => padtech) port map (dsutx, txd1);
-    led(0) <= not rxd1;
-    led(1) <= not txd1;
-  end generate;
-  noua0 : if CFG_UART1_ENABLE = 0 generate apbo(1) <= apb_none; end generate;
-
-
-  i2cm: if CFG_I2C_ENABLE = 1 generate  -- I2C master
-    i2c0 : i2cmst
-    generic map (pindex => 12, paddr => 12, pmask => 16#FFF#,
-                 pirq => 11, filter => I2C_FILTER)
-    port map (rstn, clkm, apbi, apbo(12), i2ci, i2co);
-    i2c_scl_pad : iopad generic map (level => cmos, voltage => x25v, tech => padtech)
-      port map (iic_scl_main, i2co.scl, i2co.scloen, i2ci.scl);
-    i2c_sda_pad : iopad generic map (level => cmos, voltage => x25v, tech => padtech)
-      port map (iic_sda_main, i2co.sda, i2co.sdaoen, i2ci.sda);
-  end generate i2cm;
-
------------------------------------------------------------------------
----  VGA + IIC --------------------------------------------------------
------------------------------------------------------------------------
-
-  vga : if CFG_VGA_ENABLE /= 0 generate
-    vga0 : apbvga generic map(memtech => memtech, pindex => 6, paddr => 6)
-      port map(rstn, clkm, clkvga, apbi, apbo(6), vgao);
-      clk_sel <= "00";
-  end generate;
-
-  svga : if CFG_SVGA_ENABLE /= 0 generate
-    svga0 : svgactrl generic map(memtech => memtech, pindex => 6, paddr => 6,
-        hindex => CFG_NCPU+CFG_AHB_UART+CFG_AHB_JTAG, clk0 => 40000,
-	clk1 => 24000, clk2 => 20000, clk3 => 16000, burstlen => 4,
-                                 ahbaccsz => CFG_AHBDW)
-       port map(rstn, clkm, clkvga, apbi, apbo(6), vgao, ahbmi,
-		ahbmo(CFG_NCPU+CFG_AHB_UART+CFG_AHB_JTAG), clk_sel);
-  end generate;
-
-  vgadvi : if (CFG_VGA_ENABLE + CFG_SVGA_ENABLE) /= 0 generate
-    dvi0 : entity work.svga2ch7301c generic map (tech => fabtech, idf => 2)
-      port map (clk100, ethi.gtx_clk, lock, clk_sel, vgao, clkvga, clkvga_p, clkvga_n,
-                lcd_datal, lcd_hsyncl, lcd_vsyncl, lcd_del);
-
-    i2cdvi : i2cmst
-      generic map (pindex => 9, paddr => 9, pmask => 16#FFF#,
-                   pirq => 7, filter => I2C_FILTER)
-      port map (rstn, clkm, apbi, apbo(9), dvi_i2ci, dvi_i2co);
-  end generate;
-
-  novga : if (CFG_VGA_ENABLE + CFG_SVGA_ENABLE) = 0 generate
-     apbo(6) <= apb_none;
-     lcd_datal <= (others => '0'); clkvga_p <= '0'; clkvga_n <= '0';
-     lcd_hsyncl <= '0'; lcd_vsyncl <= '0'; lcd_del <= '0';
-     dvi_i2co.scloen <= '1'; dvi_i2co.sdaoen <= '1';
-  end generate;
-
-  tft_lcd_data_pad : outpadv generic map (level => cmos, voltage => x25v, width => 12, tech => padtech)
-        port map (tft_lcd_data, lcd_datal);
-  tft_lcd_clkp_pad : outpad generic map (level => cmos, voltage => x25v, tech => padtech)
-    port map (tft_lcd_clk_p, clkvga_p);
-  tft_lcd_clkn_pad : outpad generic map (level => cmos, voltage => x25v, tech => padtech)
-    port map (tft_lcd_clk_n, clkvga_n);
-  tft_lcd_hsync_pad : outpad generic map (level => cmos, voltage => x25v, tech => padtech)
-    port map (tft_lcd_hsync, lcd_hsyncl);
-  tft_lcd_vsync_pad : outpad generic map (level => cmos, voltage => x25v, tech => padtech)
-    port map (tft_lcd_vsync, lcd_vsyncl);
-  tft_lcd_de_pad : outpad generic map (level => cmos, voltage => x25v, tech => padtech)
-    port map (tft_lcd_de, lcd_del);
-  tft_lcd_reset_pad : outpad generic map (level => cmos, voltage => x25v, tech => padtech)
-    port map (tft_lcd_reset_b, rstn);
-  dvi_i2c_scl_pad : iopad generic map (level => cmos, voltage => x25v, tech => padtech)
-    port map (dvi_iic_scl, dvi_i2co.scl, dvi_i2co.scloen, dvi_i2ci.scl);
-  dvi_i2c_sda_pad : iopad generic map (level => cmos, voltage => x25v, tech => padtech)
-    port map (dvi_iic_sda, dvi_i2co.sda, dvi_i2co.sdaoen, dvi_i2ci.sda);
-
------------------------------------------------------------------------
----  ETHERNET ---------------------------------------------------------
------------------------------------------------------------------------
-
-  eth0 : if CFG_GRETH = 1 generate -- Gaisler ethernet MAC
-    e1 : grethm
-      generic map(hindex => CFG_NCPU+CFG_AHB_UART+CFG_AHB_JTAG+CFG_SVGA_ENABLE,
-        pindex => 15, paddr => 15, pirq => 12, memtech => memtech,
-        mdcscaler => CPU_FREQ/1000, enable_mdio => 1, fifosize => CFG_ETH_FIFO,
-        nsync => 1, edcl => CFG_DSU_ETH, edclbufsz => CFG_ETH_BUF,
-        macaddrh => CFG_ETH_ENM, macaddrl => CFG_ETH_ENL, phyrstadr => 7,
-        ipaddrh => CFG_ETH_IPM, ipaddrl => CFG_ETH_IPL, giga => CFG_GRETH1G,
-	enable_mdint => 1)
-      port map(rst => rstn, clk => clkm, ahbmi => ahbmi,
-               ahbmo => ahbmo(CFG_NCPU+CFG_AHB_UART+CFG_AHB_JTAG+CFG_SVGA_ENABLE),
-               apbi => apbi, apbo => apbo(15), ethi => ethi, etho => etho);
-  end generate;
-
---  greth1g: if CFG_GRETH1G = 1 generate
-    gtxclk0 : entity work.gtxclk port map (
-	clk_p => gmiiclk_p, clk_n => gmiiclk_n, clkint => ethi.gtx_clk,
-	clkout => egtx_clk);
---  end generate;
-
-  ethpads : if (CFG_GRETH = 1) generate -- eth pads
-    emdio_pad : iopad generic map (level => cmos, voltage => x25v, tech => padtech)
-      port map (emdio, etho.mdio_o, etho.mdio_oe, ethi.mdio_i);
-    etxc_pad : clkpad generic map (level => cmos, voltage => x25v, tech => padtech, arch => 2)
-      port map (etx_clk, ethi.tx_clk);
-    erxc_pad : clkpad generic map (level => cmos, voltage => x25v, tech => padtech, arch => 2)
-      port map (erx_clk, ethi.rx_clk);
-    erxd_pad : inpadv generic map (level => cmos, voltage => x25v, tech => padtech, width => 8)
-      port map (erxd, ethi.rxd(7 downto 0));
-    erxdv_pad : inpad generic map (level => cmos, voltage => x25v, tech => padtech)
-      port map (erx_dv, ethi.rx_dv);
-    erxer_pad : inpad generic map (level => cmos, voltage => x25v, tech => padtech)
-      port map (erx_er, ethi.rx_er);
-    erxco_pad : inpad generic map (level => cmos, voltage => x25v, tech => padtech)
-      port map (erx_col, ethi.rx_col);
-    erxcr_pad : inpad generic map (level => cmos, voltage => x25v, tech => padtech)
-      port map (erx_crs, ethi.rx_crs);
-    emdint_pad : inpad generic map (level => cmos, voltage => x25v, tech => padtech)
-      port map (emdint, ethi.mdint);
-
-
-    etxd_pad : outpadv generic map (level => cmos, voltage => x25v, tech => padtech, width => 8)
-      port map (etxd, etho.txd(7 downto 0));
-    etxen_pad : outpad generic map (level => cmos, voltage => x25v, tech => padtech)
-      port map (etx_en, etho.tx_en);
-    etxer_pad : outpad generic map (level => cmos, voltage => x25v, tech => padtech)
-      port map (etx_er, etho.tx_er);
-    emdc_pad : outpad generic map (level => cmos, voltage => x25v, tech => padtech)
-      port map (emdc, etho.mdc);
-  end generate;
+    
+  end block;
+  
+  
+  ------------------------------------------------------------------------------
+  -- r-VEX processor
+  ------------------------------------------------------------------------------
+  
+  rvsys_gen: for i in 0 to CFG_NRVEX-1 generate
+    
+    -- Calculate the lIND of the current core depending on the number of
+    -- lane groups of all previous cores.
+    function CALC_LIND return integer is
+      variable LIND : integer := 0;
+    begin
+      for index in 0 to i-1 loop
+        LIND := LIND + 2**CFG_RVEX_CFG(index).core.numLaneGroupsLog2;
+      end loop;
+      return LIND;
+    end function;
+    
+    -- Calculate the CIND of the current core depending on the number of
+    -- contexts of all previous cores.
+    function CALC_CIND return integer is
+      variable CIND : integer := 0;
+    begin
+      for index in 0 to i-1 loop
+        CIND := CIND + 2**CFG_RVEX_CFG(index).core.numContextsLog2;
+      end loop;
+      return CIND;
+    end function;
+    
+    constant LIND : integer := CALC_LIND;
+    constant LNUM : integer := 2**CFG_RVEX_CFG(i).core.numLaneGroupsLog2;
+    constant CIND : integer := CALC_CIND;
+    constant CNUM : integer := 2**CFG_RVEX_CFG(i).core.numContextsLog2;
+  begin
+
+    rvsys_inst: entity rvex.rvsys_grlib_rctrl
+      generic map (
+        CFG                     => CFG_RVEX_CFG(i),
+        PLATFORM_TAG            => RVEX_PLATFORM_TAG,
+        AHB_MASTER_INDEX_START  => LIND,
+        CHECK_MEM               => false,
+        CHECK_MEM_FILE          => "ram.srec"
+      )
+      port map (
+        clki                    => clkm,
+        rstn                    => rstn,
+        ahbmi                   => ahbmi,
+        ahbmo                   => ahbmo(LIND+LNUM-1 downto LIND),
+        ahbsi                   => ahbsi,
+        bus2dgb                 => rvbsi(i),
+        dbg2bus                 => rvbso(i),
+        rctrl2rv_irq            => irq2rv_irq(CIND+CNUM-1 downto CIND),
+        rctrl2rv_irqID          => irq2rv_irqID(CIND+CNUM-1 downto CIND),
+        rv2rctrl_irqAck         => rv2irq_irqAck(CIND+CNUM-1 downto CIND),
+        rctrl2rv_run            => busy2rv_run(CIND+CNUM-1 downto CIND),
+        rv2rctrl_idle           => rv2irq_idle(CIND+CNUM-1 downto CIND),
+        rv2rctrl_break          => rv2irq_break(CIND+CNUM-1 downto CIND),
+        rv2rctrl_traceStall     => rv2rctrl_traceStall(i),
+        rctrl2rv_traceStall     => rctrl2any_traceStall,
+        rctrl2rv_reset          => irq2rv_reset(CIND+CNUM-1 downto CIND),
+        --rctrl2rv_resetVect      => irq2rv_resetVect(CIND+CNUM-1 downto CIND), -- Use the CFG reset vectors
+        rv2rctrl_done           => rv2irq_done(CIND+CNUM-1 downto CIND),
+        gpio_dip                => dipsw_int
+      );
 
------------------------------------------------------------------------
----  AHB ROM ----------------------------------------------------------
------------------------------------------------------------------------
-
-  bpromgen : if CFG_AHBROMEN /= 0 generate
-    brom : entity work.ahbrom
-      generic map (hindex => 6, haddr => CFG_AHBRODDR, pipe => CFG_AHBROPIP)
-      port map ( rstn, clkm, ahbsi, ahbso(6));
-  end generate;
-  nobpromgen : if CFG_AHBROMEN = 0 generate
-     ahbso(6) <= ahbs_none;
   end generate;
+  
+  -- Merge the trace stall signals.
+  trace_merge: process (rv2rctrl_traceStall) is
+    variable flag : std_logic;
+  begin
+    flag := '0';
+    for i in rv2rctrl_traceStall'range loop
+      flag := flag or rv2rctrl_traceStall(i);
+    end loop;
+    rctrl2any_traceStall <= flag;
+  end process;
+  
+  
+  ------------------------------------------------------------------------------
+  -- Interrupt controller
+  ------------------------------------------------------------------------------
+  
+  irqctrl_block: block is
+    signal reset        : std_logic;
+    signal clk          : std_logic;
+  begin
+    
+    reset <= not rstn;
+    clk <= clkm;
 
------------------------------------------------------------------------
----  AHB RAM ----------------------------------------------------------
------------------------------------------------------------------------
-
-  ahbramgen : if CFG_AHBRAMEN = 1 generate
-    ahbram0 : ahbram
-      generic map (hindex => 3, haddr => CFG_AHBRADDR, tech => CFG_MEMTECH,
-                   kbytes => CFG_AHBRSZ, pipe => CFG_AHBRPIPE)
-      port map (rstn, clkm, ahbsi, ahbso(3));
+    irqctrl: entity rvex.periph_irq
+      generic map (
+        BASE_ADDRESS            => X"D2000000",
+        NUM_CONTEXTS            => CFG_NCTXT,
+        NUM_IRQ                 => NIRQ,
+        CONFIG_PRIO_ENABLE      => 1,
+        NESTING_ENABLE          => 1,
+        BREAKPOINT_BROADCASTING => 1,
+        CONFIG_RVECT_ENABLE     => 1,
+        OUTPUT_REGISTER         => 1
+      )
+      port map (
+        
+        -- System control.
+        reset                   => reset,
+        clk                     => clk,
+        clkEn                   => '1',
+        
+        -- r-VEX interface.
+        irq2rv_irq              => irq2rv_irq,
+        irq2rv_irqID            => irq2rv_irqID,
+        rv2irq_irqAck           => rv2irq_irqAck,
+        irq2rv_run              => irq2busy_run,
+        rv2irq_idle             => rv2irq_idle,
+        rv2irq_break            => rv2irq_break,
+        rv2irq_traceStall       => rctrl2any_traceStall,
+        irq2rv_reset            => irq2rv_reset,
+        irq2rv_resetVect        => irq2rv_resetVect,
+        rv2irq_done             => rv2irq_done,
+       
+        -- Interrupt inputs.
+        periph2irq              => irq,
+        
+        -- Bus interface.
+        bus2irq                 => rvbsi(CFG_NRVEX+1),
+        irq2bus                 => rvbso(CFG_NRVEX+1)
+        
+      );
+    
+  end block;
+  
+  
+  ------------------------------------------------------------------------------
+  -- Busy LED and total cycle counter
+  ------------------------------------------------------------------------------
+  
+  busy_counter: block is
+    signal reset        : std_logic;
+    signal clk          : std_logic;
+    signal idle_counter : std_logic_vector(6 downto 0);
+    signal busy         : std_logic;
+    signal perf_counter : rvex_data_type;
+    signal run          : std_logic;
+  begin
+    
+    reset <= not rstn;
+    clk <= clkm;
+    
+    reg_proc: process (clk) is
+      variable idle : std_logic;
+    begin
+      if rising_edge(clk) then
+        rvbso(CFG_NRVEX+2) <= BUS_SLV2MST_IDLE;
+        if reset = '1' then
+          idle_counter <= (others => '1');
+          busy <= '0';
+          perf_counter <= (others => '0');
+          run <= '1';
+        else
+          
+          -- Determine whether all cores are idle.
+          idle := '1';
+          for i in rv2irq_idle'range loop
+            idle := idle and rv2irq_idle(i);
+          end loop;
+          
+          -- If all cores are idle, increment the idle counter. If the idle
+          -- counter is at max, the system is idle. If one of the cores is not
+          -- idle, the system is busy and the idle counter is reset to zero.
+          if idle = '0' then
+            idle_counter <= (others => '0');
+            busy <= '1';
+          elsif idle_counter /= "1111111" then
+            idle_counter <= std_logic_vector(unsigned(idle_counter) + 1);
+            busy <= '1';
+          else
+            busy <= '0';
+          end if;
+          
+          -- If the system is busy, increment the performance counter.
+          if busy = '1' then
+            perf_counter <= std_logic_vector(unsigned(perf_counter) + 1);
+          end if;
+          
+          -- Handle reads of the performance counter.
+          if rvbsi(CFG_NRVEX+2).readEnable = '1' then
+            rvbso(CFG_NRVEX+2).readData <= perf_counter;
+            rvbso(CFG_NRVEX+2).ack <= '1';
+          end if;
+          
+          -- Reset the performance counter and the cores if a write occurs,
+          -- and write bit 0 to the run flag. If the run flag is cleared, all
+          -- cores are artificially paused. This can be used to pause the cores
+          -- during program upload and initialization, such that all cores can
+          -- be started simultaneously with a single register access.
+          if rvbsi(CFG_NRVEX+2).writeEnable = '1' then
+            run <= rvbsi(CFG_NRVEX+2).writeData(0);
+            perf_counter <= (others => '0');
+            rvbso(CFG_NRVEX+2).ack <= '1';
+          end if;
+          
+        end if;
+      end if;
+    end process;
+    
+    -- Halt all the cores if the run flag is cleared.
+    run_proc: process (irq2busy_run, run) is
+    begin
+      for i in irq2busy_run'range loop
+        busy2rv_run(i) <= irq2busy_run(i) and run;
+      end loop;
+    end process;
+    
+    -- Connect LED 7 to the busy signal.
+    led(7) <= busy;
+    
+    -- pragma translate_off
+    sim_proc: process is
+    begin
+      wait until busy = '1';
+      wait until busy = '0';
+      wait for 100 us;
+      assert false report "Simulation complete. It took " & integer'image(to_integer(unsigned(perf_counter))) & " cycles." severity failure;
+    end process;
+    -- pragma translate_on
+    
+  end block;
+  
+  ------------------------------------------------------------------------------
+  -- Memory controller
+  ------------------------------------------------------------------------------
+  -- pragma translate_off
+  mig_gen: if not DISABLE_DDR_SIM generate
+  begin
+  -- pragma translate_on
+    
+    -- MIG instantiation.
+    ddr3ctrl: entity work.mig_37
+      generic map (
+        SIM_BYPASS_INIT_CAL       => SIM_BYPASS_INIT_CAL,
+        CLKOUT_DIVIDE4            => work.config.CFG_MIG_CLK4
+      )
+      port map (
+        clk_ref_p                 => clk_ref_p,
+        clk_ref_n                 => clk_ref_n,
+        ddr3_dq                   => ddr3_dq,
+        ddr3_addr                 => ddr3_addr,
+        ddr3_ba                   => ddr3_ba,
+        ddr3_ras_n                => ddr3_ras_n,
+        ddr3_cas_n                => ddr3_cas_n,
+        ddr3_we_n                 => ddr3_we_n,
+        ddr3_reset_n              => ddr3_reset_n,
+        ddr3_cs_n                 => ddr3_cs_n,
+        ddr3_odt                  => ddr3_odt,
+        ddr3_cke                  => ddr3_cke,
+        ddr3_dm                   => ddr3_dm,
+        ddr3_dqs_p                => ddr3_dqs_p,
+        ddr3_dqs_n                => ddr3_dqs_n,
+        ddr3_ck_p                 => ddr3_ck_p,
+        ddr3_ck_n                 => ddr3_ck_n,
+        app_wdf_wren              => migi.app_wdf_wren,
+        app_wdf_data              => migi.app_wdf_data,
+        app_wdf_mask              => migi.app_wdf_mask,
+        app_wdf_end               => migi.app_wdf_end,
+        app_addr                  => migi.app_addr,
+        app_cmd                   => migi.app_cmd,
+        app_en                    => migi.app_en,
+        app_rdy                   => migo.app_rdy,
+        app_wdf_rdy               => migo.app_wdf_rdy,
+        app_rd_data               => migo.app_rd_data,
+        app_rd_data_valid         => migo.app_rd_data_valid,
+        tb_rst                    => open,
+        tb_clk                    => clkddr,
+        clk_ahb                   => clkm,
+        clk100                    => clk100,
+        phy_init_done             => phy_init_done,
+        sys_rst_13                => reset,
+        sys_rst_14                => rstraw
+      );
+    
+    ahb2mig0 : ahb2mig_ml605
+      generic map (
+        hindex                    => 0,
+        haddr                     => 16#000#,
+        hmask                     => 16#C00#,
+        MHz                       => 400,  -- Only used for sim debug messages.
+        Mbyte                     => 1024, -- Only used for sim debug messages.
+        nosync                    => boolean'pos(CFG_MIG_CLK4=12) --CFG_CLKDIV/12)
+      ) 
+      port map (
+        rst                       => rstn,
+        clk_ahb                   => clkm,
+        clk_ddr                   => clkddr,
+        ahbsi                     => ahbsi,
+        ahbso                     => ahbso(0),
+        migi                      => migi,
+        migo                      => migo
+      );
+    
+  -- pragma translate_off
   end generate;
-  nram : if CFG_AHBRAMEN = 0 generate ahbso(3) <= ahbs_none; end generate;
-
------------------------------------------------------------------------
----  Test report module  ----------------------------------------------
------------------------------------------------------------------------
-
--- pragma translate_off
-
-  test0 : ahbrep generic map (hindex => 4, haddr => 16#200#)
-	port map (rstn, clkm, ahbsi, ahbso(4));
-
--- pragma translate_on
-
------------------------------------------------------------------------
----  Drive unused bus elements  ---------------------------------------
------------------------------------------------------------------------
-
-  nam1 : for i in (CFG_NCPU+CFG_AHB_UART+CFG_AHB_JTAG+CFG_GRETH+1+CFG_PCIEXP) to NAHBMST-1 generate
-    ahbmo(i) <= ahbm_none;
+  sim_mem_gen: if DISABLE_DDR_SIM generate
+    signal reset        : std_logic;
+    signal bridge2model : bus_mst2slv_type;
+    signal model2bridge : bus_slv2mst_type;
+  begin
+    reset <= not rstn;
+    
+    -- Generate 400 MHz clock.
+    process is
+    begin
+      clkddr <= '1';
+      wait for 1250 ps;
+      clkddr <= '0';
+      wait for 1250 ps;
+    end process;
+    
+    -- Generate 100 MHz clock.
+    process is
+    begin
+      clk100 <= '1';
+      wait for 5000 ps;
+      clk100 <= '0';
+      wait for 5000 ps;
+    end process;
+    
+    -- Generate configurable clock (1200 MHz / CFG_MIG_CLK4).
+    process is
+    begin
+      clkm <= '1';
+      wait for CFG_MIG_CLK4 * 417 ps;
+      clkm <= '0';
+      wait for CFG_MIG_CLK4 * 417 ps;
+      clkm <= '1';
+      wait for CFG_MIG_CLK4 * 416 ps;
+      clkm <= '0';
+      wait for CFG_MIG_CLK4 * 417 ps;
+      clkm <= '1';
+      wait for CFG_MIG_CLK4 * 417 ps;
+      clkm <= '0';
+      wait for CFG_MIG_CLK4 * 416 ps;
+    end process;
+    
+    -- Generate PHY done signal.
+    process is
+    begin
+      phy_init_done <= '0';
+      wait for 1 us;
+      phy_init_done <= '1';
+      wait;
+    end process;
+    
+    -- Connect the DDR simulation model to nothing.
+    ddr3_dq      <= (others => 'Z');
+    ddr3_dm      <= (others => '0');
+    ddr3_addr    <= (others => '0');
+    ddr3_ba      <= (others => '0');
+    ddr3_ras_n   <= '1';
+    ddr3_cas_n   <= '1';
+    ddr3_we_n    <= '1';
+    ddr3_reset_n <= '0';
+    ddr3_cs_n    <= (others => '1');
+    ddr3_odt     <= (others => '0');
+    ddr3_cke     <= (others => '0');
+    ddr3_dqs_p   <= (others => 'Z');
+    ddr3_dqs_n   <= (others => 'Z');
+    ddr3_ck_p    <= (others => '0');
+    ddr3_ck_n    <= (others => '1');
+    
+    -- Convert the AHB bus slave interface to r-VEX bus.
+    mem_bridge_inst: entity rvex.ahb2bus
+      generic map (
+        AHB_INDEX       => 0,
+        AHB_ADDR        => 16#000#,
+        AHB_MASK        => 16#C00#,
+        AHB_VENDOR_ID   => VENDOR_TUDELFT,
+        AHB_DEVICE_ID   => TUDELFT_BRIDGE
+      )
+      port map (
+        reset           => reset,
+        clk             => clkm,
+        ahb2bridge      => ahbsi,
+        bridge2ahb      => ahbso(0),
+        bridge2bus      => bridge2model,
+        bus2bridge      => model2bridge
+      );
+    
+    -- Simulate the memory.
+    mem_model: process is
+      variable mem      : rvmem_memoryState_type;
+      variable readData : rvex_data_type;
+      variable l        : std.textio.line;
+      variable c        : character;
+    begin
+      
+      -- Load the srec file into the memory.
+      rvmem_clear(mem, '0');
+      rvmem_loadSRec(mem, "ram.srec");
+      
+      -- Initialize the bus output.
+      model2bridge <= BUS_SLV2MST_IDLE;
+      
+      -- Handle memory requests.
+      loop
+        
+        -- Wait for the next clock.
+        wait until rising_edge(clkm);
+        
+        -- If we have a request, delay for some amount of cycles.
+        if bridge2model.readEnable = '1' or bridge2model.writeEnable = '1' then
+          model2bridge <= BUS_SLV2MST_IDLE;
+          model2bridge.busy <= '1';
+          wait until rising_edge(clkm);
+          wait until rising_edge(clkm);
+          wait until rising_edge(clkm);
+          wait until rising_edge(clkm);
+          wait until rising_edge(clkm);
+        end if;
+        
+        -- Handle the bus request.
+        model2bridge <= BUS_SLV2MST_IDLE;
+        if bridge2model.readEnable = '1' then
+          rvmem_read(mem, bridge2model.address, readData);
+          model2bridge.readData <= readData;
+          model2bridge.ack <= '1';
+        elsif bridge2model.writeEnable = '1' then
+          rvmem_write(mem, bridge2model.address, bridge2model.writeData, bridge2model.writeMask);
+          model2bridge.ack <= '1';
+        end if;
+        
+      end loop;
+      
+    end process;
+    
   end generate;
+  -- pragma translate_on
+  ------------------------------------------------------------------------------
+  -- GRMON JTAG interface
+  ------------------------------------------------------------------------------
+  
+  ahbjtag_inst: ahbjtag
+    generic map (
+      tech                      => fabtech,
+      hindex                    => CFG_NLG
+    )
+    port map(
+      rst                       => rstn,
+      clk                       => clkm,
+      tck                       => '0',
+      tms                       => '0',
+      tdi                       => '0',
+      tdo                       => open,
+      ahbi                      => ahbmi,
+      ahbo                      => ahbmo(CFG_NLG),
+      tapo_tck                  => open,
+      tapo_tdi                  => open,
+      tapo_inst                 => open,
+      tapo_rst                  => open,
+      tapo_capt                 => open,
+      tapo_shft                 => open,
+      tapo_upd                  => open,
+      tapi_tdo                  => '0',
+      trst                      => '1',
+      tdoen                     => open,
+      tckn                      => '0',
+      tapo_tckn                 => open,
+      tapo_ninst                => open,
+      tapo_iupd                 => open
+    );
 
------------------------------------------------------------------------
----  Boot message  ----------------------------------------------------
------------------------------------------------------------------------
+  
+  ------------------------------------------------------------------------------
+  -- Debug UART
+  ------------------------------------------------------------------------------
+  
+  -- Debug UART
+  rvuartgen : block
+    signal reset        : std_logic;
+    signal clk          : std_logic;
+    signal rx           : std_logic;
+    signal tx           : std_logic;
+    signal uart2dbg_bus : bus_mst2slv_type;
+    signal dbg2uart_bus : bus_slv2mst_type;
+  begin
+
+    reset <= not rstn;
+    clk <= clkm;
+
+    -- Instantiate the AHB master for the debug UART.
+    rvex_uart_mst_inst: entity rvex.bus2ahb
+      generic map (
+        AHB_MASTER_INDEX  => CFG_NLG + 1,
+        AHB_VENDOR_ID     => VENDOR_TUDELFT,
+        AHB_DEVICE_ID     => TUDELFT_UART,
+        BUS_ERROR_CODE    => X"00000010",
+        REQ_ERROR_CODE    => X"00000011"
+      )
+      port map (
+        reset             => reset,
+        clk               => clk,
+        bus2bridge        => uart2dbg_bus,
+        bridge2bus        => dbg2uart_bus,
+        bridge2ahb        => ahbmo(CFG_NLG + 1),
+        ahb2bridge        => ahbmi
+      );
 
--- pragma translate_off
-  x : report_design
-    generic map (
-      msg1 => "LEON3 Demonstration design for Xilinx Virtex6 ML605 board",
-      fabtech => tech_table(fabtech), memtech => tech_table(memtech),
-      mdel => 1
+    -- Instantiate the UART.
+    rvex_uart_inst: entity rvex.periph_uart
+      generic map (
+        F_CLK             => real(CLKM_FREQ) * 1000.0,
+        F_BAUD            => 115200.0
+      )
+      port map (
+        reset             => reset,
+        clk               => clk,
+        clkEn             => '1',
+        rx                => rx,
+        tx                => tx,
+        bus2uart          => rvbsi(CFG_NRVEX),
+        uart2bus          => rvbso(CFG_NRVEX),
+        irq               => irq(2),
+        uart2dbg_bus      => uart2dbg_bus,
+        dbg2uart_bus      => dbg2uart_bus
       );
--- pragma translate_on
 
+    dsurx_pad : inpad generic map (level => cmos, voltage => x25v, tech  => padtech)
+      port map (dsurx, rx);
+    dsutx_pad : outpad generic map (level => cmos, voltage => x25v, tech => padtech)
+      port map (dsutx, tx);
+  
+    led(2) <= (not rx) or (not tx);
+    
+  end block;
+  
+  
+  ------------------------------------------------------------------------------
+  -- GPIO (LEDs, switches, buttons)
+  ------------------------------------------------------------------------------
+  
+  gpio_block: block is
+    signal gpioi                : gpio_in_type;
+    signal gpioo                : gpio_out_type;
+  begin
+    
+    gpio_inst: grgpio
+      generic map (
+        pindex                  => 0,
+        paddr                   => 16#005#,
+        pmask                   => 16#00F#,
+        imask                   => 16#1FFF0000#,
+        nbits                   => 29,
+        irqgen                  => 0
+      )
+      port map (
+        rst                     => rstn,
+        clk                     => clkm,
+        apbi                    => apbi,
+        apbo                    => apbo(0),
+        gpioi                   => gpioi,
+        gpioo                   => gpioo
+      );
+    
+    led_pads_1 : outpadv generic map (width => 4, level => cmos, voltage => x25v, tech => padtech)
+      port map (led(6 downto 3), gpioo.dout(6 downto 3));
+    
+    led_pads_2 : outpadv generic map (width => 5, level => cmos, voltage => x25v, tech => padtech)
+      port map (led(12 downto 8), gpioo.dout(12 downto 8));
+    
+    dipsw_pad : inpadv generic map (width => 8, level => cmos, voltage => x15v, tech => padtech)
+      port map (dipsw, dipsw_int);
+    gpioi.din(23 downto 16) <= dipsw_int;
+    
+    pbtn_pad : inpadv generic map (width => 5, level => cmos, voltage => x15v, tech => padtech)
+      port map (pbtn, gpioi.din(28 downto 24));
+    
+    gpioi.din(1 downto 0) <= "00";
+    gpioi.din(15 downto 13) <= "000";
+    
+  end block;
+  
+  
 end rtl;
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/ahb2mig_ml605.vhd work/leon3-xilinx-ml605/ahb2mig_ml605.vhd
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/ahb2mig_ml605.vhd	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/ahb2mig_ml605.vhd	2019-12-29 15:59:50.120753993 +0100
@@ -0,0 +1,463 @@
+------------------------------------------------------------------------------
+--  This file is a part of the GRLIB VHDL IP LIBRARY
+--  Copyright (C) 2003 - 2008, Gaisler Research
+--  Copyright (C) 2008 - 2014, Aeroflex Gaisler
+--
+--  This program is free software; you can redistribute it and/or modify
+--  it under the terms of the GNU General Public License as published by
+--  the Free Software Foundation; either version 2 of the License, or
+--  (at your option) any later version.
+--
+--  This program is distributed in the hope that it will be useful,
+--  but WITHOUT ANY WARRANTY; without even the implied warranty of
+--  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+--  GNU General Public License for more details.
+--
+--  You should have received a copy of the GNU General Public License
+--  along with this program; if not, write to the Free Software
+--  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA 
+-----------------------------------------------------------------------------
+-- Entity: 	ahb2mig
+-- File:	ahb2mig.vhd
+-- Author:	Jiri Gaisler, Gaisler Research
+-- Description:	AHB wrapper for Xilinx Virtex6 DDR2/3 MIG
+------------------------------------------------------------------------------
+
+library ieee; 
+use ieee.std_logic_1164.all;
+library grlib; 
+use grlib.amba.all;
+
+package ml605 is
+
+  constant nCS_PER_RANK : integer := 1;
+  constant BANK_WIDTH : integer := 3;
+  constant CK_WIDTH : integer := 1;
+  constant CKE_WIDTH : integer := 1;
+  constant COL_WIDTH : integer := 10;
+  constant CS_WIDTH  : integer := 1;
+  constant DM_WIDTH  : integer := 8;
+  constant DQ_WIDTH  : integer := 64;
+  constant DQS_WIDTH : integer := 8;
+  constant ROW_WIDTH : integer := 13;
+  constant PAYLOAD_WIDTH : integer := 64;
+  constant ADDR_WIDTH    : integer := 27;
+
+  type mig_app_in_type is record
+      app_wdf_wren  : std_logic;
+      app_wdf_data  : std_logic_vector((4*PAYLOAD_WIDTH)-1 downto 0);
+      app_wdf_mask  : std_logic_vector((4*PAYLOAD_WIDTH)/8-1 downto 0);
+      app_wdf_end   : std_logic;
+      app_addr      : std_logic_vector(ADDR_WIDTH-1 downto 0);
+      app_cmd       : std_logic_vector(2 downto 0);
+      app_en        : std_logic;
+  end record;
+
+  type mig_app_out_type is record
+      app_rdy       : std_logic;
+      app_wdf_rdy   : std_logic;
+      app_rd_data   : std_logic_vector((4*PAYLOAD_WIDTH)-1 downto 0);
+      app_rd_data_valid : std_logic;
+  end record;
+
+  component ahb2mig_ml605
+   generic (
+      memtech    : integer := 0;
+      hindex     : integer := 0;
+      haddr      : integer := 0;
+      hmask      : integer := 16#e00#;
+      MHz        : integer := 100;
+      Mbyte      : integer := 512;
+      nosync     : integer := 0
+   );
+   port (
+      rst     : in  std_ulogic;
+      clk_ddr : in  std_ulogic;
+      clk_ahb : in  std_ulogic;
+      ahbsi   : in  ahb_slv_in_type;
+      ahbso   : out ahb_slv_out_type;
+      migi    : out mig_app_in_type;
+      migo    : in mig_app_out_type
+   );
+  end component;
+
+end package; 
+
+library ieee;
+use ieee.std_logic_1164.all;
+library grlib;
+use grlib.amba.all;
+use grlib.stdlib.all;
+library gaisler;
+use grlib.devices.all;
+use gaisler.memctrl.all;
+library techmap;
+use techmap.gencomp.all;
+use work.ml605.all;
+
+entity ahb2mig_ml605 is
+   generic (
+      memtech    : integer := 0;
+      hindex     : integer := 0;
+      haddr      : integer := 0;
+      hmask      : integer := 16#e00#;
+      MHz        : integer := 100;
+      Mbyte      : integer := 512;
+      nosync     : integer := 0
+   );
+   port (
+      rst     : in  std_ulogic;
+      clk_ddr : in  std_ulogic;
+      clk_ahb : in  std_ulogic;
+      ahbsi   : in  ahb_slv_in_type;
+      ahbso   : out ahb_slv_out_type;
+      migi    : out mig_app_in_type;
+      migo    : in mig_app_out_type
+   );
+end;
+
+architecture rtl of ahb2mig_ml605 is
+
+constant REVISION  : integer := 0;
+
+constant hconfig : ahb_config_type := (
+   0 => ahb_device_reg ( VENDOR_GAISLER, GAISLER_MIGDDR2, 0, REVISION, 0),
+   4 => ahb_membar(haddr, '1', '1', hmask),
+   others => zero32);
+
+type ahb_state_type is (midle, rhold, dread, dwrite, whold1, whold2);
+type ddr_state_type is (midle, rhold, dread, dwrite, whold1, whold2);
+constant abuf : integer := 6;
+type access_param is record
+   haddr    : std_logic_vector(31 downto 0);
+   size     : std_logic_vector(2 downto 0);
+   hwrite   : std_ulogic;
+end record;
+-- local registers
+
+type mem is array(0 to 15) of std_logic_vector(31 downto 0);
+type wrm is array(0 to 15) of std_logic_vector(3 downto 0);
+
+type ahb_reg_type is record
+   hready   : std_ulogic;
+   hsel     : std_ulogic;
+   startsd  : std_ulogic;
+   state    : ahb_state_type;
+   haddr    : std_logic_vector(31 downto 0);
+   hrdata   : std_logic_vector(127 downto 0);
+   hwrite   : std_ulogic;
+   htrans   : std_logic_vector(1 downto 0);
+   hresp    : std_logic_vector(1 downto 0);
+   raddr    : std_logic_vector(abuf-1 downto 0);
+   size     : std_logic_vector(2 downto 0);
+   acc      : access_param;
+   sync     : std_ulogic;
+   hwdata   : mem;
+   write    : wrm;
+end record;
+
+type ddr_reg_type is record
+   startsd      : std_ulogic;
+   hrdata       : std_logic_vector(511 downto 0);
+   sync         : std_ulogic;
+   dstate    	: ahb_state_type;
+end record;
+
+signal vcc, clk_ahb1, clk_ahb2 : std_ulogic;
+signal r, ri : ddr_reg_type;
+signal ra, rai : ahb_reg_type;
+signal rbdrive, ribdrive : std_logic_vector(31 downto 0);
+signal hwdata, hwdatab : std_logic_vector(127 downto 0);
+
+begin
+
+   vcc <= '1';
+
+   ahb_ctrl : process(rst, ahbsi, r, ra, migo, hwdata)
+   variable va       : ahb_reg_type;  -- local variables for registers
+   variable startsd : std_ulogic;
+   variable ready   : std_logic;
+   variable tmp : std_logic_vector(3 downto 0);
+   variable waddr : integer;
+   variable rdata : std_logic_vector(127 downto 0);
+   begin
+
+      va := ra; va.hresp := HRESP_OKAY; 
+      tmp := (others => '0');
+
+      case ra.raddr(3 downto 2) is
+      when "00" => rdata := r.hrdata(127 downto 0);
+      when "01" => rdata := r.hrdata(255 downto 128);
+      when "10" => rdata := r.hrdata(383 downto 256);
+      when others => rdata := r.hrdata(511 downto 384);
+      end case;
+
+      if AHBDW > 64 and ra.size = HSIZE_4WORD then
+        va.hrdata := rdata(31 downto 0) & rdata(63 downto 32) & rdata(95 downto 64) &  rdata(127 downto 96);
+      elsif AHBDW > 32 and ra.size = HSIZE_DWORD then
+        if ra.raddr(1) = '1' then va.hrdata(63 downto 0) := rdata(95 downto 64) &  rdata(127 downto 96);
+        else va.hrdata(63 downto 0) := rdata(31 downto 0) & rdata(63 downto 32); end if;
+        va.hrdata(127 downto 64) := va.hrdata(63 downto 0);
+      else
+        case ra.raddr(1 downto 0) is
+          when "00" => va.hrdata(31 downto 0) := rdata(31 downto 0);
+          when "01" => va.hrdata(31 downto 0) := rdata(63 downto 32);
+          when "10" => va.hrdata(31 downto 0) := rdata(95 downto 64);
+          when others => va.hrdata(31 downto 0) := rdata(127 downto 96);
+        end case;
+        va.hrdata(127 downto 32) := va.hrdata(31 downto 0) &
+                                   va.hrdata(31 downto 0) &
+                                   va.hrdata(31 downto 0);
+      end if;
+
+      if nosync = 0 then
+	va.sync := r.startsd;
+	if ra.startsd = ra.sync then ready := '1'; 
+	else ready := '0'; end if;
+      else
+	if ra.startsd = r.startsd then ready := '1'; 
+	else ready := '0'; end if;
+      end if;
+
+      if ((ahbsi.hready and ahbsi.hsel(hindex)) = '1') then
+         va.htrans := ahbsi.htrans; va.haddr := ahbsi.haddr;
+         va.size := ahbsi.hsize(2 downto 0); va.hwrite := ahbsi.hwrite;
+         if ahbsi.htrans(1) = '1' then
+            va.hsel := '1'; va.hready := '0';
+         end if;
+      end if;
+
+      if ahbsi.hready = '1' then va.hsel := ahbsi.hsel(hindex); end if;
+
+      case ra.state is
+      when midle =>
+	 va.write := (others => "0000");
+         if ((va.hsel and va.htrans(1)) = '1') then
+            if va.hwrite = '0' then
+               va.state := rhold; va.startsd := not ra.startsd;
+            else
+               va.state := dwrite; va.hready := '1';
+            end if;
+         end if;
+         va.raddr := ra.haddr(7 downto 2);
+         if ((ahbsi.hready and ahbsi.hsel(hindex)) = '1') then
+            va.acc := (va.haddr, va.size, va.hwrite);
+         end if;
+      when rhold =>
+         va.raddr := ra.haddr(7 downto 2);
+         if ready = '1' then
+            va.state := dread; va.hready := '1';
+            if AHBDW > 64 and ra.size(2) = '1' then va.raddr := ra.raddr + 4;
+            elsif AHBDW > 32 and andv(ra.size(1 downto 0)) = '1' then va.raddr := ra.raddr + 2;
+            else va.raddr := ra.raddr + 1; end if;
+         end if;
+      when dread =>
+         va.hready := '1';
+         if AHBDW > 64 and ra.size(2) = '1' then va.raddr := ra.raddr + 4;
+         elsif AHBDW > 32 and andv(ra.size(1 downto 0)) = '1' then va.raddr := ra.raddr + 2;
+         else va.raddr := ra.raddr + 1; end if;
+         if ((va.hsel and va.htrans(1) and va.htrans(0)) = '0') 
+            or (ra.raddr(3 downto 0) = "0000") then
+               va.state := midle; va.hready := '0';
+         end if;
+         va.acc := (va.haddr, va.size, va.hwrite);
+      when dwrite => 
+         va.raddr := ra.haddr(7 downto 2); va.hready := '1';
+         if (((va.hsel and va.htrans(1) and va.htrans(0)) = '0') 
+             or (ra.haddr(5 downto 2) = "1111") 
+             or (AHBDW > 32 and ra.haddr(5 downto 2) = "1110" and andv(ra.size(1 downto 0)) = '1')
+             or (AHBDW > 64 and ra.haddr(5 downto 2) = "1100" and ra.size(2) = '1')) then
+            va.startsd := not ra.startsd; va.state := whold1;
+            va.hready := '0';
+         end if;
+        tmp := decode(ra.haddr(1 downto 0));
+	waddr := conv_integer(ra.haddr(5 downto 2));
+	va.hwdata(waddr) := hwdata(31 downto 0);
+	case ra.size is
+	when "000" => va.write(waddr) := tmp(0) & tmp(1) & tmp(2) & tmp(3);
+	when "001" => va.write(waddr) := tmp(0) & tmp(0) & tmp(2) & tmp(2);
+	when "010" => va.write(waddr) := "1111";
+	when "011" => va.write(waddr) := "1111"; va.write(waddr+1) := "1111";
+	  va.hwdata(waddr+1) := hwdata((63 mod AHBDW) downto (32 mod AHBDW));
+	when others => va.write(waddr) := "1111"; va.write(waddr+1) := "1111";
+	  va.write(waddr+2) := "1111"; va.write(waddr+3) := "1111";
+	  va.hwdata(waddr+1) := hwdata((63 mod AHBDW) downto (32 mod AHBDW));
+	  va.hwdata(waddr+2) := hwdata((95 mod AHBDW) downto (64 mod AHBDW));
+	  va.hwdata(waddr+3) := hwdata((127 mod AHBDW) downto (96 mod AHBDW));
+	end case;
+      when whold1 =>
+         va.state := whold2; 
+      when whold2 =>
+         if ready = '1' then
+            va.state := midle; va.acc := (va.haddr, va.size, va.hwrite);
+         end if;
+      end case;
+
+      if (ahbsi.hready and ahbsi.hsel(hindex) ) = '1' then
+         if ahbsi.htrans(1) = '0' then va.hready := '1'; end if;
+      end if;
+
+      if rst = '0' then
+         va.hsel         := '0';
+         va.hready       := '1';
+         va.state        := midle;
+         va.startsd      := '0';
+	 va.acc.hwrite := '0';
+         va.acc.haddr := (others => '0');
+      end if;
+
+      rai <= va;
+
+   end process;
+
+   ahbso.hready  <= ra.hready;
+   ahbso.hresp   <= ra.hresp;
+   ahbso.hrdata <= ahbdrivedata(ra.hrdata);
+
+   migi.app_addr  <= '0' & ra.acc.haddr(28 downto 6) & "000";
+
+   ddr_ctrl : process(rst, r, ra, migo)
+   variable v        : ddr_reg_type;   -- local variables for registers
+   variable startsd  : std_ulogic;
+   variable raddr    : std_logic_vector(13 downto 0);
+   variable adec     : std_ulogic;
+   variable haddr    : std_logic_vector(31 downto 0);
+   variable hsize    : std_logic_vector(1 downto 0);
+   variable hwrite   : std_ulogic;
+   variable htrans   : std_logic_vector(1 downto 0);
+   variable hready   : std_ulogic;
+   variable app_en   : std_ulogic;
+   variable app_cmd  : std_logic_vector(2 downto 0);
+   variable app_wdf_mask  : std_logic_vector(31 downto 0);
+   variable app_wdf_wren  : std_ulogic;
+   variable app_wdf_end  : std_ulogic;
+   variable app_wdf_data  : std_logic_vector(255 downto 0);
+
+   begin
+
+-- Variable default settings to avoid latches
+
+      v := r; app_en := '0'; app_cmd := "000";
+      app_wdf_wren := '0'; app_wdf_mask := ra.write(7) & ra.write(6) & ra.write(5) &
+	ra.write(4) & ra.write(3) & ra.write(2) & ra.write(1) & ra.write(0);
+      app_wdf_data  := ra.hwdata(7) & ra.hwdata(6) & ra.hwdata(5) & ra.hwdata(4) &
+        ra.hwdata(3) & ra.hwdata(2) & ra.hwdata(1) & ra.hwdata(0);
+      if ra.acc.hwrite = '0' then app_cmd(0) := '1'; else app_cmd(0) := '0'; end if;
+      app_wdf_end := '0'; v.sync := ra.startsd;
+      
+      if nosync = 0 then
+	if r.startsd /= r.sync then startsd := '1';
+	else startsd := '0'; end if;
+      else
+	if ra.startsd /= r.startsd then startsd := '1';
+	else startsd := '0'; end if;
+      end if;
+      
+      case r.dstate is
+      when midle =>
+	if startsd = '1' then app_en := '1'; end if;
+	if (migo.app_rdy and app_en) = '1' then
+	  if ra.acc.hwrite = '0' then v.dstate := dread;
+	  else v.dstate := dwrite; end if;
+	end if;
+      when dread =>
+         if migo.app_rd_data_valid = '1' then
+	   v.hrdata(255 downto 0) := migo.app_rd_data;
+	   v.dstate := rhold;
+	 end if;
+      when rhold =>
+	   v.hrdata(511 downto 256) := migo.app_rd_data;
+	   v.dstate := midle;
+	v.startsd := not r.startsd;
+      when dwrite =>
+	 app_wdf_wren := '1';
+         if migo.app_wdf_rdy = '1' then
+	   v.dstate := whold1;
+	 end if;
+      when whold1 =>
+	app_wdf_wren := '1'; app_wdf_end := '1';
+	app_wdf_mask :=  ra.write(15) & ra.write(14) & ra.write(13) &
+	   ra.write(12) & ra.write(11) & ra.write(10) & ra.write(9) & ra.write(8);
+	app_wdf_data := ra.hwdata(15) & ra.hwdata(14) & ra.hwdata(13) & ra.hwdata(12) &
+	   ra.hwdata(11) & ra.hwdata(10) & ra.hwdata(9) & ra.hwdata(8);
+        if migo.app_wdf_rdy = '1' then
+	  v.startsd := not r.startsd;
+	  v.dstate := midle;
+	end if;
+      when others =>
+      end case;
+
+-- reset
+
+      if rst = '0' then
+         v.startsd      := '0';
+      end if;
+
+      ri <= v;
+      migi.app_cmd <= app_cmd;
+      migi.app_en  <= app_en;
+      migi.app_wdf_wren  <= app_wdf_wren;
+      migi.app_wdf_end  <= app_wdf_end;
+      migi.app_wdf_mask  <= not app_wdf_mask;
+      migi.app_wdf_data  <= app_wdf_data;
+   
+   end process;
+
+   ahbso.hconfig <= hconfig;
+   ahbso.hirq    <= (others => '0');
+   ahbso.hindex  <= hindex;
+   ahbso.hsplit  <= (others => '0');
+
+   clk_ahb1 <= clk_ahb; clk_ahb2 <= clk_ahb1;  -- sync clock deltas
+   ahbregs : process(clk_ahb2) begin
+      if rising_edge(clk_ahb2) then
+         ra <= rai;
+      end if;
+   end process;
+
+   ddrregs : process(clk_ddr, rst) begin
+      if rising_edge(clk_ddr) then
+         r <= ri;
+      end if;
+   end process;
+
+   -- Write data selection.
+   AHB32: if AHBDW = 32 generate
+     hwdata <= ahbsi.hwdata(31 downto 0) & ahbsi.hwdata(31 downto 0) &
+               ahbsi.hwdata(31 downto 0) & ahbsi.hwdata(31 downto 0);
+   end generate AHB32;
+   AHB64: if AHBDW = 64 generate
+     -- With CORE_ACDM set to 0 hwdata will always be ahbsi.hwdata(63 downto 0)
+     -- otherwise the valid data slice will be selected, and possibly uplicated,
+     -- from ahbsi.hwdata. 
+     hwdatab(63 downto 0) <= ahbreaddword(ahbsi.hwdata, ra.haddr(4 downto 2)) when (CORE_ACDM = 0 or ra.size(1 downto 0) = "11") else
+               (ahbreadword(ahbsi.hwdata, ra.haddr(4 downto 2)) &
+                ahbreadword(ahbsi.hwdata, ra.haddr(4 downto 2)));
+     hwdata <= hwdatab(31 downto 0) & hwdatab(63 downto 32) &
+	      hwdatab(31 downto 0) & hwdatab(63 downto 32);
+   end generate AHB64;
+   AHBWIDE: if AHBDW > 64 generate
+     -- With CORE_ACDM set to 0 hwdata will always be ahbsi.hwdata(127 downto 0)
+     -- otherwise the valid data slice will be selected, and possibly uplicated,
+     -- from ahbsi.hwdata.
+     hwdatab <= ahbread4word(ahbsi.hwdata, ra.haddr(4 downto 2)) when (CORE_ACDM = 0 or ra.size(2) = '1') else
+               (ahbreaddword(ahbsi.hwdata, ra.haddr(4 downto 2)) &
+                ahbreaddword(ahbsi.hwdata, ra.haddr(4 downto 2))) when (ra.size = "011") else
+               (ahbreadword(ahbsi.hwdata, ra.haddr(4 downto 2)) &
+                ahbreadword(ahbsi.hwdata, ra.haddr(4 downto 2)) &
+                ahbreadword(ahbsi.hwdata, ra.haddr(4 downto 2)) &
+                ahbreadword(ahbsi.hwdata, ra.haddr(4 downto 2)));
+     hwdata <= hwdatab(31 downto 0) & hwdatab(63 downto 32) &
+	      hwdatab(95 downto 64) & hwdatab(127 downto 96);
+   end generate AHBWIDE;
+   
+-- pragma translate_off
+   bootmsg : report_version
+   generic map (
+      msg1 => "mig2ahb" & tost(hindex) & ": 64-bit DDR2/3 controller rev " &
+              tost(REVISION) & ", " & tost(Mbyte) & " Mbyte, " & tost(MHz) &
+              " MHz DDR clock");
+-- pragma translate_on
+
+end;
+
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/ahbrom.vhd work/leon3-xilinx-ml605/ahbrom.vhd
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/ahbrom.vhd	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/ahbrom.vhd	2019-12-29 15:59:50.120753993 +0100
@@ -0,0 +1,279 @@
+
+----------------------------------------------------------------------------
+--  This file is a part of the GRLIB VHDL IP LIBRARY
+--  Copyright (C) 2010 Aeroflex Gaisler
+----------------------------------------------------------------------------
+-- Entity: 	ahbrom
+-- File:	ahbrom.vhd
+-- Author:	Jiri Gaisler - Gaisler Research
+-- Description:	AHB rom. 0/1-waitstate read
+----------------------------------------------------------------------------
+library ieee;
+use ieee.std_logic_1164.all;
+library grlib;
+use grlib.amba.all;
+use grlib.stdlib.all;
+use grlib.devices.all;
+
+entity ahbrom is
+  generic (
+    hindex  : integer := 0;
+    haddr   : integer := 0;
+    hmask   : integer := 16#fff#;
+    pipe    : integer := 0;
+    tech    : integer := 0;
+    kbytes  : integer := 1);
+  port (
+    rst     : in  std_ulogic;
+    clk     : in  std_ulogic;
+    ahbsi   : in  ahb_slv_in_type;
+    ahbso   : out ahb_slv_out_type
+  );
+end;
+
+architecture rtl of ahbrom is
+constant abits : integer := 10;
+constant bytes : integer := 752;
+
+constant hconfig : ahb_config_type := (
+  0 => ahb_device_reg ( VENDOR_GAISLER, GAISLER_AHBROM, 0, 0, 0),
+  4 => ahb_membar(haddr, '1', '1', hmask), others => zero32);
+
+signal romdata : std_logic_vector(31 downto 0);
+signal addr : std_logic_vector(abits-1 downto 2);
+signal hsel, hready : std_ulogic;
+
+begin
+
+  ahbso.hresp   <= "00"; 
+  ahbso.hsplit  <= (others => '0'); 
+  ahbso.hirq    <= (others => '0');
+  ahbso.hconfig <= hconfig;
+  ahbso.hindex  <= hindex;
+
+  reg : process (clk)
+  begin
+    if rising_edge(clk) then 
+      addr <= ahbsi.haddr(abits-1 downto 2);
+    end if;
+  end process;
+
+  p0 : if pipe = 0 generate
+    ahbso.hrdata  <= ahbdrivedata(romdata);
+    ahbso.hready  <= '1';
+  end generate;
+
+  p1 : if pipe = 1 generate
+    reg2 : process (clk)
+    begin
+      if rising_edge(clk) then
+	hsel <= ahbsi.hsel(hindex) and ahbsi.htrans(1);
+	hready <= ahbsi.hready;
+	ahbso.hready <=  (not rst) or (hsel and hready) or
+	  (ahbsi.hsel(hindex) and not ahbsi.htrans(1) and ahbsi.hready);
+	ahbso.hrdata  <= ahbdrivedata(romdata);
+      end if;
+    end process;
+  end generate;
+
+  comb : process (addr)
+  begin
+    case conv_integer(addr) is
+    when 16#00000# => romdata <= X"81D82000";
+    when 16#00001# => romdata <= X"03000004";
+    when 16#00002# => romdata <= X"821060E0";
+    when 16#00003# => romdata <= X"81884000";
+    when 16#00004# => romdata <= X"81900000";
+    when 16#00005# => romdata <= X"81980000";
+    when 16#00006# => romdata <= X"81800000";
+    when 16#00007# => romdata <= X"A1800000";
+    when 16#00008# => romdata <= X"01000000";
+    when 16#00009# => romdata <= X"03002040";
+    when 16#0000A# => romdata <= X"8210600F";
+    when 16#0000B# => romdata <= X"C2A00040";
+    when 16#0000C# => romdata <= X"84100000";
+    when 16#0000D# => romdata <= X"01000000";
+    when 16#0000E# => romdata <= X"01000000";
+    when 16#0000F# => romdata <= X"01000000";
+    when 16#00010# => romdata <= X"01000000";
+    when 16#00011# => romdata <= X"01000000";
+    when 16#00012# => romdata <= X"80108002";
+    when 16#00013# => romdata <= X"01000000";
+    when 16#00014# => romdata <= X"01000000";
+    when 16#00015# => romdata <= X"01000000";
+    when 16#00016# => romdata <= X"01000000";
+    when 16#00017# => romdata <= X"01000000";
+    when 16#00018# => romdata <= X"87444000";
+    when 16#00019# => romdata <= X"8608E01F";
+    when 16#0001A# => romdata <= X"88100000";
+    when 16#0001B# => romdata <= X"8A100000";
+    when 16#0001C# => romdata <= X"8C100000";
+    when 16#0001D# => romdata <= X"8E100000";
+    when 16#0001E# => romdata <= X"A0100000";
+    when 16#0001F# => romdata <= X"A2100000";
+    when 16#00020# => romdata <= X"A4100000";
+    when 16#00021# => romdata <= X"A6100000";
+    when 16#00022# => romdata <= X"A8100000";
+    when 16#00023# => romdata <= X"AA100000";
+    when 16#00024# => romdata <= X"AC100000";
+    when 16#00025# => romdata <= X"AE100000";
+    when 16#00026# => romdata <= X"90100000";
+    when 16#00027# => romdata <= X"92100000";
+    when 16#00028# => romdata <= X"94100000";
+    when 16#00029# => romdata <= X"96100000";
+    when 16#0002A# => romdata <= X"98100000";
+    when 16#0002B# => romdata <= X"9A100000";
+    when 16#0002C# => romdata <= X"9C100000";
+    when 16#0002D# => romdata <= X"9E100000";
+    when 16#0002E# => romdata <= X"86A0E001";
+    when 16#0002F# => romdata <= X"16BFFFEF";
+    when 16#00030# => romdata <= X"81E00000";
+    when 16#00031# => romdata <= X"82102002";
+    when 16#00032# => romdata <= X"81904000";
+    when 16#00033# => romdata <= X"03000004";
+    when 16#00034# => romdata <= X"821060E0";
+    when 16#00035# => romdata <= X"81884000";
+    when 16#00036# => romdata <= X"01000000";
+    when 16#00037# => romdata <= X"01000000";
+    when 16#00038# => romdata <= X"01000000";
+    when 16#00039# => romdata <= X"83480000";
+    when 16#0003A# => romdata <= X"8330600C";
+    when 16#0003B# => romdata <= X"80886001";
+    when 16#0003C# => romdata <= X"02800024";
+    when 16#0003D# => romdata <= X"01000000";
+    when 16#0003E# => romdata <= X"07000000";
+    when 16#0003F# => romdata <= X"8610E178";
+    when 16#00040# => romdata <= X"C108C000";
+    when 16#00041# => romdata <= X"C118C000";
+    when 16#00042# => romdata <= X"C518C000";
+    when 16#00043# => romdata <= X"C918C000";
+    when 16#00044# => romdata <= X"CD18C000";
+    when 16#00045# => romdata <= X"D118C000";
+    when 16#00046# => romdata <= X"D518C000";
+    when 16#00047# => romdata <= X"D918C000";
+    when 16#00048# => romdata <= X"DD18C000";
+    when 16#00049# => romdata <= X"E118C000";
+    when 16#0004A# => romdata <= X"E518C000";
+    when 16#0004B# => romdata <= X"E918C000";
+    when 16#0004C# => romdata <= X"ED18C000";
+    when 16#0004D# => romdata <= X"F118C000";
+    when 16#0004E# => romdata <= X"F518C000";
+    when 16#0004F# => romdata <= X"F918C000";
+    when 16#00050# => romdata <= X"FD18C000";
+    when 16#00051# => romdata <= X"01000000";
+    when 16#00052# => romdata <= X"01000000";
+    when 16#00053# => romdata <= X"01000000";
+    when 16#00054# => romdata <= X"01000000";
+    when 16#00055# => romdata <= X"01000000";
+    when 16#00056# => romdata <= X"89A00842";
+    when 16#00057# => romdata <= X"01000000";
+    when 16#00058# => romdata <= X"01000000";
+    when 16#00059# => romdata <= X"01000000";
+    when 16#0005A# => romdata <= X"01000000";
+    when 16#0005B# => romdata <= X"10800005";
+    when 16#0005C# => romdata <= X"01000000";
+    when 16#0005D# => romdata <= X"01000000";
+    when 16#0005E# => romdata <= X"00000000";
+    when 16#0005F# => romdata <= X"00000000";
+    when 16#00060# => romdata <= X"87444000";
+    when 16#00061# => romdata <= X"8730E01C";
+    when 16#00062# => romdata <= X"8688E00F";
+    when 16#00063# => romdata <= X"1280000A";
+    when 16#00064# => romdata <= X"03200000";
+    when 16#00065# => romdata <= X"05040E00";
+    when 16#00066# => romdata <= X"8410A133";
+    when 16#00067# => romdata <= X"C4204000";
+    when 16#00068# => romdata <= X"0539AE03";
+    when 16#00069# => romdata <= X"8410A250";
+    when 16#0006A# => romdata <= X"C4206004";
+    when 16#0006B# => romdata <= X"050003FC";
+    when 16#0006C# => romdata <= X"C4206008";
+    when 16#0006D# => romdata <= X"05000080";
+    when 16#0006E# => romdata <= X"82100000";
+    when 16#0006F# => romdata <= X"80A0E000";
+    when 16#00070# => romdata <= X"02800005";
+    when 16#00071# => romdata <= X"01000000";
+    when 16#00072# => romdata <= X"82004002";
+    when 16#00073# => romdata <= X"10BFFFFC";
+    when 16#00074# => romdata <= X"8620E001";
+    when 16#00075# => romdata <= X"3D1003FF";
+    when 16#00076# => romdata <= X"BC17A3E0";
+    when 16#00077# => romdata <= X"BC278001";
+    when 16#00078# => romdata <= X"9C27A060";
+    when 16#00079# => romdata <= X"03100000";
+    when 16#0007A# => romdata <= X"07200001";
+    when 16#0007B# => romdata <= X"8610E200";
+    when 16#0007C# => romdata <= X"C220E014";
+    when 16#0007D# => romdata <= X"0500FFC0";
+    when 16#0007E# => romdata <= X"8410A2FF";
+    when 16#0007F# => romdata <= X"C420E004";
+    when 16#00080# => romdata <= X"05000280";
+    when 16#00081# => romdata <= X"8410A00A";
+    when 16#00082# => romdata <= X"C420E008";
+    when 16#00083# => romdata <= X"C420E00C";
+    when 16#00084# => romdata <= X"050104C0";
+    when 16#00085# => romdata <= X"8410A313";
+    when 16#00086# => romdata <= X"C420E004";
+    when 16#00087# => romdata <= X"84102021";
+    when 16#00088# => romdata <= X"C420E000";
+    when 16#00089# => romdata <= X"84102040";
+    when 16#0008A# => romdata <= X"84A0A001";
+    when 16#0008B# => romdata <= X"36BFFFFF";
+    when 16#0008C# => romdata <= X"C4284002";
+    when 16#0008D# => romdata <= X"84102040";
+    when 16#0008E# => romdata <= X"84A0A001";
+    when 16#0008F# => romdata <= X"36BFFFFF";
+    when 16#00090# => romdata <= X"C6084002";
+    when 16#00091# => romdata <= X"82006040";
+    when 16#00092# => romdata <= X"84102040";
+    when 16#00093# => romdata <= X"84A0A002";
+    when 16#00094# => romdata <= X"36BFFFFF";
+    when 16#00095# => romdata <= X"C4304002";
+    when 16#00096# => romdata <= X"84102040";
+    when 16#00097# => romdata <= X"84A0A002";
+    when 16#00098# => romdata <= X"36BFFFFF";
+    when 16#00099# => romdata <= X"C6104002";
+    when 16#0009A# => romdata <= X"82006040";
+    when 16#0009B# => romdata <= X"84102040";
+    when 16#0009C# => romdata <= X"84A0A004";
+    when 16#0009D# => romdata <= X"36BFFFFF";
+    when 16#0009E# => romdata <= X"C4204002";
+    when 16#0009F# => romdata <= X"84102040";
+    when 16#000A0# => romdata <= X"84A0A004";
+    when 16#000A1# => romdata <= X"36BFFFFF";
+    when 16#000A2# => romdata <= X"C6004002";
+    when 16#000A3# => romdata <= X"82006040";
+    when 16#000A4# => romdata <= X"84102040";
+    when 16#000A5# => romdata <= X"84A0A008";
+    when 16#000A6# => romdata <= X"36BFFFFF";
+    when 16#000A7# => romdata <= X"C4384002";
+    when 16#000A8# => romdata <= X"84102040";
+    when 16#000A9# => romdata <= X"84A0A008";
+    when 16#000AA# => romdata <= X"36BFFFFF";
+    when 16#000AB# => romdata <= X"C8184002";
+    when 16#000AC# => romdata <= X"10BFFFC9";
+    when 16#000AD# => romdata <= X"01000000";
+    when 16#000AE# => romdata <= X"C4004000";
+    when 16#000AF# => romdata <= X"C4184000";
+    when 16#000B0# => romdata <= X"C4186010";
+    when 16#000B1# => romdata <= X"82006020";
+    when 16#000B2# => romdata <= X"10BFFFF3";
+    when 16#000B3# => romdata <= X"01000000";
+    when 16#000B4# => romdata <= X"81C04000";
+    when 16#000B5# => romdata <= X"01000000";
+    when 16#000B6# => romdata <= X"01000000";
+    when 16#000B7# => romdata <= X"01000000";
+    when 16#000B8# => romdata <= X"00000000";
+    when 16#000B9# => romdata <= X"00000000";
+    when 16#000BA# => romdata <= X"00000000";
+    when 16#000BB# => romdata <= X"00000000";
+    when 16#000BC# => romdata <= X"00000000";
+    when others => romdata <= (others => '-');
+    end case;
+  end process;
+  -- pragma translate_off
+  bootmsg : report_version 
+  generic map ("ahbrom" & tost(hindex) &
+  ": 32-bit AHB ROM Module,  " & tost(bytes/4) & " words, " & tost(abits-2) & " address bits" );
+  -- pragma translate_on
+  end;
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/.config work/leon3-xilinx-ml605/.config
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/.config	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/.config	2019-12-29 15:59:50.120753993 +0100
@@ -0,0 +1,320 @@
+#
+# Automatically generated make config: don't edit
+#
+CONFIG_LEON3FT_PRESENT=y
+CONFIG_HAS_SHARED_GRFPU=y
+
+#
+# Synthesis      
+#
+# CONFIG_SYN_INFERRED is not set
+# CONFIG_SYN_STRATIX is not set
+# CONFIG_SYN_STRATIXII is not set
+# CONFIG_SYN_STRATIXIII is not set
+# CONFIG_SYN_STRATIXIV is not set
+# CONFIG_SYN_CYCLONEIII is not set
+# CONFIG_SYN_ALTERA is not set
+# CONFIG_SYN_AXCEL is not set
+# CONFIG_SYN_AXDSP is not set
+# CONFIG_SYN_PROASIC is not set
+# CONFIG_SYN_PROASICPLUS is not set
+# CONFIG_SYN_PROASIC3 is not set
+# CONFIG_SYN_PROASIC3E is not set
+# CONFIG_SYN_PROASIC3L is not set
+# CONFIG_SYN_IGLOO is not set
+# CONFIG_SYN_FUSION is not set
+# CONFIG_SYN_UT025CRH is not set
+# CONFIG_SYN_UT130HBD is not set
+# CONFIG_SYN_UT90NHBD is not set
+# CONFIG_SYN_ATC18 is not set
+# CONFIG_SYN_ATC18RHA is not set
+# CONFIG_SYN_CMOS9SF is not set
+# CONFIG_SYN_CUSTOM1 is not set
+# CONFIG_SYN_EASIC90 is not set
+# CONFIG_SYN_EASIC45 is not set
+# CONFIG_SYN_IHP25 is not set
+# CONFIG_SYN_IHP25RH is not set
+# CONFIG_SYN_LATTICE is not set
+# CONFIG_SYN_ECLIPSE is not set
+# CONFIG_SYN_PEREGRINE is not set
+# CONFIG_SYN_RH_LIB18T is not set
+# CONFIG_SYN_RHUMC is not set
+# CONFIG_SYN_SAED32 is not set
+# CONFIG_SYN_DARE is not set
+# CONFIG_SYN_SMIC13 is not set
+# CONFIG_SYN_TM65GPLUS is not set
+# CONFIG_SYN_TSMC90 is not set
+# CONFIG_SYN_UMC is not set
+# CONFIG_SYN_ARTIX7 is not set
+# CONFIG_SYN_KINTEX7 is not set
+# CONFIG_SYN_SPARTAN3 is not set
+# CONFIG_SYN_SPARTAN3E is not set
+# CONFIG_SYN_SPARTAN6 is not set
+# CONFIG_SYN_VIRTEXE is not set
+# CONFIG_SYN_VIRTEX2 is not set
+# CONFIG_SYN_VIRTEX4 is not set
+# CONFIG_SYN_VIRTEX5 is not set
+CONFIG_SYN_VIRTEX6=y
+# CONFIG_SYN_VIRTEX7 is not set
+# CONFIG_SYN_ZYNQ7000 is not set
+# CONFIG_SYN_INFER_RAM is not set
+# CONFIG_SYN_INFER_PADS is not set
+# CONFIG_SYN_NO_ASYNC is not set
+# CONFIG_SYN_SCAN is not set
+
+#
+# Clock generation
+#
+# CONFIG_FREQ60 is not set
+CONFIG_FREQ75=y
+# CONFIG_FREQ80 is not set
+# CONFIG_FREQ100 is not set
+# CONFIG_FREQ120 is not set
+
+#
+# Processor            
+#
+CONFIG_LEON3=y
+CONFIG_PROC_NUM=1
+# CONFIG_LEON3_MIN is not set
+# CONFIG_LEON3_GP is not set
+# CONFIG_LEON3_HP is not set
+CONFIG_LEON3_CUSTOM=y
+
+#
+# Integer unit                                           
+#
+CONFIG_IU_NWINDOWS=8
+CONFIG_IU_V8MULDIV=y
+CONFIG_IU_MUL_LATENCY_2=y
+# CONFIG_IU_MUL_LATENCY_4 is not set
+# CONFIG_IU_MUL_LATENCY_5 is not set
+CONFIG_IU_MUL_INFERRED=y
+# CONFIG_IU_MUL_MODGEN is not set
+# CONFIG_IU_MUL_TECHSPEC is not set
+# CONFIG_IU_MUL_DW is not set
+CONFIG_IU_BP=y
+CONFIG_IU_SVT=y
+# CONFIG_NOTAG is not set
+CONFIG_IU_LDELAY=1
+CONFIG_IU_WATCHPOINTS=2
+CONFIG_PWD=y
+CONFIG_IU_RSTADDR=00000
+
+#
+# Floating-point unit
+#
+# CONFIG_FPU_ENABLE is not set
+
+#
+# Cache system
+#
+CONFIG_ICACHE_ENABLE=y
+# CONFIG_ICACHE_ASSO1 is not set
+CONFIG_ICACHE_ASSO2=y
+# CONFIG_ICACHE_ASSO3 is not set
+# CONFIG_ICACHE_ASSO4 is not set
+# CONFIG_ICACHE_SZ1 is not set
+# CONFIG_ICACHE_SZ2 is not set
+# CONFIG_ICACHE_SZ4 is not set
+CONFIG_ICACHE_SZ8=y
+# CONFIG_ICACHE_SZ16 is not set
+# CONFIG_ICACHE_SZ32 is not set
+# CONFIG_ICACHE_SZ64 is not set
+# CONFIG_ICACHE_SZ128 is not set
+# CONFIG_ICACHE_SZ256 is not set
+# CONFIG_ICACHE_LZ16 is not set
+CONFIG_ICACHE_LZ32=y
+# CONFIG_ICACHE_ALGORND is not set
+# CONFIG_ICACHE_ALGODIR is not set
+# CONFIG_ICACHE_ALGOLRR is not set
+CONFIG_ICACHE_ALGOLRU=y
+# CONFIG_ICACHE_LOCK is not set
+CONFIG_DCACHE_ENABLE=y
+# CONFIG_DCACHE_ASSO1 is not set
+CONFIG_DCACHE_ASSO2=y
+# CONFIG_DCACHE_ASSO3 is not set
+# CONFIG_DCACHE_ASSO4 is not set
+# CONFIG_DCACHE_SZ1 is not set
+# CONFIG_DCACHE_SZ2 is not set
+CONFIG_DCACHE_SZ4=y
+# CONFIG_DCACHE_SZ8 is not set
+# CONFIG_DCACHE_SZ16 is not set
+# CONFIG_DCACHE_SZ32 is not set
+# CONFIG_DCACHE_SZ64 is not set
+# CONFIG_DCACHE_SZ128 is not set
+# CONFIG_DCACHE_SZ256 is not set
+CONFIG_DCACHE_LZ16=y
+# CONFIG_DCACHE_LZ32 is not set
+# CONFIG_DCACHE_ALGORND is not set
+# CONFIG_DCACHE_ALGODIR is not set
+# CONFIG_DCACHE_ALGOLRR is not set
+CONFIG_DCACHE_ALGOLRU=y
+# CONFIG_DCACHE_LOCK is not set
+CONFIG_DCACHE_SNOOP=y
+CONFIG_DCACHE_SNOOP_SEPTAG=y
+CONFIG_CACHE_FIXED=0
+
+#
+# MMU
+#
+CONFIG_MMU_ENABLE=y
+CONFIG_MMU_COMBINED=y
+# CONFIG_MMU_SPLIT is not set
+# CONFIG_MMU_REPARRAY is not set
+CONFIG_MMU_REPINCREMENT=y
+# CONFIG_MMU_I2 is not set
+# CONFIG_MMU_I4 is not set
+CONFIG_MMU_I8=y
+# CONFIG_MMU_I16 is not set
+# CONFIG_MMU_I32 is not set
+# CONFIG_MMU_I64 is not set
+CONFIG_MMU_PAGE_4K=y
+# CONFIG_MMU_PAGE_8K is not set
+# CONFIG_MMU_PAGE_16K is not set
+# CONFIG_MMU_PAGE_32K is not set
+# CONFIG_MMU_PAGE_PROG is not set
+
+#
+# Debug Support Unit        
+#
+CONFIG_DSU_ENABLE=y
+CONFIG_DSU_ITRACE=y
+# CONFIG_DSU_ITRACESZ1 is not set
+# CONFIG_DSU_ITRACESZ2 is not set
+CONFIG_DSU_ITRACESZ4=y
+# CONFIG_DSU_ITRACESZ8 is not set
+# CONFIG_DSU_ITRACESZ16 is not set
+CONFIG_DSU_ATRACE=y
+# CONFIG_DSU_ATRACESZ1 is not set
+# CONFIG_DSU_ATRACESZ2 is not set
+CONFIG_DSU_ATRACESZ4=y
+# CONFIG_DSU_ATRACESZ8 is not set
+# CONFIG_DSU_ATRACESZ16 is not set
+
+#
+# Fault-tolerance  
+#
+# CONFIG_LEON3FT_EN is not set
+
+#
+# VHDL debug settings       
+#
+# CONFIG_IU_DISAS is not set
+# CONFIG_DEBUG_PC32 is not set
+
+#
+# AMBA configuration
+#
+CONFIG_AHB_DEFMST=0
+CONFIG_AHB_RROBIN=y
+CONFIG_AHB_SPLIT=y
+# CONFIG_AHB_FPNPEN is not set
+CONFIG_AHB_IOADDR=FFF
+CONFIG_APB_HADDR=800
+# CONFIG_AHB_MON is not set
+# CONFIG_AHB_DTRACE is not set
+
+#
+# Debug Link           
+#
+# CONFIG_DSU_UART is not set
+CONFIG_DSU_JTAG=y
+CONFIG_DSU_ETH=y
+# CONFIG_DSU_ETHSZ1 is not set
+# CONFIG_DSU_ETHSZ2 is not set
+# CONFIG_DSU_ETHSZ4 is not set
+# CONFIG_DSU_ETHSZ8 is not set
+CONFIG_DSU_ETHSZ16=y
+CONFIG_DSU_IPMSB=C0A8
+CONFIG_DSU_IPLSB=0033
+CONFIG_DSU_ETHMSB=020789
+CONFIG_DSU_ETHLSB=000123
+# CONFIG_DSU_ETH_PROG is not set
+
+#
+# Peripherals             
+#
+
+#
+# Memory controllers             
+#
+
+#
+# Leon2 memory controller        
+#
+CONFIG_MCTRL_LEON2=y
+CONFIG_MCTRL_8BIT=y
+CONFIG_MCTRL_16BIT=y
+# CONFIG_MCTRL_5CS is not set
+# CONFIG_MCTRL_SDRAM is not set
+
+#
+# Xilinx MIG DDR2 controller   
+#
+CONFIG_MIG_DDR2=y
+
+#
+# On-chip RAM/ROM                 
+#
+# CONFIG_AHBROM_ENABLE is not set
+# CONFIG_AHBRAM_ENABLE is not set
+
+#
+# Ethernet             
+#
+CONFIG_GRETH_ENABLE=y
+# CONFIG_GRETH_GIGA is not set
+# CONFIG_GRETH_FIFO4 is not set
+# CONFIG_GRETH_FIFO8 is not set
+CONFIG_GRETH_FIFO16=y
+# CONFIG_GRETH_FIFO32 is not set
+# CONFIG_GRETH_FIFO64 is not set
+# CONFIG_GRETH_FT is not set
+
+#
+# UARTs, timers and irq control         
+#
+CONFIG_UART1_ENABLE=y
+# CONFIG_UA1_FIFO1 is not set
+# CONFIG_UA1_FIFO2 is not set
+# CONFIG_UA1_FIFO4 is not set
+CONFIG_UA1_FIFO8=y
+# CONFIG_UA1_FIFO16 is not set
+# CONFIG_UA1_FIFO32 is not set
+CONFIG_IRQ3_ENABLE=y
+# CONFIG_IRQ3_SEC is not set
+CONFIG_GPT_ENABLE=y
+CONFIG_GPT_NTIM=2
+CONFIG_GPT_SW=16
+CONFIG_GPT_TW=32
+CONFIG_GPT_IRQ=8
+CONFIG_GPT_SEPIRQ=y
+# CONFIG_GPT_WDOGEN is not set
+CONFIG_GRGPIO_ENABLE=y
+CONFIG_GRGPIO_WIDTH=8
+CONFIG_GRGPIO_IMASK=0000
+CONFIG_I2C_ENABLE=y
+
+#
+# Keybord and VGA interface
+#
+# CONFIG_KBD_ENABLE is not set
+# CONFIG_VGA_ENABLE is not set
+CONFIG_SVGA_ENABLE=y
+
+#
+# System ACE Interface Controller
+#
+CONFIG_GRACECTRL=y
+
+#
+# PCI EXPRESS
+#
+# CONFIG_PCIEXP_MASTER_TARGET is not set
+# CONFIG_PCIEXP_MASTER_FIFO is not set
+
+#
+# VHDL Debugging        
+#
+# CONFIG_DEBUG_UART is not set
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/config.h work/leon3-xilinx-ml605/config.h
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/config.h	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/config.h	2019-12-29 15:59:50.122753997 +0100
@@ -0,0 +1,298 @@
+/*
+ * Automatically generated C config: don't edit
+ */
+#define AUTOCONF_INCLUDED
+#define CONFIG_LEON3FT_PRESENT 1
+#define CONFIG_HAS_SHARED_GRFPU 1
+/*
+ * Synthesis      
+ */
+#undef  CONFIG_SYN_INFERRED
+#undef  CONFIG_SYN_STRATIX
+#undef  CONFIG_SYN_STRATIXII
+#undef  CONFIG_SYN_STRATIXIII
+#undef  CONFIG_SYN_STRATIXIV
+#undef  CONFIG_SYN_CYCLONEIII
+#undef  CONFIG_SYN_ALTERA
+#undef  CONFIG_SYN_AXCEL
+#undef  CONFIG_SYN_AXDSP
+#undef  CONFIG_SYN_PROASIC
+#undef  CONFIG_SYN_PROASICPLUS
+#undef  CONFIG_SYN_PROASIC3
+#undef  CONFIG_SYN_PROASIC3E
+#undef  CONFIG_SYN_PROASIC3L
+#undef  CONFIG_SYN_IGLOO
+#undef  CONFIG_SYN_FUSION
+#undef  CONFIG_SYN_UT025CRH
+#undef  CONFIG_SYN_UT130HBD
+#undef  CONFIG_SYN_UT90NHBD
+#undef  CONFIG_SYN_ATC18
+#undef  CONFIG_SYN_ATC18RHA
+#undef  CONFIG_SYN_CMOS9SF
+#undef  CONFIG_SYN_CUSTOM1
+#undef  CONFIG_SYN_EASIC90
+#undef  CONFIG_SYN_EASIC45
+#undef  CONFIG_SYN_IHP25
+#undef  CONFIG_SYN_IHP25RH
+#undef  CONFIG_SYN_LATTICE
+#undef  CONFIG_SYN_ECLIPSE
+#undef  CONFIG_SYN_PEREGRINE
+#undef  CONFIG_SYN_RH_LIB18T
+#undef  CONFIG_SYN_RHUMC
+#undef  CONFIG_SYN_SAED32
+#undef  CONFIG_SYN_DARE
+#undef  CONFIG_SYN_SMIC13
+#undef  CONFIG_SYN_TM65GPLUS
+#undef  CONFIG_SYN_TSMC90
+#undef  CONFIG_SYN_UMC
+#undef  CONFIG_SYN_ARTIX7
+#undef  CONFIG_SYN_KINTEX7
+#undef  CONFIG_SYN_SPARTAN3
+#undef  CONFIG_SYN_SPARTAN3E
+#undef  CONFIG_SYN_SPARTAN6
+#undef  CONFIG_SYN_VIRTEXE
+#undef  CONFIG_SYN_VIRTEX2
+#undef  CONFIG_SYN_VIRTEX4
+#undef  CONFIG_SYN_VIRTEX5
+#define CONFIG_SYN_VIRTEX6 1
+#undef  CONFIG_SYN_VIRTEX7
+#undef  CONFIG_SYN_ZYNQ7000
+#undef  CONFIG_SYN_INFER_RAM
+#undef  CONFIG_SYN_INFER_PADS
+#undef  CONFIG_SYN_NO_ASYNC
+#undef  CONFIG_SYN_SCAN
+/*
+ * Clock generation
+ */
+#undef  CONFIG_FREQ60
+#define CONFIG_FREQ75 1
+#undef  CONFIG_FREQ80
+#undef  CONFIG_FREQ100
+#undef  CONFIG_FREQ120
+/*
+ * Processor            
+ */
+#define CONFIG_LEON3 1
+#define CONFIG_PROC_NUM (1)
+#undef  CONFIG_LEON3_MIN
+#undef  CONFIG_LEON3_GP
+#undef  CONFIG_LEON3_HP
+#define CONFIG_LEON3_CUSTOM 1
+/*
+ * Integer unit                                           
+ */
+#define CONFIG_IU_NWINDOWS (8)
+#define CONFIG_IU_V8MULDIV 1
+#define CONFIG_IU_MUL_LATENCY_2 1
+#undef  CONFIG_IU_MUL_LATENCY_4
+#undef  CONFIG_IU_MUL_LATENCY_5
+#define CONFIG_IU_MUL_INFERRED 1
+#undef  CONFIG_IU_MUL_MODGEN
+#undef  CONFIG_IU_MUL_TECHSPEC
+#undef  CONFIG_IU_MUL_DW
+#define CONFIG_IU_BP 1
+#define CONFIG_IU_SVT 1
+#undef  CONFIG_NOTAG
+#define CONFIG_IU_LDELAY (1)
+#define CONFIG_IU_WATCHPOINTS (2)
+#define CONFIG_PWD 1
+#define CONFIG_IU_RSTADDR 00000
+/*
+ * Floating-point unit
+ */
+#undef  CONFIG_FPU_ENABLE
+/*
+ * Cache system
+ */
+#define CONFIG_ICACHE_ENABLE 1
+#undef  CONFIG_ICACHE_ASSO1
+#define CONFIG_ICACHE_ASSO2 1
+#undef  CONFIG_ICACHE_ASSO3
+#undef  CONFIG_ICACHE_ASSO4
+#undef  CONFIG_ICACHE_SZ1
+#undef  CONFIG_ICACHE_SZ2
+#undef  CONFIG_ICACHE_SZ4
+#define CONFIG_ICACHE_SZ8 1
+#undef  CONFIG_ICACHE_SZ16
+#undef  CONFIG_ICACHE_SZ32
+#undef  CONFIG_ICACHE_SZ64
+#undef  CONFIG_ICACHE_SZ128
+#undef  CONFIG_ICACHE_SZ256
+#undef  CONFIG_ICACHE_LZ16
+#define CONFIG_ICACHE_LZ32 1
+#undef  CONFIG_ICACHE_ALGORND
+#undef  CONFIG_ICACHE_ALGODIR
+#undef  CONFIG_ICACHE_ALGOLRR
+#define CONFIG_ICACHE_ALGOLRU 1
+#undef  CONFIG_ICACHE_LOCK
+#define CONFIG_DCACHE_ENABLE 1
+#undef  CONFIG_DCACHE_ASSO1
+#define CONFIG_DCACHE_ASSO2 1
+#undef  CONFIG_DCACHE_ASSO3
+#undef  CONFIG_DCACHE_ASSO4
+#undef  CONFIG_DCACHE_SZ1
+#undef  CONFIG_DCACHE_SZ2
+#define CONFIG_DCACHE_SZ4 1
+#undef  CONFIG_DCACHE_SZ8
+#undef  CONFIG_DCACHE_SZ16
+#undef  CONFIG_DCACHE_SZ32
+#undef  CONFIG_DCACHE_SZ64
+#undef  CONFIG_DCACHE_SZ128
+#undef  CONFIG_DCACHE_SZ256
+#define CONFIG_DCACHE_LZ16 1
+#undef  CONFIG_DCACHE_LZ32
+#undef  CONFIG_DCACHE_ALGORND
+#undef  CONFIG_DCACHE_ALGODIR
+#undef  CONFIG_DCACHE_ALGOLRR
+#define CONFIG_DCACHE_ALGOLRU 1
+#undef  CONFIG_DCACHE_LOCK
+#define CONFIG_DCACHE_SNOOP 1
+#define CONFIG_DCACHE_SNOOP_SEPTAG 1
+#define CONFIG_CACHE_FIXED 0
+/*
+ * MMU
+ */
+#define CONFIG_MMU_ENABLE 1
+#define CONFIG_MMU_COMBINED 1
+#undef  CONFIG_MMU_SPLIT
+#undef  CONFIG_MMU_REPARRAY
+#define CONFIG_MMU_REPINCREMENT 1
+#undef  CONFIG_MMU_I2
+#undef  CONFIG_MMU_I4
+#define CONFIG_MMU_I8 1
+#undef  CONFIG_MMU_I16
+#undef  CONFIG_MMU_I32
+#undef  CONFIG_MMU_I64
+#define CONFIG_MMU_PAGE_4K 1
+#undef  CONFIG_MMU_PAGE_8K
+#undef  CONFIG_MMU_PAGE_16K
+#undef  CONFIG_MMU_PAGE_32K
+#undef  CONFIG_MMU_PAGE_PROG
+/*
+ * Debug Support Unit        
+ */
+#define CONFIG_DSU_ENABLE 1
+#define CONFIG_DSU_ITRACE 1
+#undef  CONFIG_DSU_ITRACESZ1
+#undef  CONFIG_DSU_ITRACESZ2
+#define CONFIG_DSU_ITRACESZ4 1
+#undef  CONFIG_DSU_ITRACESZ8
+#undef  CONFIG_DSU_ITRACESZ16
+#define CONFIG_DSU_ATRACE 1
+#undef  CONFIG_DSU_ATRACESZ1
+#undef  CONFIG_DSU_ATRACESZ2
+#define CONFIG_DSU_ATRACESZ4 1
+#undef  CONFIG_DSU_ATRACESZ8
+#undef  CONFIG_DSU_ATRACESZ16
+/*
+ * Fault-tolerance  
+ */
+#undef  CONFIG_LEON3FT_EN
+/*
+ * VHDL debug settings       
+ */
+#undef  CONFIG_IU_DISAS
+#undef  CONFIG_DEBUG_PC32
+/*
+ * AMBA configuration
+ */
+#define CONFIG_AHB_DEFMST (0)
+#define CONFIG_AHB_RROBIN 1
+#define CONFIG_AHB_SPLIT 1
+#undef  CONFIG_AHB_FPNPEN
+#define CONFIG_AHB_IOADDR FFF
+#define CONFIG_APB_HADDR 800
+#undef  CONFIG_AHB_MON
+#undef  CONFIG_AHB_DTRACE
+/*
+ * Debug Link           
+ */
+#undef  CONFIG_DSU_UART
+#define CONFIG_DSU_JTAG 1
+#define CONFIG_DSU_ETH 1
+#undef  CONFIG_DSU_ETHSZ1
+#undef  CONFIG_DSU_ETHSZ2
+#undef  CONFIG_DSU_ETHSZ4
+#undef  CONFIG_DSU_ETHSZ8
+#define CONFIG_DSU_ETHSZ16 1
+#define CONFIG_DSU_IPMSB C0A8
+#define CONFIG_DSU_IPLSB 0033
+#define CONFIG_DSU_ETHMSB 020789
+#define CONFIG_DSU_ETHLSB 000123
+#undef  CONFIG_DSU_ETH_PROG
+/*
+ * Peripherals             
+ */
+/*
+ * Memory controllers             
+ */
+/*
+ * Leon2 memory controller        
+ */
+#define CONFIG_MCTRL_LEON2 1
+#define CONFIG_MCTRL_8BIT 1
+#define CONFIG_MCTRL_16BIT 1
+#undef  CONFIG_MCTRL_5CS
+#undef  CONFIG_MCTRL_SDRAM
+/*
+ * Xilinx MIG DDR2 controller   
+ */
+#define CONFIG_MIG_DDR2 1
+/*
+ * On-chip RAM/ROM                 
+ */
+#undef  CONFIG_AHBROM_ENABLE
+#undef  CONFIG_AHBRAM_ENABLE
+/*
+ * Ethernet             
+ */
+#define CONFIG_GRETH_ENABLE 1
+#undef  CONFIG_GRETH_GIGA
+#undef  CONFIG_GRETH_FIFO4
+#undef  CONFIG_GRETH_FIFO8
+#define CONFIG_GRETH_FIFO16 1
+#undef  CONFIG_GRETH_FIFO32
+#undef  CONFIG_GRETH_FIFO64
+#undef  CONFIG_GRETH_FT
+/*
+ * UARTs, timers and irq control         
+ */
+#define CONFIG_UART1_ENABLE 1
+#undef  CONFIG_UA1_FIFO1
+#undef  CONFIG_UA1_FIFO2
+#undef  CONFIG_UA1_FIFO4
+#define CONFIG_UA1_FIFO8 1
+#undef  CONFIG_UA1_FIFO16
+#undef  CONFIG_UA1_FIFO32
+#define CONFIG_IRQ3_ENABLE 1
+#undef  CONFIG_IRQ3_SEC
+#define CONFIG_GPT_ENABLE 1
+#define CONFIG_GPT_NTIM (2)
+#define CONFIG_GPT_SW (16)
+#define CONFIG_GPT_TW (32)
+#define CONFIG_GPT_IRQ (8)
+#define CONFIG_GPT_SEPIRQ 1
+#undef  CONFIG_GPT_WDOGEN
+#define CONFIG_GRGPIO_ENABLE 1
+#define CONFIG_GRGPIO_WIDTH (8)
+#define CONFIG_GRGPIO_IMASK 0000
+#define CONFIG_I2C_ENABLE 1
+/*
+ * Keybord and VGA interface
+ */
+#undef  CONFIG_KBD_ENABLE
+#undef  CONFIG_VGA_ENABLE
+#define CONFIG_SVGA_ENABLE 1
+/*
+ * System ACE Interface Controller
+ */
+#define CONFIG_GRACECTRL 1
+/*
+ * PCI EXPRESS
+ */
+#undef  CONFIG_PCIEXP_MASTER_TARGET
+#undef  CONFIG_PCIEXP_MASTER_FIFO
+/*
+ * VHDL Debugging        
+ */
+#undef  CONFIG_DEBUG_UART
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/config.help work/leon3-xilinx-ml605/config.help
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/config.help	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/config.help	2019-12-29 15:59:50.122753997 +0100
@@ -0,0 +1,964 @@
+
+
+Prompt for target technology
+CONFIG_SYN_INFERRED
+  Selects the target technology for memory and pads.
+  The following are available:
+
+  - Inferred: Generic FPGA or ASIC targets if your synthesis tool
+    is capable of inferring RAMs and pads automatically.
+
+  - Actel ProAsic/P/3, IGLOO and Axcelerator FPGAs
+  - Aeroflex UT25CRH Rad-Hard 0.25 um CMOS
+  - Altera: Most Altera FPGA families
+  - Altera-CycloneIII: Altera Cyclone-III/IV FPGA family
+  - Altera-Stratix: Altera Stratix FPGA family
+  - Altera-StratixII: Altera Stratix/Cyclone-II FPGA families
+  - Altera-StratixIII: Altera Stratix-III FPGA family
+  - Altera-StratixIV: Altera Stratix-III FPGA family
+  - ATC18: Atmel-Nantes 0.18 um rad-hard CMOS
+  - IHP25: IHP 0.25 um CMOS
+  - IHP25RH: IHP Rad-Hard 0.25 um CMOS
+  - Lattice : EC/ECP/XP FPGAs
+  - Quicklogic : Eclipse/E/II FPGAs
+  - UMC-0.18 : UMC 0.18 um CMOS with Virtual Silicon libraries
+  - Xilinx-Spartan/2/3/6: Xilinx Spartan/2/3/6 libraries
+  - Xilinx-Spartan3E: Xilinx Spartan3E libraries
+  - Xilinx-Virtex/E: Xilinx Virtex/E libraries
+  - Xilinx-Virtex2/4/5/6/7: Xilinx Virtex2/4/5/6/7 libraries
+
+  Note: Level of technology support depends on type of GRLIB
+  distribution. A technology may be present in this list while the
+  tech support files are missing from the GRLIB distribution.
+  Actel support is only available in commercial and FT distributions.
+
+Ram library
+CONFIG_MEM_VIRAGE
+  Select RAM generators for ASIC targets.
+
+Infer ram
+CONFIG_SYN_INFER_RAM
+  Say Y here if you want the synthesis tool to infer your
+  RAM automatically. Say N to directly instantiate technology-
+  specific RAM cells for the selected target technology package.
+
+Infer pads
+CONFIG_SYN_INFER_PADS
+  Say Y here if you want the synthesis tool to infer pads.
+  Say N to directly instantiate technology-specific pads from
+  the selected target technology package.
+
+No async reset
+CONFIG_SYN_NO_ASYNC
+  Say Y here if you disable asynchronous reset in some of the IP cores.
+  Might be necessary if the target library does not have cells with
+  asynchronous set/reset.
+
+Scan support
+CONFIG_SYN_SCAN
+  Say Y here to enable scan support in some cores. This will enable
+  the scan support generics where available and add logic to make
+  the design testable using full-scan.
+
+Number of processors
+CONFIG_PROC_NUM
+  The number of processor cores. The LEON3MP design can accomodate
+  up to 4 LEON3 processor cores. Use 1 unless you know what you are
+  doing ...
+
+Force values from example configuration
+CONFIG_LEON3_MIN
+  If you select any other value than Custom-configuration then the
+  configuration choices will be forced to settings corresponding to
+  the selected example configuration. The example configurations are
+  described in the document LEON/GRLIB Design and Configuration Guide
+  located at doc/guide.pdf.
+
+  Due to limitations in the configuration tool it is not possible to
+  update all choices without first saving the configuration and
+  restarting the tool. Perform the steps below to set the processor
+  configuration to example configuration values: 
+
+  1. Select example configuration (MIN, GP, HP). This will result
+     in most processor configuration menus being disabled.
+  2. Go back to the main menu and select Save and Exit
+  3. Start the xconfig tool again
+  4. Go into processor configuration and select Custom-configuration.
+     All configuration values can now be changed again and have been
+     initialized to example configuration that was selected earlier.
+  5. Make any changes and then quit xconfig via Save and Exit
+
+  Some options set from the example configuration may need to be changed.
+  One such setting is the FPU multiplier, if the FPU is enabled, where
+  timing is improved for several FPGA technologies by selecting the
+  technology specific multiplier and where the DW multiplier is generally
+  a good choice for ASIC.
+
+Number of SPARC register windows
+CONFIG_IU_NWINDOWS
+  The SPARC architecture (and LEON) allows 2 - 32 register windows.
+  However, any number except 8 will require that you modify and
+  recompile your run-time system or kernel. Unless you know what
+  you are doing, use 8.
+
+SPARC V8 multiply and divide instruction
+CONFIG_IU_V8MULDIV
+  If you say Y here, the SPARC V8 multiply and divide instructions
+  will be implemented. The instructions are: UMUL, UMULCC, SMUL,
+  SMULCC, UDIV, UDIVCC, SDIV, SDIVCC. In code containing frequent
+  integer multiplications and divisions, significant performance
+  increase can be achieved. Emulated floating-point operations will
+  also benefit from this option.
+
+  By default, the gcc compiler does not emit multiply or divide
+  instructions and your code must be compiled with -mv8 to see any
+  performance increase. On the other hand, code compiled with -mv8
+  will generate an illegal instruction trap when executed on processors
+  with this option disabled.
+
+  The divider consumes approximately 2 kgates, the multiplier 6 kgates.
+
+Multiplier latency
+CONFIG_IU_MUL_LATENCY_2
+  Implementation options for the integer multiplier.
+
+  Type        Implementation              issue-rate/latency
+  2-clocks    32x32 pipelined multiplier     1/2
+  4-clocks    16x16 standard multiplier      4/4
+  5-clocks    16x16 pipelined multiplier     4/5
+
+MAC operation
+CONFIG_IU_MUL_MAC
+  If you say Y here, the SPARC V8e UMAC/SMAC (multiply-accumulate)
+  instructions will be enabled. The instructions implement a
+  single-cycle 16x16->32 bits multiply with a 40-bits accumulator.
+  The details of these instructions can be found in the LEON manual,
+  This option is only available when 16x16 multiplier is used.
+
+Multiplier structure
+CONFIG_IU_MUL_INFERRED
+  Structure options for the integer multiplier. The multiplier
+  can be implemented with the following structures:
+
+  * Inferred by the synthesis tool
+  * Generated using Module Generators from NTNU
+  * Using technology specific netlists (TechSpec)
+  * Using Synopsys Designware (DW02_mult and DW_mult_pipe)
+
+Branch prediction
+CONFIG_IU_BP
+  Enabling branch prediction will improve performance with
+  up to 20%, depending on application. The timing and area
+  overhead are minor, so it is recommended to always enable
+  this option.
+
+Single vector trapping
+CONFIG_IU_SVT
+  Single-vector trapping is a SPARC V8e option to reduce code-size
+  in small applications. If enabled, the processor will jump to
+  the address of trap 0 (tt = 0x00) for all traps. No trap table
+  is then needed. The trap type is present in %psr.tt and must
+  be decoded by the O/S. Saves 4 Kbyte of code, but increases
+  trap and interrupt overhead. Currently, the only O/S supporting
+  this option is eCos. To enable SVT, the O/S must also set bit 13
+  in %asr17.
+
+Load latency
+CONFIG_IU_LDELAY
+  Defines the pipeline load delay (= pipeline cycles before the data
+  from a load instruction is available for the next instruction).
+  One cycle gives best performance, but might create a critical path
+  on targets with slow (data) cache memories. A 2-cycle delay can
+  improve timing but will reduce performance with about 5%.
+
+  Note that the load delay must be 1 to support the CASA instruction.
+
+Reset address
+CONFIG_IU_RSTADDR
+  By default, a SPARC processor starts execution at address 0.
+  With this option, any 4-kbyte aligned reset start address can be
+  choosen. Keep at 0 unless you really know what you are doing.
+
+No tagged arithmetic
+CONFIG_NOTAG
+  Say Y here to disable tagged arithmetic and the CASA instructions.
+  This will save some area in minimal systems that do not need
+  these features.
+
+Power-down
+CONFIG_PWD
+  Say Y here to enable the power-down feature of the processor.
+  Might reduce the maximum frequency slightly on FPGA targets.
+  For details on the power-down operation, see the LEON3 manual.
+
+Hardware watchpoints
+CONFIG_IU_WATCHPOINTS
+  The processor can have up to 4 hardware watchpoints, allowing to
+  create both data and instruction breakpoints at any memory location,
+  also in PROM. Each watchpoint will use approximately 500 gates.
+  Use 0 to disable the watchpoint function.
+
+Floating-point enable
+CONFIG_FPU_ENABLE
+  Say Y here to enable the floating-point interface for the MEIKO
+  or GRFPU. Note that no FPU's are provided with the GPL version
+  of GRLIB. Both the Gaisler GRFPU and the Meiko FPU are commercial
+  cores and must be obtained separately.
+
+FPU selection
+CONFIG_FPU_GRFPU
+  Select between Gaisler Research's GRFPU and GRFPU-lite FPUs or the Sun
+  Meiko FPU core. All cores  are fully IEEE-754 compatible and support
+  all SPARC FPU instructions.
+
+GRFPU Multiplier
+CONFIG_FPU_GRFPU_INFMUL
+  On FPGA targets choose inferred multiplier. For ASIC implementations
+  choose between Synopsys Design Ware (DW) multiplier or Module
+  Generator (ModGen) multiplier. The DW multiplier gives better results
+  (smaller area and better timing) but requires a DW license.
+  The ModGen multiplier is part of GRLIB and does not require a license.
+  The Technology Specific multiplier option selects a pre-designed
+  multiplier using technology specific macrocells when available, else
+  an inferred multiplier is used.
+
+Shared GRFPU
+CONFIG_FPU_GRFPU_SH
+  If enabled multiple CPU cores will share one GRFPU.
+
+GRFPC Configuration
+CONFIG_FPU_GRFPC0
+  Configures the GRFPU-LITE controller.
+
+  In simple configuration controller executes FP instructions
+  in parallel with  integer instructions. FP operands are fetched
+  in the register file stage and the result is written in the write
+  stage. This option uses least area resources.
+
+  Data forwarding configuration gives ~ 10 % higher FP performance than
+  the simple configuration by adding data forwarding between the pipeline
+  stages.
+
+  Non-blocking controller allows FP load and store instructions to
+  execute in parallel with FP instructions. The performance increase is
+  ~ 20 % for FP applications. This option uses most logic resources and
+  is suitable for ASIC implementations.
+
+Floating-point netlist
+CONFIG_FPU_NETLIST
+  Say Y here to use a VHDL netlist of the GRFPU-Lite. This is
+  only available in certain versions of grlib.
+
+Enable Instruction cache
+CONFIG_ICACHE_ENABLE
+  The instruction cache should always be enabled to allow
+  maximum performance. Some low-end system might want to
+  save area and disable the cache, but this will reduce
+  the performance with a factor of 2 - 3.
+
+Enable Data cache
+CONFIG_DCACHE_ENABLE
+  The data cache should always be enabled to allow
+  maximum performance. Some low-end system might want to
+  save area and disable the cache, but this will reduce
+  the performance with a factor of 2 at least.
+
+Instruction cache associativity
+CONFIG_ICACHE_ASSO1
+  The instruction cache can be implemented as a multi-way cache with
+  1 - 4 ways. Higher associativity usually increases the cache hit
+  rate and thereby the performance. The downside is higher power
+  consumption and increased gate-count for tag comparators.
+
+  Note that a 1-way cache is effectively a direct-mapped cache.
+
+Instruction cache way size
+CONFIG_ICACHE_SZ1
+  The size of each way in the instuction cache (kbytes). Valid values
+  are 1 - 64 in binary steps. Note that the full range is only supported
+  by the generic and virtex2 targets. Most target packages are limited
+  to 2 - 16 kbyte. Large way size gives higher performance but might
+  affect the maximum frequency (on ASIC targets). The total instruction
+  cache size is the number of way multiplied with the way size.
+
+Instruction cache line size
+CONFIG_ICACHE_LZ16
+  The instruction cache line size. Can be set to either 16 or 32
+  bytes per line. Instruction caches typically benefit from larger
+  line sizes, but on small caches it migh be better with 16 bytes/line
+  to limit eviction miss rate.
+
+Instruction cache replacement algorithm
+CONFIG_ICACHE_ALGORND
+  Cache replacement algorithm for caches with 2 - 4 ways. The 'random'
+  algorithm selects the way to evict randomly. The least-recently-replaced
+  (LRR) algorithm evicts the way least recently replaced. The least-
+  recently-used (LRU) algorithm evicts the way least recently accessed.
+  The random algorithm uses a simple 1- or 2-bit counter to select
+  the eviction way and has low area overhead. The LRR scheme uses one
+  extra bit in the tag ram and has therefore also low area overhead.
+  However, the LRR scheme can only be used with 2-way caches. The LRU
+  scheme has typically the best performance but also highest area overhead.
+  A 2-way LRU uses 1 flip-flop per line, a 3-way LRU uses 3 flip-flops
+  per line, and a 4-way LRU uses 5 flip-flops per line to store the access
+  history.
+
+Instruction cache locking
+CONFIG_ICACHE_LOCK
+  Say Y here to enable cache locking in the instruction cache.
+  Locking can be done on cache-line level, but will increase the
+  width of the tag ram with one bit. If you don't know what
+  locking is good for, it is safe to say N.
+
+Data cache associativity
+CONFIG_DCACHE_ASSO1
+  The data cache can be implemented as a multi-way cache with
+  1 - 4 ways. Higher associativity usually increases the cache hit
+  rate and thereby the performance. The downside is higher power
+  consumption and increased gate-count for tag comparators.
+
+  Note that a 1-way cache is effectively a direct-mapped cache.
+
+Data cache way size
+CONFIG_DCACHE_SZ1
+  The size of each way in the data cache (kbytes). Valid values are
+  1 - 64 in binary steps. Note that the full range is only supported
+  by the generic and virtex2 targets. Most target packages are limited
+  to 2 - 16 kbyte. A large cache gives higher performance but the
+  data cache is timing critical an a too large setting might affect
+  the maximum frequency (on ASIC targets). The total data cache size
+  is the number of way multiplied with the way size.
+
+Data cache line size
+CONFIG_DCACHE_LZ16
+  The data cache line size. Can be set to either 16 or 32 bytes per
+  line. A smaller line size gives better associativity and higher
+  cache hit rate, but requires a larger tag memory.
+
+Data cache replacement algorithm
+CONFIG_DCACHE_ALGORND
+  See the explanation for instruction cache replacement algorithm.
+
+Data cache locking
+CONFIG_DCACHE_LOCK
+  Say Y here to enable cache locking in the data cache.
+  Locking can be done on cache-line level, but will increase the
+  width of the tag ram with one bit. If you don't know what
+  locking is good for, it is safe to say N.
+
+Data cache snooping
+CONFIG_DCACHE_SNOOP
+  Say Y here to enable data cache snooping on the AHB bus.
+
+  With snooping, AHB writes by other masters to data that is in the
+  data cache will be automatically detected and the cache line will
+  be marked as invalid. This simplifies software design in systems
+  with DMA units or multiple processors accessing the same memory.
+  It is a requirement (together with separate snoop tags) to run
+  Linux on more than one CPU.
+
+  Depending on the separate snoop tags option, snooping will be
+  implemented using either dual-port (common tags) or two-port
+  RAMs (separate tags). A workaround if dual port RAMs are
+  not available for the target technology is to use separate
+  snoop tags even if it is not needed otherwise.
+
+Separate snoop tags
+CONFIG_DCACHE_SNOOP_SEPTAG
+  Enable a separate memory to store the data tags used for snooping.
+  This is necessary when snooping support is wanted in systems
+  with MMU, typically for SMP systems. In this case, the snoop
+  tags will contain the physical tag address while the normal
+  tags contain the virtual tag address.
+
+  When separate snoop tags are enabled, the tag RAMs will be implemented
+  using two-port RAMs instead of dual-port RAMs. A workaround if
+  dual port RAMs are not available for the target technology is
+  therefore to use separate snoop tags even if it is not needed.
+
+Fixed cacheability map
+CONFIG_CACHE_FIXED
+  If this variable is 0, the cacheable memory regions are defined
+  by the AHB plug&play information (default). To overriden the
+  plug&play settings, this variable can be set to indicate which
+  areas should be cached. The value is treated as a 16-bit hex value
+  with each bit defining if a 256 Mbyte segment should be cached or not.
+  The right-most (LSB) bit defines the cacheability of AHB address
+  0 - 256 MByte, while the left-most bit (MSB) defines AHB address
+  3840 - 4096 MByte. If the bit is set, the corresponding area is
+  cacheable. A value of 00F3 defines address 0 - 0x20000000 and
+  0x40000000 - 0x80000000 as cacheable.
+
+Local data ram
+CONFIG_DCACHE_LRAM
+  Say Y here to add a local ram to the data cache controller.
+  Accesses to the ram (load/store) will be performed at 0 waitstates
+  and store data will never be written back to the AHB bus.
+
+Size of local data ram
+CONFIG_DCACHE_LRAM_SZ1
+  Defines the size of the local data ram in Kbytes. Note that most
+  technology libraries do not support larger rams than 16 Kbyte.
+
+Start address of local data ram
+CONFIG_DCACHE_LRSTART
+  Defines the 8 MSB bits of start address of the local data ram.
+  By default set to 8f (start address = 0x8f000000), but any value
+  (except 0) is possible. Note that the local data ram 'shadows'
+  a 16 Mbyte block of the address space.
+
+MMU enable
+CONFIG_MMU_ENABLE
+  Say Y here to enable the Memory Management Unit.
+
+MMU split icache/dcache table lookaside buffer
+CONFIG_MMU_COMBINED
+  Select "combined" for a combined icache/dcache table lookaside buffer,
+  "split" for a split icache/dcache table lookaside buffer
+
+MMU tlb replacement scheme
+CONFIG_MMU_REPARRAY
+  Select "LRU" to use the "least recently used" algorithm for TLB
+  replacement, or "Increment" for a simple incremental replacement
+  scheme.
+
+Combined i/dcache tlb
+CONFIG_MMU_I2
+  Select the number of entries for the instruction TLB, or the
+  combined icache/dcache TLB if such is used.
+
+Split tlb, dcache
+CONFIG_MMU_D2
+  Select the number of entries for the dcache TLB.
+
+Fast writebuffer
+CONFIG_MMU_FASTWB
+  Only selectable if split tlb is enabled. In case fast writebuffer is
+  enabled the tlb hit will be made concurrent to the cache hit. This
+  leads to higher store performance, but increased power and area.
+
+MMU pagesize
+CONFIG_MMU_PAGE_4K
+  The deafult SPARC V8 SRMMU page size is 4 Kbyte. This limits the
+  cache way size to 4 Kbyte, and total data cache size to 16 Kbyte,
+  when the MMU is used. To increase the maximum data cache size,
+  the MMU pages size can be increased to up 32 Kbyte. This will
+  give a maximum data cache size of 128 Kbyte.
+
+  Note that an MMU page size different than 4 Kbyte will require
+  a special linux tool-chain if glibc is used. If you don't know
+  what you are doing, stay with 4 Kbyte ...
+
+DSU enable
+CONFIG_DSU_ENABLE
+  The debug support unit (DSU) allows non-intrusive debugging and tracing
+  of both executed instructions and AHB transfers. If you want to enable
+  the DSU, say Y here and select the configuration below.
+
+Trace buffer enable
+CONFIG_DSU_TRACEBUF
+  Say Y to enable the trace buffer. The buffer is not necessary for
+  debugging, only for tracing instructions and data transfers.
+
+Enable instruction tracing
+CONFIG_DSU_ITRACE
+  If you say Y here, an instruction trace buffer will be implemented
+  in each processor. The trace buffer will trace executed instructions
+  and their results, and place them in a circular buffer. The buffer
+  can be read out by any AHB master, and in particular by the debug
+  communication link.
+
+Size of trace buffer
+CONFIG_DSU_ITRACESZ1
+  Select the buffer size (in kbytes) for the instruction trace buffer.
+  Each line in the buffer needs 16 bytes. A 128-entry buffer will thus
+  need 2 kbyte.
+
+Enable AHB tracing
+CONFIG_DSU_ATRACE
+  If you say Y here, an AHB trace buffer will be implemented in the
+  debug support unit processor. The AHB buffer will trace all transfers
+  on the AHB bus and save them in a circular buffer. The trace buffer
+  can be read out by any AHB master, and in particular by the debug
+  communication link.
+
+Size of trace buffer
+CONFIG_DSU_ATRACESZ1
+  Select the buffer size (in kbytes) for the AHB trace buffer.
+  Each line in the buffer needs 16 bytes. A 128-entry buffer will thus
+  need 2 kbyte.
+
+
+LEON3FT enable
+CONFIG_LEON3FT_EN
+  Say Y here to use the fault-tolerant LEON3FT core instead of the
+  standard non-FT LEON3.
+
+IU Register file protection
+CONFIG_IUFT_NONE
+  Select the FT implementation in the LEON3FT integer unit
+  register file. The options include parity, parity with
+  sparing, 7-bit BCH and TMR.
+
+FPU Register file protection
+CONFIG_FPUFT_NONE
+  Say Y to enable SEU protection of the FPU register file.
+  The GRFPU-Lite will be protected with parity, PDMR and TMR.
+  The GRFPU can use PDMR or TMR only.
+
+Cache memory error injection
+CONFIG_RF_ERRINJ
+  Say Y here to enable error injection in to the IU/FPU regfiles.
+  Affects only simulation.
+
+Cache memory protection
+CONFIG_CACHE_FT_EN
+  Enable SEU error-correction in the cache memories.
+
+Cache memory error injection
+CONFIG_CACHE_ERRINJ
+  Say Y here to enable error injection in to the cache memories.
+  Affects only simulation.
+
+Leon3ft netlist
+CONFIG_LEON3_NETLIST
+  Say Y here to use a VHDL netlist of the LEON3FT. This is
+  only available in certain versions of grlib.
+
+IU assembly printing
+CONFIG_IU_DISAS
+  Enable printing of executed instructions to the console.
+
+IU assembly printing in netlist
+CONFIG_IU_DISAS_NET
+  Enable printing of executed instructions to the console also
+  when simulating a netlist. NOTE: with this option enabled, it
+  will not be possible to pass place&route.
+
+32-bit program counters
+CONFIG_DEBUG_PC32
+  Since the LSB 2 bits of the program counters always are zero, they are
+  normally not implemented. If you say Y here, the program counters will
+  be implemented with full 32 bits, making debugging of the VHDL model
+  much easier. Turn of this option for synthesis or you will be wasting
+  area.
+CONFIG_AHB_DEFMST
+  Sets the default AHB master (see AMBA 2.0 specification for definition).
+  Should not be set to a value larger than the number of AHB masters - 1.
+  For highest processor performance, leave it at 0.
+
+Default AHB master
+CONFIG_AHB_RROBIN
+  Say Y here to enable round-robin arbitration of the AHB bus. A N will
+  select fixed priority, with the master with the highest bus index having
+  the highest priority.
+
+Support AHB split-transactions
+CONFIG_AHB_SPLIT
+  Say Y here to enable AHB split-transaction support in the AHB arbiter.
+  Unless you actually have an AHB slave that can generate AHB split
+  responses, say N and save some gates.
+
+Enable full PnP decoding
+CONFIG_AHB_FPNPEN
+  Say Y here to enable full decoding of the PnP configuration records in
+  in the AHB arbiter. When disabled the user-defined registers in the
+  PnP configuration records are not mapped in the configuration area.
+
+IO area start address
+CONFIG_AHB_IOADDR
+  Selects the MSB adddress (HADDR[31:20]) of the AHB IO area, as defined 
+  in the plug&play extentions of the AMBA bus. Should be kept to FFF 
+  unless you really know what you are doing.
+
+APB bridge address          
+CONFIG_APB_HADDR
+  Selects the MSB adddress (HADDR[31:20]) of the APB bridge. Should be
+  kept at 800 for software compatibility. 
+
+AHB monitor                 
+CONFIG_AHB_MON
+  Say Y to enable the AHB bus monitor. The monitor will check for
+  illegal AHB transactions during simulation. It has no impact on
+  synthesis.
+
+Report AHB errors
+CONFIG_AHB_MONERR
+  Print out detected AHB violations on console.
+
+Report AHB warnings
+CONFIG_AHB_MONWAR
+  Print out detected AHB warnings on console.
+
+Write trace to console
+CONFIG_AHB_DTRACE
+  Say yes here to write a trace of all AHB transfers to the
+  simulator console. Has not impact on final netlist.
+
+DSU enable
+CONFIG_DSU_UART
+  Say Y to enable the AHB uart (serial-to-AHB). This is the most
+  commonly used debug communication link.
+
+JTAG Enable
+CONFIG_DSU_JTAG
+  Say Y to enable the JTAG debug link (JTAG-to-AHB). Debugging is done 
+  with GRMON through the boards JTAG chain at speeds of up to 800 kbits/s. 
+
+  The TAP controller can be implemented in custom macros on
+  Altera, Actel Proasic/3 and Xilinx devices. The commercial
+  GRLIB also includes a generic TAP controller in VHDL.
+
+  Supported JTAG cables are Xilinx Parallel Cable III and IV, 
+  Xilinx Platform cables (USB), and Altera parallel and USB cables,
+  Amontech JTAG key, various FTDI chip based USB/JTAG devices, and
+  Actel Flash Pro 3/4 cable.
+
+Ethernet DSU enable
+CONFIG_DSU_ETH
+  Say Y to enable the Ethernet Debug Communication Link (EDCL). The link
+  provides a DSU gateway between ethernet and the AHB bus. Debugging is
+  done at 10 or 100 Mbit/s, using the GRMON debug monitor. You must
+  enable the GRETH Ethernet MAC for this option to become active.
+
+Size of EDCL trace buffer
+CONFIG_DSU_ETHSZ1
+  Select the buffer size (in kbytes) for the EDCL. 1 or 2 kbyte is
+  usually enough, while a larger buffer will increase the transfer rate.
+  When operating at 100 Mbit, use a buffer size of at least 8 kbyte for
+  maximum throughput.
+
+MSB IP address
+CONFIG_DSU_IPMSB
+  Set the MSB 16 bits of the IP address of the EDCL.
+
+LSB IP address
+CONFIG_DSU_IPLSB
+  Set the LSB 16 bits of the IP address of the EDCL.
+
+MSB ethernet address
+CONFIG_DSU_ETHMSB
+  Set the MSB 24 bits of the ethernet address of the EDCL.
+
+LSB ethernet address
+CONFIG_DSU_ETHLSB
+  Set the LSB 24 bits of the ethernet address of the EDCL.
+
+Programmable MAC/IP address
+CONFIG_DSU_ETH_PROG
+  Say Y to make the LSB 4 bits of the EDCL MAC and IP address
+  configurable using the ethi.edcladdr inputs.
+Leon2 memory controller
+CONFIG_MCTRL_LEON2
+  Say Y here to enable the LEON2 memory controller. The controller
+  can access PROM, I/O, SRAM and SDRAM. The bus width for PROM
+  and SRAM is programmable to 8-, 16- or 32-bits.
+
+8-bit memory support
+CONFIG_MCTRL_8BIT
+  If you say Y here, the PROM/SRAM memory controller will support
+  8-bit mode, i.e. operate from 8-bit devices as if they were 32-bit.
+  Say N to save a few hundred gates.
+
+16-bit memory support
+CONFIG_MCTRL_16BIT
+  If you say Y here, the PROM/SRAM memory controller will support
+  16-bit mode, i.e. operate from 16-bit devices as if they were 32-bit.
+  Say N to save a few hundred gates.
+
+Write strobe feedback
+CONFIG_MCTRL_WFB
+  If you say Y here, the PROM/SRAM write strobes (WRITEN, WEN) will
+  be used to enable the data bus drivers during write cycles. This
+  will guarantee that the data is still valid on the rising edge of
+  the write strobe. If you say N, the write strobes and the data bus
+  drivers will be clocked on the rising edge, potentially creating
+  a hold time problem in external memory or I/O. However, in all
+  practical cases, there is enough capacitance in the data bus lines
+  to keep the value stable for a few (many?) nano-seconds after the
+  buffers have been disabled, making it safe to say N and remove a 
+  combinational path in the netlist that might be difficult to 
+  analyze.
+
+Write strobe feedback
+CONFIG_MCTRL_5CS
+  If you say Y here, the 5th (RAMSN[4]) SRAM chip select signal will
+  be enabled. If you don't intend to use it, say N and save some gates.
+
+SDRAM controller enable
+CONFIG_MCTRL_SDRAM
+  Say Y here to enabled the PC100/PC133 SDRAM controller. If you don't
+  intend to use SDRAM, say N and save about 1 kgates.
+
+SDRAM controller inverted clock
+CONFIG_MCTRL_SDRAM_INVCLK
+  If you say Y here, the SDRAM controller output signals will be delayed
+  with 1/2 clock in respect to the SDRAM clock. This will allow the used
+  of an SDRAM clock which in not strictly in phase with the internal 
+  clock. This option will limit the SDRAM frequency to 40 - 50 MHz.
+
+  On FPGA targets without SDRAM clock synchronizations through PLL/DLL, 
+  say Y. On ASIC targets, say N and tell your foundry to balance the 
+  SDRAM clock output.
+
+SDRAM separate address buses
+CONFIG_MCTRL_SDRAM_SEPBUS
+  Say Y here if your SDRAM is connected through separate address
+  and data buses (SA & SD). This is the case on the GR-CPCI-XC2V6000
+  board, but not on the GR-PCI-XC2V3000 or Avnet XCV1500E boards.
+
+64-bit data bus
+CONFIG_MCTRL_SDRAM_BUS64
+  Say Y here to enable 64-bit SDRAM data bus.
+
+Page burst enable
+CONFIG_MCTRL_PAGE
+  Say Y here to enable SDRAM page burst operation. This will implement
+  read operations using page bursts rather than 8-word bursts and save
+  about 500 gates (100 LUTs). Note that not all SDRAM supports page 
+  burst, so use this option with care.
+
+Programmable page burst enable
+CONFIG_MCTRL_PROGPAGE
+  Say Y here to enable programmable SDRAM page burst operation. This
+  will allow to dynamically enable/disable page burst by setting
+  bit 17 in MCFG2.
+
+On-chip rom
+CONFIG_AHBROM_ENABLE
+  Say Y here to add a block on on-chip rom to the AHB bus. The ram
+  provides 0-waitstates read access,  burst support, and 8-, 16- 
+  and 32-bit data size. The rom will be syntheised into block rams
+  on Xilinx and Altera FPGA devices, and into gates on ASIC 
+  technologies. GRLIB includes a utility to automatically create
+  the rom VHDL model (ahbrom.vhd) from an ELF file. Refer to the GRLIB
+  documentation for details.
+
+On-chip rom address
+CONFIG_AHBROM_START
+  Set the start address of AHB ROM (HADDR[31:20]). The ROM will occupy
+  a 1 Mbyte slot at the selected address. Default is 000, corresponding
+  to AHB address 0x00000000. When address 0x0 is selected, the rom area
+  of any other memory controller is set to 0x10000000 to avoid conflicts.
+
+Enable pipeline register for on-chip rom
+CONFIG_AHBROM_PIPE
+  Say Y here to add a data pipeline register to the on-chip rom.
+  This should be done when the rom is implemenented in (ASIC) gates,
+  or in logic cells on FPGAs. Do not use this option when the rom is
+  implemented in block rams. If enabled, the rom will operate with 
+  one waitstate.
+
+On-chip ram
+CONFIG_AHBRAM_ENABLE
+  Say Y here to add a block on on-chip ram to the AHB bus. The ram
+  provides 0-waitstates read access and 0/1 waitstates write access.
+  All AHB burst types are supported, as well as 8-, 16- and 32-bit
+  data size.
+
+On-chip ram size
+CONFIG_AHBRAM_SZ1
+  Set the size of the on-chip AHB ram. The ram is infered/instantiated
+  as four byte-wide ram slices to allow byte and half-word write
+  accesses. It is therefore essential that the target package can
+  infer byte-wide rams. This is currently supported on the generic,
+  virtex, virtex2, proasic and axellerator targets.
+
+On-chip ram address
+CONFIG_AHBRAM_START
+  Set the start address of AHB RAM (HADDR[31:20]). The RAM will occupy
+  a 1 Mbyte slot at the selected address. Default is A00, corresponding
+  to AHB address 0xA0000000.
+
+On-chip ram pipeline stage
+CONFIG_AHBRAM_PIPE
+  Set this option to add an extra pipeline stage to the read data of the 
+  on-chip RAM. This can improve timing, especially when the memory is 
+  large, at the cost of adding an additional cycle delay on read.
+Gaisler Ethernet MAC enable
+CONFIG_GRETH_ENABLE
+  Say Y here to enable the Gaisler Research Ethernet MAC . The MAC has 
+  one AHB master interface to read and write packets to memory, and one
+  APB slave interface for accessing the control registers. 
+
+Gaisler Ethernet 1G MAC enable
+CONFIG_GRETH_GIGA
+  Say Y here to enable the Gaisler Research 1000 Mbit Ethernet MAC . 
+  The 1G MAC is only available in the commercial version of GRLIB,
+  so do NOT enable it if you are using the GPL version.
+
+CONFIG_GRETH_FIFO4
+  Set the depth of the receive and transmit FIFOs in the MAC core.
+  The MAC core will perform AHB burst read/writes with half the
+  size of the FIFO depth.
+
+CONFIG_GRETH_FT
+  Enable fault-tolerance (parity with sparing) for internal RAM
+  in Ethernet core. Note that FT for EDCL buffer is enabled via
+  separate setting.
+
+CONFIG_GRETH_EDCLFT
+  Enable protection for EDCL buffer. This is typically not used as
+  the EDCL debug link is not used in harsh environments.
+UART1 enable
+CONFIG_UART1_ENABLE
+  Say Y here to enable UART1, or the console UART. This is needed to
+  get any print-out from LEON3 systems regardless of operating system.
+
+UART1 FIFO
+CONFIG_UA1_FIFO1
+  The UART has configurable transmitt and receive FIFO's, which can
+  be set to 1 - 32 bytes. Use 1 for minimum area, or 8 - 32 for
+  maximum throughput.
+
+
+LEON3 interrupt controller
+CONFIG_IRQ3_ENABLE
+  Say Y here to enable the LEON3 interrupt controller. This is needed
+  if you want to be able to receive interrupts. Operating systems like
+  Linux, RTEMS and eCos needs this option to be enabled. If you intend
+  to use the Bare-C run-time and not use interrupts, you could disable
+  the interrupt controller and save about 500 gates.
+
+LEON3 interrupt controller broadcast
+CONFIG_IRQ3_BROADCAST_ENABLE
+  If enabled the broadcast register is used to determine which
+  interrupt should be sent to all cpus instead of just the first
+  one that consumes it.
+
+Secondary interrupts
+CONFIG_IRQ3_SEC
+  The interrupt controller handles 15 interrupts by default (1 - 15).
+  These correspond to the 15 SPARC asyncronous traps (0x11 - 0x1F),
+  and AMBA interrupts 1 - 15. This option will enable 16 additional
+  (secondary) interrupts, corresponding to AMBA interrupts 16 - 31.
+  The secondary interrupts will be multiplexed onto one of the first
+  15 interrupts. The total number of handled interrupts can then
+  be up to 30 (14 primary and 16 secondary).
+
+Number of interrupts
+CONFIG_IRQ3_NSEC
+  Defines which of the first 15 interrupts should be used for the
+  secondary (16 - 31) interrupts. Interrupt 15 should be avoided
+  since it is not maskable by the processor.
+Timer module enable
+CONFIG_GPT_ENABLE
+  Say Y here to enable the Modular Timer Unit. The timer unit consists
+  of one common scaler and up to 7 independent timers. The timer unit
+  is needed for Linux, RTEMS, eCos and the Bare-C run-times.
+
+Timer module enable
+CONFIG_GPT_NTIM
+  Set the number of timers in the timer unit (1 - 7).
+
+Scaler width
+CONFIG_GPT_SW
+  Set the width if the common pre-scaler (2 - 16 bits). The scaler
+  is used to divide the system clock down to 1 MHz, so 8 bits should
+  be sufficient for most implementations (allows clocks up to 256 MHz).
+
+Timer width
+CONFIG_GPT_TW
+  Set the width if the timers (2 - 32 bits). 32 bits is recommended
+  for the Bare-C run-time, lower values (e.g. 16 bits) can work with
+  RTEMS and Linux.
+
+Timer Interrupt
+CONFIG_GPT_IRQ
+  Set the interrupt number for the first timer. Remaining timers will
+  have incrementing interrupts, unless the separate-interrupts option
+  below is disabled.
+
+Watchdog enable
+CONFIG_GPT_WDOGEN
+  Say Y here to enable the watchdog functionality in the timer unit.
+
+Watchdog time-out value
+CONFIG_GPT_WDOG
+  This value will be loaded in the watchdog timer at reset.
+
+GPIO port
+CONFIG_GRGPIO_ENABLE
+  Say Y here to enable a general purpose I/O port. The port can be
+  configured from 1 - 32 bits, whith each port signal individually
+  programmable as input or output. The port signals can also serve
+  as interrupt inputs.
+
+GPIO port witdth
+CONFIG_GRGPIO_WIDTH
+  Number of bits in the I/O port. Must be in the range of 1 - 32.
+
+GPIO interrupt mask
+CONFIG_GRGPIO_IMASK
+  The I/O port interrupt mask defines which bits in the I/O port
+  should be able to create an interrupt. 
+
+OpenCores I2C Master 
+CONFIG_I2C_ENABLE
+  Say Y here to enable the OpenCores I2C master.
+Text-mode VGA
+CONFIG_VGA_ENABLE
+  Say Y here to enable a simple text-mode VGA controller. The controller
+  generate 48x36 characters on a 640x480 pixel screen. The pixel clock
+  is 25 MHz.
+
+SVGA frame buffer
+CONFIG_SVGA_ENABLE
+  Say Y here to enable a graphical frame buffer. The frame buffer
+  can be configured up to 1024x768 pixels and 8-, 16- or 32-bit 
+  colour depth. 
+
+PS2 KBD interface
+CONFIG_KBD_ENABLE
+  Say Y here to enable a PS/2 keyboard or mouse interface.
+
+AMBA System ACE Interface Controller
+CONFIG_GRACECTRL
+  Say Y here to enable the AMBA System ACE Interface Controller
+PCIEXP simple interface
+CONFIG_PCIEXP_MASTER_TARGET
+  The target-only PCI Express interface provides a interface
+  without fifos. It is small and robust, and is suitable to be used
+  for DSU communications via PCI Express.Master interface is optional.
+
+PCIEXP interface, target-only
+CONFIG_PCIEXP_SIMPLE_TARGET
+  The target-only PCI Express interface provides a simple target interface without fifos. It is small and robust, and is suitable to be used for DSU communications via PCI Express.
+
+PCIEXP interface with FIFO
+CONFIG_PCIEXP_MASTER_FIFO
+  The master-target PCI Express interface provides a high-performance 32-bit PCI Express interface with FIFOs and optional DMA channel.
+
+PCIEXP DMA controller
+CONFIG_PCIEXP_MASTER_FIFO_DMA
+  Say Y here to enable a DMA controller in the PCIEXP MASTER_FIFO core.The DMA controller can perform PCI EXPRESS<->memory data transfers independently of the processor.
+
+PCIEXP vendor id
+CONFIG_PCIEXP_VENDORID
+  Sets the PCI Express vendor ID in the PCI Express configuration area. 10EE for Xilinx. 
+
+PCIEXP device id
+CONFIG_PCIEXP_DEVICEID
+  Sets the PCI Express device ID in the PCI Express configuration area.
+
+CONFIG_LANE_WIDTH1
+  select the number of lanes 
+
+CONFIG_LANE_WIDTH_FIFO1
+  select the number of lanes
+UART debugging
+CONFIG_DEBUG_UART
+  During simulation, the output from the UARTs is printed on the
+  simulator console. Since the ratio between the system clock and
+  UART baud-rate is quite high, simulating UART output will be very
+  slow. If you say Y here, the UARTs will print a character as soon
+  as it is stored in the transmitter data register. The transmitter
+  ready flag will be permanently set, speeding up simulation. However,
+  the output on the UART tx line will be garbled.  Has not impact on
+  synthesis, but will cause the LEON test bench to fail.
+
+FPU register tracing
+CONFIG_DEBUG_FPURF
+  If you say Y here, all writes to the floating-point unit register file
+  will be printed on the simulator console.
+
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/config.in work/leon3-xilinx-ml605/config.in
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/config.in	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/config.in	2019-12-29 15:59:50.122753997 +0100
@@ -0,0 +1,104 @@
+#
+# LEON3 configuration written in linux configuration language
+#
+# Written by Jiri Gaisler, Gaisler Research
+#
+# Comments and bug reports to support@gaisler.com
+#
+#
+
+#define_bool CONFIG_MCTRL_RMW y
+define_bool CONFIG_LEON3FT_PRESENT y
+define_bool CONFIG_HAS_SHARED_GRFPU y
+
+mainmenu_name "LEON3MP Design Configuration"
+
+mainmenu_option next_comment
+  comment 'Synthesis      '
+  source lib/techmap/gencomp/tech.in
+endmenu
+
+#mainmenu_option next_comment
+#  comment 'Board options'
+#    choice 'FPGA type                                      ' \
+#	"XC4V-LX25		CONFIG_FPGA_LX25 \
+#	XC4V-LX60     		CONFIG_FPGA_LX60" XC4V-LX25
+#
+#  source lib/techmap/clocks/clkgen.in
+#endmenu
+
+mainmenu_option next_comment
+  comment 'Clock generation'
+#  source lib/techmap/clocks/clkgen.in
+    choice 'System clock frequency                         ' \
+	"60MHz		CONFIG_FREQ60 \
+	 75MHz     	CONFIG_FREQ75  \
+	 80MHz     	CONFIG_FREQ80  \
+	100MHz     	CONFIG_FREQ100 \
+	120MHz     	CONFIG_FREQ120" 80MHz
+endmenu
+
+source lib/gaisler/leon3/leon3.in
+source lib/grlib/amba/amba.in
+
+mainmenu_option next_comment
+  comment 'Debug Link           '
+  source lib/gaisler/uart/dcom.in
+  source lib/gaisler/jtag/jtag.in
+  source lib/gaisler/net/edcl.in
+endmenu
+
+mainmenu_option next_comment
+comment 'Peripherals             '
+
+  mainmenu_option next_comment
+  comment 'Memory controllers             '
+    source lib/esa/memoryctrl/mctrl.in
+    mainmenu_option next_comment
+    comment 'Xilinx MIG DDR2 controller   '
+	bool 'Enable Xilinx MIG DDR2/3 controller' CONFIG_MIG_DDR2
+    endmenu
+  endmenu
+
+  mainmenu_option next_comment
+  comment 'On-chip RAM/ROM                 '
+    source lib/gaisler/misc/ahbrom.in
+    source lib/gaisler/misc/ahbram.in
+  endmenu
+
+  mainmenu_option next_comment
+  comment 'Ethernet             '
+    source lib/gaisler/greth/greth.in
+  endmenu
+
+  mainmenu_option next_comment
+  comment 'UARTs, timers and irq control         '
+    source lib/gaisler/uart/uart1.in
+    source lib/gaisler/irqmp/irqmp.in
+    source lib/gaisler/misc/gptimer.in
+    source lib/gaisler/misc/grgpio.in
+    source lib/gaisler/i2c/i2c.in
+  endmenu
+
+  mainmenu_option next_comment
+  comment 'Keybord and VGA interface'
+    source lib/gaisler/misc/ps2vga.in
+  endmenu
+
+  mainmenu_option next_comment
+  comment 'System ACE Interface Controller'
+    source lib/gaisler/misc/gracectrl.in
+  endmenu
+
+  mainmenu_option next_comment
+  comment 'PCI EXPRESS'
+    source lib/gaisler/pcie/pcie.in
+  endmenu
+
+
+endmenu
+
+mainmenu_option next_comment
+comment 'VHDL Debugging        '
+  source lib/grlib/util/debug.in
+endmenu
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/config.vhd work/leon3-xilinx-ml605/config.vhd
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/config.vhd	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/config.vhd	2019-12-29 15:59:50.122753997 +0100
@@ -0,0 +1,167 @@
+
+
+
+
+
+
+-----------------------------------------------------------------------------
+-- LEON3 Demonstration design test bench configuration
+-- Copyright (C) 2009 Aeroflex Gaisler
+------------------------------------------------------------------------------
+
+
+library techmap;
+use techmap.gencomp.all;
+
+package config is
+-- Technology and synthesis options
+  constant CFG_FABTECH : integer := virtex6;
+  constant CFG_MEMTECH : integer := virtex6;
+  constant CFG_PADTECH : integer := virtex6;
+  constant CFG_NOASYNC : integer := 0;
+  constant CFG_SCAN : integer := 0;
+-- LEON3 processor core
+  constant CFG_LEON3 : integer := 1;
+  constant CFG_NCPU : integer := (1);
+  constant CFG_NWIN : integer := (8);
+  constant CFG_V8 : integer := 16#32# + 4*0;
+  constant CFG_MAC : integer := 0;
+  constant CFG_BP : integer := 1;
+  constant CFG_SVT : integer := 1;
+  constant CFG_RSTADDR : integer := 16#00000#;
+  constant CFG_LDDEL : integer := (1);
+  constant CFG_NOTAG : integer := 0;
+  constant CFG_NWP : integer := (2);
+  constant CFG_PWD : integer := 1*2;
+  constant CFG_FPU : integer := 0 + 16*0 + 32*0;
+  constant CFG_GRFPUSH : integer := 0;
+  constant CFG_ICEN : integer := 1;
+  constant CFG_ISETS : integer := 2;
+  constant CFG_ISETSZ : integer := 8;
+  constant CFG_ILINE : integer := 8;
+  constant CFG_IREPL : integer := 0;
+  constant CFG_ILOCK : integer := 0;
+  constant CFG_ILRAMEN : integer := 0;
+  constant CFG_ILRAMADDR: integer := 16#8E#;
+  constant CFG_ILRAMSZ : integer := 1;
+  constant CFG_DCEN : integer := 1;
+  constant CFG_DSETS : integer := 2;
+  constant CFG_DSETSZ : integer := 4;
+  constant CFG_DLINE : integer := 4;
+  constant CFG_DREPL : integer := 0;
+  constant CFG_DLOCK : integer := 0;
+  constant CFG_DSNOOP : integer := 1*2 + 4*1;
+  constant CFG_DFIXED : integer := 16#0#;
+  constant CFG_DLRAMEN : integer := 0;
+  constant CFG_DLRAMADDR: integer := 16#8F#;
+  constant CFG_DLRAMSZ : integer := 1;
+  constant CFG_MMUEN : integer := 1;
+  constant CFG_ITLBNUM : integer := 8;
+  constant CFG_DTLBNUM : integer := 2;
+  constant CFG_TLB_TYPE : integer := 1 + 0*2;
+  constant CFG_TLB_REP : integer := 1;
+  constant CFG_MMU_PAGE : integer := 0;
+  constant CFG_DSU : integer := 1;
+  constant CFG_ITBSZ : integer := 4;
+  constant CFG_ATBSZ : integer := 4;
+  constant CFG_LEON3FT_EN : integer := 0;
+  constant CFG_IUFT_EN : integer := 0;
+  constant CFG_FPUFT_EN : integer := 0;
+  constant CFG_RF_ERRINJ : integer := 0;
+  constant CFG_CACHE_FT_EN : integer := 0;
+  constant CFG_CACHE_ERRINJ : integer := 0;
+  constant CFG_LEON3_NETLIST: integer := 0;
+  constant CFG_DISAS : integer := 0 + 0;
+  constant CFG_PCLOW : integer := 2;
+-- AMBA settings
+  constant CFG_DEFMST : integer := (0);
+  constant CFG_RROBIN : integer := 1;
+  constant CFG_SPLIT : integer := 1;
+  constant CFG_FPNPEN : integer := 0;
+  constant CFG_AHBIO : integer := 16#FFF#;
+  constant CFG_APBADDR : integer := 16#800#;
+  constant CFG_AHB_MON : integer := 0;
+  constant CFG_AHB_MONERR : integer := 0;
+  constant CFG_AHB_MONWAR : integer := 0;
+  constant CFG_AHB_DTRACE : integer := 0;
+-- DSU UART
+  constant CFG_AHB_UART : integer := 0;
+-- JTAG based DSU interface
+  constant CFG_AHB_JTAG : integer := 1;
+-- Ethernet DSU
+  constant CFG_DSU_ETH : integer := 1 + 0 + 0;
+  constant CFG_ETH_BUF : integer := 16;
+  constant CFG_ETH_IPM : integer := 16#C0A8#;
+  constant CFG_ETH_IPL : integer := 16#0033#;
+  constant CFG_ETH_ENM : integer := 16#020789#;
+  constant CFG_ETH_ENL : integer := 16#000123#;
+-- LEON2 memory controller
+  constant CFG_MCTRL_LEON2 : integer := 1;
+  constant CFG_MCTRL_RAM8BIT : integer := 1;
+  constant CFG_MCTRL_RAM16BIT : integer := 1;
+  constant CFG_MCTRL_5CS : integer := 0;
+  constant CFG_MCTRL_SDEN : integer := 0;
+  constant CFG_MCTRL_SEPBUS : integer := 0;
+  constant CFG_MCTRL_INVCLK : integer := 0;
+  constant CFG_MCTRL_SD64 : integer := 0;
+  constant CFG_MCTRL_PAGE : integer := 0 + 0;
+-- AHB ROM
+  constant CFG_AHBROMEN : integer := 0;
+  constant CFG_AHBROPIP : integer := 0;
+  constant CFG_AHBRODDR : integer := 16#000#;
+  constant CFG_ROMADDR : integer := 16#000#;
+  constant CFG_ROMMASK : integer := 16#E00# + 16#000#;
+-- AHB RAM
+  constant CFG_AHBRAMEN : integer := 0;
+  constant CFG_AHBRSZ : integer := 1;
+  constant CFG_AHBRADDR : integer := 16#A00#;
+  constant CFG_AHBRPIPE : integer := 0;
+-- Gaisler Ethernet core
+  constant CFG_GRETH : integer := 1;
+  constant CFG_GRETH1G : integer := 0;
+  constant CFG_ETH_FIFO : integer := 16;
+  constant CFG_GRETH_FT : integer := 0;
+  constant CFG_GRETH_EDCLFT : integer := 0;
+-- UART 1
+  constant CFG_UART1_ENABLE : integer := 1;
+  constant CFG_UART1_FIFO : integer := 8;
+-- LEON3 interrupt controller
+  constant CFG_IRQ3_ENABLE : integer := 1;
+  constant CFG_IRQ3_NSEC : integer := 0;
+-- Modular timer
+  constant CFG_GPT_ENABLE : integer := 1;
+  constant CFG_GPT_NTIM : integer := (2);
+  constant CFG_GPT_SW : integer := (16);
+  constant CFG_GPT_TW : integer := (32);
+  constant CFG_GPT_IRQ : integer := (8);
+  constant CFG_GPT_SEPIRQ : integer := 1;
+  constant CFG_GPT_WDOGEN : integer := 0;
+  constant CFG_GPT_WDOG : integer := 16#0#;
+-- GPIO port
+  constant CFG_GRGPIO_ENABLE : integer := 1;
+  constant CFG_GRGPIO_IMASK : integer := 16#0000#;
+  constant CFG_GRGPIO_WIDTH : integer := (8);
+-- I2C master
+  constant CFG_I2C_ENABLE : integer := 1;
+
+-- VGA and PS2/ interface
+  constant CFG_KBD_ENABLE : integer := 0;
+  constant CFG_VGA_ENABLE : integer := 0;
+  constant CFG_SVGA_ENABLE : integer := 1;
+
+-- AMBA System ACE Interface Controller
+  constant CFG_GRACECTRL : integer := 1;
+
+-- PCIEXP interface
+ constant CFG_PCIEXP : integer := 0;
+ constant CFG_PCIE_TYPE : integer := 0;
+ constant CFG_PCIE_SIM_MAS : integer := 0;
+ constant CFG_PCIEXPVID : integer := 16#0#;
+ constant CFG_PCIEXPDID : integer := 16#0#;
+  constant CFG_NO_OF_LANES : integer := 1;
+-- GRLIB debugging
+  constant CFG_DUART : integer := 0;
+-- Xilinx MIG DDR2 controller
+  constant CFG_MIG_DDR2 : integer := 1;
+  constant CFG_MIG_CLK4 : integer := 16;
+end;
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/config.vhd.h work/leon3-xilinx-ml605/config.vhd.h
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/config.vhd.h	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/config.vhd.h	2019-12-29 15:59:50.122753997 +0100
@@ -0,0 +1,162 @@
+-- Technology and synthesis options
+  constant CFG_FABTECH 	: integer := CONFIG_SYN_TECH;
+  constant CFG_MEMTECH  : integer := CFG_RAM_TECH;
+  constant CFG_PADTECH 	: integer := CFG_PAD_TECH;
+  constant CFG_NOASYNC 	: integer := CONFIG_SYN_NO_ASYNC;
+  constant CFG_SCAN 	: integer := CONFIG_SYN_SCAN;
+
+-- LEON3 processor core
+  constant CFG_LEON3  	: integer := CONFIG_LEON3;
+  constant CFG_NCPU 	: integer := CONFIG_PROC_NUM;
+  constant CFG_NWIN 	: integer := CONFIG_IU_NWINDOWS;
+  constant CFG_V8   	: integer := CFG_IU_V8 + 4*CFG_IU_MUL_STRUCT;
+  constant CFG_MAC  	: integer := CONFIG_IU_MUL_MAC;
+  constant CFG_BP   	: integer := CONFIG_IU_BP;
+  constant CFG_SVT  	: integer := CONFIG_IU_SVT;
+  constant CFG_RSTADDR 	: integer := 16#CONFIG_IU_RSTADDR#;
+  constant CFG_LDDEL	: integer := CONFIG_IU_LDELAY;
+  constant CFG_NOTAG	: integer := CONFIG_NOTAG;
+  constant CFG_NWP  	: integer := CONFIG_IU_WATCHPOINTS;
+  constant CFG_PWD 	: integer := CONFIG_PWD*2;
+  constant CFG_FPU 	: integer := CONFIG_FPU + 16*CONFIG_FPU_NETLIST + 32*CONFIG_FPU_GRFPU_SHARED;
+  constant CFG_GRFPUSH  : integer := CONFIG_FPU_GRFPU_SHARED;
+  constant CFG_ICEN  	: integer := CONFIG_ICACHE_ENABLE;
+  constant CFG_ISETS	: integer := CFG_IU_ISETS;
+  constant CFG_ISETSZ	: integer := CFG_ICACHE_SZ;
+  constant CFG_ILINE 	: integer := CFG_ILINE_SZ;
+  constant CFG_IREPL 	: integer := CFG_ICACHE_ALGORND;
+  constant CFG_ILOCK 	: integer := CONFIG_ICACHE_LOCK;
+  constant CFG_ILRAMEN	: integer := CONFIG_ICACHE_LRAM;
+  constant CFG_ILRAMADDR: integer := 16#CONFIG_ICACHE_LRSTART#;
+  constant CFG_ILRAMSZ	: integer := CFG_ILRAM_SIZE;
+  constant CFG_DCEN  	: integer := CONFIG_DCACHE_ENABLE;
+  constant CFG_DSETS	: integer := CFG_IU_DSETS;
+  constant CFG_DSETSZ	: integer := CFG_DCACHE_SZ;
+  constant CFG_DLINE 	: integer := CFG_DLINE_SZ;
+  constant CFG_DREPL 	: integer := CFG_DCACHE_ALGORND;
+  constant CFG_DLOCK 	: integer := CONFIG_DCACHE_LOCK;
+  constant CFG_DSNOOP	: integer := CONFIG_DCACHE_SNOOP*2 + 4*CONFIG_DCACHE_SNOOP_SEPTAG;
+  constant CFG_DFIXED	: integer := 16#CONFIG_CACHE_FIXED#;
+  constant CFG_DLRAMEN	: integer := CONFIG_DCACHE_LRAM;
+  constant CFG_DLRAMADDR: integer := 16#CONFIG_DCACHE_LRSTART#;
+  constant CFG_DLRAMSZ	: integer := CFG_DLRAM_SIZE;
+  constant CFG_MMUEN    : integer := CONFIG_MMUEN;
+  constant CFG_ITLBNUM  : integer := CONFIG_ITLBNUM;
+  constant CFG_DTLBNUM  : integer := CONFIG_DTLBNUM;
+  constant CFG_TLB_TYPE : integer := CONFIG_TLB_TYPE + CFG_MMU_FASTWB*2;
+  constant CFG_TLB_REP  : integer := CONFIG_TLB_REP;
+  constant CFG_MMU_PAGE : integer := CONFIG_MMU_PAGE;
+  constant CFG_DSU   	: integer := CONFIG_DSU_ENABLE;
+  constant CFG_ITBSZ 	: integer := CFG_DSU_ITB;
+  constant CFG_ATBSZ 	: integer := CFG_DSU_ATB;
+  constant CFG_LEON3FT_EN   : integer := CONFIG_LEON3FT_EN;
+  constant CFG_IUFT_EN      : integer := CONFIG_IUFT_EN;
+  constant CFG_FPUFT_EN     : integer := CONFIG_FPUFT;
+  constant CFG_RF_ERRINJ    : integer := CONFIG_RF_ERRINJ;	
+  constant CFG_CACHE_FT_EN  : integer := CONFIG_CACHE_FT_EN;
+  constant CFG_CACHE_ERRINJ : integer := CONFIG_CACHE_ERRINJ;	
+  constant CFG_LEON3_NETLIST: integer := CONFIG_LEON3_NETLIST;	
+  constant CFG_DISAS    : integer := CONFIG_IU_DISAS + CONFIG_IU_DISAS_NET;
+  constant CFG_PCLOW    : integer := CFG_DEBUG_PC32;
+
+-- AMBA settings
+  constant CFG_DEFMST  	  : integer := CONFIG_AHB_DEFMST;
+  constant CFG_RROBIN  	  : integer := CONFIG_AHB_RROBIN;
+  constant CFG_SPLIT   	  : integer := CONFIG_AHB_SPLIT;
+  constant CFG_FPNPEN  	  : integer := CONFIG_AHB_FPNPEN;
+  constant CFG_AHBIO   	  : integer := 16#CONFIG_AHB_IOADDR#;
+  constant CFG_APBADDR 	  : integer := 16#CONFIG_APB_HADDR#;
+  constant CFG_AHB_MON 	  : integer := CONFIG_AHB_MON;
+  constant CFG_AHB_MONERR : integer := CONFIG_AHB_MONERR;
+  constant CFG_AHB_MONWAR : integer := CONFIG_AHB_MONWAR;
+  constant CFG_AHB_DTRACE : integer := CONFIG_AHB_DTRACE;
+
+-- DSU UART
+  constant CFG_AHB_UART	: integer := CONFIG_DSU_UART;
+
+-- JTAG based DSU interface
+  constant CFG_AHB_JTAG	: integer := CONFIG_DSU_JTAG;
+
+-- Ethernet DSU
+  constant CFG_DSU_ETH	: integer := CONFIG_DSU_ETH + CONFIG_DSU_ETH_PROG + CONFIG_DSU_ETH_DIS;
+  constant CFG_ETH_BUF 	: integer := CFG_DSU_ETHB;
+  constant CFG_ETH_IPM 	: integer := 16#CONFIG_DSU_IPMSB#;
+  constant CFG_ETH_IPL 	: integer := 16#CONFIG_DSU_IPLSB#;
+  constant CFG_ETH_ENM 	: integer := 16#CONFIG_DSU_ETHMSB#;
+  constant CFG_ETH_ENL 	: integer := 16#CONFIG_DSU_ETHLSB#;
+
+-- LEON2 memory controller
+  constant CFG_MCTRL_LEON2    : integer := CONFIG_MCTRL_LEON2;
+  constant CFG_MCTRL_RAM8BIT  : integer := CONFIG_MCTRL_8BIT;
+  constant CFG_MCTRL_RAM16BIT : integer := CONFIG_MCTRL_16BIT;
+  constant CFG_MCTRL_5CS      : integer := CONFIG_MCTRL_5CS;
+  constant CFG_MCTRL_SDEN     : integer := CONFIG_MCTRL_SDRAM;
+  constant CFG_MCTRL_SEPBUS   : integer := CONFIG_MCTRL_SDRAM_SEPBUS;
+  constant CFG_MCTRL_INVCLK   : integer := CONFIG_MCTRL_SDRAM_INVCLK;
+  constant CFG_MCTRL_SD64     : integer := CONFIG_MCTRL_SDRAM_BUS64;
+  constant CFG_MCTRL_PAGE     : integer := CONFIG_MCTRL_PAGE + CONFIG_MCTRL_PROGPAGE;
+
+-- AHB ROM
+  constant CFG_AHBROMEN	: integer := CONFIG_AHBROM_ENABLE;
+  constant CFG_AHBROPIP	: integer := CONFIG_AHBROM_PIPE;
+  constant CFG_AHBRODDR	: integer := 16#CONFIG_AHBROM_START#;
+  constant CFG_ROMADDR	: integer := 16#CONFIG_ROM_START#;
+  constant CFG_ROMMASK	: integer := 16#E00# + 16#CONFIG_ROM_START#;
+
+-- AHB RAM
+  constant CFG_AHBRAMEN	: integer := CONFIG_AHBRAM_ENABLE;
+  constant CFG_AHBRSZ	: integer := CFG_AHBRAMSZ;
+  constant CFG_AHBRADDR	: integer := 16#CONFIG_AHBRAM_START#;
+  constant CFG_AHBRPIPE : integer := CONFIG_AHBRAM_PIPE;
+-- Gaisler Ethernet core
+  constant CFG_GRETH   	    : integer := CONFIG_GRETH_ENABLE;
+  constant CFG_GRETH1G	    : integer := CONFIG_GRETH_GIGA;
+  constant CFG_ETH_FIFO     : integer := CFG_GRETH_FIFO;
+#ifdef CONFIG_LEON3FT_PRESENT
+  constant CFG_GRETH_FT     : integer := CONFIG_GRETH_FT;
+  constant CFG_GRETH_EDCLFT : integer := CONFIG_GRETH_EDCLFT;
+#endif
+-- UART 1
+  constant CFG_UART1_ENABLE : integer := CONFIG_UART1_ENABLE;
+  constant CFG_UART1_FIFO   : integer := CFG_UA1_FIFO;
+
+-- LEON3 interrupt controller
+  constant CFG_IRQ3_ENABLE  : integer := CONFIG_IRQ3_ENABLE;
+  constant CFG_IRQ3_NSEC    : integer := CONFIG_IRQ3_NSEC;
+
+-- Modular timer
+  constant CFG_GPT_ENABLE   : integer := CONFIG_GPT_ENABLE;
+  constant CFG_GPT_NTIM     : integer := CONFIG_GPT_NTIM;
+  constant CFG_GPT_SW       : integer := CONFIG_GPT_SW;
+  constant CFG_GPT_TW       : integer := CONFIG_GPT_TW;
+  constant CFG_GPT_IRQ      : integer := CONFIG_GPT_IRQ;
+  constant CFG_GPT_SEPIRQ   : integer := CONFIG_GPT_SEPIRQ;
+  constant CFG_GPT_WDOGEN   : integer := CONFIG_GPT_WDOGEN;
+  constant CFG_GPT_WDOG     : integer := 16#CONFIG_GPT_WDOG#;
+
+-- GPIO port
+  constant CFG_GRGPIO_ENABLE : integer := CONFIG_GRGPIO_ENABLE;
+  constant CFG_GRGPIO_IMASK  : integer := 16#CONFIG_GRGPIO_IMASK#;
+  constant CFG_GRGPIO_WIDTH  : integer := CONFIG_GRGPIO_WIDTH;
+
+-- I2C master
+  constant CFG_I2C_ENABLE : integer := CONFIG_I2C_ENABLE;
+
+-- VGA and PS2/ interface
+  constant CFG_KBD_ENABLE  : integer := CONFIG_KBD_ENABLE;
+  constant CFG_VGA_ENABLE  : integer := CONFIG_VGA_ENABLE;
+  constant CFG_SVGA_ENABLE : integer := CONFIG_SVGA_ENABLE;
+
+-- AMBA System ACE Interface Controller
+  constant CFG_GRACECTRL : integer := CONFIG_GRACECTRL;
+
+-- PCIEXP	interface
+	constant CFG_PCIEXP         : integer	:= CFG_PCIE;
+	constant CFG_PCIE_TYPE			:	integer	:= CFG_PCIETYPE;
+	constant CFG_PCIE_SIM_MAS		:	integer	:= CFG_PCIEMASTER;
+	constant CFG_PCIEXPVID			:	integer	:= 16#CONFIG_PCIEXP_VENDORID#;
+	constant CFG_PCIEXPDID			:	integer	:= 16#CONFIG_PCIEXP_DEVICEID#;
+  constant CFG_NO_OF_LANES    : integer := CFG_LANE_WIDTH;
+-- GRLIB debugging
+  constant CFG_DUART    : integer := CONFIG_DEBUG_UART;
+
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/config.vhd.in work/leon3-xilinx-ml605/config.vhd.in
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/config.vhd.in	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/config.vhd.in	2019-12-29 15:59:50.122753997 +0100
@@ -0,0 +1,23 @@
+#include "config.h"
+#include "tkconfig.h"
+#include "tkconfig2.h"
+
+-----------------------------------------------------------------------------
+--  LEON3 Demonstration design test bench configuration
+--  Copyright (C) 2009 Aeroflex Gaisler
+------------------------------------------------------------------------------
+
+
+library techmap;
+use techmap.gencomp.all;
+
+package config is
+
+#include "config.vhd.h"
+
+
+-- Xilinx MIG DDR2 controller
+  constant CFG_MIG_DDR2 : integer := CONFIG_MIG_DDR2;
+  constant CFG_MIG_CLK4 : integer := CFG_SYS_FREQ_DIV;
+
+end;
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/default.sdc work/leon3-xilinx-ml605/default.sdc
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/default.sdc	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/default.sdc	2019-12-29 15:59:50.122753997 +0100
@@ -0,0 +1,49 @@
+# Synplicity, Inc. constraint file
+# /home/jiri/ibm/vhdl/grlib/boards/gr-xc3s-1500/default.sdc
+# Written on Thu May 11 15:07:16 2006
+# by Synplify Pro, 7.1.1       Scope Editor
+
+#
+# Clocks
+#
+define_clock            -name {clk_ref_p}  -freq 225.000 -route 0.0  -clockgroup sysclk_clkgroup
+define_clock            -name {gmiiclk_p}  -freq 125.000 -route 1.0  -clockgroup gmiiclk_clkgroup
+define_clock            -name {clk_33}  -freq 33.333 -route 5.0  -clockgroup sysace_clkgroup
+define_clock            -name {n:clkm}  -freq 120.000 -route 0.0  -clockgroup ahb_clkgroup
+define_clock            -name {n:clk100}  -freq 100.000 -route 2.0  -clockgroup svga_clkgroup
+define_clock            -name {n:clk125}  -freq 125.000 -route 2.0  -clockgroup svga_clkgroup
+define_clock            {n:clkvga} -name {leon3mp|clkvga}  -freq 65 -route 4 -clockgroup vga_clkgroup
+
+#
+# Inputs/Outputs
+#
+#define_clock_delay  -rise {clk3} -rise {vga_clkgen|clkgen65.clk0B_derived_clock} -false
+#define_clock_delay  -rise {vga_clkgen|clkgen65.clk0B_derived_clock} -rise {clk3} -false
+#define_clock_delay  -rise {leon3mp|clkgen0.xc3s_v.clk0B_derived_clock} -rise {leon3mp|clk50} -false
+#define_clock_delay  -rise {leon3mp|clk50} -rise {leon3mp|clkgen0.xc3s_v.clk0B_derived_clock} -false
+#
+#define_output_delay -disable     -default  10.00 -improve 0.00 -route 0.00 -ref clk:r
+#define_input_delay -disable      -default  10.00 -improve 0.00 -route 0.00 -ref clk:r
+#define_output_delay 8.00 -improve 0.00 -route 0.00 -ref {usb_clkout:r}
+#define_input_delay  8.00 -improve 0.00 -route 0.00 -ref {usb_clkout:r}
+
+#
+# Registers
+#
+
+#
+# Multicycle Path
+#
+
+#
+# False Path
+#
+
+#
+# Attributes
+#
+define_global_attribute          syn_useioff {1}
+
+#
+# Other Constraints
+#
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/defconfig work/leon3-xilinx-ml605/defconfig
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/defconfig	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/defconfig	2019-12-29 15:59:50.122753997 +0100
@@ -0,0 +1,279 @@
+#
+# Automatically generated make config: don't edit
+#
+
+#
+# Synthesis      
+#
+# CONFIG_SYN_INFERRED is not set
+# CONFIG_SYN_STRATIX is not set
+# CONFIG_SYN_STRATIXII is not set
+# CONFIG_SYN_STRATIXIII is not set
+# CONFIG_SYN_CYCLONEIII is not set
+# CONFIG_SYN_ALTERA is not set
+# CONFIG_SYN_AXCEL is not set
+# CONFIG_SYN_AXDSP is not set
+# CONFIG_SYN_PROASIC is not set
+# CONFIG_SYN_PROASICPLUS is not set
+# CONFIG_SYN_PROASIC3 is not set
+# CONFIG_SYN_IGLOO is not set
+# CONFIG_SYN_FUSION is not set
+# CONFIG_SYN_UT025CRH is not set
+# CONFIG_SYN_ATC18 is not set
+# CONFIG_SYN_ATC18RHA is not set
+# CONFIG_SYN_CUSTOM1 is not set
+# CONFIG_SYN_EASIC90 is not set
+# CONFIG_SYN_IHP25 is not set
+# CONFIG_SYN_IHP25RH is not set
+# CONFIG_SYN_LATTICE is not set
+# CONFIG_SYN_ECLIPSE is not set
+# CONFIG_SYN_PEREGRINE is not set
+# CONFIG_SYN_RH_LIB18T is not set
+# CONFIG_SYN_RHUMC is not set
+# CONFIG_SYN_SMIC13 is not set
+# CONFIG_SYN_SPARTAN2 is not set
+# CONFIG_SYN_SPARTAN3 is not set
+# CONFIG_SYN_SPARTAN3E is not set
+CONFIG_SYN_SPARTAN6=y
+# CONFIG_SYN_VIRTEX is not set
+# CONFIG_SYN_VIRTEXE is not set
+# CONFIG_SYN_VIRTEX2 is not set
+# CONFIG_SYN_VIRTEX4 is not set
+# CONFIG_SYN_VIRTEX5 is not set
+# CONFIG_SYN_VIRTEX6 is not set
+# CONFIG_SYN_UMC is not set
+# CONFIG_SYN_TSMC90 is not set
+# CONFIG_SYN_INFER_RAM is not set
+# CONFIG_SYN_INFER_PADS is not set
+# CONFIG_SYN_NO_ASYNC is not set
+# CONFIG_SYN_SCAN is not set
+
+#
+# Clock generation
+#
+# CONFIG_CLK_INFERRED is not set
+# CONFIG_CLK_HCLKBUF is not set
+# CONFIG_CLK_ALTDLL is not set
+# CONFIG_CLK_LATDLL is not set
+# CONFIG_CLK_PRO3PLL is not set
+# CONFIG_CLK_FUSPLL is not set
+# CONFIG_CLK_LIB18T is not set
+# CONFIG_CLK_RHUMC is not set
+# CONFIG_CLK_CLKDLL is not set
+CONFIG_CLK_DCM=y
+CONFIG_CLK_MUL=6
+CONFIG_CLK_DIV=2
+# CONFIG_PCI_CLKDLL is not set
+# CONFIG_CLK_NOFB is not set
+# CONFIG_PCI_SYSCLK is not set
+CONFIG_LEON3=y
+CONFIG_PROC_NUM=1
+
+#
+# Processor            
+#
+
+#
+# Integer unit                                           
+#
+CONFIG_IU_NWINDOWS=8
+CONFIG_IU_V8MULDIV=y
+# CONFIG_IU_MUL_LATENCY_2 is not set
+# CONFIG_IU_MUL_LATENCY_4 is not set
+CONFIG_IU_MUL_LATENCY_5=y
+# CONFIG_IU_MUL_MAC is not set
+CONFIG_IU_BP=y
+# CONFIG_IU_SVT is not set
+CONFIG_IU_LDELAY=1
+CONFIG_IU_WATCHPOINTS=0
+# CONFIG_PWD is not set
+CONFIG_IU_RSTADDR=00000
+
+#
+# Floating-point unit
+#
+# CONFIG_FPU_ENABLE is not set
+
+#
+# Cache system
+#
+CONFIG_ICACHE_ENABLE=y
+CONFIG_ICACHE_ASSO1=y
+# CONFIG_ICACHE_ASSO2 is not set
+# CONFIG_ICACHE_ASSO3 is not set
+# CONFIG_ICACHE_ASSO4 is not set
+# CONFIG_ICACHE_SZ1 is not set
+# CONFIG_ICACHE_SZ2 is not set
+# CONFIG_ICACHE_SZ4 is not set
+CONFIG_ICACHE_SZ8=y
+# CONFIG_ICACHE_SZ16 is not set
+# CONFIG_ICACHE_SZ32 is not set
+# CONFIG_ICACHE_SZ64 is not set
+# CONFIG_ICACHE_SZ128 is not set
+# CONFIG_ICACHE_SZ256 is not set
+# CONFIG_ICACHE_LZ16 is not set
+CONFIG_ICACHE_LZ32=y
+CONFIG_DCACHE_ENABLE=y
+CONFIG_DCACHE_ASSO1=y
+# CONFIG_DCACHE_ASSO2 is not set
+# CONFIG_DCACHE_ASSO3 is not set
+# CONFIG_DCACHE_ASSO4 is not set
+# CONFIG_DCACHE_SZ1 is not set
+# CONFIG_DCACHE_SZ2 is not set
+CONFIG_DCACHE_SZ4=y
+# CONFIG_DCACHE_SZ8 is not set
+# CONFIG_DCACHE_SZ16 is not set
+# CONFIG_DCACHE_SZ32 is not set
+# CONFIG_DCACHE_SZ64 is not set
+# CONFIG_DCACHE_SZ128 is not set
+# CONFIG_DCACHE_SZ256 is not set
+CONFIG_DCACHE_LZ16=y
+# CONFIG_DCACHE_LZ32 is not set
+CONFIG_DCACHE_SNOOP=y
+# CONFIG_DCACHE_SNOOP_FAST is not set
+# CONFIG_DCACHE_SNOOP_SEPTAG is not set
+CONFIG_CACHE_FIXED=0
+
+#
+# MMU
+#
+CONFIG_MMU_ENABLE=y
+CONFIG_MMU_COMBINED=y
+# CONFIG_MMU_SPLIT is not set
+# CONFIG_MMU_REPARRAY is not set
+CONFIG_MMU_REPINCREMENT=y
+# CONFIG_MMU_I2 is not set
+# CONFIG_MMU_I4 is not set
+CONFIG_MMU_I8=y
+# CONFIG_MMU_I16 is not set
+# CONFIG_MMU_I32 is not set
+CONFIG_MMU_PAGE_4K=y
+# CONFIG_MMU_PAGE_8K is not set
+# CONFIG_MMU_PAGE_16K is not set
+# CONFIG_MMU_PAGE_32K is not set
+# CONFIG_MMU_PAGE_PROG is not set
+
+#
+# Debug Support Unit        
+#
+CONFIG_DSU_ENABLE=y
+CONFIG_DSU_ITRACE=y
+# CONFIG_DSU_ITRACESZ1 is not set
+CONFIG_DSU_ITRACESZ2=y
+# CONFIG_DSU_ITRACESZ4 is not set
+# CONFIG_DSU_ITRACESZ8 is not set
+# CONFIG_DSU_ITRACESZ16 is not set
+CONFIG_DSU_ATRACE=y
+# CONFIG_DSU_ATRACESZ1 is not set
+CONFIG_DSU_ATRACESZ2=y
+# CONFIG_DSU_ATRACESZ4 is not set
+# CONFIG_DSU_ATRACESZ8 is not set
+# CONFIG_DSU_ATRACESZ16 is not set
+
+#
+# Fault-tolerance  
+#
+
+#
+# VHDL debug settings       
+#
+# CONFIG_IU_DISAS is not set
+# CONFIG_DEBUG_PC32 is not set
+
+#
+# AMBA configuration
+#
+CONFIG_AHB_DEFMST=0
+CONFIG_AHB_RROBIN=y
+CONFIG_AHB_SPLIT=y
+CONFIG_AHB_IOADDR=FFF
+CONFIG_APB_HADDR=800
+# CONFIG_AHB_MON is not set
+
+#
+# Debug Link           
+#
+# CONFIG_DSU_UART is not set
+CONFIG_DSU_JTAG=y
+# CONFIG_DSU_ETH is not set
+
+#
+# Peripherals             
+#
+
+#
+# Memory controllers             
+#
+
+#
+# Leon2 memory controller        
+#
+CONFIG_MCTRL_LEON2=y
+CONFIG_MCTRL_8BIT=y
+# CONFIG_MCTRL_16BIT is not set
+# CONFIG_MCTRL_5CS is not set
+# CONFIG_MCTRL_SDRAM is not set
+
+#
+# DDR2 SDRAM controller             
+#
+# CONFIG_DDR2SP is not set
+
+#
+# On-chip RAM/ROM                 
+#
+# CONFIG_AHBROM_ENABLE is not set
+# CONFIG_AHBRAM_ENABLE is not set
+
+#
+# Ethernet             
+#
+CONFIG_GRETH_ENABLE=y
+# CONFIG_GRETH_GIGA is not set
+# CONFIG_GRETH_FIFO4 is not set
+# CONFIG_GRETH_FIFO8 is not set
+# CONFIG_GRETH_FIFO16 is not set
+CONFIG_GRETH_FIFO32=y
+# CONFIG_GRETH_FIFO64 is not set
+
+#
+# UARTs, timers and irq control         
+#
+CONFIG_UART1_ENABLE=y
+CONFIG_UA1_FIFO1=y
+# CONFIG_UA1_FIFO2 is not set
+# CONFIG_UA1_FIFO4 is not set
+# CONFIG_UA1_FIFO8 is not set
+# CONFIG_UA1_FIFO16 is not set
+# CONFIG_UA1_FIFO32 is not set
+CONFIG_IRQ3_ENABLE=y
+# CONFIG_IRQ3_SEC is not set
+CONFIG_GPT_ENABLE=y
+CONFIG_GPT_NTIM=2
+CONFIG_GPT_SW=8
+CONFIG_GPT_TW=32
+CONFIG_GPT_IRQ=8
+CONFIG_GPT_SEPIRQ=y
+# CONFIG_GPT_WDOGEN is not set
+CONFIG_GRGPIO_ENABLE=y
+CONFIG_GRGPIO_WIDTH=8
+CONFIG_GRGPIO_IMASK=0000
+
+#
+# SPI
+#
+
+#
+# SPI memory controller 
+#
+# CONFIG_SPIMCTRL is not set
+
+#
+# SPI controller 
+#
+# CONFIG_SPICTRL_ENABLE is not set
+
+#
+# VHDL Debugging        
+#
+# CONFIG_DEBUG_UART is not set
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/grlib_config.vhd work/leon3-xilinx-ml605/grlib_config.vhd
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/grlib_config.vhd	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/grlib_config.vhd	2019-12-29 15:59:50.122753997 +0100
@@ -0,0 +1,68 @@
+------------------------------------------------------------------------------
+--  This file is a part of the GRLIB VHDL IP LIBRARY
+--  Copyright (C) 2003 - 2008, Gaisler Research
+--  Copyright (C) 2008 - 2014, Aeroflex Gaisler
+--
+--  This program is free software; you can redistribute it and/or modify
+--  it under the terms of the GNU General Public License as published by
+--  the Free Software Foundation; either version 2 of the License, or
+--  (at your option) any later version.
+--
+--  This program is distributed in the hope that it will be useful,
+--  but WITHOUT ANY WARRANTY; without even the implied warranty of
+--  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+--  GNU General Public License for more details.
+--
+--  You should have received a copy of the GNU General Public License
+--  along with this program; if not, write to the Free Software
+--  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA 
+-----------------------------------------------------------------------------
+-- Package: 	config
+-- File:	config.vhd
+-- Author:	Jiri Gaisler, Gaisler Research
+-- Description:	GRLIB Global configuration package. Can be overriden
+--		by local config packages in template designs.
+------------------------------------------------------------------------------
+
+library ieee;
+use ieee.std_logic_1164.all;
+library grlib;
+use grlib.config_types.all;
+
+package config is
+
+-- AHBDW - AHB data with
+--
+-- Valid values are 32, 64, 128 and 256
+--
+-- The value here sets the width of the AMBA AHB data vectors for all
+-- cores in the library.
+--
+constant CFG_AHBDW     : integer := 64;
+
+
+-- CORE_ACDM - Enable AMBA Compliant Data Muxing in cores
+--
+-- Valid values are 0 and 1
+--
+-- 0: All GRLIB cores that use the ahbread* programs defined in this package
+--    will read their data from the low part of the AHB data vector.
+--
+-- 1: All GRLIB cores that use the ahbread* programs defined in this package
+--    will select valid data, as defined in the AMBA AHB standard, from the
+--    AHB data vectors based on the address input. If a core uses a function
+--    that does not have the address input, a failure will be asserted.
+--
+constant CFG_AHB_ACDM : integer := 0; 
+
+-- GRLIB_CONFIG_ARRAY - Array of configuration values
+--
+-- The length of this array and the meaning of different positions is defined
+-- in the grlib.config_types package.
+constant GRLIB_CONFIG_ARRAY : grlib_config_array_type := (
+  grlib_debug_level => 0,
+  grlib_debug_mask => 0,
+  grlib_techmap_strict_ram => 0,
+  others => 0);
+
+end;
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/grlib_mig/mig39.cgp work/leon3-xilinx-ml605/grlib_mig/mig39.cgp
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/grlib_mig/mig39.cgp	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/grlib_mig/mig39.cgp	2019-12-29 15:59:50.122753997 +0100
@@ -0,0 +1,22 @@
+# Date: Wed Dec  5 12:56:18 2012
+
+SET addpads = false
+SET asysymbol = true
+SET busformat = BusFormatParenNotRipped
+SET createndf = false
+SET designentry = Verilog
+SET device = xc6vlx240t
+SET devicefamily = virtex6
+SET flowvendor = Synplicity
+SET formalverification = false
+SET foundationsym = false
+SET implementationfiletype = Ngc
+SET package = ff1156
+SET removerpms = false
+SET simulationfiles = Behavioral
+SET speedgrade = -1
+SET verilogsim = true
+SET vhdlsim = false
+SET workingdirectory = ./tmp/
+
+# CRC: 59c905fa
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/grlib_mig/mig39.prj work/leon3-xilinx-ml605/grlib_mig/mig39.prj
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/grlib_mig/mig39.prj	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/grlib_mig/mig39.prj	2019-12-29 15:59:50.122753997 +0100
@@ -0,0 +1,194 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<Project NoOfControllers="1" >
+    <ModuleName>mig</ModuleName>
+    <dci_inouts_inputs>1</dci_inouts_inputs>
+    <dci_outputs>0</dci_outputs>
+    <Debug_En>OFF</Debug_En>
+    <TargetFPGA>xc6vlx240t-ff1156/-1</TargetFPGA>
+    <Version>3.92</Version>
+    <SystemClock>Differential</SystemClock>
+    <PinSelectionFlag>TRUE</PinSelectionFlag>
+    <IODelayHighPerformanceMode>HIGH</IODelayHighPerformanceMode>
+    <InternalVref>0</InternalVref>
+    <Controller number="0" >
+        <MemoryDevice>DDR3_SDRAM/SODIMMs/MT4JSF6464HY-1G1</MemoryDevice>
+        <TimePeriod>2500</TimePeriod>
+        <DataWidth>64</DataWidth>
+        <DeepMemory>1</DeepMemory>
+        <DataMask>1</DataMask>
+        <CustomPart>FALSE</CustomPart>
+        <NewPartName></NewPartName>
+        <RowAddress>13</RowAddress>
+        <ColAddress>10</ColAddress>
+        <BankAddress>3</BankAddress>
+        <MasterBanks>25</MasterBanks>
+        <TimingParameters>
+            <Parameters twtr="7.5" trrd="10" trefi="7.8" tfaw="37.5" trtp="7.5" trfc="110" trp="13.13" tras="37.5" trcd="13.13" />
+        </TimingParameters>
+        <ECC>Disabled</ECC>
+        <DiscreteBankSelections>1</DiscreteBankSelections>
+        <CaptureClock>36</CaptureClock>
+        <UserMemoryAddressMap>BANK_ROW_COLUMN</UserMemoryAddressMap>
+        <Ordering>Normal</Ordering>
+        <PinSelection>
+            <Pin SignalName="BUFIO:0" PINNumber="C13" SignalGroup="Data" Bank="35" />
+            <Pin SignalName="BUFIO:1" PINNumber="L13" SignalGroup="Data" Bank="35" />
+            <Pin SignalName="BUFIO:2" PINNumber="K14" SignalGroup="Data" Bank="35" />
+            <Pin SignalName="BUFIO:3" PINNumber="F21" SignalGroup="Data" Bank="26" />
+            <Pin SignalName="BUFIO:4" PINNumber="B20" SignalGroup="Data" Bank="26" />
+            <Pin SignalName="BUFIO:5" PINNumber="F25" SignalGroup="Data" Bank="25" />
+            <Pin SignalName="BUFIO:6" PINNumber="C28" SignalGroup="Data" Bank="25" />
+            <Pin SignalName="BUFIO:7" PINNumber="D24" SignalGroup="Data" Bank="25" />
+            <Pin SignalName="BUFR:0" PINNumber="M12" SignalGroup="Data" Bank="35" />
+            <Pin SignalName="BUFR:1" PINNumber="C29" SignalGroup="Data" Bank="25" />
+            <Pin SignalName="clk_ref_n" PINNumber="H9" SignalGroup="System_Clock" Bank="34" />
+            <Pin SignalName="clk_ref_p" PINNumber="J9" SignalGroup="System_Clock" Bank="34" />
+            <Pin SignalName="ddr3_addr[0]" PINNumber="L14" SignalGroup="Address" Bank="36" />
+            <Pin SignalName="ddr3_addr[10]" PINNumber="M16" SignalGroup="Address" Bank="36" />
+            <Pin SignalName="ddr3_addr[11]" PINNumber="M15" SignalGroup="Address" Bank="36" />
+            <Pin SignalName="ddr3_addr[12]" PINNumber="H15" SignalGroup="Address" Bank="36" />
+            <Pin SignalName="ddr3_addr[1]" PINNumber="A16" SignalGroup="Address" Bank="36" />
+            <Pin SignalName="ddr3_addr[2]" PINNumber="B16" SignalGroup="Address" Bank="36" />
+            <Pin SignalName="ddr3_addr[3]" PINNumber="E16" SignalGroup="Address" Bank="36" />
+            <Pin SignalName="ddr3_addr[4]" PINNumber="D16" SignalGroup="Address" Bank="36" />
+            <Pin SignalName="ddr3_addr[5]" PINNumber="J17" SignalGroup="Address" Bank="36" />
+            <Pin SignalName="ddr3_addr[6]" PINNumber="A15" SignalGroup="Address" Bank="36" />
+            <Pin SignalName="ddr3_addr[7]" PINNumber="B15" SignalGroup="Address" Bank="36" />
+            <Pin SignalName="ddr3_addr[8]" PINNumber="G15" SignalGroup="Address" Bank="36" />
+            <Pin SignalName="ddr3_addr[9]" PINNumber="F15" SignalGroup="Address" Bank="36" />
+            <Pin SignalName="ddr3_ba[0]" PINNumber="K19" SignalGroup="Address" Bank="36" />
+            <Pin SignalName="ddr3_ba[1]" PINNumber="J19" SignalGroup="Address" Bank="36" />
+            <Pin SignalName="ddr3_ba[2]" PINNumber="L15" SignalGroup="Address" Bank="36" />
+            <Pin SignalName="ddr3_cas#" PINNumber="C17" SignalGroup="Address" Bank="36" />
+            <Pin SignalName="ddr3_ck#[0]" PINNumber="H18" SignalGroup="Address" Bank="36" />
+            <Pin SignalName="ddr3_ck_p[0]" PINNumber="G18" SignalGroup="Address" Bank="36" />
+            <Pin SignalName="ddr3_cke[0]" PINNumber="M18" SignalGroup="Address" Bank="36" />
+            <Pin SignalName="ddr3_cs#[0]" PINNumber="K18" SignalGroup="Address" Bank="36" />
+            <Pin SignalName="ddr3_dm[0]" PINNumber="E11" SignalGroup="Data" Bank="35" />
+            <Pin SignalName="ddr3_dm[1]" PINNumber="B11" SignalGroup="Data" Bank="35" />
+            <Pin SignalName="ddr3_dm[2]" PINNumber="E14" SignalGroup="Data" Bank="35" />
+            <Pin SignalName="ddr3_dm[3]" PINNumber="D19" SignalGroup="Data" Bank="26" />
+            <Pin SignalName="ddr3_dm[4]" PINNumber="B22" SignalGroup="Data" Bank="26" />
+            <Pin SignalName="ddr3_dm[5]" PINNumber="A26" SignalGroup="Data" Bank="25" />
+            <Pin SignalName="ddr3_dm[6]" PINNumber="A29" SignalGroup="Data" Bank="25" />
+            <Pin SignalName="ddr3_dm[7]" PINNumber="A31" SignalGroup="Data" Bank="25" />
+            <Pin SignalName="ddr3_dq[0]" PINNumber="J11" SignalGroup="Data" Bank="35" />
+            <Pin SignalName="ddr3_dq[10]" PINNumber="B13" SignalGroup="Data" Bank="35" />
+            <Pin SignalName="ddr3_dq[11]" PINNumber="B12" SignalGroup="Data" Bank="35" />
+            <Pin SignalName="ddr3_dq[12]" PINNumber="G10" SignalGroup="Data" Bank="35" />
+            <Pin SignalName="ddr3_dq[13]" PINNumber="M11" SignalGroup="Data" Bank="35" />
+            <Pin SignalName="ddr3_dq[14]" PINNumber="C12" SignalGroup="Data" Bank="35" />
+            <Pin SignalName="ddr3_dq[15]" PINNumber="A11" SignalGroup="Data" Bank="35" />
+            <Pin SignalName="ddr3_dq[16]" PINNumber="G11" SignalGroup="Data" Bank="35" />
+            <Pin SignalName="ddr3_dq[17]" PINNumber="F11" SignalGroup="Data" Bank="35" />
+            <Pin SignalName="ddr3_dq[18]" PINNumber="D14" SignalGroup="Data" Bank="35" />
+            <Pin SignalName="ddr3_dq[19]" PINNumber="C14" SignalGroup="Data" Bank="35" />
+            <Pin SignalName="ddr3_dq[1]" PINNumber="E13" SignalGroup="Data" Bank="35" />
+            <Pin SignalName="ddr3_dq[20]" PINNumber="G12" SignalGroup="Data" Bank="35" />
+            <Pin SignalName="ddr3_dq[21]" PINNumber="G13" SignalGroup="Data" Bank="35" />
+            <Pin SignalName="ddr3_dq[22]" PINNumber="F14" SignalGroup="Data" Bank="35" />
+            <Pin SignalName="ddr3_dq[23]" PINNumber="H14" SignalGroup="Data" Bank="35" />
+            <Pin SignalName="ddr3_dq[24]" PINNumber="C19" SignalGroup="Data" Bank="26" />
+            <Pin SignalName="ddr3_dq[25]" PINNumber="G20" SignalGroup="Data" Bank="26" />
+            <Pin SignalName="ddr3_dq[26]" PINNumber="E19" SignalGroup="Data" Bank="26" />
+            <Pin SignalName="ddr3_dq[27]" PINNumber="F20" SignalGroup="Data" Bank="26" />
+            <Pin SignalName="ddr3_dq[28]" PINNumber="A20" SignalGroup="Data" Bank="26" />
+            <Pin SignalName="ddr3_dq[29]" PINNumber="A21" SignalGroup="Data" Bank="26" />
+            <Pin SignalName="ddr3_dq[2]" PINNumber="F13" SignalGroup="Data" Bank="35" />
+            <Pin SignalName="ddr3_dq[30]" PINNumber="E22" SignalGroup="Data" Bank="26" />
+            <Pin SignalName="ddr3_dq[31]" PINNumber="E23" SignalGroup="Data" Bank="26" />
+            <Pin SignalName="ddr3_dq[32]" PINNumber="G21" SignalGroup="Data" Bank="26" />
+            <Pin SignalName="ddr3_dq[33]" PINNumber="B21" SignalGroup="Data" Bank="26" />
+            <Pin SignalName="ddr3_dq[34]" PINNumber="A23" SignalGroup="Data" Bank="26" />
+            <Pin SignalName="ddr3_dq[35]" PINNumber="A24" SignalGroup="Data" Bank="26" />
+            <Pin SignalName="ddr3_dq[36]" PINNumber="C20" SignalGroup="Data" Bank="26" />
+            <Pin SignalName="ddr3_dq[37]" PINNumber="D20" SignalGroup="Data" Bank="26" />
+            <Pin SignalName="ddr3_dq[38]" PINNumber="J20" SignalGroup="Data" Bank="26" />
+            <Pin SignalName="ddr3_dq[39]" PINNumber="G22" SignalGroup="Data" Bank="26" />
+            <Pin SignalName="ddr3_dq[3]" PINNumber="K11" SignalGroup="Data" Bank="35" />
+            <Pin SignalName="ddr3_dq[40]" PINNumber="D26" SignalGroup="Data" Bank="25" />
+            <Pin SignalName="ddr3_dq[41]" PINNumber="F26" SignalGroup="Data" Bank="25" />
+            <Pin SignalName="ddr3_dq[42]" PINNumber="B26" SignalGroup="Data" Bank="25" />
+            <Pin SignalName="ddr3_dq[43]" PINNumber="E26" SignalGroup="Data" Bank="25" />
+            <Pin SignalName="ddr3_dq[44]" PINNumber="C24" SignalGroup="Data" Bank="25" />
+            <Pin SignalName="ddr3_dq[45]" PINNumber="D25" SignalGroup="Data" Bank="25" />
+            <Pin SignalName="ddr3_dq[46]" PINNumber="D27" SignalGroup="Data" Bank="25" />
+            <Pin SignalName="ddr3_dq[47]" PINNumber="C25" SignalGroup="Data" Bank="25" />
+            <Pin SignalName="ddr3_dq[48]" PINNumber="C27" SignalGroup="Data" Bank="25" />
+            <Pin SignalName="ddr3_dq[49]" PINNumber="B28" SignalGroup="Data" Bank="25" />
+            <Pin SignalName="ddr3_dq[4]" PINNumber="L11" SignalGroup="Data" Bank="35" />
+            <Pin SignalName="ddr3_dq[50]" PINNumber="D29" SignalGroup="Data" Bank="25" />
+            <Pin SignalName="ddr3_dq[51]" PINNumber="B27" SignalGroup="Data" Bank="25" />
+            <Pin SignalName="ddr3_dq[52]" PINNumber="G27" SignalGroup="Data" Bank="25" />
+            <Pin SignalName="ddr3_dq[53]" PINNumber="A28" SignalGroup="Data" Bank="25" />
+            <Pin SignalName="ddr3_dq[54]" PINNumber="E24" SignalGroup="Data" Bank="25" />
+            <Pin SignalName="ddr3_dq[55]" PINNumber="G25" SignalGroup="Data" Bank="25" />
+            <Pin SignalName="ddr3_dq[56]" PINNumber="F28" SignalGroup="Data" Bank="25" />
+            <Pin SignalName="ddr3_dq[57]" PINNumber="B31" SignalGroup="Data" Bank="25" />
+            <Pin SignalName="ddr3_dq[58]" PINNumber="H29" SignalGroup="Data" Bank="25" />
+            <Pin SignalName="ddr3_dq[59]" PINNumber="H28" SignalGroup="Data" Bank="25" />
+            <Pin SignalName="ddr3_dq[5]" PINNumber="K13" SignalGroup="Data" Bank="35" />
+            <Pin SignalName="ddr3_dq[60]" PINNumber="B30" SignalGroup="Data" Bank="25" />
+            <Pin SignalName="ddr3_dq[61]" PINNumber="A30" SignalGroup="Data" Bank="25" />
+            <Pin SignalName="ddr3_dq[62]" PINNumber="E29" SignalGroup="Data" Bank="25" />
+            <Pin SignalName="ddr3_dq[63]" PINNumber="F29" SignalGroup="Data" Bank="25" />
+            <Pin SignalName="ddr3_dq[6]" PINNumber="K12" SignalGroup="Data" Bank="35" />
+            <Pin SignalName="ddr3_dq[7]" PINNumber="D11" SignalGroup="Data" Bank="35" />
+            <Pin SignalName="ddr3_dq[8]" PINNumber="M13" SignalGroup="Data" Bank="35" />
+            <Pin SignalName="ddr3_dq[9]" PINNumber="J14" SignalGroup="Data" Bank="35" />
+            <Pin SignalName="ddr3_dqs#[0]" PINNumber="E12" SignalGroup="Data" Bank="35" />
+            <Pin SignalName="ddr3_dqs#[1]" PINNumber="J12" SignalGroup="Data" Bank="35" />
+            <Pin SignalName="ddr3_dqs#[2]" PINNumber="A14" SignalGroup="Data" Bank="35" />
+            <Pin SignalName="ddr3_dqs#[3]" PINNumber="H20" SignalGroup="Data" Bank="26" />
+            <Pin SignalName="ddr3_dqs#[4]" PINNumber="C23" SignalGroup="Data" Bank="26" />
+            <Pin SignalName="ddr3_dqs#[5]" PINNumber="A25" SignalGroup="Data" Bank="25" />
+            <Pin SignalName="ddr3_dqs#[6]" PINNumber="G28" SignalGroup="Data" Bank="25" />
+            <Pin SignalName="ddr3_dqs#[7]" PINNumber="D30" SignalGroup="Data" Bank="25" />
+            <Pin SignalName="ddr3_dqs_p[0]" PINNumber="D12" SignalGroup="Data" Bank="35" />
+            <Pin SignalName="ddr3_dqs_p[1]" PINNumber="H12" SignalGroup="Data" Bank="35" />
+            <Pin SignalName="ddr3_dqs_p[2]" PINNumber="A13" SignalGroup="Data" Bank="35" />
+            <Pin SignalName="ddr3_dqs_p[3]" PINNumber="H19" SignalGroup="Data" Bank="26" />
+            <Pin SignalName="ddr3_dqs_p[4]" PINNumber="B23" SignalGroup="Data" Bank="26" />
+            <Pin SignalName="ddr3_dqs_p[5]" PINNumber="B25" SignalGroup="Data" Bank="25" />
+            <Pin SignalName="ddr3_dqs_p[6]" PINNumber="H27" SignalGroup="Data" Bank="25" />
+            <Pin SignalName="ddr3_dqs_p[7]" PINNumber="C30" SignalGroup="Data" Bank="25" />
+            <Pin SignalName="ddr3_odt[0]" PINNumber="F18" SignalGroup="Address" Bank="36" />
+            <Pin SignalName="ddr3_ras#" PINNumber="L19" SignalGroup="Address" Bank="36" />
+            <Pin SignalName="ddr3_reset#" PINNumber="E18" SignalGroup="Address" Bank="36" />
+            <Pin SignalName="ddr3_we#" PINNumber="B17" SignalGroup="Address" Bank="36" />
+            <Pin SignalName="error" PINNumber="AE22" SignalGroup="Control" Bank="24" />
+            <Pin SignalName="phy_init_done" PINNumber="AE23" SignalGroup="Control" Bank="24" />
+            <Pin SignalName="scl" PINNumber="AA34" SignalGroup="Control" Bank="13" />
+            <Pin SignalName="sda" PINNumber="AA33" SignalGroup="Control" Bank="13" />
+            <Pin SignalName="sys_clk_n" PINNumber="B10" SignalGroup="System_Clock" Bank="34" />
+            <Pin SignalName="sys_clk_p" PINNumber="A10" SignalGroup="System_Clock" Bank="34" />
+            <Pin SignalName="sys_rst" PINNumber="H10" SignalGroup="Control" Bank="35" />
+        </PinSelection>
+        <BankSelection>
+            <Bank SysClk="0" Data="1" name="25" Address="0" wasso="40" />
+            <Bank SysClk="0" Data="1" name="26" Address="0" wasso="40" />
+            <Bank SysClk="1" Data="0" name="34" Address="0" wasso="40" />
+            <Bank SysClk="0" Data="1" name="35" Address="0" wasso="40" />
+            <Bank SysClk="0" Data="0" name="36" Address="1" wasso="40" />
+        </BankSelection>
+        <mrBurstLength name="Burst Length" >8 - Fixed</mrBurstLength>
+        <mrBurstType name="Read Burst Type" >Sequential</mrBurstType>
+        <mrCasLatency name="CAS Latency" >6</mrCasLatency>
+        <mrMode name="Mode" >Normal</mrMode>
+        <mrDllReset name="DLL Reset" >No</mrDllReset>
+        <mrPdMode name="DLL control for precharge PD" >Slow Exit</mrPdMode>
+        <emrDllEnable name="DLL Enable" >Enable</emrDllEnable>
+        <emrOutputDriveStrength name="Output Driver Impedance Control" >RZQ/7</emrOutputDriveStrength>
+        <emrRTT name="RTT (nominal) - On Die Termination (ODT)" >RZQ/4</emrRTT>
+        <emrPosted name="Additive Latency (AL)" >0</emrPosted>
+        <emrOCD name="Write Leveling Enable" >Disabled</emrOCD>
+        <emrDQS name="TDQS enable" >Enabled</emrDQS>
+        <emrRDQS name="Qoff" >Output Buffer Enabled</emrRDQS>
+        <mr2PartialArraySelfRefresh name="Partial-Array Self Refresh" >Full Array</mr2PartialArraySelfRefresh>
+        <mr2CasWriteLatency name="CAS write latency" >5</mr2CasWriteLatency>
+        <mr2AutoSelfRefresh name="Auto Self Refresh" >Enabled</mr2AutoSelfRefresh>
+        <mr2SelfRefreshTempRange name="High Temparature Self Refresh Rate" >Normal</mr2SelfRefreshTempRange>
+        <mr2RTTWR name="RTT_WR - Dynamic On Die Termination (ODT)" >Dynamic ODT off</mr2RTTWR>
+        <PortInterface>NATIVE</PortInterface>
+    </Controller>
+</Project>
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/grlib_mig/mig39.xco work/leon3-xilinx-ml605/grlib_mig/mig39.xco
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/grlib_mig/mig39.xco	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/grlib_mig/mig39.xco	2019-12-29 15:59:50.122753997 +0100
@@ -0,0 +1,49 @@
+##############################################################
+#
+# Xilinx Core Generator version 14.4
+# Date: Tue Jan 15 12:55:41 2013
+#
+##############################################################
+#
+#  This file contains the customisation parameters for a
+#  Xilinx CORE Generator IP GUI. It is strongly recommended
+#  that you do not manually alter this file as it may cause
+#  unexpected and unsupported behavior.
+#
+##############################################################
+#
+#  Generated from component: xilinx.com:ip:mig:3.92
+#
+##############################################################
+#
+# BEGIN Project Options
+SET addpads = false
+SET asysymbol = true
+SET busformat = BusFormatParenNotRipped
+SET createndf = false
+SET designentry = Verilog
+SET device = xc6vlx240t
+SET devicefamily = virtex6
+SET flowvendor = Synplicity
+SET formalverification = false
+SET foundationsym = false
+SET implementationfiletype = Ngc
+SET package = ff1156
+SET removerpms = false
+SET simulationfiles = Behavioral
+SET speedgrade = -1
+SET verilogsim = true
+SET vhdlsim = false
+# END Project Options
+# BEGIN Select
+SELECT MIG_Virtex-6_and_Spartan-6 family Xilinx,_Inc. 3.92
+# END Select
+# BEGIN Parameters
+CSET component_name=mig
+CSET xml_input_file=./mig39.prj
+# END Parameters
+# BEGIN Extra information
+MISC pkg_timestamp=2012-10-13T03:35:42Z
+# END Extra information
+GENERATE
+# CRC: 1dbe8904
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/grlib_mig/mig.cgc work/leon3-xilinx-ml605/grlib_mig/mig.cgc
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/grlib_mig/mig.cgc	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/grlib_mig/mig.cgc	2019-12-29 15:59:50.122753997 +0100
@@ -0,0 +1,1635 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<spirit:design xmlns:spirit="http://www.spiritconsortium.org/XMLSchema/SPIRIT/1685-2009" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xilinx="http://www.xilinx.com" >
+   <spirit:vendor>xilinx.com</spirit:vendor>
+   <spirit:library>project</spirit:library>
+   <spirit:name>ml605_mig_design</spirit:name>
+   <spirit:version>1.0</spirit:version>
+   <spirit:componentInstances>
+      <spirit:componentInstance>
+         <spirit:instanceName>mig_37</spirit:instanceName>
+         <spirit:displayName>MIG Virtex6 and Spartan6</spirit:displayName>
+         <spirit:componentRef spirit:vendor="xilinx.com" spirit:library="ip" spirit:name="mig" spirit:version="3.7" />
+         <spirit:configurableElementValues>
+            <spirit:configurableElementValue spirit:referenceId="PARAM_VALUE.COMPONENT_NAME">mig_37</spirit:configurableElementValue>
+            <spirit:configurableElementValue spirit:referenceId="PARAM_VALUE.XML_INPUT_FILE">./mig_37/user_design/mig.prj</spirit:configurableElementValue>
+         </spirit:configurableElementValues>
+         <spirit:vendorExtensions>
+            <xilinx:instanceProperties>
+               <xilinx:projectOptions>
+                  <xilinx:projectName>ml605_mig_design</xilinx:projectName>
+                  <xilinx:outputDirectory>./</xilinx:outputDirectory>
+                  <xilinx:workingDirectory>./tmp/</xilinx:workingDirectory>
+                  <xilinx:subWorkingDirectory>./tmp/_cg/</xilinx:subWorkingDirectory>
+               </xilinx:projectOptions>
+               <xilinx:part>
+                  <xilinx:device>xc6vlx240t</xilinx:device>
+                  <xilinx:deviceFamily>virtex6</xilinx:deviceFamily>
+                  <xilinx:package>ff1156</xilinx:package>
+                  <xilinx:speedGrade>-1</xilinx:speedGrade>
+               </xilinx:part>
+               <xilinx:flowOptions>
+                  <xilinx:busFormat>BusFormatParenNotRipped</xilinx:busFormat>
+                  <xilinx:designEntry>VHDL</xilinx:designEntry>
+                  <xilinx:asySymbol>true</xilinx:asySymbol>
+                  <xilinx:flowVendor>Synplicity</xilinx:flowVendor>
+                  <xilinx:addPads>false</xilinx:addPads>
+                  <xilinx:removeRPMs>false</xilinx:removeRPMs>
+                  <xilinx:createNDF>false</xilinx:createNDF>
+                  <xilinx:implementationFileType>Ngc</xilinx:implementationFileType>
+                  <xilinx:formalVerification>false</xilinx:formalVerification>
+               </xilinx:flowOptions>
+               <xilinx:simulationOptions>
+                  <xilinx:simulationModel>Behavioral</xilinx:simulationModel>
+                  <xilinx:simulationLanguage>VHDL</xilinx:simulationLanguage>
+                  <xilinx:foundationSym>false</xilinx:foundationSym>
+               </xilinx:simulationOptions>
+            </xilinx:instanceProperties>
+            <xilinx:generationHistory>
+               <xilinx:fileSet>
+                  <xilinx:name>model_parameter_resolution_generator</xilinx:name>
+               </xilinx:fileSet>
+               <xilinx:fileSet>
+                  <xilinx:name>ip_xco_generator</xilinx:name>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37.xco</xilinx:name>
+                     <xilinx:userFileType>xco</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:05 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x1C6E25D7</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+               </xilinx:fileSet>
+               <xilinx:fileSet>
+                  <xilinx:name>implementation_source_generator</xilinx:name>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/docs/ds186.pdf</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>pdf</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:06 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xC0771162</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/docs/ug406.pdf</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>pdf</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:06 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x38A28017</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/datasheet.txt</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>txt</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xB2DDAC9E</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/log.txt</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>txt</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x69B44461</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/mig.prj</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>unknown</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xBDF03929</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/par/bitgen_options.ut</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>unknown</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xB1843643</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/par/constraints.xcf</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>unknown</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x44602869</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/par/example_top.cdc</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>unknown</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x3DE4ABF6</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/par/example_top.ucf</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>ucf</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xBE4794AA</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/par/icon5_cg.xco</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>xco</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xAB47F1AE</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/par/ila384_8_cg.xco</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>xco</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x491D6C34</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/par/ise_flow.sh</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>unknown</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x02CED0A0</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/par/makeproj.sh</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>unknown</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xCFE64DF9</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/par/readme.txt</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>txt</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xACD02A98</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/par/rem_files.sh</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>unknown</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xC70DC2C2</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/par/vio_async_in256_cg.xco</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>xco</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x8172D9E2</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/par/vio_sync_out32_cg.xco</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>xco</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xFDF5FACE</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/par/xst_options.txt</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>txt</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xD13DCD56</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/controller/arb_mux.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:06 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xC43C6E19</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/controller/arb_row_col.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:06 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xE9CD2652</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/controller/arb_select.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:06 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x103FFE96</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/controller/bank_cntrl.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:06 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xFC495C04</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/controller/bank_common.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:06 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x0B3E66D4</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/controller/bank_compare.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:06 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x20379728</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/controller/bank_mach.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:06 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xF6BAC757</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/controller/bank_queue.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:06 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x28BA48D9</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/controller/bank_state.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:06 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xCE27DCA8</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/controller/col_mach.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:06 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x8E9C8172</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/controller/mc.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:06 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x22197D67</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/controller/rank_cntrl.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:06 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x6E8BD198</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/controller/rank_common.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:06 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x21880CED</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/controller/rank_mach.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:06 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x9A5FB65E</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/controller/round_robin_arb.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:06 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x54660D90</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/ecc/ecc_buf.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:06 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xC80B9E89</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/ecc/ecc_dec_fix.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:06 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x6CBB8FDD</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/ecc/ecc_gen.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:07 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x2707E8CC</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/ecc/ecc_merge_enc.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:07 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x9C173CB9</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/ip_top/clk_ibuf.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:07 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xE32FF563</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/ip_top/ddr2_ddr3_chipscope.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:07 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x5794F614</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/ip_top/example_top.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x7DEE3113</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/ip_top/infrastructure.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:07 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x05D3BE8C</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/ip_top/iodelay_ctrl.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:07 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xD5BABB69</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/ip_top/mem_intfc.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:07 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x87EB45CC</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/ip_top/memc_ui_top.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x0AA5D3FC</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/phy/circ_buffer.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:07 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x96B02534</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/phy/phy_ck_iob.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:07 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xB556050E</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/phy/phy_clock_io.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:07 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x7F55B814</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/phy/phy_control_io.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:07 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xE161BF5F</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/phy/phy_data_io.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:07 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x5CAA9F49</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/phy/phy_dly_ctrl.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:07 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xD515DED0</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/phy/phy_dm_iob.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:07 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xE019B4F5</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/phy/phy_dq_iob.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:07 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xB1B50BD0</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/phy/phy_dqs_iob.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:07 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x8877E57B</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/phy/phy_init.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:07 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xCEED26E9</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/phy/phy_pd.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:07 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x71BEAFE5</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/phy/phy_pd_top.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:07 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x741DFDB6</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/phy/phy_rdclk_gen.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:07 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x1DA7CF56</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/phy/phy_rdctrl_sync.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:07 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x7392404F</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/phy/phy_rddata_sync.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:07 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x429D79DF</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/phy/phy_rdlvl.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:07 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x4533E773</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/phy/phy_read.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:07 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xD3FE7F9B</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/phy/phy_top.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:07 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xF3768507</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/phy/phy_write.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:07 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xE3D90F66</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/phy/phy_wrlvl.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:07 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x1423BE85</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/phy/rd_bitslip.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:07 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x81CBA8C9</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/traffic_gen/afifo.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xB8E65AE0</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/traffic_gen/cmd_gen.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xE2135372</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/traffic_gen/cmd_prbs_gen.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xB973FAD9</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/traffic_gen/data_prbs_gen.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x1A9764E7</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/traffic_gen/init_mem_pattern_ctr.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xFDBA8B6F</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/traffic_gen/mcb_flow_control.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x25962C5D</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/traffic_gen/mcb_traffic_gen.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x74E614AA</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/traffic_gen/rd_data_gen.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xAF72EEE1</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/traffic_gen/read_data_path.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xDA102796</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/traffic_gen/read_posted_fifo.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x2B9D50AB</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/traffic_gen/sp6_data_gen.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xBE04BB19</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/traffic_gen/tg_status.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xF1FE3935</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/traffic_gen/v6_data_gen.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xF167F2BA</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/traffic_gen/wr_data_gen.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x4908645B</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/traffic_gen/write_data_path.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x07869C9F</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/ui/ui_cmd.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:07 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x64976E1E</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/ui/ui_rd_data.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:07 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x5BBA2C1E</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/ui/ui_top.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:07 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xA0455CDA</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/rtl/ui/ui_wr_data.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:07 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x14697A0F</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/sim/ddr3_model.v</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>verilog</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:07 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xF5873C1B</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/sim/ddr3_model_parameters.vh</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>unknown</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:07 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xCE27CBDB</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/sim/isim_files.prj</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>unknown</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x8184DBD2</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/sim/isim_options.tcl</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>tcl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xF6322F68</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/sim/isim_run.sh</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>unknown</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xD7F3296A</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/sim/readme.txt</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>txt</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x17C85B9D</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/sim/sim.do</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>unknown</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x05158648</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/sim/sim_tb_top.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x1ED82819</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/sim/wiredly.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x0791C06C</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/synth/example_top.lso</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>unknown</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xEEDE3797</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/synth/example_top.prj</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>unknown</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xB1265ABB</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/example_design/synth/synplify_pro.tcl</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>tcl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x9ABACA45</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/datasheet.txt</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>txt</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xF884DA82</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/log.txt</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>txt</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xBF8AA8E2</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/mig.prj</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>unknown</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xBDF03929</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/par/bitgen_options.ut</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>unknown</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xB1843643</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/par/constraints.xcf</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>unknown</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x44602869</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/par/icon5_cg.xco</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>xco</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xAB47F1AE</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/par/ila384_8_cg.xco</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>xco</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x491D6C34</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/par/ise_flow.sh</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>unknown</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x7281C719</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/par/makeproj.sh</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>unknown</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xCFE64DF9</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/par/mig_37.cdc</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>unknown</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x3DE4ABF6</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/par/mig_37.ucf</xilinx:name>
+                     <xilinx:userFileType>ucf</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x77E647D0</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/par/readme.txt</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>txt</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x29EDB324</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/par/rem_files.sh</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>unknown</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xAA435B27</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/par/vio_async_in256_cg.xco</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>xco</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x8172D9E2</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/par/vio_sync_out32_cg.xco</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>xco</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xFDF5FACE</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/par/xst_options.txt</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>txt</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x5E838166</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/controller/arb_mux.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xC43C6E19</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/controller/arb_row_col.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xE9CD2652</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/controller/arb_select.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x103FFE96</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/controller/bank_cntrl.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xFC495C04</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/controller/bank_common.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x0B3E66D4</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/controller/bank_compare.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x20379728</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/controller/bank_mach.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xF6BAC757</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/controller/bank_queue.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x28BA48D9</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/controller/bank_state.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xCE27DCA8</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/controller/col_mach.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x8E9C8172</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/controller/mc.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x22197D67</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/controller/rank_cntrl.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x6E8BD198</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/controller/rank_common.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x21880CED</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/controller/rank_mach.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x9A5FB65E</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/controller/round_robin_arb.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x54660D90</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/ecc/ecc_buf.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xC80B9E89</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/ecc/ecc_dec_fix.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x6CBB8FDD</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/ecc/ecc_gen.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x2707E8CC</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/ecc/ecc_merge_enc.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x9C173CB9</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/ip_top/clk_ibuf.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xE32FF563</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/ip_top/ddr2_ddr3_chipscope.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x5794F614</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/ip_top/infrastructure.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x05D3BE8C</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/ip_top/iodelay_ctrl.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xD5BABB69</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/ip_top/mem_intfc.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x87EB45CC</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/ip_top/memc_ui_top.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x0AA5D3FC</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/ip_top/mig_37.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x80EBCD79</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/phy/circ_buffer.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x96B02534</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/phy/phy_ck_iob.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xB556050E</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/phy/phy_clock_io.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x7F55B814</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/phy/phy_control_io.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xE161BF5F</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/phy/phy_data_io.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x5CAA9F49</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/phy/phy_dly_ctrl.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xD515DED0</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/phy/phy_dm_iob.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xE019B4F5</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/phy/phy_dq_iob.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xB1B50BD0</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/phy/phy_dqs_iob.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x8877E57B</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/phy/phy_init.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xCEED26E9</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/phy/phy_pd.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x71BEAFE5</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/phy/phy_pd_top.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x741DFDB6</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/phy/phy_rdclk_gen.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x1DA7CF56</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/phy/phy_rdctrl_sync.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x7392404F</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/phy/phy_rddata_sync.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x429D79DF</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/phy/phy_rdlvl.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x4533E773</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/phy/phy_read.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xD3FE7F9B</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/phy/phy_top.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xF3768507</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/phy/phy_write.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xE3D90F66</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/phy/phy_wrlvl.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x1423BE85</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/phy/rd_bitslip.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x81CBA8C9</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/ui/ui_cmd.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x64976E1E</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/ui/ui_rd_data.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x5BBA2C1E</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/ui/ui_top.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xA0455CDA</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/rtl/ui/ui_wr_data.vhd</xilinx:name>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x14697A0F</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/sim/afifo.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xB8E65AE0</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/sim/cmd_gen.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xE2135372</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/sim/cmd_prbs_gen.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xB973FAD9</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/sim/data_prbs_gen.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x1A9764E7</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/sim/ddr3_model.v</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>verilog</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xF5873C1B</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/sim/ddr3_model_parameters.vh</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>unknown</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:08 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xCE27CBDB</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/sim/init_mem_pattern_ctr.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xFDBA8B6F</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/sim/isim_files.prj</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>unknown</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x2EB3793F</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/sim/isim_options.tcl</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>tcl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xF6322F68</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/sim/isim_run.sh</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>unknown</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xD7F3296A</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/sim/mcb_flow_control.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x25962C5D</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/sim/mcb_traffic_gen.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x74E614AA</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/sim/rd_data_gen.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xAF72EEE1</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/sim/read_data_path.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xDA102796</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/sim/read_posted_fifo.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x2B9D50AB</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/sim/readme.txt</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>txt</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x17C85B9D</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/sim/sim.do</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>unknown</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x67A6F582</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/sim/sim_tb_top.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x9E942034</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/sim/sp6_data_gen.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xBE04BB19</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/sim/tg_status.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xF1FE3935</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/sim/v6_data_gen.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xF167F2BA</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/sim/wiredly.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x0791C06C</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/sim/wr_data_gen.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x4908645B</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/sim/write_data_path.vhd</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>vhdl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x07869C9F</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/synth/mig_37.lso</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>unknown</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xEEDE3797</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/synth/mig_37.prj</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>unknown</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x59790E6E</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37/user_design/synth/synplify_pro.tcl</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>tcl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x8C617D84</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37.vho</xilinx:name>
+                     <xilinx:userFileType>vho</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x10496A5E</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37_readme.txt</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>txt</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xE85DE0BE</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37_xmdf.tcl</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>tcl</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:09 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x249F679A</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+               </xilinx:fileSet>
+               <xilinx:fileSet>
+                  <xilinx:name>instantiation_template_generator</xilinx:name>
+               </xilinx:fileSet>
+               <xilinx:fileSet>
+                  <xilinx:name>asy_generator</xilinx:name>
+               </xilinx:fileSet>
+               <xilinx:fileSet>
+                  <xilinx:name>xmdf_generator</xilinx:name>
+               </xilinx:fileSet>
+               <xilinx:fileSet>
+                  <xilinx:name>ise_generator</xilinx:name>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37.gise</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>gise</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:14 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x5361785C</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37.xise</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>xise</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:14 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0xFA322B6C</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+               </xilinx:fileSet>
+               <xilinx:fileSet>
+                  <xilinx:name>deliver_readme_generator</xilinx:name>
+               </xilinx:fileSet>
+               <xilinx:fileSet>
+                  <xilinx:name>flist_generator</xilinx:name>
+                  <xilinx:file>
+                     <xilinx:name>./mig_37_flist.txt</xilinx:name>
+                     <xilinx:userFileType>ignore</xilinx:userFileType>
+                     <xilinx:userFileType>txtFlist</xilinx:userFileType>
+                     <xilinx:userFileType>txt</xilinx:userFileType>
+                     <xilinx:timeStamp>Tue Nov 29 15:15:15 GMT 2011</xilinx:timeStamp>
+                     <xilinx:checkSum>0x149FD9BC</xilinx:checkSum>
+                     <xilinx:generationId>generationid_560414108</xilinx:generationId>
+                  </xilinx:file>
+               </xilinx:fileSet>
+            </xilinx:generationHistory>
+         </spirit:vendorExtensions>
+      </spirit:componentInstance>
+   </spirit:componentInstances>
+   <spirit:vendorExtensions>
+      <xilinx:instanceProperties>
+         <xilinx:projectOptions>
+            <xilinx:projectName>ml605_mig_design</xilinx:projectName>
+            <xilinx:outputDirectory>./</xilinx:outputDirectory>
+            <xilinx:workingDirectory>./tmp/</xilinx:workingDirectory>
+            <xilinx:subWorkingDirectory>./tmp/_cg</xilinx:subWorkingDirectory>
+         </xilinx:projectOptions>
+         <xilinx:part>
+            <xilinx:device>xc6vlx240t</xilinx:device>
+            <xilinx:deviceFamily>virtex6</xilinx:deviceFamily>
+            <xilinx:package>ff1156</xilinx:package>
+            <xilinx:speedGrade>-1</xilinx:speedGrade>
+         </xilinx:part>
+         <xilinx:flowOptions>
+            <xilinx:busFormat>BusFormatAngleBracketNotRipped</xilinx:busFormat>
+            <xilinx:designEntry>Verilog</xilinx:designEntry>
+            <xilinx:asySymbol>true</xilinx:asySymbol>
+            <xilinx:flowVendor>Other</xilinx:flowVendor>
+            <xilinx:addPads>false</xilinx:addPads>
+            <xilinx:removeRPMs>false</xilinx:removeRPMs>
+            <xilinx:createNDF>false</xilinx:createNDF>
+            <xilinx:implementationFileType>Ngc</xilinx:implementationFileType>
+            <xilinx:formalVerification>false</xilinx:formalVerification>
+         </xilinx:flowOptions>
+         <xilinx:simulationOptions>
+            <xilinx:simulationModel>Behavioral</xilinx:simulationModel>
+            <xilinx:simulationLanguage>Verilog</xilinx:simulationLanguage>
+            <xilinx:foundationSym>false</xilinx:foundationSym>
+         </xilinx:simulationOptions>
+      </xilinx:instanceProperties>
+   </spirit:vendorExtensions>
+</spirit:design>
+
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/grlib_mig/mig.cgp work/leon3-xilinx-ml605/grlib_mig/mig.cgp
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/grlib_mig/mig.cgp	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/grlib_mig/mig.cgp	2019-12-29 15:59:50.122753997 +0100
@@ -0,0 +1,22 @@
+# Date: Mon Jun 13 20:41:14 2011
+
+SET addpads = false
+SET asysymbol = true
+SET busformat = BusFormatAngleBracketNotRipped
+SET createndf = false
+SET designentry = Verilog
+SET device = xc6vlx240t
+SET devicefamily = virtex6
+SET flowvendor = Other
+SET formalverification = false
+SET foundationsym = false
+SET implementationfiletype = Ngc
+SET package = ff1156
+SET removerpms = false
+SET simulationfiles = Behavioral
+SET speedgrade = -1
+SET verilogsim = true
+SET vhdlsim = false
+SET workingdirectory = ./tmp/
+
+# CRC: db21485d
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/grlib_mig/mig.diff work/leon3-xilinx-ml605/grlib_mig/mig.diff
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/grlib_mig/mig.diff	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/grlib_mig/mig.diff	2019-12-29 15:59:50.122753997 +0100
@@ -0,0 +1,416 @@
+diff -Naur mig37/mig_37/user_design/rtl/ip_top/infrastructure.vhd /home/jiri/ibm/vhdl/grlib/lib/work/ml605/rtl/ip_top/infrastructure.vhd
+--- mig37/mig_37/user_design/rtl/ip_top/infrastructure.vhd	2011-06-13 18:01:50.000000000 +0200
++++ /home/jiri/ibm/vhdl/grlib/lib/work/ml605/rtl/ip_top/infrastructure.vhd	2011-03-22 23:26:00.000000000 +0100
+@@ -94,7 +94,8 @@
+    DIVCLK_DIVIDE      : integer := 1;              -- write PLL VCO divisor
+    CLKOUT_DIVIDE      : integer := 2;              -- VCO output divisor for fast
+                                                 -- (memory) clocks
+-   RST_ACT_LOW        : integer := 1
++   RST_ACT_LOW        : integer := 1;
++   CLKOUT_DIVIDE4     : integer := 10              -- VCO output divisor for AHB clock
+    );
+   port (
+    -- Clock inputs
+@@ -107,6 +108,8 @@
+    clk_mem            : out std_logic;  -- 2x logic clock
+    clk                : out std_logic;  -- 1x logic clock
+    clk_rd_base        : out std_logic;  -- 2x base read clock
++   clk_ahb            : out std_logic;  -- AHB clock
++   clk100             : out std_logic;  -- 100 MHz clock 
+    -- Reset outputs
+    rstdiv0            : out std_logic;  -- Reset CLK and CLKDIV logic (incl I/O)
+    -- Phase Shift Interface
+@@ -159,6 +162,8 @@
+                                 -- synthesis syn_maxfan = 10
+   signal rst_tmp              : std_logic;
+   signal sys_rst_act_hi       : std_logic;
++  signal clkout4              : std_logic;
++  signal clkout5              : std_logic;
+ 
+   attribute syn_maxfan : integer;
+   attribute syn_maxfan of rstdiv0_sync_r : signal is 10 ;
+@@ -280,12 +285,12 @@
+       CLKOUT3_USE_FINE_PS   => FALSE,
+ 
+       CLKOUT4_CASCADE       => FALSE,
+-      CLKOUT4_DIVIDE        => 1,
++      CLKOUT4_DIVIDE        => CLKOUT_DIVIDE4,
+       CLKOUT4_DUTY_CYCLE    => 0.500,
+       CLKOUT4_PHASE         => 0.000,
+       CLKOUT4_USE_FINE_PS   => FALSE,
+ 
+-      CLKOUT5_DIVIDE        => 1,
++      CLKOUT5_DIVIDE        => 12,
+       CLKOUT5_DUTY_CYCLE    => 0.500,
+       CLKOUT5_PHASE         => 0.000,
+       CLKOUT5_USE_FINE_PS   => FALSE,
+@@ -308,8 +313,8 @@
+        CLKOUT2B     => open,
+        CLKOUT3      => open,   -- Performance path for outer columns
+        CLKOUT3B     => open,
+-       CLKOUT4      => open,
+-       CLKOUT5      => open,
++       CLKOUT4      => clkout4,
++       CLKOUT5      => clkout5,
+        CLKOUT6      => open,
+        DO           => open,
+        DRDY         => open,
+@@ -343,6 +348,18 @@
+      I => clk_pll
+      );
+ 
++  u_bufg_clkdiv4 : BUFG
++    port map (
++     O => clk_ahb,
++     I => clkout4
++     );
++
++  u_bufg_clkdiv5 : BUFG
++    port map (
++     O => clk100,
++     I => clkout5
++     );
++
+   --***************************************************************************
+   -- RESET SYNCHRONIZATION DESCRIPTION:
+   --  Various resets are generated to ensure that:
+diff -Naur mig37/mig_37/user_design/rtl/ip_top/iodelay_ctrl.vhd /home/jiri/ibm/vhdl/grlib/lib/work/ml605/rtl/ip_top/iodelay_ctrl.vhd
+--- mig37/mig_37/user_design/rtl/ip_top/iodelay_ctrl.vhd	2011-06-13 18:01:50.000000000 +0200
++++ /home/jiri/ibm/vhdl/grlib/lib/work/ml605/rtl/ip_top/iodelay_ctrl.vhd	2011-03-22 23:26:00.000000000 +0100
+@@ -96,6 +96,7 @@
+     clk_ref_n        : in  std_logic;
+     clk_ref          : in  std_logic;
+     sys_rst          : in  std_logic;
++    clk_200          : out  std_logic;
+     iodelay_ctrl_rdy : out std_logic
+     );
+ end entity iodelay_ctrl;
+@@ -171,6 +172,8 @@
+       I  => clk_ref_ibufg
+       );
+ 
++  clk_200 <= clk_ref_bufg;  -- Added for ML605
++
+   --*****************************************************************
+   -- IDELAYCTRL reset
+   -- This assumes an external clock signal driving the IDELAYCTRL
+diff -Naur mig37/mig_37/user_design/rtl/ip_top/memc_ui_top.vhd /home/jiri/ibm/vhdl/grlib/lib/work/ml605/rtl/ip_top/memc_ui_top.vhd
+--- mig37/mig_37/user_design/rtl/ip_top/memc_ui_top.vhd	2011-06-13 18:01:50.000000000 +0200
++++ /home/jiri/ibm/vhdl/grlib/lib/work/ml605/rtl/ip_top/memc_ui_top.vhd	2011-03-22 23:26:00.000000000 +0100
+@@ -132,7 +132,7 @@
+                                         -- # = "0", "CL-1", "CL-2".
+                                         -- DDR2 SDRAM:
+                                         -- Additive Latency (Extended Mode Register).
+-    BURST_MODE              : string := "8";
++    BURST_MODE              : string := "OTF";
+                                         -- DDR3 SDRAM:
+                                         -- Burst Length (Mode Register 0).
+                                         -- # = "8", "4", "OTF".
+@@ -213,17 +213,19 @@
+     REG_CTRL                : string := "OFF";
+                                         -- # = "ON" - RDIMMs,
+                                         --   = "OFF" - Components, SODIMMs, UDIMMs.
+-    nDQS_COL0               : integer :=6;
++    nDQS_COL0               : integer := 3; --6;
+                                         -- Number of DQS groups in I/O column #1.
+-    nDQS_COL1               : integer := 2;
++    nDQS_COL1               : integer := 5; --2;
+                                         -- Number of DQS groups in I/O column #2.
+     nDQS_COL2               : integer := 0;
+                                         -- Number of DQS groups in I/O column #3.
+     nDQS_COL3               : integer := 0;
+                                         -- Number of DQS groups in I/O column #4.
+-    DQS_LOC_COL0            : std_logic_vector(47 downto 0) := X"050403020100";
++--    DQS_LOC_COL0            : std_logic_vector(47 downto 0) := X"050403020100";
++    DQS_LOC_COL0          : std_logic_vector(23 downto 0) := X"020100";
+                                         -- DQS groups in column #1.
+-    DQS_LOC_COL1            : std_logic_vector(15 downto 0) := X"0706";
++--    DQS_LOC_COL1            : std_logic_vector(15 downto 0) := X"0706";
++    DQS_LOC_COL1          : std_logic_vector(39 downto 0) := X"0706050403";
+                                         -- DQS groups in column #2.
+     DQS_LOC_COL2            : std_logic_vector(0 downto 0) := "0";
+                                         -- DQS groups in column #3.
+@@ -260,7 +262,7 @@
+                                         -- Mapping of Ranks.
+     SLOT_1_CONFIG           : std_logic_vector(7 downto 0) := X"00";
+                                         -- Mapping of Ranks.
+-    DEBUG_PORT              : string := "ON";
++    DEBUG_PORT              : string := "OFF";
+                                         -- # = "ON" Enable debug signals/controls.
+                                         --   = "OFF" Disable debug signals/controls.
+     ADDR_WIDTH              : integer := 27;
+@@ -364,7 +366,7 @@
+     "mig_v3_7_ddr3_V6, Coregen 13.1";
+ 
+   attribute CORE_GENERATION_INFO : string;
+-  attribute CORE_GENERATION_INFO of arch_memc_ui_top : ARCHITECTURE IS "ddr3_V6,mig_v3_7,{LANGUAGE=VHDL, SYNTHESIS_TOOL=synplicity, LEVEL=CONTROLLER, AXI_ENABLE=0, NO_OF_CONTROLLERS=1, INTERFACE_TYPE=DDR3, CLK_PERIOD=2500, MEMORY_TYPE=SODIMM, MEMORY_PART=mt4jsf6464hy-1g1, DQ_WIDTH=64, ECC=OFF, DATA_MASK=1, BURST_MODE=8, BURST_TYPE=SEQ, OUTPUT_DRV=HIGH, RTT_NOM=60, REFCLK_FREQ=200, MMCM_ADV_BANDWIDTH=OPTIMIZED, CLKFBOUT_MULT_F=6, CLKOUT_DIVIDE=3, DEBUG_PORT=ON, IODELAY_HP_MODE=ON, INTERNAL_VREF=0, DCI_INOUTS=1, CLASS_ADDR=I, INPUT_CLK_TYPE=DIFFERENTIAL}";
++  attribute CORE_GENERATION_INFO of arch_memc_ui_top : ARCHITECTURE IS "ddr3_V6,mig_v3_7,{LANGUAGE=VHDL, SYNTHESIS_TOOL=synplicity, LEVEL=CONTROLLER, AXI_ENABLE=0, NO_OF_CONTROLLERS=1, INTERFACE_TYPE=DDR3, CLK_PERIOD=2500, MEMORY_TYPE=SODIMM, MEMORY_PART=mt4jsf6464hy-1g1, DQ_WIDTH=64, ECC=OFF, DATA_MASK=1, BURST_MODE=OTF, BURST_TYPE=SEQ, OUTPUT_DRV=HIGH, RTT_NOM=60, REFCLK_FREQ=200, MMCM_ADV_BANDWIDTH=OPTIMIZED, CLKFBOUT_MULT_F=6, CLKOUT_DIVIDE=3, DEBUG_PORT=OFF, IODELAY_HP_MODE=ON, INTERNAL_VREF=0, DCI_INOUTS=1, CLASS_ADDR=II, INPUT_CLK_TYPE=DIFFERENTIAL}";
+   function XWIDTH return integer is
+   begin
+     if(CS_WIDTH = 1) then
+@@ -404,8 +406,10 @@
+ 
+ --  constant PAYLOAD_WIDTH = (ECC_TEST == "OFF") ? DATA_WIDTH : DQ_WIDTH;
+ 
+-  constant DLC0_zeros : std_logic_vector(143 downto 47+1) := (others => '0');
+-  constant DLC1_zeros : std_logic_vector(143 downto 15+1) := (others => '0');
++--  constant DLC0_zeros : std_logic_vector(143 downto 47+1) := (others => '0');
++  constant DLC0_zeros : std_logic_vector(143 downto 23+1) := (others => '0');
++--  constant DLC1_zeros : std_logic_vector(143 downto 15+1) := (others => '0');
++  constant DLC1_zeros : std_logic_vector(143 downto 39+1) := (others => '0');
+   constant DLC2_zeros : std_logic_vector(143 downto 0+1) := (others => '0');
+   constant DLC3_zeros : std_logic_vector(143 downto 0+1) := (others => '0');
+ 
+diff -Naur mig37/mig_37/user_design/rtl/ip_top/mig_37.vhd /home/jiri/ibm/vhdl/grlib/lib/work/ml605/rtl/ip_top/mig_37.vhd
+--- mig37/mig_37/user_design/rtl/ip_top/mig_37.vhd	2011-06-13 18:01:50.000000000 +0200
++++ /home/jiri/ibm/vhdl/grlib/lib/work/ml605/rtl/ip_top/mig_37.vhd	2011-03-22 23:26:00.000000000 +0100
+@@ -92,7 +92,7 @@
+                                      -- MMCM programming algorithm
+      CLKFBOUT_MULT_F       : integer := 6;
+                                      -- write PLL VCO multiplier.
+-     DIVCLK_DIVIDE         : integer := 2;
++     DIVCLK_DIVIDE         : integer := 1;  --2;  ML605 fix
+                                      -- write PLL VCO divisor.
+      CLKOUT_DIVIDE         : integer := 3;
+                                      -- VCO output divisor for fast (memory) clocks.
+@@ -102,7 +102,7 @@
+      tCK                   : integer := 2500;
+                                      -- memory tCK paramter.
+                                      -- # = Clock Period.
+-     DEBUG_PORT            : string := "ON";
++     DEBUG_PORT            : string := "OFF";
+                                      -- # = "ON" Enable debug signals/controls.
+                                      --   = "OFF" Disable debug signals/controls.
+      SIM_BYPASS_INIT_CAL   : string := "OFF";
+@@ -137,7 +137,7 @@
+                                      -- # of DQS/DQS# bits.
+      ROW_WIDTH             : integer := 13;
+                                      -- # of memory Row Address bits.
+-     BURST_MODE            : string := "8";
++     BURST_MODE            : string := "OTF";
+                                      -- Burst Length (Mode Register 0).
+                                      -- # = "8", "4", "OTF".
+      BM_CNT_WIDTH          : integer := 2;
+@@ -169,17 +169,19 @@
+      REG_CTRL              : string := "OFF";
+                                      -- # = "ON" - RDIMMs,
+                                      --   = "OFF" - Components, SODIMMs, UDIMMs.
+-     nDQS_COL0             : integer := 6;
++     nDQS_COL0             : integer := 3; --6;
+                                      -- Number of DQS groups in I/O column #1.
+-     nDQS_COL1             : integer := 2;
++     nDQS_COL1             : integer := 5; --2;
+                                      -- Number of DQS groups in I/O column #2.
+      nDQS_COL2             : integer := 0;
+                                      -- Number of DQS groups in I/O column #3.
+      nDQS_COL3             : integer := 0;
+                                      -- Number of DQS groups in I/O column #4.
+-     DQS_LOC_COL0          : std_logic_vector(47 downto 0) := X"050403020100";
++--     DQS_LOC_COL0          : std_logic_vector(47 downto 0) := X"050403020100";
++     DQS_LOC_COL0          : std_logic_vector(23 downto 0) := X"020100";
+                                      -- DQS groups in column #1.
+-     DQS_LOC_COL1          : std_logic_vector(15 downto 0) := X"0706";
++--     DQS_LOC_COL1          : std_logic_vector(15 downto 0) := X"0706";
++     DQS_LOC_COL1          : std_logic_vector(39 downto 0) := X"0706050403";
+                                      -- DQS groups in column #2.
+      DQS_LOC_COL2          : std_logic_vector(0 downto 0) := "0";
+                                      -- DQS groups in column #3.
+@@ -199,18 +201,20 @@
+      DATA_WIDTH            : integer := 64;
+      PAYLOAD_WIDTH         : integer := 64;
+    
+-    RST_ACT_LOW             : integer := 1;
++    RST_ACT_LOW             : integer := 0;
+                                        -- =1 for active low reset,
+                                        -- =0 for active high.
+     INPUT_CLK_TYPE          : string  := "DIFFERENTIAL";
+                                        -- input clock type DIFFERENTIAL or SINGLE_ENDED
+-    STARVE_LIMIT            : integer := 2
++    STARVE_LIMIT            : integer := 2;
+                                        -- # = 2,3,4.
++    CLKOUT_DIVIDE4          : integer := 2
+     );
+   port(
+ 
+-      sys_clk_p     : in    std_logic;
+-      sys_clk_n     : in    std_logic;
++-- remove for ML605
++--      sys_clk_p     : in    std_logic;
++--      sys_clk_n     : in    std_logic;
+       clk_ref_p     : in    std_logic;
+       clk_ref_n     : in    std_logic;
+       ddr3_dq       : inout std_logic_vector(DQ_WIDTH-1 downto 0);
+@@ -228,8 +232,8 @@
+       ddr3_dqs_n    : inout std_logic_vector(DQS_WIDTH-1 downto 0);
+       ddr3_ck_p     : out   std_logic_vector(CK_WIDTH-1 downto 0);
+       ddr3_ck_n     : out   std_logic_vector(CK_WIDTH-1 downto 0);
+-      sda           : inout std_logic;
+-      scl           : out   std_logic;
++--      sda           : inout std_logic;
++--      scl           : out   std_logic;
+       app_wdf_wren  : in    std_logic;
+       app_wdf_data  : in    std_logic_vector((4*PAYLOAD_WIDTH)-1 downto 0);
+       app_wdf_mask  : in    std_logic_vector((4*PAYLOAD_WIDTH)/8-1 downto 0);
+@@ -244,6 +248,8 @@
+       tb_rst        : out   std_logic;
+       tb_clk        : out   std_logic;
+       phy_init_done : out   std_logic;
++      clk_ahb       : out   std_logic;
++      clk100        : out   std_logic;
+ 
+     sys_rst        : in std_logic
+     );
+@@ -282,6 +288,7 @@
+       clk_ref_n        : in  std_logic;
+       clk_ref          : in  std_logic;
+       sys_rst          : in  std_logic;
++      clk_200          : out  std_logic;
+       iodelay_ctrl_rdy : out std_logic
+       );
+   end component iodelay_ctrl;
+@@ -295,12 +302,15 @@
+      CLKFBOUT_MULT_F    : integer;
+      DIVCLK_DIVIDE      : integer;
+      CLKOUT_DIVIDE      : integer;
+-     RST_ACT_LOW        : integer
++     RST_ACT_LOW        : integer;
++     CLKOUT_DIVIDE4     : integer := 10              -- VCO output divisor for AHB clock
+      );
+     port (
+      clk_mem          : out std_logic;
+      clk              : out std_logic;
+      clk_rd_base      : out std_logic;
++     clk_ahb          : out std_logic;  -- AHB clock
++     clk100           : out std_logic;  -- 100 MHz clock
+      rstdiv0          : out std_logic;
+      mmcm_clk         : in  std_logic;
+      sys_rst          : in  std_logic;
+@@ -343,8 +353,10 @@
+       nDQS_COL1             : integer;
+       nDQS_COL2             : integer;
+       nDQS_COL3             : integer;
+-      DQS_LOC_COL0          : std_logic_vector(47 downto 0);
+-      DQS_LOC_COL1          : std_logic_vector(15 downto 0);
++--      DQS_LOC_COL0          : std_logic_vector(47 downto 0);
++      DQS_LOC_COL0          : std_logic_vector(23 downto 0);
++--      DQS_LOC_COL1          : std_logic_vector(15 downto 0);
++      DQS_LOC_COL1          : std_logic_vector(39 downto 0);
+       DQS_LOC_COL2          : std_logic_vector(0 downto 0);
+       DQS_LOC_COL3          : std_logic_vector(0 downto 0);
+       tCK                   : integer;
+@@ -533,8 +545,8 @@
+   signal ddr3_cs4_sync_out     : std_logic_vector(31 downto 0);
+ 
+   attribute keep : string;
+-  attribute keep of sda_i               : signal is "true";
+-  attribute keep of scl_i               : signal is "true";
++--  attribute keep of sda_i               : signal is "true";
++--  attribute keep of scl_i               : signal is "true";
+ 
+ begin
+ 
+@@ -543,36 +555,36 @@
+   app_hi_pri                  <= '0';
+   tb_clk                      <= clk;
+   tb_rst                      <= rst;
+-  scl_inst : MUXCY
+-    port map (
+-      O  => scl,
+-      CI => scl_i,
+-      DI => '0',
+-      S  => '1'
+-      );
+-
+-  sda_inst : MUXCY
+-    port map (
+-      O  => sda,
+-      CI => sda_i,
+-      DI => '0',
+-      S  => '1'
+-      );
++--  scl_inst : MUXCY
++--    port map (
++--      O  => scl,
++--      CI => scl_i,
++--      DI => '0',
++--      S  => '1'
++--      );
++
++--  sda_inst : MUXCY
++--    port map (
++--      O  => sda,
++--      CI => sda_i,
++--      DI => '0',
++--      S  => '1'
++--      );
+   clk_ref                     <= '0';
+   sys_clk                     <= '0';
+ 
+ 
+-  u_clk_ibuf : clk_ibuf
+-    generic map(
+-      INPUT_CLK_TYPE => INPUT_CLK_TYPE
+-      )
+-    port map(
+-      sys_clk_p => sys_clk_p,
+-      sys_clk_n => sys_clk_n,
+-      sys_clk   => sys_clk,
+-      mmcm_clk  => mmcm_clk
+-      );
+-
++-- Remove for ML605
++--  u_clk_ibuf : clk_ibuf
++--    generic map(
++--      INPUT_CLK_TYPE => INPUT_CLK_TYPE
++--      )
++--    port map(
++--      sys_clk_p => sys_clk_p,
++--      sys_clk_n => sys_clk_n,
++--      sys_clk   => sys_clk,
++--      mmcm_clk  => mmcm_clk
++--      );
+ 
+ 
+   u_iodelay_ctrl : iodelay_ctrl
+@@ -587,11 +599,11 @@
+       clk_ref_n        => clk_ref_n,
+       clk_ref          => clk_ref,
+       sys_rst          => sys_rst,
++      clk_200          => mmcm_clk,	-- 200 MHz for ML605
+       iodelay_ctrl_rdy => iodelay_ctrl_rdy
+       );
+    
+ 
+-
+   u_infrastructure : infrastructure
+     generic map(
+       TCQ                => TCQ,
+@@ -601,12 +613,15 @@
+       CLKFBOUT_MULT_F    => CLKFBOUT_MULT_F,
+       DIVCLK_DIVIDE      => DIVCLK_DIVIDE,
+       CLKOUT_DIVIDE      => CLKOUT_DIVIDE,
+-      RST_ACT_LOW        => RST_ACT_LOW
++      RST_ACT_LOW        => RST_ACT_LOW,
++      CLKOUT_DIVIDE4     => CLKOUT_DIVIDE4
+       )
+     port map(
+       clk_mem          => clk_mem,
+       clk              => clk,
+       clk_rd_base      => clk_rd_base,
++      clk_ahb          => clk_ahb,
++      clk100           => clk100,
+       rstdiv0          => rst,
+       mmcm_clk         => mmcm_clk,
+       sys_rst          => sys_rst,
+diff -Naur mig37/mig_37/user_design/rtl/phy/phy_top.vhd /home/jiri/ibm/vhdl/grlib/lib/work/ml605/rtl/phy/phy_top.vhd
+--- mig37/mig_37/user_design/rtl/phy/phy_top.vhd	2011-06-13 18:01:50.000000000 +0200
++++ /home/jiri/ibm/vhdl/grlib/lib/work/ml605/rtl/phy/phy_top.vhd	2011-03-22 23:26:00.000000000 +0100
+@@ -295,7 +295,7 @@
+     "mig_v3_7_ddr3_V6, Coregen 13.1";
+ 
+   attribute CORE_GENERATION_INFO : string;
+-  attribute CORE_GENERATION_INFO of arch : ARCHITECTURE IS "ddr3_V6_phy,mig_v3_7,{LANGUAGE=VHDL, SYNTHESIS_TOOL=synplicity, LEVEL=PHY, AXI_ENABLE=0, NO_OF_CONTROLLERS=1, INTERFACE_TYPE=DDR3, CLK_PERIOD=2500, MEMORY_TYPE=SODIMM, MEMORY_PART=mt4jsf6464hy-1g1, DQ_WIDTH=64, ECC=OFF, DATA_MASK=1, BURST_MODE=8, BURST_TYPE=SEQ, OUTPUT_DRV=HIGH, RTT_NOM=60, REFCLK_FREQ=200, MMCM_ADV_BANDWIDTH=OPTIMIZED, CLKFBOUT_MULT_F=6, CLKOUT_DIVIDE=3, DEBUG_PORT=ON, IODELAY_HP_MODE=ON, INTERNAL_VREF=0, DCI_INOUTS=1, CLASS_ADDR=I, INPUT_CLK_TYPE=DIFFERENTIAL}";
++  attribute CORE_GENERATION_INFO of arch : ARCHITECTURE IS "ddr3_V6_phy,mig_v3_7,{LANGUAGE=VHDL, SYNTHESIS_TOOL=synplicity, LEVEL=PHY, AXI_ENABLE=0, NO_OF_CONTROLLERS=1, INTERFACE_TYPE=DDR3, CLK_PERIOD=2500, MEMORY_TYPE=SODIMM, MEMORY_PART=mt4jsf6464hy-1g1, DQ_WIDTH=64, ECC=OFF, DATA_MASK=1, BURST_MODE=OTF, BURST_TYPE=SEQ, OUTPUT_DRV=HIGH, RTT_NOM=60, REFCLK_FREQ=200, MMCM_ADV_BANDWIDTH=OPTIMIZED, CLKFBOUT_MULT_F=6, CLKOUT_DIVIDE=3, DEBUG_PORT=OFF, IODELAY_HP_MODE=ON, INTERNAL_VREF=0, DCI_INOUTS=1, CLASS_ADDR=II, INPUT_CLK_TYPE=DIFFERENTIAL}";
+    -- For reg dimm addign one extra cycle of latency for CWL. The new value
+    -- will be passed to phy_write and phy_data_io	
+    function CALC_CWL_M return integer is
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/grlib_mig/mig_infrastructure_patch.txt work/leon3-xilinx-ml605/grlib_mig/mig_infrastructure_patch.txt
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/grlib_mig/mig_infrastructure_patch.txt	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/grlib_mig/mig_infrastructure_patch.txt	2019-12-29 15:59:50.122753997 +0100
@@ -0,0 +1,109 @@
+--- ./mig/user_design/rtl/ip_top/infrastructure.v	2012-12-18 14:40:25.000000000 +0100
++++ ./mig_patch/p/a/t/c/h/mig_design/infrastructure.v	2012-12-18 10:03:46.821589702 +0100
+@@ -88,6 +88,7 @@
+    parameter DIVCLK_DIVIDE      = 1,     // write PLL VCO divisor
+    parameter CLKOUT_DIVIDE      = 2,     // VCO output divisor for fast
+                                          // (memory) clocks
++   parameter CLKOUT_DIVIDE4     = 12,
+    parameter RST_ACT_LOW        = 1
+    )
+   (
+@@ -101,6 +102,8 @@
+    output clk_mem,            // 2x logic clock
+    output clk,                // 1x logic clock
+    output clk_rd_base,        // 2x base read clock
++   output clk_amba,
++   output clk_100,
+    // Reset outputs
+    output rstdiv0,            // Reset CLK and CLKDIV logic (incl I/O),
+    // Phase Shift Interface
+@@ -135,10 +138,14 @@
+   localparam CLKOUT0_DIVIDE_F = CLKOUT_DIVIDE;
+   localparam CLKOUT1_DIVIDE   = CLKOUT_DIVIDE * nCK_PER_CLK;
+   localparam CLKOUT2_DIVIDE   = CLKOUT_DIVIDE;
++  localparam CLKOUT3_DIVIDE   = CLKOUT_DIVIDE * nCK_PER_CLK * 2;
++  localparam CLKOUT4_DIVIDE   = CLKOUT_DIVIDE4;
+ 
+   localparam CLKOUT0_PERIOD = VCO_PERIOD * CLKOUT0_DIVIDE_F;
+   localparam CLKOUT1_PERIOD = VCO_PERIOD * CLKOUT1_DIVIDE;
+   localparam CLKOUT2_PERIOD = VCO_PERIOD * CLKOUT2_DIVIDE;
++  localparam CLKOUT3_PERIOD = VCO_PERIOD * CLKOUT3_DIVIDE;
++  localparam CLKOUT4_PERIOD = VCO_PERIOD * CLKOUT4_DIVIDE;
+ 
+   //synthesis translate_off
+   initial begin
+@@ -152,9 +159,12 @@
+     $display("CLKOUT0_DIVIDE_F = %7d",   CLKOUT0_DIVIDE_F);
+     $display("CLKOUT1_DIVIDE   = %7d",   CLKOUT1_DIVIDE  );
+     $display("CLKOUT2_DIVIDE   = %7d",   CLKOUT2_DIVIDE  );
+-    $display("CLKOUT0_PERIOD   = %7d",   CLKOUT0_PERIOD  );
++    $display("CLKOUT3_DIVIDE   = %7d",   CLKOUT3_DIVIDE  );
++    $display("CLKOUT4_DIVIDE   = %7d",   CLKOUT4_DIVIDE  );
+     $display("CLKOUT1_PERIOD   = %7d",   CLKOUT1_PERIOD  );
+     $display("CLKOUT2_PERIOD   = %7d",   CLKOUT2_PERIOD  );
++    $display("CLKOUT3_PERIOD   = %7d",   CLKOUT3_PERIOD  );
++    $display("CLKOUT4_PERIOD   = %7d",   CLKOUT4_PERIOD  );
+     $display("############################################################\n");
+   end
+   //synthesis translate_on
+@@ -163,6 +173,8 @@
+   wire                       clk_mem_bufg;
+   wire                       clk_mem_pll;
+   wire                       clk_pll;
++  wire                       clk_pll_amba;
++  wire                       clk_pll_100;
+   wire                       clkfbout_pll;
+   wire                       pll_lock
+                              /* synthesis syn_maxfan = 10 */;
+@@ -225,15 +237,15 @@
+      .CLKOUT2_DUTY_CYCLE    (0.500),
+      .CLKOUT2_PHASE         (0.000),
+      .CLKOUT2_USE_FINE_PS   ("TRUE"),
+-     .CLKOUT3_DIVIDE        (1),
++     .CLKOUT3_DIVIDE        (CLKOUT3_DIVIDE),
+      .CLKOUT3_DUTY_CYCLE    (0.500),
+      .CLKOUT3_PHASE         (0.000),
+-     .CLKOUT3_USE_FINE_PS   ("FALSE"),
++     .CLKOUT3_USE_FINE_PS   ("TRUE"),
+      .CLKOUT4_CASCADE       ("FALSE"),
+-     .CLKOUT4_DIVIDE        (1),
++     .CLKOUT4_DIVIDE        (CLKOUT4_DIVIDE),
+      .CLKOUT4_DUTY_CYCLE    (0.500),
+      .CLKOUT4_PHASE         (0.000),
+-     .CLKOUT4_USE_FINE_PS   ("FALSE"),
++     .CLKOUT4_USE_FINE_PS   ("TRUE"),
+      .CLKOUT5_DIVIDE        (1),
+      .CLKOUT5_DUTY_CYCLE    (0.500),
+      .CLKOUT5_PHASE         (0.000),
+@@ -255,9 +267,9 @@
+        .CLKOUT1B     (),
+        .CLKOUT2      (clk_rd_base),
+        .CLKOUT2B     (),
+-       .CLKOUT3      (),
++       .CLKOUT3      (clk_pll_100),
+        .CLKOUT3B     (),
+-       .CLKOUT4      (),
++       .CLKOUT4      (clk_pll_amba),
+        .CLKOUT5      (),
+        .CLKOUT6      (),
+        .DO           (),
+@@ -292,6 +304,19 @@
+      .I (clk_pll)
+      );
+ 
++  BUFG u_bufg_clkamba
++    (
++     .O (clk_amba),
++     .I (clk_pll_amba)
++     );
++
++  BUFG u_bufg_clk100
++    (
++     .O (clk_100),
++     .I (clk_pll_100)
++     );
++
++
+   //***************************************************************************
+   // RESET SYNCHRONIZATION DESCRIPTION:
+   //  Various resets are generated to ensure that:
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/grlib_mig/mig_iodelay_ctrl_patch.txt work/leon3-xilinx-ml605/grlib_mig/mig_iodelay_ctrl_patch.txt
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/grlib_mig/mig_iodelay_ctrl_patch.txt	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/grlib_mig/mig_iodelay_ctrl_patch.txt	2019-12-29 15:59:50.122753997 +0100
@@ -0,0 +1,18 @@
+--- ./mig/user_design/rtl/ip_top/iodelay_ctrl.v	2012-12-18 14:40:25.000000000 +0100
++++ ./mig_patch/p/a/t/c/h/mig_design/iodelay_ctrl.v	2012-12-17 07:40:31.662595674 +0100
+@@ -92,6 +92,7 @@
+    input  clk_ref_n,
+    input  clk_ref,
+    input  sys_rst,
++   output clk_200,         // single 200MHz clock for ML605
+    output iodelay_ctrl_rdy
+    );
+ 
+@@ -159,6 +160,7 @@
+      .O (clk_ref_bufg),
+      .I (clk_ref_ibufg)
+      );
++ assign clk_200 = clk_ref_bufg; // ML605 single 200MHz clock source
+ 
+   //*****************************************************************
+   // IDELAYCTRL reset
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/grlib_mig/mig_patch.txt work/leon3-xilinx-ml605/grlib_mig/mig_patch.txt
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/grlib_mig/mig_patch.txt	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/grlib_mig/mig_patch.txt	2019-12-29 15:59:50.122753997 +0100
@@ -0,0 +1,159 @@
+--- ./mig/user_design/rtl/ip_top/mig.v	2012-12-18 14:40:26.000000000 +0100
++++ ./mig_patch/p/a/t/c/h/mig_design/mig.v	2012-12-18 14:24:36.329423978 +0100
+@@ -74,7 +74,7 @@
+ 
+ `timescale 1ps/1ps
+ 
+-module mig #
++module mig_37 #
+   (
+    parameter REFCLK_FREQ             = 200,
+                                        // # = 200 for all design frequencies of
+@@ -91,9 +91,10 @@
+                                        // MMCM programming algorithm
+    parameter CLKFBOUT_MULT_F         = 6,
+                                        // write PLL VCO multiplier.
+-   parameter DIVCLK_DIVIDE           = 2,
++   parameter DIVCLK_DIVIDE           = 1,  // ML605 200MHz input clock (VCO = 1200MHz)use "2" for 400MHz SMA,
+                                        // write PLL VCO divisor.
+-   parameter CLKOUT_DIVIDE           = 3,
++   parameter CLKOUT_DIVIDE4          = 12, // Leon3 Amba clock control
++   parameter CLKOUT_DIVIDE           = 3,  //400MHz clock
+                                        // VCO output divisor for fast (memory) clocks.
+    parameter nCK_PER_CLK             = 2,
+                                        // # of memory CKs per fabric clock.
+@@ -136,14 +137,14 @@
+                                        // # of DQS/DQS# bits.
+    parameter ROW_WIDTH               = 13,
+                                        // # of memory Row Address bits.
+-   parameter BURST_MODE              = "8",
++   parameter BURST_MODE              = "OTF",
+                                        // Burst Length (Mode Register 0).
+                                        // # = "8", "4", "OTF".
+    parameter BM_CNT_WIDTH            = 2,
+                                        // # = ceil(log2(nBANK_MACHS)).
+    parameter ADDR_CMD_MODE           = "1T" ,
+                                        // # = "2T", "1T".
+-   parameter ORDERING                = "NORM",
++   parameter ORDERING                = "STRICT",
+                                        // # = "NORM", "STRICT".
+    parameter WRLVL                   = "ON",
+                                        // # = "ON" - DDR3 SDRAM
+@@ -210,8 +211,8 @@
+    )
+   (
+ 
+-  input                             sys_clk_p,    //differential system clocks
+-  input                             sys_clk_n,
++//  input                             sys_clk_p,    //differential system clocks
++//  input                             sys_clk_n,
+   input                             clk_ref_p,     //differential iodelayctrl clk
+   input                             clk_ref_n,
+    inout  [DQ_WIDTH-1:0]                ddr3_dq,
+@@ -229,8 +230,8 @@
+    inout  [DQS_WIDTH-1:0]               ddr3_dqs_n,
+    output [CK_WIDTH-1:0]                ddr3_ck_p,
+    output [CK_WIDTH-1:0]                ddr3_ck_n,
+-   inout                                sda,
+-   output                               scl,
++   //inout                                sda,
++   //output                               scl,
+    input                                app_wdf_wren,
+    input [(4*PAYLOAD_WIDTH)-1:0]        app_wdf_data,
+    input [(4*PAYLOAD_WIDTH)/8-1:0]      app_wdf_mask,
+@@ -241,10 +242,12 @@
+    output                               app_rdy,
+    output                               app_wdf_rdy,
+    output [(4*PAYLOAD_WIDTH)-1:0]       app_rd_data,
+-   output                               app_rd_data_end,
++   //output                               app_rd_data_end,
+    output                               app_rd_data_valid,
+-   output                               ui_clk_sync_rst,
+-   output                               ui_clk,
++   output                               tb_rst,
++   output                               tb_clk,
++   output                               clk_ahb,
++   output                               clk100,
+    output                               phy_init_done,
+ 
+    input                                sys_rst   // System reset
+@@ -266,9 +269,9 @@
+   wire                                sys_clk;
+   wire                                mmcm_clk;
+   wire                                iodelay_ctrl_rdy;
+-      
+-  (* KEEP = "TRUE" *) wire            sda_i;
+-  (* KEEP = "TRUE" *) wire            scl_i;
++  wire                                app_rd_data_end;
++//  (* KEEP = "TRUE" *) wire            sda_i;
++//  (* KEEP = "TRUE" *) wire            scl_i;
+   wire                                rst;
+   wire                                clk;
+   wire                                clk_mem;
+@@ -365,9 +368,9 @@
+ 
+   assign app_hi_pri = 1'b0;
+ 
+-  assign ui_clk = clk;
+-  assign ui_clk_sync_rst = rst;
+-  MUXCY scl_inst
++  assign tb_clk = clk;
++  assign tb_rst = rst;
++ /* MUXCY scl_inst
+     (
+      .O  (scl),
+      .CI (scl_i),
+@@ -382,8 +385,11 @@
+      .DI (1'b0),
+      .S  (1'b1)
+      );
++*/
+   assign clk_ref = 1'b0;
+-  assign sys_clk = 1'b0;
++//  assign sys_clk = 1'b0; 
++// ML605 200MHz clock sourced from BUFG within "idelay_ctrl" module.
++  wire clk_200;    
+ 
+ 
+   iodelay_ctrl #
+@@ -399,8 +405,11 @@
+        .clk_ref_n        (clk_ref_n),
+        .clk_ref          (clk_ref),
+        .sys_rst          (sys_rst),
++       .clk_200          (clk_200),    // ML605 200MHz clock from BUFG to MMCM CLKIN1
+        .iodelay_ctrl_rdy (iodelay_ctrl_rdy)
+        );
++/* ML605 comment out "clk_ibuf" module. MIG default requires 2 inputs clocks.
++
+   clk_ibuf #
+     (
+      .INPUT_CLK_TYPE (INPUT_CLK_TYPE)
+@@ -412,6 +421,8 @@
+        .sys_clk           (sys_clk),
+        .mmcm_clk          (mmcm_clk)
+        );
++*/
++  
+   infrastructure #
+     (
+      .TCQ                (TCQ),
+@@ -420,6 +431,7 @@
+      .MMCM_ADV_BANDWIDTH (MMCM_ADV_BANDWIDTH),
+      .CLKFBOUT_MULT_F    (CLKFBOUT_MULT_F),
+      .DIVCLK_DIVIDE      (DIVCLK_DIVIDE),
++     .CLKOUT_DIVIDE4     (CLKOUT_DIVIDE4),
+      .CLKOUT_DIVIDE      (CLKOUT_DIVIDE),
+      .RST_ACT_LOW        (RST_ACT_LOW)
+      )
+@@ -428,8 +440,10 @@
+        .clk_mem          (clk_mem),
+        .clk              (clk),
+        .clk_rd_base      (clk_rd_base),
++       .clk_amba         (clk_ahb),
++       .clk_100          (clk100),
+        .rstdiv0          (rst),
+-       .mmcm_clk         (mmcm_clk),
++       .mmcm_clk         (clk_200),    // ML605 single input clock 200MHz from "iodelay_ctrl"
+        .sys_rst          (sys_rst),
+        .iodelay_ctrl_rdy (iodelay_ctrl_rdy),
+        .PSDONE           (pd_PSDONE),
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/grlib_mig/mig.prj work/leon3-xilinx-ml605/grlib_mig/mig.prj
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/grlib_mig/mig.prj	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/grlib_mig/mig.prj	2019-12-29 15:59:50.122753997 +0100
@@ -0,0 +1,60 @@
+<?xml version='1.0' encoding='UTF-8'?>
+<Project NoOfControllers="1" >
+    <ModuleName>mig_37</ModuleName>
+    <dci_inouts_inputs>1</dci_inouts_inputs>
+    <dci_outputs>0</dci_outputs>
+    <Debug_En>ON</Debug_En>
+    <TargetFPGA>xc6vlx240t-ff1156/-1</TargetFPGA>
+    <Version>3.7</Version>
+    <SystemClock>Differential</SystemClock>
+    <PinSelectionFlag>FALSE</PinSelectionFlag>
+    <IODelayHighPerformanceMode>HIGH</IODelayHighPerformanceMode>
+    <InternalVref>0</InternalVref>
+    <Controller number="0" >
+        <MemoryDevice>DDR3_SDRAM/SODIMMs/MT4JSF6464HY-1G1</MemoryDevice>
+        <TimePeriod>2500</TimePeriod>
+        <DataWidth>64</DataWidth>
+        <DeepMemory>1</DeepMemory>
+        <DataMask>1</DataMask>
+        <CustomPart>FALSE</CustomPart>
+        <NewPartName/>
+        <RowAddress>13</RowAddress>
+        <ColAddress>10</ColAddress>
+        <BankAddress>3</BankAddress>
+        <MasterBanks>25</MasterBanks>
+        <TimingParameters>
+            <Parameters twtr="7.5" trrd="7.5" trefi="7.8" tfaw="45" trtp="7.5" trfc="110" trp="13.13" tras="37.5" trcd="13.13" />
+        </TimingParameters>
+        <ECC>Disabled</ECC>
+        <DiscreteBankSelections>1</DiscreteBankSelections>
+        <CaptureClock>36</CaptureClock>
+        <UserMemoryAddressMap>ROW_BANK_COLUMN</UserMemoryAddressMap>
+        <Ordering>Strict</Ordering>
+        <BankSelection>
+            <Bank SysClk="0" Data="1" name="25" Address="0" wasso="40" />
+            <Bank SysClk="0" Data="1" name="26" Address="0" wasso="40" />
+            <Bank SysClk="1" Data="0" name="34" Address="0" wasso="40" />
+            <Bank SysClk="0" Data="1" name="35" Address="0" wasso="40" />
+            <Bank SysClk="0" Data="0" name="36" Address="1" wasso="40" />
+        </BankSelection>
+        <mrBurstLength name="Burst Length" >8 - Fixed</mrBurstLength>
+        <mrBurstType name="Read Burst Type" >Sequential</mrBurstType>
+        <mrCasLatency name="CAS Latency" >6</mrCasLatency>
+        <mrMode name="Mode" >Normal</mrMode>
+        <mrDllReset name="DLL Reset" >No</mrDllReset>
+        <mrPdMode name="DLL control for precharge PD" >Slow Exit</mrPdMode>
+        <emrDllEnable name="DLL Enable" >Enable</emrDllEnable>
+        <emrOutputDriveStrength name="Output Driver Impedance Control" >RZQ/7</emrOutputDriveStrength>
+        <emrRTT name="RTT (nominal) - On Die Termination (ODT)" >RZQ/4</emrRTT>
+        <emrPosted name="Additive Latency (AL)" >0</emrPosted>
+        <emrOCD name="Write Leveling Enable" >Disabled</emrOCD>
+        <emrDQS name="TDQS enable" >Enabled</emrDQS>
+        <emrRDQS name="Qoff" >Output Buffer Enabled</emrRDQS>
+        <mr2PartialArraySelfRefresh name="Partial-Array Self Refresh" >Full Array</mr2PartialArraySelfRefresh>
+        <mr2CasWriteLatency name="CAS write latency" >5</mr2CasWriteLatency>
+        <mr2AutoSelfRefresh name="Auto Self Refresh" >Enabled</mr2AutoSelfRefresh>
+        <mr2SelfRefreshTempRange name="High Temparature Self Refresh Rate" >Normal</mr2SelfRefreshTempRange>
+        <mr2RTTWR name="RTT_WR - Dynamic On Die Termination (ODT)" >Dynamic ODT off</mr2RTTWR>
+        <PortInterface>NATIVE</PortInterface>
+    </Controller>
+</Project>
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/grlib_mig/mig_reset13.diff work/leon3-xilinx-ml605/grlib_mig/mig_reset13.diff
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/grlib_mig/mig_reset13.diff	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/grlib_mig/mig_reset13.diff	2019-12-29 15:59:50.122753997 +0100
@@ -0,0 +1,30 @@
+--- /home/anandhavel/mig_37.vhd	2013-10-25 19:38:05.381163679 +0200
++++ mig_37/user_design/rtl/ip_top/mig_37.vhd	2013-10-25 19:48:18.649914855 +0200
+@@ -251,7 +251,8 @@
+       clk_ahb       : out   std_logic;
+       clk100        : out   std_logic;
+ 
+-    sys_rst        : in std_logic
++    sys_rst_13        : in std_logic;
++    sys_rst_14        : in std_logic
+     );
+ end entity mig_37;
+ 
+@@ -598,7 +599,7 @@
+       clk_ref_p        => clk_ref_p,
+       clk_ref_n        => clk_ref_n,
+       clk_ref          => clk_ref,
+-      sys_rst          => sys_rst,
++      sys_rst          => sys_rst_13,
+       clk_200          => mmcm_clk,	-- 200 MHz for ML605
+       iodelay_ctrl_rdy => iodelay_ctrl_rdy
+       );
+@@ -624,7 +625,7 @@
+       clk100           => clk100,
+       rstdiv0          => rst,
+       mmcm_clk         => mmcm_clk,
+-      sys_rst          => sys_rst,
++      sys_rst          => sys_rst_13,
+       iodelay_ctrl_rdy => iodelay_ctrl_rdy,
+       PSDONE           => pd_PSDONE,
+       PSEN             => pd_PSEN,
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/grlib_mig/mig_reset14.diff work/leon3-xilinx-ml605/grlib_mig/mig_reset14.diff
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/grlib_mig/mig_reset14.diff	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/grlib_mig/mig_reset14.diff	2019-12-29 15:59:50.122753997 +0100
@@ -0,0 +1,30 @@
+--- /home/anandhavel/mig.v	2013-10-25 20:00:01.000000000 +0200
++++ mig/user_design/rtl/ip_top/mig.v	2013-10-25 20:02:02.115036358 +0200
+@@ -250,7 +250,8 @@
+    output                               clk100,
+    output                               phy_init_done,
+ 
+-   input                                sys_rst   // System reset
++   input                                sys_rst_13,   // System reset
++   input                                sys_rst_14   // System reset
+    );
+ 
+ 
+@@ -404,7 +405,7 @@
+        .clk_ref_p        (clk_ref_p),
+        .clk_ref_n        (clk_ref_n),
+        .clk_ref          (clk_ref),
+-       .sys_rst          (sys_rst),
++       .sys_rst          (sys_rst_14),
+        .clk_200          (clk_200),    // ML605 200MHz clock from BUFG to MMCM CLKIN1
+        .iodelay_ctrl_rdy (iodelay_ctrl_rdy)
+        );
+@@ -444,7 +445,7 @@
+        .clk_100          (clk100),
+        .rstdiv0          (rst),
+        .mmcm_clk         (clk_200),    // ML605 single input clock 200MHz from "iodelay_ctrl"
+-       .sys_rst          (sys_rst),
++       .sys_rst          (sys_rst_14),
+        .iodelay_ctrl_rdy (iodelay_ctrl_rdy),
+        .PSDONE           (pd_PSDONE),
+        .PSEN             (pd_PSEN),
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/grlib_mig/mig_ucf_patch.txt work/leon3-xilinx-ml605/grlib_mig/mig_ucf_patch.txt
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/grlib_mig/mig_ucf_patch.txt	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/grlib_mig/mig_ucf_patch.txt	2019-12-29 15:59:50.122753997 +0100
@@ -0,0 +1,204 @@
+--- ./mig/user_design/par/mig.ucf	2012-12-18 14:40:26.000000000 +0100
++++ ./mig_patch/p/a/t/c/h/mig_design/mig.ucf	2012-12-18 12:01:45.861514738 +0100
+@@ -20,16 +20,16 @@
+ # Timing constraints                                                        #
+ ############################################################################
+ 
+-NET "sys_clk_p" TNM_NET = TNM_sys_clk;
+-TIMESPEC "TS_sys_clk" = PERIOD "TNM_sys_clk" 2.5 ns;
++#NET "sys_clk_p" TNM_NET = TNM_sys_clk;
++#TIMESPEC "TS_sys_clk" = PERIOD "TNM_sys_clk" 2.5 ns;
+ 
+-NET "clk_ref_p" TNM_NET = TNM_clk_ref;
+-TIMESPEC "TS_clk_ref" = PERIOD "TNM_clk_ref" 5 ns ;
++#NET "clk_ref_p" TNM_NET = TNM_clk_ref;
++#TIMESPEC "TS_clk_ref" = PERIOD "TNM_clk_ref" 5 ns ;
+ 
+ # Constrain BUFR clocks used to synchronize data from IOB to fabric logic
+ # Note that ISE cannot infer this from other PERIOD constraints because
+ # of the use of OSERDES blocks in the BUFR clock generation path
+-NET "u_memc_ui_top/u_mem_intfc/phy_top0/clk_rsync[?]" TNM_NET = TNM_clk_rsync;
++NET "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/clk_rsync[?]" TNM_NET = TNM_clk_rsync;
+ TIMESPEC "TS_clk_rsync" = PERIOD "TNM_clk_rsync" 5 ns;
+ 
+ # Paths between DQ/DQS ISERDES.Q outputs and CLB flops clocked by falling
+@@ -44,13 +44,13 @@
+ TIMEGRP "TG_clk_rsync_rise" = RISING  "TNM_clk_rsync";
+ TIMEGRP "TG_clk_rsync_fall" = FALLING "TNM_clk_rsync";
+ TIMESPEC "TS_clk_rsync_rise_to_fall" =
+-  FROM "TG_clk_rsync_rise" TO "TG_clk_rsync_fall" "TS_sys_clk" * 2;
++  FROM "TG_clk_rsync_rise" TO "TG_clk_rsync_fall" "TS_clk_ref" * 1;
+ 
+ # Signal to select between controller and physical layer signals. Four divided by two clock
+ # cycles (4 memory clock cycles) are provided by design for the signal to settle down.
+ # Used only by the phy modules.
+-INST "u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_init/u_ff_phy_init_data_sel" TNM = "TNM_PHY_INIT_SEL";
+-TIMESPEC "TS_MC_PHY_INIT_SEL" = FROM "TNM_PHY_INIT_SEL" TO FFS = "TS_sys_clk"*4;
++INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_init/u_ff_phy_init_data_sel" TNM = "TNM_PHY_INIT_SEL";
++TIMESPEC "TS_MC_PHY_INIT_SEL" = FROM "TNM_PHY_INIT_SEL" TO FFS = "TS_clk_ref"*2;
+ ############################################################################
+ ########################################################################
+ # Controller 0
+@@ -77,14 +77,14 @@
+ NET  "ddr3_odt[*]"                              IOSTANDARD = SSTL15;
+ NET  "ddr3_cs_n[*]"                             IOSTANDARD = SSTL15;
+ NET  "ddr3_dm[*]"                               IOSTANDARD = SSTL15;
+-NET  "sys_clk_p"                                IOSTANDARD = LVDS_25;
+-NET  "sys_clk_n"                                IOSTANDARD = LVDS_25;
++#NET  "sys_clk_p"                                IOSTANDARD = LVDS_25;
++#NET  "sys_clk_n"                                IOSTANDARD = LVDS_25;
+ NET  "clk_ref_p"                                IOSTANDARD = LVDS_25;
+ NET  "clk_ref_n"                                IOSTANDARD = LVDS_25;
+-NET  "sda"                                      IOSTANDARD = LVCMOS25;
+-NET  "scl"                                      IOSTANDARD = LVCMOS25;
+-NET  "sys_rst"                                  IOSTANDARD = LVCMOS25;
+-NET  "phy_init_done"                            IOSTANDARD = LVCMOS25;
++#NET  "sda"                                      IOSTANDARD = LVCMOS25;
++#NET  "scl"                                      IOSTANDARD = LVCMOS25;
++#NET  "sys_rst"                                  IOSTANDARD = LVCMOS25;
++#NET  "phy_init_done"                            IOSTANDARD = LVCMOS25;
+ NET  "ddr3_dqs_p[*]"                            IOSTANDARD = DIFF_SSTL15_T_DCI;
+ NET  "ddr3_dqs_n[*]"                            IOSTANDARD = DIFF_SSTL15_T_DCI;
+ NET  "ddr3_ck_p[*]"                             IOSTANDARD = DIFF_SSTL15;
+@@ -93,14 +93,15 @@
+ ################################################################################
+ ##SAVE attributes to reserve the pins
+ ################################################################################
+-NET  "sda"                                      S;
+-NET  "scl"                                      S;
++#NET  "sda"                                      S;
++#NET  "scl"                                      S;
+ 
+ ###############################################################################
+ #DCI_CASCADING
+ #Syntax : CONFIG DCI_CASCADE = "<master> <slave1> <slave2> ..";
+ ###############################################################################
+-CONFIG DCI_CASCADE = "25 26";
++CONFIG DCI_CASCADE = "26 25";
++CONFIG DCI_CASCADE = "36 35";
+ 
+ 
+ ##################################################################################
+@@ -201,14 +202,14 @@
+ NET  "ddr3_dm[5]"                                LOC = "A26" ;          #Bank 25
+ NET  "ddr3_dm[6]"                                LOC = "A29" ;          #Bank 25
+ NET  "ddr3_dm[7]"                                LOC = "A31" ;          #Bank 25
+-NET  "sys_clk_p"                                 LOC = "A10" ;          #Bank 34
+-NET  "sys_clk_n"                                 LOC = "B10" ;          #Bank 34
++#NET  "sys_clk_p"                                 LOC = "A10" ;          #Bank 34
++#NET  "sys_clk_n"                                 LOC = "B10" ;          #Bank 34
+ NET  "clk_ref_p"                                 LOC = "J9" ;          #Bank 34
+ NET  "clk_ref_n"                                 LOC = "H9" ;          #Bank 34
+-NET  "sda"                                       LOC = "AA33" ;          #Bank 13
+-NET  "scl"                                       LOC = "AA34" ;          #Bank 13
+-NET  "sys_rst"                                   LOC = "H10" ;          #Bank 35
+-NET  "phy_init_done"                             LOC = "AE23" ;          #Bank 24
++#NET  "sda"                                       LOC = "AA33" ;          #Bank 13
++#NET  "scl"                                       LOC = "AA34" ;          #Bank 13
++#NET  "sys_rst"                                   LOC = "H10" ;          #Bank 35
++#NET  "phy_init_done"                             LOC = "AE23" ;          #Bank 24
+ NET  "ddr3_dqs_p[0]"                             LOC = "D12" ;          #Bank 35
+ NET  "ddr3_dqs_n[0]"                             LOC = "E12" ;          #Bank 35
+ NET  "ddr3_dqs_p[1]"                             LOC = "H12" ;          #Bank 35
+@@ -251,21 +252,21 @@
+ ######################################################################################
+ 
+ ##Site: C29 -- Bank 25
+-INST "u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/*gen_loop_col1.u_oserdes_rsync"
++INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/*gen_loop_col1.u_oserdes_rsync"
+   LOC = "OLOGIC_X1Y139";
+-INST "u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/*gen_loop_col1.u_odelay_rsync"
++INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/*gen_loop_col1.u_odelay_rsync"
+   LOC = "IODELAY_X1Y139";
+ 
+-INST "u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/*gen_loop_col1.u_bufr_rsync"
++INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/*gen_loop_col1.u_bufr_rsync"
+   LOC = "BUFR_X1Y6";
+ 
+ ##Site: M12 -- Bank 35
+-INST "u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/*gen_loop_col0.u_oserdes_rsync"
++INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/*gen_loop_col0.u_oserdes_rsync"
+   LOC = "OLOGIC_X2Y139";
+-INST "u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/*gen_loop_col0.u_odelay_rsync"
++INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/*gen_loop_col0.u_odelay_rsync"
+   LOC = "IODELAY_X2Y139";
+ 
+-INST "u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/*gen_loop_col0.u_bufr_rsync"
++INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/*gen_loop_col0.u_bufr_rsync"
+   LOC = "BUFR_X2Y6";
+ 
+ ##################################################################################################
+@@ -282,51 +283,51 @@
+ ######################################################################################
+ 
+ ##Site: C13 -- Bank 35
+-INST "u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/*gen_ck_cpt[0].u_oserdes_cpt"
++INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/*gen_ck_cpt[0].u_oserdes_cpt"
+   LOC = "OLOGIC_X2Y137";
+-INST "u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/*gen_ck_cpt[0].u_odelay_cpt"
++INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/*gen_ck_cpt[0].u_odelay_cpt"
+   LOC = "IODELAY_X2Y137";
+ 
+ ##Site: L13 -- Bank 35
+-INST "u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/*gen_ck_cpt[1].u_oserdes_cpt"
++INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/*gen_ck_cpt[1].u_oserdes_cpt"
+   LOC = "OLOGIC_X2Y141";
+-INST "u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/*gen_ck_cpt[1].u_odelay_cpt"
++INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/*gen_ck_cpt[1].u_odelay_cpt"
+   LOC = "IODELAY_X2Y141";
+ 
+ ##Site: K14 -- Bank 35
+-INST "u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/*gen_ck_cpt[2].u_oserdes_cpt"
++INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/*gen_ck_cpt[2].u_oserdes_cpt"
+   LOC = "OLOGIC_X2Y143";
+-INST "u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/*gen_ck_cpt[2].u_odelay_cpt"
++INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/*gen_ck_cpt[2].u_odelay_cpt"
+   LOC = "IODELAY_X2Y143";
+ 
+ ##Site: F21 -- Bank 26
+-INST "u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/*gen_ck_cpt[3].u_oserdes_cpt"
++INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/*gen_ck_cpt[3].u_oserdes_cpt"
+   LOC = "OLOGIC_X1Y179";
+-INST "u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/*gen_ck_cpt[3].u_odelay_cpt"
++INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/*gen_ck_cpt[3].u_odelay_cpt"
+   LOC = "IODELAY_X1Y179";
+ 
+ ##Site: B20 -- Bank 26
+-INST "u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/*gen_ck_cpt[4].u_oserdes_cpt"
++INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/*gen_ck_cpt[4].u_oserdes_cpt"
+   LOC = "OLOGIC_X1Y181";
+-INST "u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/*gen_ck_cpt[4].u_odelay_cpt"
++INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/*gen_ck_cpt[4].u_odelay_cpt"
+   LOC = "IODELAY_X1Y181";
+ 
+ ##Site: F25 -- Bank 25
+-INST "u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/*gen_ck_cpt[5].u_oserdes_cpt"
++INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/*gen_ck_cpt[5].u_oserdes_cpt"
+   LOC = "OLOGIC_X1Y137";
+-INST "u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/*gen_ck_cpt[5].u_odelay_cpt"
++INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/*gen_ck_cpt[5].u_odelay_cpt"
+   LOC = "IODELAY_X1Y137";
+ 
+ ##Site: C28 -- Bank 25
+-INST "u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/*gen_ck_cpt[6].u_oserdes_cpt"
++INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/*gen_ck_cpt[6].u_oserdes_cpt"
+   LOC = "OLOGIC_X1Y141";
+-INST "u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/*gen_ck_cpt[6].u_odelay_cpt"
++INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/*gen_ck_cpt[6].u_odelay_cpt"
+   LOC = "IODELAY_X1Y141";
+ 
+ ##Site: D24 -- Bank 25
+-INST "u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/*gen_ck_cpt[7].u_oserdes_cpt"
++INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/*gen_ck_cpt[7].u_oserdes_cpt"
+   LOC = "OLOGIC_X1Y143";
+-INST "u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/*gen_ck_cpt[7].u_odelay_cpt"
++INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/*gen_ck_cpt[7].u_odelay_cpt"
+   LOC = "IODELAY_X1Y143";
+ 
+ 
+@@ -334,4 +335,4 @@
+ ## MMCM_ADV CONSTRAINTS                                                             ##
+ ######################################################################################
+ 
+-INST "u_infrastructure/u_mmcm_adv"      LOC = "MMCM_ADV_X0Y8"; #Banks 16, 26, 36
++INST "ddr3ctrl/u_infrastructure/u_mmcm_adv"      LOC = "MMCM_ADV_X0Y8"; #Banks 16, 26, 36
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/grlib_mig/mig.xco work/leon3-xilinx-ml605/grlib_mig/mig.xco
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/grlib_mig/mig.xco	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/grlib_mig/mig.xco	2019-12-29 15:59:50.122753997 +0100
@@ -0,0 +1,42 @@
+##############################################################
+#
+# Xilinx Core Generator version 13.1
+# Date: Sat Feb 19 19:51:50 2011
+#
+##############################################################
+#
+#  This file contains the customisation parameters for a
+#  Xilinx CORE Generator IP GUI. It is strongly recommended
+#  that you do not manually alter this file as it may cause
+#  unexpected and unsupported behavior.
+#
+##############################################################
+#
+# BEGIN Project Options
+SET addpads = false
+SET asysymbol = true
+SET busformat = BusFormatParenNotRipped
+SET createndf = false
+SET designentry = VHDL
+SET device = xc6vlx240t
+SET devicefamily = virtex6
+SET flowvendor = Synplicity
+SET formalverification = false
+SET foundationsym = false
+SET implementationfiletype = Ngc
+SET package = ff1156
+SET removerpms = false
+SET simulationfiles = Behavioral
+SET speedgrade = -1
+SET verilogsim = false
+SET vhdlsim = true
+# END Project Options
+# BEGIN Select
+SELECT MIG_Virtex6_and_Spartan6 family Xilinx,_Inc. 3.7
+# END Select
+# BEGIN Parameters
+CSET component_name=mig_37
+CSET xml_input_file=./mig.prj
+# END Parameters
+GENERATE
+# CRC:  362dace
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/gtxclk.vhd work/leon3-xilinx-ml605/gtxclk.vhd
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/gtxclk.vhd	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/gtxclk.vhd	2019-12-29 15:59:50.122753997 +0100
@@ -0,0 +1,78 @@
+
+library ieee;
+use ieee.std_logic_1164.all;
+library grlib;
+use grlib.stdlib.all;
+-- pragma translate_off
+library unisim;
+use unisim.ODDR;
+use unisim.IBUFDS_GTXE1;
+-- pragma translate_on
+
+library techmap;
+use techmap.gencomp.all;
+
+entity gtxclk is
+  port ( clk_p       : in  std_logic;        -- input clock
+         clk_n       : in  std_logic;        -- input clock
+         clkint      : out std_ulogic;        -- internal gtx clock
+         clkout      : out std_ulogic        -- external DDR clock
+  );
+end;
+architecture rtl of gtxclk is
+
+component IBUFDS_GTXE1
+  generic (
+     CLKCM_CFG : boolean := TRUE;
+     CLKRCV_TRST : boolean := TRUE;
+     REFCLKOUT_DLY : bit_vector := b"0000000000"
+  );
+  port (
+     O : out std_ulogic;
+     ODIV2 : out std_ulogic;
+     CEB : in std_ulogic;
+     I : in std_ulogic;
+     IB : in std_ulogic
+  );
+end component;
+
+  component BUFG port (O : out std_logic; I : in std_logic); end component;
+
+  component ODDR
+    generic
+      ( DDR_CLK_EDGE : string := "OPPOSITE_EDGE";
+--        INIT : bit := '0';
+        SRTYPE : string := "SYNC");
+    port
+      (
+        Q : out std_ulogic;
+        C : in std_ulogic;
+        CE : in std_ulogic;
+        D1 : in std_ulogic;
+        D2 : in std_ulogic;
+        R : in std_ulogic;
+        S : in std_ulogic
+      );
+  end component;
+
+signal vcc, gnd, clkl, clkin : std_ulogic;
+
+begin
+
+  vcc <= '1'; gnd <= '0';
+
+  x0 : ODDR port map ( Q => clkout, C => clkin, CE => vcc,
+		D1 => gnd, D2 => vcc, R => gnd, S => gnd);
+
+   x1 : IBUFDS_GTXE1
+   port map ( O => clkl, ODIV2 => open, CEB => gnd,
+        I => clk_p, IB => clk_n);
+
+   x2 : BUFG port map (I => clkl, O => clkin);
+
+  clkint <= clkin;
+
+end;
+           
+
+
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/lconfig.tk work/leon3-xilinx-ml605/lconfig.tk
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/lconfig.tk	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/lconfig.tk	2019-12-29 15:59:50.134753990 +0100
@@ -0,0 +1,6563 @@
+# FILE: header.tk
+# This file is boilerplate TCL/TK function definitions for 'make xconfig'.
+#
+# CHANGES
+# =======
+#
+# 8 January 1999, Michael Elizabeth Chastain, <mec@shout.net>
+# - Remove unused do_cmd function (part of the 2.0 sound support).
+# - Arrange buttons in three columns for better screen fitting.
+# - Add CONSTANT_Y, CONSTANT_M, CONSTANT_N for commands like:
+#     dep_tristate 'foo' CONFIG_FOO m
+#
+# 23 January 1999, Michael Elizabeth Chastain, <mec@shout.net>
+# - Shut vfix the hell up.
+#
+# 24 January 1999, Michael Elizabeth Chastain, <mec@shout.net>
+# - Improve the exit message (Jeff Ronne).
+
+#
+# This is a handy replacement for ".widget cget" that requires neither tk4
+# nor additional source code uglification.
+#
+proc cget { w option } {
+	return "[lindex [$w configure $option] 4]"
+}
+
+#
+# Function to compensate for broken config.in scripts like the sound driver,
+# which make dependencies on variables that are never even conditionally
+# defined.
+#
+proc vfix { var } {
+	global $var
+	if [ catch {eval concat $$var} ] {
+		set $var 4
+	}
+}
+
+#
+# Constant values used by certain dep_tristate commands.
+#
+set CONSTANT_Y 1
+set CONSTANT_M 2
+set CONSTANT_N 0
+set CONSTANT_E 4
+
+#
+# Create a "reference" object to steal colors from.
+#
+button .ref
+
+#
+# On monochrome displays, -disabledforeground is blank by default; that's
+# bad.  Fill it with -foreground instead.
+#
+if { [cget .ref -disabledforeground] == "" } {
+	.ref configure -disabledforeground [cget .ref -foreground]
+}
+
+
+#
+# Define some macros we will need to parse the config.in file.
+#
+
+proc mainmenu_name { text } {
+	wm title . "$text"
+}
+
+proc menu_option { w menu_num text } {
+	global menus_per_column
+	global processed_top_level
+	set processed_top_level [expr $processed_top_level + 1]
+	if { $processed_top_level <= $menus_per_column } then {
+	    set myframe left
+	} elseif { $processed_top_level <= [expr 2 * $menus_per_column] } then {
+	    set myframe middle
+	} else {
+	    set myframe right
+	} 
+	button .f0.x$menu_num -anchor w -text "$text" \
+	    -command "$w .$w \"$text\""
+	pack .f0.x$menu_num -pady 0 -side top -fill x -in .f0.$myframe
+}
+
+proc load_configfile { w title func } {
+	catch {destroy $w}
+	toplevel $w -class Dialog
+	global loadfile
+	frame $w.x
+	label $w.bm -bitmap questhead
+	pack  $w.bm -pady 10 -side top -padx 10
+	label $w.x.l -text "Enter filename:" -relief raised
+	entry $w.x.x -width 35 -relief sunken -borderwidth 2 \
+		-textvariable loadfile
+	pack $w.x.l $w.x.x -anchor w -side left
+	pack $w.x -side top -pady 10
+	wm title $w "$title" 
+
+	set oldFocus [focus]
+	frame $w.f
+	button $w.f.back -text "OK" -width 20 \
+		-command "destroy $w; focus $oldFocus;$func .fileio"
+	button $w.f.canc -text "Cancel" \
+		-width 20 -command "destroy $w; focus $oldFocus"
+	pack $w.f.back $w.f.canc -side left -pady 10 -padx 45
+	pack $w.f -pady 10 -side bottom -padx 10 -anchor w
+	focus $w
+	global winx; global winy
+	set winx [expr [winfo x .]+30]; set winy [expr [winfo y .]+30]
+	wm geometry $w +$winx+$winy
+}
+
+bind all <Alt-q> {maybe_exit .maybe}
+
+proc maybe_exit { w } {
+	catch {destroy $w}
+	toplevel $w -class Dialog
+	label $w.bm -bitmap questhead
+	pack  $w.bm -pady 10 -side top -padx 10
+	message $w.m -width 400 -aspect 300 \
+		-text "Changes will be lost.  Are you sure?" -relief flat
+	pack  $w.m -pady 10 -side top -padx 10
+	wm title $w "Are you sure?" 
+
+	set oldFocus [focus]
+	frame $w.f
+	button $w.f.back -text "OK" -width 20 \
+		-command "exit 1"
+	button $w.f.canc -text "Cancel" \
+		-width 20 -command "destroy $w; focus $oldFocus"
+	pack $w.f.back $w.f.canc -side left -pady 10 -padx 45
+	pack $w.f -pady 10 -side bottom -padx 10 -anchor w
+  	bind $w <Return> "exit 1"
+    	bind $w <Escape> "destroy $w; focus $oldFocus"
+	focus $w
+	global winx; global winy
+	set winx [expr [winfo x .]+30]; set winy [expr [winfo y .]+30]
+	wm geometry $w +$winx+$winy
+}
+
+proc read_config_file { w } {
+	global loadfile
+	if { [string length $loadfile] != 0 && [file readable $loadfile] == 1 } then {
+		read_config $loadfile
+	} else {
+		catch {destroy $w}
+		toplevel $w -class Dialog
+		message $w.m -width 400 -aspect 300 -text \
+			"Unable to read file $loadfile" \
+			 -relief raised 
+		label $w.bm -bitmap error
+		pack $w.bm $w.m -pady 10 -side top -padx 10
+		wm title $w "Xconfig Internal Error" 
+
+		set oldFocus [focus]
+		frame $w.f
+		button $w.f.back -text "Bummer" \
+			-width 10 -command "destroy $w; focus $oldFocus"
+		pack $w.f.back -side bottom -pady 10 -anchor s
+		pack $w.f -pady 10 -side top -padx 10 -anchor s
+		focus $w
+		global winx; global winy
+		set winx [expr [winfo x .]+30]; set winy [expr [winfo y .]+30]
+		wm geometry $w +$winx+$winy
+	}
+}
+
+proc write_config_file  { w } {
+	global loadfile
+	if { [string length $loadfile] != 0 
+    		&& ([file writable $loadfile] == 1 || ([file exists $loadfile] == 0 && [file writable [file dirname $loadfile]] == 1)) } then {
+		writeconfig $loadfile .null
+	} else {
+		catch {destroy $w}
+		toplevel $w -class Dialog
+		message $w.m -width 400 -aspect 300 -text \
+			"Unable to write file $loadfile" \
+			 -relief raised 
+		label $w.bm -bitmap error
+		pack $w.bm $w.m -pady 10 -side top -padx 10
+		wm title $w "Xconfig Internal Error" 
+
+		set oldFocus [focus]
+		frame $w.f
+		button $w.f.back -text "OK" \
+			-width 10 -command "destroy $w; focus $oldFocus"
+		pack $w.f.back -side bottom -pady 10 -anchor s
+		pack $w.f -pady 10 -side top -padx 10 -anchor s
+		focus $w
+		global winx; global winy
+		set winx [expr [winfo x .]+30]; set winy [expr [winfo y .]+30]
+		wm geometry $w +$winx+$winy
+	}
+}
+
+proc read_config { filename } {
+	set file1 [open $filename r]
+	clear_choices
+	while { [gets $file1 line] >= 0} {
+		if [regexp {([0-9A-Za-z_]+)=([ynm])} $line foo var value] {
+			if { $value == "y" } then { set cmd "global $var; set $var 1" }
+			if { $value == "n" } then { set cmd "global $var; set $var 0" }
+			if { $value == "m" } then { set cmd "global $var; set $var 2" }
+			eval $cmd
+		}
+		if [regexp {# ([0-9A-Za-z_]+) is not set} $line foo var] {
+			set cmd "global $var; set $var 0"
+			eval $cmd
+		}
+		if [regexp {([0-9A-Za-z_]+)=([0-9A-Fa-f]+)} $line foo var value] {
+			set cmd "global $var; set $var $value"
+			eval $cmd
+		}
+		if [regexp {([0-9A-Za-z_]+)="([^"]*)"} $line foo var value] {
+			set cmd "global $var; set $var \"$value\""
+			eval $cmd
+		}
+	}
+	close $file1
+	update_choices
+	update_mainmenu
+}
+proc write_comment { file1 file2 text } {
+    	puts $file1 ""
+	puts $file1 "#"
+	puts $file1 "# $text"
+	puts $file1 "#"
+	puts $file2 "/*"
+	puts $file2 " * $text"
+	puts $file2 " */"
+}
+
+proc effective_dep { deplist } {
+	global CONFIG_MODULES
+	set depend 1
+	foreach i $deplist {
+		if {$i == 0} then {set depend 0}
+		if {$i == 2 && $depend == 1} then {set depend 2}
+	}
+	if {$depend == 2 && $CONFIG_MODULES == 0} then {set depend 0}
+	return $depend
+}
+
+proc sync_tristate { var dep } {
+	global CONFIG_MODULES
+	if {$dep == 0 && ($var == 1 || $var == 2)} then {
+		set var 0
+	} elseif {$dep == 2 && $var == 1} then {
+		set var 2
+	} elseif {$var == 2 && $CONFIG_MODULES == 0} then {
+		if {$dep == 1} then {set var 1} else {set var 0}
+	}
+	return $var
+}
+
+proc sync_bool { var dep modset } {
+	set var [sync_tristate $var $dep]
+	if {$dep == 2 && $var == 2} then {
+		set var $modset
+	}
+	return $var
+}
+
+proc write_tristate { file1 file2 varname variable deplist modset } {
+	set variable [sync_tristate $variable [effective_dep $deplist]]
+	if { $variable == 2 } \
+		then { set variable $modset }
+	if { $variable == 1 } \
+		then { puts $file1 "$varname=y"; \
+		       puts $file2 "#define $varname 1" } \
+	elseif { $variable == 2 } \
+		then { puts $file1 "$varname=m"; \
+		       puts $file2 "#undef  $varname"; \
+		       puts $file2 "#define ${varname}_MODULE 1" } \
+	elseif { $variable == 0 } \
+		then { puts $file1 "# $varname is not set"; \
+		       puts $file2 "#undef  $varname"} \
+	else { \
+	    puts stdout "ERROR - Attempting to write value for unconfigured variable ($varname)." \
+	}
+}
+
+proc write_int { file1 file2 varname variable dep } {
+	if { $dep == 0 } \
+		then { puts $file1 "# $varname is not set"; \
+		       puts $file2 "#undef  $varname"} \
+	else {
+		puts $file1 "$varname=$variable"; \
+		puts $file2 "#define $varname ($variable)"; \
+	}
+}
+
+proc write_hex { file1 file2 varname variable dep } {
+	if { $dep == 0 } \
+		then { puts $file1 "# $varname is not set"; \
+		       puts $file2 "#undef  $varname"} \
+	else {
+		puts $file1 "$varname=$variable"; \
+		puts -nonewline $file2 "#define $varname "; \
+		puts $file2 [exec echo $variable | sed s/^0\[xX\]//]; \
+	}
+}
+
+proc write_string { file1 file2 varname variable dep } {
+	if { $dep == 0 } \
+		then { puts $file1 "# $varname is not set"; \
+		       puts $file2 "#undef  $varname"} \
+	else {
+		puts $file1 "$varname=\"$variable\""; \
+		puts $file2 "#define $varname \"$variable\""; \
+	}
+}
+
+proc option_name {w mnum line text helpidx} {
+	button $w.x$line.l -text "$text" -relief groove -anchor w
+	$w.x$line.l configure -activefore [cget $w.x$line.l -fg] \
+				-activeback [cget $w.x$line.l -bg]
+	button $w.x$line.help -text "Help" -relief raised \
+		-command "dohelp .dohelp $helpidx .menu$mnum"
+	pack $w.x$line.help -side right -fill y
+	pack $w.x$line.l -side right -fill both -expand on
+}
+
+proc toggle_switch2 {w mnum line text variable} {
+	frame $w.x$line -relief sunken
+	radiobutton $w.x$line.y -text "y" -variable $variable -value 1 \
+		-relief groove -width 2 -command "update_active"
+#	radiobutton $w.x$line.m -text "-"  -variable $variable -value 2 \
+#		-relief groove -width 2 -command "update_active"
+	radiobutton $w.x$line.n -text "n"  -variable $variable -value 0 \
+		-relief groove -width 2 -command "update_active"
+
+	option_name $w $mnum $line $text $variable
+
+	pack $w.x$line.n $w.x$line.y -side right -fill y
+}
+
+proc toggle_switch3 {w mnum line text variable} {
+	frame $w.x$line -relief sunken
+	radiobutton $w.x$line.y -text "y" -variable $variable -value 1 \
+		-relief groove -width 2 -command "update_active"
+	radiobutton $w.x$line.m -text "m"  -variable $variable -value 2 \
+		-relief groove -width 2 -command "update_active"
+	radiobutton $w.x$line.n -text "n"  -variable $variable -value 0 \
+		-relief groove -width 2 -command "update_active"
+
+	option_name $w $mnum $line $text $variable
+
+	global CONFIG_MODULES
+	if {($CONFIG_MODULES == 0)} then {
+		$w.x$line.m configure -state disabled
+	}
+	pack $w.x$line.n $w.x$line.m $w.x$line.y -side right -fill y
+}
+
+proc bool {w mnum line text variable} {
+	toggle_switch2 $w $mnum $line $text $variable
+#	$w.x$line.m configure -state disabled
+	pack $w.x$line -anchor w -fill both -expand on
+}
+
+proc tristate {w mnum line text variable } {
+	toggle_switch3 $w $mnum $line $text $variable
+	pack $w.x$line -anchor w -fill both -expand on
+}
+
+proc dep_tristate {w mnum line text variable } {
+	tristate $w $mnum $line $text $variable
+}
+
+proc dep_bool {w mnum line text variable } {
+	bool $w $mnum $line $text $variable
+}
+
+proc int { w mnum line text variable } {
+	frame $w.x$line
+	entry $w.x$line.x -width 11 -relief sunken -borderwidth 2 \
+		-textvariable $variable
+	option_name $w $mnum $line $text $variable
+	pack $w.x$line.x -anchor w -side right -fill y
+	pack $w.x$line -anchor w -fill both -expand on
+}
+
+proc hex { w mnum line text variable } {
+	int $w $mnum $line $text $variable
+}
+
+proc istring { w mnum line text variable } {
+	frame $w.x$line
+	entry $w.x$line.x -width 18 -relief sunken -borderwidth 2 \
+		-textvariable $variable
+	option_name $w $mnum $line $text $variable
+	pack $w.x$line.x -anchor w -side right -fill y
+	pack $w.x$line -anchor w -fill both -expand on
+}
+
+proc minimenu { w mnum line text variable helpidx } {
+	frame $w.x$line
+	menubutton $w.x$line.x -textvariable $variable -menu \
+		$w.x$line.x.menu -relief raised \
+		-anchor w
+	option_name $w $mnum $line $text $helpidx
+	pack $w.x$line.x -anchor w -side right -fill y
+	pack $w.x$line -anchor w -fill both -expand on
+}
+
+proc menusplit {w m n} {
+	if { $n > 2 } then {
+		update idletasks
+		set menuoptsize [expr [$m yposition 2] - [$m yposition 1]]   
+		set maxsize [winfo screenheight $w]
+		set splitpoint [expr $maxsize * 4 / 5 / $menuoptsize - 1]
+		for {set i [expr $splitpoint + 1]} {$i <= $n} {incr i $splitpoint} {
+			$m entryconfigure $i -columnbreak 1
+		}
+	}
+}
+
+proc menutitle {text menu w} {
+	wm title $w "$text"
+}
+
+proc submenu { w mnum line text subnum } {
+	frame $w.x$line
+	button $w.x$line.l -text "" -width 9 -relief groove
+	$w.x$line.l configure -activefore [cget $w.x$line.l -fg] \
+		-activeback [cget $w.x$line.l -bg] -state disabled
+	button $w.x$line.m -text "$text" -relief raised -anchor w \
+		-command "catch {destroy .menu$subnum}; menu$subnum .menu$subnum \"$text\""
+	pack $w.x$line.l -side left -fill both
+	pack $w.x$line.m -anchor w -side right -fill both -expand on
+	pack $w.x$line -anchor w -fill both -expand on
+}
+
+proc comment {w mnum line text } {
+	frame $w.x$line
+	button $w.x$line.l -text "" -width 15 -relief groove
+	$w.x$line.l configure -activefore [cget $w.x$line.l -fg] \
+		-activeback [cget $w.x$line.l -bg] -state disabled
+	button $w.x$line.m -text "$text" -relief groove -anchor w
+	$w.x$line.m configure -activefore [cget $w.x$line.m -fg] \
+		-activeback [cget $w.x$line.m -bg]
+	pack $w.x$line.l -side left -fill both
+	pack $w.x$line.m -anchor w -side right -fill both -expand on
+	pack $w.x$line -anchor w -fill both -expand on
+}
+
+proc readhelp {tag fn}  {
+	set message ""
+	set b 0
+	if { [file readable $fn] == 1} then {
+		set fhandle [open $fn r]
+		while {[gets $fhandle inline] >= 0} {
+			if { $b == 0 } {
+				if { [regexp $tag $inline ] } {
+					set b 1
+					set message "$inline:\n"
+				}
+			} else {
+				if { [regexp {^[^ \t]} $inline]} {
+					break
+				}
+				set message "$message\n$inline"
+			}
+		}
+		close $fhandle
+	}
+	return $message
+}
+
+proc dohelp {w var parent}  {
+	catch {destroy $w}
+	toplevel $w -class Dialog
+
+	set filefound 0
+	set found 0
+	set lineno 0
+
+	if { [file readable config.help] == 1} then {
+		set filefound 1
+		# First escape sed regexp special characters in var:
+		set var [exec echo "$var" | sed s/\[\]\[\/.^$*\]/\\\\&/g]
+		# Now pick out right help text:
+		set message [readhelp $var config.help]
+		set found [expr [string length "$message"] > 0]
+	}
+
+	frame $w.f1
+	pack $w.f1 -fill both -expand on
+
+	# Do the OK button
+	#
+	set oldFocus [focus]
+	frame $w.f2
+	button $w.f2.ok -text "OK" \
+		-width 10 -command "destroy $w; catch {focus $oldFocus}"
+	pack $w.f2.ok -side bottom -pady 6 -anchor n
+	pack $w.f2 -side bottom -padx 10 -anchor s
+
+	scrollbar $w.f1.vscroll -command "$w.f1.canvas yview"
+	pack $w.f1.vscroll -side right -fill y
+
+	canvas $w.f1.canvas -relief flat -borderwidth 0 \
+		-yscrollcommand "$w.f1.vscroll set"
+	frame $w.f1.f
+	pack $w.f1.canvas -side right -fill y -expand on
+
+	if { $found == 0 } then {
+		if { $filefound == 0 } then {
+		message $w.f1.f.m -width 750 -aspect 300 -relief flat -text \
+			"No help available - unable to open file config.help."
+		} else {
+		message $w.f1.f.m -width 400 -aspect 300 -relief flat -text \
+			"No help available for $var"
+		}
+		label $w.f1.bm -bitmap error
+		wm title $w "RTFM"
+	} else {
+		text $w.f1.f.m -width 73 -relief flat -wrap word
+		$w.f1.f.m insert 0.0 $message
+		$w.f1.f.m conf -state disabled -height [$w.f1.f.m index end]
+
+		label $w.f1.bm -bitmap info
+		wm title $w "Configuration help" 
+	}
+	pack $w.f1.f.m -side left
+	pack $w.f1.bm $w.f1.f -side left -padx 10
+
+	focus $w
+	set winx [expr [winfo x $parent]+20]
+	set winy [expr [winfo y $parent]+20]
+	wm geometry $w +$winx+$winy
+	set sizok [expr [winfo reqheight $w.f2.ok] + 12]
+	set maxy [expr [winfo screenheight .] * 3 / 4]
+	set canvtotal [winfo reqheight $w.f1.f.m]
+	if [expr $sizok + $canvtotal < $maxy] {
+		set sizy $canvtotal
+	} else {
+		set sizy [expr $maxy - $sizok]
+	}
+	$w.f1.canvas configure -height $sizy -width [winfo reqwidth $w.f1.f.m] \
+		-scrollregion "0 0 [winfo reqwidth $w.f1.f.m] \
+			[winfo reqheight $w.f1.f.m]"
+	$w.f1.canvas create window 0 0 -anchor nw -window $w.f1.f
+	update idletasks
+
+	set maxy [winfo screenheight .]
+	if [expr $sizok + $canvtotal < $maxy] {
+		set sizy [expr $sizok + $canvtotal]
+	} else {
+		set sizy $maxy
+	}
+	wm maxsize $w [winfo width $w] $sizy
+}
+
+bind all <Alt-s> { catch {exec cp -f .config .config.old}; \
+		writeconfig .config config.h; wrapup .wrap }
+
+proc wrapup {w }  {
+	catch {destroy $w}
+	toplevel $w -class Dialog
+
+	global CONFIG_MODVERSIONS; vfix CONFIG_MODVERSIONS
+	message $w.m -width 460 -aspect 300 -relief raised -text \
+		"End of design configuration. "
+	label $w.bm -bitmap info
+	pack $w.bm $w.m -pady 10 -side top -padx 10
+	wm title $w "LEON build instructions" 
+
+	set oldFocus [focus]
+	frame $w.f
+	button $w.f.back -text "OK" \
+		-width 10 -command "exit 2"
+	pack $w.f.back -side bottom -pady 10 -anchor s
+	pack $w.f -pady 10 -side top -padx 10 -anchor s
+	focus $w
+        bind $w <Return> "exit 2"
+	global winx; global winy
+	set winx [expr [winfo x .]+30]; set winy [expr [winfo y .]+30]
+	wm geometry $w +$winx+$winy
+
+}
+
+proc unregister_active {num} {
+	global active_menus
+	set index [lsearch -exact $active_menus $num]
+	if {$index != -1} then {set active_menus [lreplace $active_menus $index $index]}
+}
+
+proc update_active {} {
+	global active_menus total_menus
+	set max 0
+	if {[llength $active_menus] > 0} then {
+		set max [lindex $active_menus end]
+		update_define [toplevel_menu [lindex $active_menus 0]] $max 0
+	}
+	foreach i $active_menus {
+		if {[winfo exists .menu$i] == 0} then {
+			unregister_active $i
+		} else {
+			update_menu$i
+		}
+	}
+	update_define [expr $max + 1] $total_menus 1
+	update_mainmenu
+}
+
+proc configure_entry {w option items} {
+	foreach i $items {
+		$w.$i configure -state $option
+	}
+}
+
+proc validate_int {name val default} {
+	if {([exec echo $val | sed s/^-//g | tr -d \[:digit:\] ] != "")} then {
+		global $name; set $name $default
+	}
+}
+
+proc validate_hex {name val default} {
+	if {([exec echo $val | tr -d \[:xdigit:\] ] != "")} then {
+		global $name; set $name $default
+	}
+}
+
+proc update_define {first last allow_update} {
+	for {set i $first} {$i <= $last} {incr i} {
+		update_define_menu$i
+		if {$allow_update == 1} then update
+	}
+}
+
+#
+# Next set up the particulars for the top level menu, and define a few
+# buttons which we will stick down at the bottom.
+#
+
+frame .f0 
+frame .f0.left
+frame .f0.middle
+frame .f0.right
+
+set active_menus [list]
+set processed_top_level 0
+set ARCH sparc
+set menus_per_column 4
+set total_menus 23
+
+proc toplevel_menu {num} {
+	if {$num == 4} then {return 3}
+	if {$num == 5} then {return 3}
+	if {$num == 6} then {return 3}
+	if {$num == 7} then {return 3}
+	if {$num == 8} then {return 3}
+	if {$num == 9} then {return 3}
+	if {$num == 10} then {return 3}
+	if {$num == 14} then {return 13}
+	if {$num == 15} then {return 14}
+	if {$num == 16} then {return 14}
+	if {$num == 17} then {return 13}
+	if {$num == 18} then {return 13}
+	if {$num == 19} then {return 13}
+	if {$num == 20} then {return 13}
+	if {$num == 21} then {return 13}
+	if {$num == 22} then {return 13}
+	return $num
+}
+
+mainmenu_name "LEON3MP Design Configuration"
+menu_option menu1 1 "Synthesis      "
+proc menu1 {w title} {
+	set oldFocus [focus]
+	catch {destroy $w; unregister_active 1}
+	toplevel $w -class Dialog
+	wm withdraw $w
+	global active_menus
+	set active_menus [lsort -integer [linsert $active_menus end 1]]
+	message $w.m -width 400 -aspect 300 -text \
+		"Synthesis      "  -relief raised
+	pack $w.m -pady 10 -side top -padx 10
+	wm title $w "Synthesis      " 
+
+	bind $w <Escape> "catch {focus $oldFocus}; destroy $w; unregister_active 1; break"
+	set nextscript "catch {focus $oldFocus}; destroy $w; unregister_active 1; menu2 .menu2 \"$title\""
+	frame $w.f
+	button $w.f.back -text "Main Menu" \
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 1"
+	button $w.f.next -text "Next" -underline 0\
+		-width 15 -command $nextscript
+	bind all <Alt-n> $nextscript
+	button $w.f.prev -text "Prev" -underline 0\
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 1; menu0 .menu0 \"$title\""
+	$w.f.prev configure -state disabled
+	pack $w.f.back $w.f.next $w.f.prev -side left -expand on
+	pack $w.f -pady 10 -side bottom -anchor w -fill x
+	frame $w.topline -relief ridge -borderwidth 2 -height 2
+	pack $w.topline -side top -fill x
+
+	frame $w.botline -relief ridge -borderwidth 2 -height 2
+	pack $w.botline -side bottom -fill x
+
+	frame $w.config
+	pack $w.config -fill y -expand on
+
+	scrollbar $w.config.vscroll -command "$w.config.canvas yview"
+	pack $w.config.vscroll -side right -fill y
+
+	canvas $w.config.canvas -height 1\
+		-relief flat -borderwidth 0 -yscrollcommand "$w.config.vscroll set" \
+		-width [expr [winfo screenwidth .] * 1 / 2] 
+	frame $w.config.f
+	bind $w <Key-Down> "$w.config.canvas yview scroll  1 unit;break;"
+	bind $w <Key-Up> "$w.config.canvas yview scroll  -1 unit;break;"
+	bind $w <Key-Next> "$w.config.canvas yview scroll  1 page;break;"
+	bind $w <Key-Prior> "$w.config.canvas yview scroll  -1 page;break;"
+	bind $w <Key-Home> "$w.config.canvas yview moveto 0;break;"
+	bind $w <Key-End> "$w.config.canvas yview moveto 1 ;break;"
+	pack $w.config.canvas -side right -fill y
+
+
+	global tmpvar_0
+	minimenu $w.config.f 1 0 "Target technology                           " tmpvar_0 CONFIG_SYN_INFERRED
+	menu $w.config.f.x0.x.menu -tearoffcommand "menutitle \"Target technology                           \""
+	$w.config.f.x0.x.menu add radiobutton -label "Inferred" -variable tmpvar_0 -value "Inferred" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "Altera-Stratix" -variable tmpvar_0 -value "Altera-Stratix" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "Altera-StratixII" -variable tmpvar_0 -value "Altera-StratixII" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "Altera-StratixIII" -variable tmpvar_0 -value "Altera-StratixIII" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "Altera-StratixIV" -variable tmpvar_0 -value "Altera-StratixIV" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "Altera-CycloneIII" -variable tmpvar_0 -value "Altera-CycloneIII" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "Altera-Others" -variable tmpvar_0 -value "Altera-Others" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "Actel-Axcelerator" -variable tmpvar_0 -value "Actel-Axcelerator" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "Actel-Axcelerator-DSP" -variable tmpvar_0 -value "Actel-Axcelerator-DSP" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "Actel-Proasic" -variable tmpvar_0 -value "Actel-Proasic" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "Actel-ProasicPlus" -variable tmpvar_0 -value "Actel-ProasicPlus" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "Actel-Proasic3" -variable tmpvar_0 -value "Actel-Proasic3" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "Actel-Proasic3E" -variable tmpvar_0 -value "Actel-Proasic3E" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "Actel-Proasic3L" -variable tmpvar_0 -value "Actel-Proasic3L" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "Actel-IGLOO/p/L" -variable tmpvar_0 -value "Actel-IGLOO/p/L" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "Actel-Fusion" -variable tmpvar_0 -value "Actel-Fusion" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "Aeroflex-UT025CRH" -variable tmpvar_0 -value "Aeroflex-UT025CRH" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "Aeroflex-UT130HBD" -variable tmpvar_0 -value "Aeroflex-UT130HBD" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "Aeroflex-UT90NHBD" -variable tmpvar_0 -value "Aeroflex-UT90NHBD" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "Atmel-ATC18" -variable tmpvar_0 -value "Atmel-ATC18" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "Atmel-ATC18RHA" -variable tmpvar_0 -value "Atmel-ATC18RHA" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "IBM-CMOS9SF" -variable tmpvar_0 -value "IBM-CMOS9SF" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "Custom1" -variable tmpvar_0 -value "Custom1" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "eASIC90" -variable tmpvar_0 -value "eASIC90" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "eASIC45" -variable tmpvar_0 -value "eASIC45" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "IHP25" -variable tmpvar_0 -value "IHP25" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "IHP25RH" -variable tmpvar_0 -value "IHP25RH" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "Lattice-EC/ECP/XP" -variable tmpvar_0 -value "Lattice-EC/ECP/XP" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "Quicklogic-Eclipse" -variable tmpvar_0 -value "Quicklogic-Eclipse" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "Peregrine" -variable tmpvar_0 -value "Peregrine" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "RH-LIB18T" -variable tmpvar_0 -value "RH-LIB18T" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "RH-UMC" -variable tmpvar_0 -value "RH-UMC" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "SAED32" -variable tmpvar_0 -value "SAED32" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "DARE" -variable tmpvar_0 -value "DARE" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "SMIC130" -variable tmpvar_0 -value "SMIC130" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "TM65Gplus" -variable tmpvar_0 -value "TM65Gplus" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "TSMC90" -variable tmpvar_0 -value "TSMC90" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "UMC180" -variable tmpvar_0 -value "UMC180" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "Xilinx-Artix7" -variable tmpvar_0 -value "Xilinx-Artix7" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "Xilinx-Kintex7" -variable tmpvar_0 -value "Xilinx-Kintex7" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "Xilinx-Spartan3" -variable tmpvar_0 -value "Xilinx-Spartan3" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "Xilinx-Spartan3E" -variable tmpvar_0 -value "Xilinx-Spartan3E" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "Xilinx-Spartan6" -variable tmpvar_0 -value "Xilinx-Spartan6" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "Xilinx-VirtexE" -variable tmpvar_0 -value "Xilinx-VirtexE" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "Xilinx-Virtex2" -variable tmpvar_0 -value "Xilinx-Virtex2" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "Xilinx-Virtex4" -variable tmpvar_0 -value "Xilinx-Virtex4" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "Xilinx-Virtex5" -variable tmpvar_0 -value "Xilinx-Virtex5" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "Xilinx-Virtex6" -variable tmpvar_0 -value "Xilinx-Virtex6" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "Xilinx-Virtex7" -variable tmpvar_0 -value "Xilinx-Virtex7" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "Xilinx-Zynq7000" -variable tmpvar_0 -value "Xilinx-Zynq7000" -command "update_active"
+	menusplit $w $w.config.f.x0.x.menu 50
+	global tmpvar_1
+	minimenu $w.config.f 1 1 "Memory Library                           " tmpvar_1 CONFIG_MEM_INFERRED
+	menu $w.config.f.x1.x.menu -tearoffcommand "menutitle \"Memory Library                           \""
+	$w.config.f.x1.x.menu add radiobutton -label "Inferred" -variable tmpvar_1 -value "Inferred" -command "update_active"
+	$w.config.f.x1.x.menu add radiobutton -label "UMC18" -variable tmpvar_1 -value "UMC18" -command "update_active"
+	$w.config.f.x1.x.menu add radiobutton -label "RH-UMC" -variable tmpvar_1 -value "RH-UMC" -command "update_active"
+	$w.config.f.x1.x.menu add radiobutton -label "SAED32" -variable tmpvar_1 -value "SAED32" -command "update_active"
+	$w.config.f.x1.x.menu add radiobutton -label "DARE" -variable tmpvar_1 -value "DARE" -command "update_active"
+	$w.config.f.x1.x.menu add radiobutton -label "Artisan" -variable tmpvar_1 -value "Artisan" -command "update_active"
+	$w.config.f.x1.x.menu add radiobutton -label "Custom1" -variable tmpvar_1 -value "Custom1" -command "update_active"
+	$w.config.f.x1.x.menu add radiobutton -label "EASIC45" -variable tmpvar_1 -value "EASIC45" -command "update_active"
+	$w.config.f.x1.x.menu add radiobutton -label "Virage" -variable tmpvar_1 -value "Virage" -command "update_active"
+	$w.config.f.x1.x.menu add radiobutton -label "Virage-TSMC90" -variable tmpvar_1 -value "Virage-TSMC90" -command "update_active"
+	menusplit $w $w.config.f.x1.x.menu 10
+	bool $w.config.f 1 2 "Infer RAM" CONFIG_SYN_INFER_RAM
+	bool $w.config.f 1 3 "Infer pads" CONFIG_SYN_INFER_PADS
+	bool $w.config.f 1 4 "Disable asynchronous reset" CONFIG_SYN_NO_ASYNC
+	bool $w.config.f 1 5 "Enable scan support       " CONFIG_SYN_SCAN
+
+
+
+	focus $w
+	update_active
+	global winx; global winy
+	set winx [expr [winfo x .]+30]; set winy [expr [winfo y .]+30]
+	if {[winfo exists $w]} then {wm geometry $w +$winx+$winy}
+	update idletasks
+	if {[winfo exists $w]} then  {$w.config.canvas create window 0 0 -anchor nw -window $w.config.f
+
+	$w.config.canvas configure \
+		-width [expr [winfo reqwidth $w.config.f] + 1]\
+		-scrollregion "-1 -1 [expr [winfo reqwidth $w.config.f] + 1] \
+			 [expr [winfo reqheight $w.config.f] + 1]"
+
+	set winy [expr [winfo reqh $w] - [winfo reqh $w.config.canvas]]
+	set scry [expr [winfo screenh $w] / 2]
+	set maxy [expr [winfo screenh $w] * 3 / 4]
+	set canvtotal [expr [winfo reqh $w.config.f] + 2]
+	if [expr $winy + $canvtotal < $maxy] {
+		$w.config.canvas configure -height $canvtotal
+	} else {
+		$w.config.canvas configure -height [expr $scry - $winy]
+		}
+	}
+	update idletasks
+	if {[winfo exists $w]} then {
+	wm maxsize $w [winfo width $w] [winfo screenheight $w]
+	wm minsize $w [winfo width $w] 100
+
+	wm deiconify $w
+}
+}
+
+proc update_menu1 {} {
+	global CONFIG_SYN_INFERRED
+	global CONFIG_SYN_CUSTOM1
+	global CONFIG_SYN_ATC18
+	global CONFIG_SYN_TSMC90
+	global CONFIG_SYN_EASIC45
+	global CONFIG_SYN_UMC
+	global CONFIG_SYN_RHUMC
+	global CONFIG_SYN_DARE
+	global CONFIG_SYN_SAED32
+	global CONFIG_SYN_ARTISAN
+	if {($CONFIG_SYN_INFERRED == 1 || $CONFIG_SYN_CUSTOM1 == 1 || $CONFIG_SYN_ATC18 == 1 || $CONFIG_SYN_TSMC90 == 1 || $CONFIG_SYN_EASIC45 == 1 || $CONFIG_SYN_UMC == 1 || $CONFIG_SYN_RHUMC == 1 || $CONFIG_SYN_DARE == 1 || $CONFIG_SYN_SAED32 == 1 || $CONFIG_SYN_ARTISAN == 1)} then {configure_entry .menu1.config.f.x1 normal {x l}} else {configure_entry .menu1.config.f.x1 disabled {x l}}
+	global CONFIG_SYN_INFER_RAM
+	if {($CONFIG_SYN_INFERRED != 1)} then {
+	configure_entry .menu1.config.f.x2 normal {n l y}} else {configure_entry .menu1.config.f.x2 disabled {y n l}}
+	global CONFIG_SYN_INFER_PADS
+	if {($CONFIG_SYN_INFERRED != 1)} then {
+	configure_entry .menu1.config.f.x3 normal {n l y}} else {configure_entry .menu1.config.f.x3 disabled {y n l}}
+}
+
+
+proc update_define_menu1 {} {
+	update_define_mainmenu
+	global CONFIG_MODULES
+	global tmpvar_0
+	global CONFIG_SYN_INFERRED
+	if {$tmpvar_0 == "Inferred"} then {set CONFIG_SYN_INFERRED 1} else {set CONFIG_SYN_INFERRED 0}
+	global CONFIG_SYN_STRATIX
+	if {$tmpvar_0 == "Altera-Stratix"} then {set CONFIG_SYN_STRATIX 1} else {set CONFIG_SYN_STRATIX 0}
+	global CONFIG_SYN_STRATIXII
+	if {$tmpvar_0 == "Altera-StratixII"} then {set CONFIG_SYN_STRATIXII 1} else {set CONFIG_SYN_STRATIXII 0}
+	global CONFIG_SYN_STRATIXIII
+	if {$tmpvar_0 == "Altera-StratixIII"} then {set CONFIG_SYN_STRATIXIII 1} else {set CONFIG_SYN_STRATIXIII 0}
+	global CONFIG_SYN_STRATIXIV
+	if {$tmpvar_0 == "Altera-StratixIV"} then {set CONFIG_SYN_STRATIXIV 1} else {set CONFIG_SYN_STRATIXIV 0}
+	global CONFIG_SYN_CYCLONEIII
+	if {$tmpvar_0 == "Altera-CycloneIII"} then {set CONFIG_SYN_CYCLONEIII 1} else {set CONFIG_SYN_CYCLONEIII 0}
+	global CONFIG_SYN_ALTERA
+	if {$tmpvar_0 == "Altera-Others"} then {set CONFIG_SYN_ALTERA 1} else {set CONFIG_SYN_ALTERA 0}
+	global CONFIG_SYN_AXCEL
+	if {$tmpvar_0 == "Actel-Axcelerator"} then {set CONFIG_SYN_AXCEL 1} else {set CONFIG_SYN_AXCEL 0}
+	global CONFIG_SYN_AXDSP
+	if {$tmpvar_0 == "Actel-Axcelerator-DSP"} then {set CONFIG_SYN_AXDSP 1} else {set CONFIG_SYN_AXDSP 0}
+	global CONFIG_SYN_PROASIC
+	if {$tmpvar_0 == "Actel-Proasic"} then {set CONFIG_SYN_PROASIC 1} else {set CONFIG_SYN_PROASIC 0}
+	global CONFIG_SYN_PROASICPLUS
+	if {$tmpvar_0 == "Actel-ProasicPlus"} then {set CONFIG_SYN_PROASICPLUS 1} else {set CONFIG_SYN_PROASICPLUS 0}
+	global CONFIG_SYN_PROASIC3
+	if {$tmpvar_0 == "Actel-Proasic3"} then {set CONFIG_SYN_PROASIC3 1} else {set CONFIG_SYN_PROASIC3 0}
+	global CONFIG_SYN_PROASIC3E
+	if {$tmpvar_0 == "Actel-Proasic3E"} then {set CONFIG_SYN_PROASIC3E 1} else {set CONFIG_SYN_PROASIC3E 0}
+	global CONFIG_SYN_PROASIC3L
+	if {$tmpvar_0 == "Actel-Proasic3L"} then {set CONFIG_SYN_PROASIC3L 1} else {set CONFIG_SYN_PROASIC3L 0}
+	global CONFIG_SYN_IGLOO
+	if {$tmpvar_0 == "Actel-IGLOO/p/L"} then {set CONFIG_SYN_IGLOO 1} else {set CONFIG_SYN_IGLOO 0}
+	global CONFIG_SYN_FUSION
+	if {$tmpvar_0 == "Actel-Fusion"} then {set CONFIG_SYN_FUSION 1} else {set CONFIG_SYN_FUSION 0}
+	global CONFIG_SYN_UT025CRH
+	if {$tmpvar_0 == "Aeroflex-UT025CRH"} then {set CONFIG_SYN_UT025CRH 1} else {set CONFIG_SYN_UT025CRH 0}
+	global CONFIG_SYN_UT130HBD
+	if {$tmpvar_0 == "Aeroflex-UT130HBD"} then {set CONFIG_SYN_UT130HBD 1} else {set CONFIG_SYN_UT130HBD 0}
+	global CONFIG_SYN_UT90NHBD
+	if {$tmpvar_0 == "Aeroflex-UT90NHBD"} then {set CONFIG_SYN_UT90NHBD 1} else {set CONFIG_SYN_UT90NHBD 0}
+	global CONFIG_SYN_ATC18
+	if {$tmpvar_0 == "Atmel-ATC18"} then {set CONFIG_SYN_ATC18 1} else {set CONFIG_SYN_ATC18 0}
+	global CONFIG_SYN_ATC18RHA
+	if {$tmpvar_0 == "Atmel-ATC18RHA"} then {set CONFIG_SYN_ATC18RHA 1} else {set CONFIG_SYN_ATC18RHA 0}
+	global CONFIG_SYN_CMOS9SF
+	if {$tmpvar_0 == "IBM-CMOS9SF"} then {set CONFIG_SYN_CMOS9SF 1} else {set CONFIG_SYN_CMOS9SF 0}
+	global CONFIG_SYN_CUSTOM1
+	if {$tmpvar_0 == "Custom1"} then {set CONFIG_SYN_CUSTOM1 1} else {set CONFIG_SYN_CUSTOM1 0}
+	global CONFIG_SYN_EASIC90
+	if {$tmpvar_0 == "eASIC90"} then {set CONFIG_SYN_EASIC90 1} else {set CONFIG_SYN_EASIC90 0}
+	global CONFIG_SYN_EASIC45
+	if {$tmpvar_0 == "eASIC45"} then {set CONFIG_SYN_EASIC45 1} else {set CONFIG_SYN_EASIC45 0}
+	global CONFIG_SYN_IHP25
+	if {$tmpvar_0 == "IHP25"} then {set CONFIG_SYN_IHP25 1} else {set CONFIG_SYN_IHP25 0}
+	global CONFIG_SYN_IHP25RH
+	if {$tmpvar_0 == "IHP25RH"} then {set CONFIG_SYN_IHP25RH 1} else {set CONFIG_SYN_IHP25RH 0}
+	global CONFIG_SYN_LATTICE
+	if {$tmpvar_0 == "Lattice-EC/ECP/XP"} then {set CONFIG_SYN_LATTICE 1} else {set CONFIG_SYN_LATTICE 0}
+	global CONFIG_SYN_ECLIPSE
+	if {$tmpvar_0 == "Quicklogic-Eclipse"} then {set CONFIG_SYN_ECLIPSE 1} else {set CONFIG_SYN_ECLIPSE 0}
+	global CONFIG_SYN_PEREGRINE
+	if {$tmpvar_0 == "Peregrine"} then {set CONFIG_SYN_PEREGRINE 1} else {set CONFIG_SYN_PEREGRINE 0}
+	global CONFIG_SYN_RH_LIB18T
+	if {$tmpvar_0 == "RH-LIB18T"} then {set CONFIG_SYN_RH_LIB18T 1} else {set CONFIG_SYN_RH_LIB18T 0}
+	global CONFIG_SYN_RHUMC
+	if {$tmpvar_0 == "RH-UMC"} then {set CONFIG_SYN_RHUMC 1} else {set CONFIG_SYN_RHUMC 0}
+	global CONFIG_SYN_SAED32
+	if {$tmpvar_0 == "SAED32"} then {set CONFIG_SYN_SAED32 1} else {set CONFIG_SYN_SAED32 0}
+	global CONFIG_SYN_DARE
+	if {$tmpvar_0 == "DARE"} then {set CONFIG_SYN_DARE 1} else {set CONFIG_SYN_DARE 0}
+	global CONFIG_SYN_SMIC13
+	if {$tmpvar_0 == "SMIC130"} then {set CONFIG_SYN_SMIC13 1} else {set CONFIG_SYN_SMIC13 0}
+	global CONFIG_SYN_TM65GPLUS
+	if {$tmpvar_0 == "TM65Gplus"} then {set CONFIG_SYN_TM65GPLUS 1} else {set CONFIG_SYN_TM65GPLUS 0}
+	global CONFIG_SYN_TSMC90
+	if {$tmpvar_0 == "TSMC90"} then {set CONFIG_SYN_TSMC90 1} else {set CONFIG_SYN_TSMC90 0}
+	global CONFIG_SYN_UMC
+	if {$tmpvar_0 == "UMC180"} then {set CONFIG_SYN_UMC 1} else {set CONFIG_SYN_UMC 0}
+	global CONFIG_SYN_ARTIX7
+	if {$tmpvar_0 == "Xilinx-Artix7"} then {set CONFIG_SYN_ARTIX7 1} else {set CONFIG_SYN_ARTIX7 0}
+	global CONFIG_SYN_KINTEX7
+	if {$tmpvar_0 == "Xilinx-Kintex7"} then {set CONFIG_SYN_KINTEX7 1} else {set CONFIG_SYN_KINTEX7 0}
+	global CONFIG_SYN_SPARTAN3
+	if {$tmpvar_0 == "Xilinx-Spartan3"} then {set CONFIG_SYN_SPARTAN3 1} else {set CONFIG_SYN_SPARTAN3 0}
+	global CONFIG_SYN_SPARTAN3E
+	if {$tmpvar_0 == "Xilinx-Spartan3E"} then {set CONFIG_SYN_SPARTAN3E 1} else {set CONFIG_SYN_SPARTAN3E 0}
+	global CONFIG_SYN_SPARTAN6
+	if {$tmpvar_0 == "Xilinx-Spartan6"} then {set CONFIG_SYN_SPARTAN6 1} else {set CONFIG_SYN_SPARTAN6 0}
+	global CONFIG_SYN_VIRTEXE
+	if {$tmpvar_0 == "Xilinx-VirtexE"} then {set CONFIG_SYN_VIRTEXE 1} else {set CONFIG_SYN_VIRTEXE 0}
+	global CONFIG_SYN_VIRTEX2
+	if {$tmpvar_0 == "Xilinx-Virtex2"} then {set CONFIG_SYN_VIRTEX2 1} else {set CONFIG_SYN_VIRTEX2 0}
+	global CONFIG_SYN_VIRTEX4
+	if {$tmpvar_0 == "Xilinx-Virtex4"} then {set CONFIG_SYN_VIRTEX4 1} else {set CONFIG_SYN_VIRTEX4 0}
+	global CONFIG_SYN_VIRTEX5
+	if {$tmpvar_0 == "Xilinx-Virtex5"} then {set CONFIG_SYN_VIRTEX5 1} else {set CONFIG_SYN_VIRTEX5 0}
+	global CONFIG_SYN_VIRTEX6
+	if {$tmpvar_0 == "Xilinx-Virtex6"} then {set CONFIG_SYN_VIRTEX6 1} else {set CONFIG_SYN_VIRTEX6 0}
+	global CONFIG_SYN_VIRTEX7
+	if {$tmpvar_0 == "Xilinx-Virtex7"} then {set CONFIG_SYN_VIRTEX7 1} else {set CONFIG_SYN_VIRTEX7 0}
+	global CONFIG_SYN_ZYNQ7000
+	if {$tmpvar_0 == "Xilinx-Zynq7000"} then {set CONFIG_SYN_ZYNQ7000 1} else {set CONFIG_SYN_ZYNQ7000 0}
+	global tmpvar_1
+	global CONFIG_MEM_INFERRED
+	if {$tmpvar_1 == "Inferred"} then {set CONFIG_MEM_INFERRED 1} else {set CONFIG_MEM_INFERRED 0}
+	global CONFIG_MEM_UMC
+	if {$tmpvar_1 == "UMC18"} then {set CONFIG_MEM_UMC 1} else {set CONFIG_MEM_UMC 0}
+	global CONFIG_MEM_RHUMC
+	if {$tmpvar_1 == "RH-UMC"} then {set CONFIG_MEM_RHUMC 1} else {set CONFIG_MEM_RHUMC 0}
+	global CONFIG_MEM_SAED32
+	if {$tmpvar_1 == "SAED32"} then {set CONFIG_MEM_SAED32 1} else {set CONFIG_MEM_SAED32 0}
+	global CONFIG_MEM_DARE
+	if {$tmpvar_1 == "DARE"} then {set CONFIG_MEM_DARE 1} else {set CONFIG_MEM_DARE 0}
+	global CONFIG_MEM_ARTISAN
+	if {$tmpvar_1 == "Artisan"} then {set CONFIG_MEM_ARTISAN 1} else {set CONFIG_MEM_ARTISAN 0}
+	global CONFIG_MEM_CUSTOM1
+	if {$tmpvar_1 == "Custom1"} then {set CONFIG_MEM_CUSTOM1 1} else {set CONFIG_MEM_CUSTOM1 0}
+	global CONFIG_MEM_EASIC45
+	if {$tmpvar_1 == "EASIC45"} then {set CONFIG_MEM_EASIC45 1} else {set CONFIG_MEM_EASIC45 0}
+	global CONFIG_MEM_VIRAGE
+	if {$tmpvar_1 == "Virage"} then {set CONFIG_MEM_VIRAGE 1} else {set CONFIG_MEM_VIRAGE 0}
+	global CONFIG_MEM_VIRAGE90
+	if {$tmpvar_1 == "Virage-TSMC90"} then {set CONFIG_MEM_VIRAGE90 1} else {set CONFIG_MEM_VIRAGE90 0}
+	global CONFIG_SYN_INFER_RAM
+	if {($CONFIG_SYN_INFERRED != 1)} then {
+	set CONFIG_SYN_INFER_RAM [expr $CONFIG_SYN_INFER_RAM&15]} else {set CONFIG_SYN_INFER_RAM [expr $CONFIG_SYN_INFER_RAM|16]}
+	global CONFIG_SYN_INFER_PADS
+	if {($CONFIG_SYN_INFERRED != 1)} then {
+	set CONFIG_SYN_INFER_PADS [expr $CONFIG_SYN_INFER_PADS&15]} else {set CONFIG_SYN_INFER_PADS [expr $CONFIG_SYN_INFER_PADS|16]}
+}
+
+
+menu_option menu2 2 "Clock generation"
+proc menu2 {w title} {
+	set oldFocus [focus]
+	catch {destroy $w; unregister_active 2}
+	toplevel $w -class Dialog
+	wm withdraw $w
+	global active_menus
+	set active_menus [lsort -integer [linsert $active_menus end 2]]
+	message $w.m -width 400 -aspect 300 -text \
+		"Clock generation"  -relief raised
+	pack $w.m -pady 10 -side top -padx 10
+	wm title $w "Clock generation" 
+
+	bind $w <Escape> "catch {focus $oldFocus}; destroy $w; unregister_active 2; break"
+	set nextscript "catch {focus $oldFocus}; destroy $w; unregister_active 2; menu3 .menu3 \"$title\""
+	frame $w.f
+	button $w.f.back -text "Main Menu" \
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 2"
+	button $w.f.next -text "Next" -underline 0\
+		-width 15 -command $nextscript
+	bind all <Alt-n> $nextscript
+	button $w.f.prev -text "Prev" -underline 0\
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 2; menu1 .menu1 \"$title\""
+	bind $w <Alt-p> "catch {focus $oldFocus}; destroy $w; unregister_active 2; menu1 .menu1 \"$title\";break"
+	pack $w.f.back $w.f.next $w.f.prev -side left -expand on
+	pack $w.f -pady 10 -side bottom -anchor w -fill x
+	frame $w.topline -relief ridge -borderwidth 2 -height 2
+	pack $w.topline -side top -fill x
+
+	frame $w.botline -relief ridge -borderwidth 2 -height 2
+	pack $w.botline -side bottom -fill x
+
+	frame $w.config
+	pack $w.config -fill y -expand on
+
+	scrollbar $w.config.vscroll -command "$w.config.canvas yview"
+	pack $w.config.vscroll -side right -fill y
+
+	canvas $w.config.canvas -height 1\
+		-relief flat -borderwidth 0 -yscrollcommand "$w.config.vscroll set" \
+		-width [expr [winfo screenwidth .] * 1 / 2] 
+	frame $w.config.f
+	bind $w <Key-Down> "$w.config.canvas yview scroll  1 unit;break;"
+	bind $w <Key-Up> "$w.config.canvas yview scroll  -1 unit;break;"
+	bind $w <Key-Next> "$w.config.canvas yview scroll  1 page;break;"
+	bind $w <Key-Prior> "$w.config.canvas yview scroll  -1 page;break;"
+	bind $w <Key-Home> "$w.config.canvas yview moveto 0;break;"
+	bind $w <Key-End> "$w.config.canvas yview moveto 1 ;break;"
+	pack $w.config.canvas -side right -fill y
+
+
+	global tmpvar_2
+	minimenu $w.config.f 2 0 "System clock frequency                         " tmpvar_2 CONFIG_FREQ60
+	menu $w.config.f.x0.x.menu -tearoffcommand "menutitle \"System clock frequency                         \""
+	$w.config.f.x0.x.menu add radiobutton -label "60MHz" -variable tmpvar_2 -value "60MHz" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "75MHz" -variable tmpvar_2 -value "75MHz" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "80MHz" -variable tmpvar_2 -value "80MHz" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "100MHz" -variable tmpvar_2 -value "100MHz" -command "update_active"
+	$w.config.f.x0.x.menu add radiobutton -label "120MHz" -variable tmpvar_2 -value "120MHz" -command "update_active"
+	menusplit $w $w.config.f.x0.x.menu 5
+
+
+
+	focus $w
+	update_active
+	global winx; global winy
+	set winx [expr [winfo x .]+30]; set winy [expr [winfo y .]+30]
+	if {[winfo exists $w]} then {wm geometry $w +$winx+$winy}
+	update idletasks
+	if {[winfo exists $w]} then  {$w.config.canvas create window 0 0 -anchor nw -window $w.config.f
+
+	$w.config.canvas configure \
+		-width [expr [winfo reqwidth $w.config.f] + 1]\
+		-scrollregion "-1 -1 [expr [winfo reqwidth $w.config.f] + 1] \
+			 [expr [winfo reqheight $w.config.f] + 1]"
+
+	set winy [expr [winfo reqh $w] - [winfo reqh $w.config.canvas]]
+	set scry [expr [winfo screenh $w] / 2]
+	set maxy [expr [winfo screenh $w] * 3 / 4]
+	set canvtotal [expr [winfo reqh $w.config.f] + 2]
+	if [expr $winy + $canvtotal < $maxy] {
+		$w.config.canvas configure -height $canvtotal
+	} else {
+		$w.config.canvas configure -height [expr $scry - $winy]
+		}
+	}
+	update idletasks
+	if {[winfo exists $w]} then {
+	wm maxsize $w [winfo width $w] [winfo screenheight $w]
+	wm minsize $w [winfo width $w] 100
+
+	wm deiconify $w
+}
+}
+
+proc update_menu2 {} {
+}
+
+
+proc update_define_menu2 {} {
+	update_define_mainmenu
+	global CONFIG_MODULES
+	global tmpvar_2
+	global CONFIG_FREQ60
+	if {$tmpvar_2 == "60MHz"} then {set CONFIG_FREQ60 1} else {set CONFIG_FREQ60 0}
+	global CONFIG_FREQ75
+	if {$tmpvar_2 == "75MHz"} then {set CONFIG_FREQ75 1} else {set CONFIG_FREQ75 0}
+	global CONFIG_FREQ80
+	if {$tmpvar_2 == "80MHz"} then {set CONFIG_FREQ80 1} else {set CONFIG_FREQ80 0}
+	global CONFIG_FREQ100
+	if {$tmpvar_2 == "100MHz"} then {set CONFIG_FREQ100 1} else {set CONFIG_FREQ100 0}
+	global CONFIG_FREQ120
+	if {$tmpvar_2 == "120MHz"} then {set CONFIG_FREQ120 1} else {set CONFIG_FREQ120 0}
+}
+
+
+menu_option menu3 3 "Processor            "
+proc menu3 {w title} {
+	set oldFocus [focus]
+	catch {destroy $w; unregister_active 3}
+	toplevel $w -class Dialog
+	wm withdraw $w
+	global active_menus
+	set active_menus [lsort -integer [linsert $active_menus end 3]]
+	message $w.m -width 400 -aspect 300 -text \
+		"Processor            "  -relief raised
+	pack $w.m -pady 10 -side top -padx 10
+	wm title $w "Processor            " 
+
+	bind $w <Escape> "catch {focus $oldFocus}; destroy $w; unregister_active 3; break"
+	set nextscript "catch {focus $oldFocus}; menu4 .menu4 \"$title\""
+	frame $w.f
+	button $w.f.back -text "Main Menu" \
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 3"
+	button $w.f.next -text "Next" -underline 0\
+		-width 15 -command $nextscript
+	bind all <Alt-n> $nextscript
+	button $w.f.prev -text "Prev" -underline 0\
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 3; menu2 .menu2 \"$title\""
+	bind $w <Alt-p> "catch {focus $oldFocus}; destroy $w; unregister_active 3; menu2 .menu2 \"$title\";break"
+	pack $w.f.back $w.f.next $w.f.prev -side left -expand on
+	pack $w.f -pady 10 -side bottom -anchor w -fill x
+	frame $w.topline -relief ridge -borderwidth 2 -height 2
+	pack $w.topline -side top -fill x
+
+	frame $w.botline -relief ridge -borderwidth 2 -height 2
+	pack $w.botline -side bottom -fill x
+
+	frame $w.config
+	pack $w.config -fill y -expand on
+
+	scrollbar $w.config.vscroll -command "$w.config.canvas yview"
+	pack $w.config.vscroll -side right -fill y
+
+	canvas $w.config.canvas -height 1\
+		-relief flat -borderwidth 0 -yscrollcommand "$w.config.vscroll set" \
+		-width [expr [winfo screenwidth .] * 1 / 2] 
+	frame $w.config.f
+	bind $w <Key-Down> "$w.config.canvas yview scroll  1 unit;break;"
+	bind $w <Key-Up> "$w.config.canvas yview scroll  -1 unit;break;"
+	bind $w <Key-Next> "$w.config.canvas yview scroll  1 page;break;"
+	bind $w <Key-Prior> "$w.config.canvas yview scroll  -1 page;break;"
+	bind $w <Key-Home> "$w.config.canvas yview moveto 0;break;"
+	bind $w <Key-End> "$w.config.canvas yview moveto 1 ;break;"
+	pack $w.config.canvas -side right -fill y
+
+
+	bool $w.config.f 3 0 "Enable LEON3 SPARC V8 Processor" CONFIG_LEON3
+	int $w.config.f 3 1 "Number of processors" CONFIG_PROC_NUM
+	global tmpvar_3
+	minimenu $w.config.f 3 2 "Force values from example configuration (see help)" tmpvar_3 CONFIG_LEON3_MIN
+	menu $w.config.f.x2.x.menu -tearoffcommand "menutitle \"Force values from example configuration (see help)\""
+	$w.config.f.x2.x.menu add radiobutton -label "Minimal-configuration" -variable tmpvar_3 -value "Minimal-configuration" -command "update_active"
+	$w.config.f.x2.x.menu add radiobutton -label "General-purpose-cfg" -variable tmpvar_3 -value "General-purpose-cfg" -command "update_active"
+	$w.config.f.x2.x.menu add radiobutton -label "High-Performance-cfg" -variable tmpvar_3 -value "High-Performance-cfg" -command "update_active"
+	$w.config.f.x2.x.menu add radiobutton -label "Custom-configuration" -variable tmpvar_3 -value "Custom-configuration" -command "update_active"
+	menusplit $w $w.config.f.x2.x.menu 4
+	submenu $w.config.f 3 3 "Integer unit                                           " 4
+	submenu $w.config.f 3 4 "Floating-point unit" 5
+	submenu $w.config.f 3 5 "Cache system" 6
+	submenu $w.config.f 3 6 "MMU" 7
+	submenu $w.config.f 3 7 "Debug Support Unit        " 8
+	submenu $w.config.f 3 8 "Fault-tolerance  " 9
+	submenu $w.config.f 3 9 "VHDL debug settings       " 10
+
+
+
+	focus $w
+	update_active
+	global winx; global winy
+	set winx [expr [winfo x .]+30]; set winy [expr [winfo y .]+30]
+	if {[winfo exists $w]} then {wm geometry $w +$winx+$winy}
+	update idletasks
+	if {[winfo exists $w]} then  {$w.config.canvas create window 0 0 -anchor nw -window $w.config.f
+
+	$w.config.canvas configure \
+		-width [expr [winfo reqwidth $w.config.f] + 1]\
+		-scrollregion "-1 -1 [expr [winfo reqwidth $w.config.f] + 1] \
+			 [expr [winfo reqheight $w.config.f] + 1]"
+
+	set winy [expr [winfo reqh $w] - [winfo reqh $w.config.canvas]]
+	set scry [expr [winfo screenh $w] / 2]
+	set maxy [expr [winfo screenh $w] * 3 / 4]
+	set canvtotal [expr [winfo reqh $w.config.f] + 2]
+	if [expr $winy + $canvtotal < $maxy] {
+		$w.config.canvas configure -height $canvtotal
+	} else {
+		$w.config.canvas configure -height [expr $scry - $winy]
+		}
+	}
+	update idletasks
+	if {[winfo exists $w]} then {
+	wm maxsize $w [winfo width $w] [winfo screenheight $w]
+	wm minsize $w [winfo width $w] 100
+
+	wm deiconify $w
+}
+}
+
+proc update_menu3 {} {
+	global CONFIG_LEON3
+	global CONFIG_PROC_NUM
+	if {($CONFIG_LEON3 == 1)} then {.menu3.config.f.x1.x configure -state normal -foreground [ cget .ref -foreground ]; .menu3.config.f.x1.l configure -state normal; } else {.menu3.config.f.x1.x configure -state disabled -foreground [ cget .ref -disabledforeground ]; .menu3.config.f.x1.l configure -state disabled}
+	if {($CONFIG_LEON3 == 1)} then {configure_entry .menu3.config.f.x2 normal {x l}} else {configure_entry .menu3.config.f.x2 disabled {x l}}
+	global CONFIG_LEON3_CUSTOM
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {configure_entry .menu3.config.f.x3 normal {m}} else {configure_entry .menu3.config.f.x3 disabled {m}}
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {configure_entry .menu3.config.f.x4 normal {m}} else {configure_entry .menu3.config.f.x4 disabled {m}}
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {configure_entry .menu3.config.f.x5 normal {m}} else {configure_entry .menu3.config.f.x5 disabled {m}}
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {configure_entry .menu3.config.f.x6 normal {m}} else {configure_entry .menu3.config.f.x6 disabled {m}}
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {configure_entry .menu3.config.f.x7 normal {m}} else {configure_entry .menu3.config.f.x7 disabled {m}}
+	if {($CONFIG_LEON3 == 1)} then {configure_entry .menu3.config.f.x8 normal {m}} else {configure_entry .menu3.config.f.x8 disabled {m}}
+	if {($CONFIG_LEON3 == 1)} then {configure_entry .menu3.config.f.x9 normal {m}} else {configure_entry .menu3.config.f.x9 disabled {m}}
+}
+
+
+proc update_define_menu3 {} {
+	update_define_mainmenu
+	global CONFIG_MODULES
+	global CONFIG_IU_NWINDOWS
+	global CONFIG_IU_V8MULDIV
+	global CONFIG_IU_BP
+	global CONFIG_IU_SVT
+	global CONFIG_NOTAG
+	global CONFIG_IU_LDELAY
+	global CONFIG_IU_WATCHPOINTS
+	global CONFIG_PWD
+	global CONFIG_IU_RSTADDR
+	global CONFIG_FPU_ENABLE
+	global CONFIG_ICACHE_ENABLE
+	global CONFIG_ICACHE_ASSO1
+	global CONFIG_ICACHE_SZ2
+	global CONFIG_ICACHE_LZ16
+	global CONFIG_ICACHE_ALGORND
+	global CONFIG_ICACHE_LOCK
+	global CONFIG_DCACHE_ENABLE
+	global CONFIG_DCACHE_ASSO1
+	global CONFIG_DCACHE_SZ2
+	global CONFIG_DCACHE_LZ16
+	global CONFIG_DCACHE_ALGORND
+	global CONFIG_DCACHE_LOCK
+	global CONFIG_DCACHE_SNOOP
+	global CONFIG_CACHE_FIXED
+	global CONFIG_MMU_ENABLE
+	global CONFIG_DSU_ENABLE
+	global CONFIG_IU_MUL_LATENCY_5
+	global CONFIG_IU_MUL_MAC
+	global CONFIG_ICACHE_ASSO2
+	global CONFIG_ICACHE_SZ4
+	global CONFIG_ICACHE_LRAM
+	global CONFIG_DCACHE_ASSO2
+	global CONFIG_DCACHE_SZ4
+	global CONFIG_DCACHE_SNOOP_FAST
+	global CONFIG_DCACHE_SNOOP_SEPTAG
+	global CONFIG_DCACHE_LRAM
+	global CONFIG_MMU_SPLIT
+	global CONFIG_MMU_REPARRAY
+	global CONFIG_MMU_I8
+	global CONFIG_MMU_D8
+	global CONFIG_MMU_FASTWB
+	global CONFIG_MMU_PAGE_4K
+	global CONFIG_DSU_ITRACE
+	global CONFIG_DSU_ITRACESZ4
+	global CONFIG_DSU_ATRACESZ4
+	global CONFIG_IU_MUL_LATENCY_2
+	global CONFIG_FPU_GRFPU
+	global CONFIG_FPU_GRFPU_INFMUL
+	global CONFIG_ICACHE_ALGOLRU
+	global CONFIG_DCACHE_ALGOLRU
+	global CONFIG_MMU_I16
+	global CONFIG_MMU_D16
+	global CONFIG_LEON3
+	global CONFIG_PROC_NUM
+	if {($CONFIG_LEON3 == 1)} then {validate_int CONFIG_PROC_NUM "$CONFIG_PROC_NUM" 1}
+	global tmpvar_3
+	global CONFIG_LEON3_MIN
+	if {$tmpvar_3 == "Minimal-configuration"} then {set CONFIG_LEON3_MIN 1} else {set CONFIG_LEON3_MIN 0}
+	global CONFIG_LEON3_GP
+	if {$tmpvar_3 == "General-purpose-cfg"} then {set CONFIG_LEON3_GP 1} else {set CONFIG_LEON3_GP 0}
+	global CONFIG_LEON3_HP
+	if {$tmpvar_3 == "High-Performance-cfg"} then {set CONFIG_LEON3_HP 1} else {set CONFIG_LEON3_HP 0}
+	global CONFIG_LEON3_CUSTOM
+	if {$tmpvar_3 == "Custom-configuration"} then {set CONFIG_LEON3_CUSTOM 1} else {set CONFIG_LEON3_CUSTOM 0}
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {set CONFIG_IU_NWINDOWS 8 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {	global CONSTANT_N
+set CONFIG_IU_V8MULDIV $CONSTANT_N }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {	global CONSTANT_N
+set CONFIG_IU_BP $CONSTANT_N }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {	global CONSTANT_Y
+set CONFIG_IU_SVT $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {	global CONSTANT_N
+set CONFIG_NOTAG $CONSTANT_N }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {set CONFIG_IU_LDELAY 1 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {set CONFIG_IU_WATCHPOINTS 0 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {	global CONSTANT_N
+set CONFIG_PWD $CONSTANT_N }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {set CONFIG_IU_RSTADDR 00000 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {	global CONSTANT_N
+set CONFIG_FPU_ENABLE $CONSTANT_N }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {	global CONSTANT_Y
+set CONFIG_ICACHE_ENABLE $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {	global CONSTANT_Y
+set CONFIG_ICACHE_ASSO1 $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {	global CONSTANT_Y
+set CONFIG_ICACHE_SZ2 $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {	global CONSTANT_Y
+set CONFIG_ICACHE_LZ16 $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {	global CONSTANT_Y
+set CONFIG_ICACHE_ALGORND $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {	global CONSTANT_N
+set CONFIG_ICACHE_LOCK $CONSTANT_N }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {	global CONSTANT_Y
+set CONFIG_DCACHE_ENABLE $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {	global CONSTANT_Y
+set CONFIG_DCACHE_ASSO1 $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {	global CONSTANT_Y
+set CONFIG_DCACHE_SZ2 $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {	global CONSTANT_Y
+set CONFIG_DCACHE_LZ16 $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {	global CONSTANT_Y
+set CONFIG_DCACHE_ALGORND $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {	global CONSTANT_N
+set CONFIG_DCACHE_LOCK $CONSTANT_N }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {	global CONSTANT_N
+set CONFIG_DCACHE_SNOOP $CONSTANT_N }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {set CONFIG_CACHE_FIXED 0 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {	global CONSTANT_N
+set CONFIG_MMU_ENABLE $CONSTANT_N }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {	global CONSTANT_N
+set CONFIG_DSU_ENABLE $CONSTANT_N }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {set CONFIG_IU_NWINDOWS 8 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {	global CONSTANT_Y
+set CONFIG_IU_V8MULDIV $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {	global CONSTANT_Y
+set CONFIG_IU_MUL_LATENCY_5 $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {	global CONSTANT_N
+set CONFIG_IU_MUL_MAC $CONSTANT_N }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {	global CONSTANT_Y
+set CONFIG_IU_BP $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {	global CONSTANT_Y
+set CONFIG_IU_SVT $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {	global CONSTANT_N
+set CONFIG_NOTAG $CONSTANT_N }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {set CONFIG_IU_LDELAY 1 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {set CONFIG_IU_WATCHPOINTS 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {	global CONSTANT_Y
+set CONFIG_PWD $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {set CONFIG_IU_RSTADDR 00000 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {	global CONSTANT_N
+set CONFIG_FPU_ENABLE $CONSTANT_N }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {	global CONSTANT_Y
+set CONFIG_ICACHE_ENABLE $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {	global CONSTANT_Y
+set CONFIG_ICACHE_ASSO2 $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {	global CONSTANT_Y
+set CONFIG_ICACHE_SZ4 $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {	global CONSTANT_Y
+set CONFIG_ICACHE_LZ16 $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {	global CONSTANT_Y
+set CONFIG_ICACHE_ALGORND $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {	global CONSTANT_N
+set CONFIG_ICACHE_LOCK $CONSTANT_N }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {	global CONSTANT_N
+set CONFIG_ICACHE_LRAM $CONSTANT_N }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {	global CONSTANT_Y
+set CONFIG_DCACHE_ENABLE $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {	global CONSTANT_Y
+set CONFIG_DCACHE_ASSO2 $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {	global CONSTANT_Y
+set CONFIG_DCACHE_SZ4 $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {	global CONSTANT_Y
+set CONFIG_DCACHE_LZ16 $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {	global CONSTANT_Y
+set CONFIG_DCACHE_ALGORND $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {	global CONSTANT_N
+set CONFIG_DCACHE_LOCK $CONSTANT_N }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {	global CONSTANT_Y
+set CONFIG_DCACHE_SNOOP $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {	global CONSTANT_Y
+set CONFIG_DCACHE_SNOOP_FAST $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {	global CONSTANT_Y
+set CONFIG_DCACHE_SNOOP_SEPTAG $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {set CONFIG_CACHE_FIXED 0 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {	global CONSTANT_N
+set CONFIG_DCACHE_LRAM $CONSTANT_N }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {	global CONSTANT_Y
+set CONFIG_MMU_ENABLE $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {	global CONSTANT_Y
+set CONFIG_MMU_SPLIT $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {	global CONSTANT_Y
+set CONFIG_MMU_REPARRAY $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {	global CONSTANT_Y
+set CONFIG_MMU_I8 $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {	global CONSTANT_Y
+set CONFIG_MMU_D8 $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {	global CONSTANT_Y
+set CONFIG_MMU_FASTWB $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {	global CONSTANT_Y
+set CONFIG_MMU_PAGE_4K $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {	global CONSTANT_Y
+set CONFIG_DSU_ENABLE $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {	global CONSTANT_Y
+set CONFIG_DSU_ITRACE $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {	global CONSTANT_Y
+set CONFIG_DSU_ITRACESZ4 $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {	global CONSTANT_Y
+set CONFIG_DSU_ATRACESZ4 $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {set CONFIG_IU_NWINDOWS 8 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {	global CONSTANT_Y
+set CONFIG_IU_V8MULDIV $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {	global CONSTANT_Y
+set CONFIG_IU_MUL_LATENCY_2 $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {	global CONSTANT_N
+set CONFIG_IU_MUL_MAC $CONSTANT_N }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {	global CONSTANT_Y
+set CONFIG_IU_BP $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {	global CONSTANT_Y
+set CONFIG_IU_SVT $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {	global CONSTANT_N
+set CONFIG_NOTAG $CONSTANT_N }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {set CONFIG_IU_LDELAY 1 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {set CONFIG_IU_WATCHPOINTS 4 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {	global CONSTANT_Y
+set CONFIG_PWD $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {set CONFIG_IU_RSTADDR 00000 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {	global CONSTANT_Y
+set CONFIG_FPU_ENABLE $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {	global CONSTANT_Y
+set CONFIG_FPU_GRFPU $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {	global CONSTANT_Y
+set CONFIG_FPU_GRFPU_INFMUL $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {	global CONSTANT_Y
+set CONFIG_ICACHE_ENABLE $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {	global CONSTANT_Y
+set CONFIG_ICACHE_ASSO2 $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {	global CONSTANT_Y
+set CONFIG_ICACHE_SZ4 $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {	global CONSTANT_Y
+set CONFIG_ICACHE_LZ16 $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {	global CONSTANT_Y
+set CONFIG_ICACHE_ALGOLRU $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {	global CONSTANT_N
+set CONFIG_ICACHE_LOCK $CONSTANT_N }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {	global CONSTANT_N
+set CONFIG_ICACHE_LRAM $CONSTANT_N }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {	global CONSTANT_Y
+set CONFIG_DCACHE_ENABLE $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {	global CONSTANT_Y
+set CONFIG_DCACHE_ASSO2 $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {	global CONSTANT_Y
+set CONFIG_DCACHE_SZ4 $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {	global CONSTANT_Y
+set CONFIG_DCACHE_LZ16 $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {	global CONSTANT_Y
+set CONFIG_DCACHE_ALGOLRU $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {	global CONSTANT_N
+set CONFIG_DCACHE_LOCK $CONSTANT_N }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {	global CONSTANT_Y
+set CONFIG_DCACHE_SNOOP $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {	global CONSTANT_Y
+set CONFIG_DCACHE_SNOOP_FAST $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {	global CONSTANT_Y
+set CONFIG_DCACHE_SNOOP_SEPTAG $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {set CONFIG_CACHE_FIXED 0 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {	global CONSTANT_N
+set CONFIG_DCACHE_LRAM $CONSTANT_N }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {	global CONSTANT_Y
+set CONFIG_MMU_ENABLE $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {	global CONSTANT_Y
+set CONFIG_MMU_SPLIT $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {	global CONSTANT_Y
+set CONFIG_MMU_REPARRAY $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {	global CONSTANT_Y
+set CONFIG_MMU_I16 $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {	global CONSTANT_Y
+set CONFIG_MMU_D16 $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {	global CONSTANT_Y
+set CONFIG_MMU_FASTWB $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {	global CONSTANT_Y
+set CONFIG_MMU_PAGE_4K $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {	global CONSTANT_Y
+set CONFIG_DSU_ENABLE $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {	global CONSTANT_Y
+set CONFIG_DSU_ITRACE $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {	global CONSTANT_Y
+set CONFIG_DSU_ITRACESZ4 $CONSTANT_Y }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {	global CONSTANT_Y
+set CONFIG_DSU_ATRACESZ4 $CONSTANT_Y }
+}
+
+
+proc menu4 {w title} {
+	set oldFocus [focus]
+	catch {focus .menu3}
+	catch {destroy $w; unregister_active 4}
+	toplevel $w -class Dialog
+	wm withdraw $w
+	global active_menus
+	set active_menus [lsort -integer [linsert $active_menus end 4]]
+	message $w.m -width 400 -aspect 300 -text \
+		"Integer unit                                           "  -relief raised
+	pack $w.m -pady 10 -side top -padx 10
+	wm title $w "Integer unit                                           " 
+
+	bind $w <Escape> "catch {focus $oldFocus}; destroy $w; unregister_active 4; break"
+	set nextscript "catch {focus $oldFocus}; destroy $w; unregister_active 4; menu5 .menu5 \"$title\""
+	frame $w.f
+	button $w.f.back -text "OK" \
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 4"
+	button $w.f.next -text "Next" -underline 0\
+		-width 15 -command $nextscript
+	bind all <Alt-n> $nextscript
+	button $w.f.prev -text "Prev" -underline 0\
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 4; menu3 .menu3 \"$title\""
+	bind $w <Alt-p> "catch {focus $oldFocus}; destroy $w; unregister_active 4; menu3 .menu3 \"$title\";break"
+	pack $w.f.back $w.f.next $w.f.prev -side left -expand on
+	pack $w.f -pady 10 -side bottom -anchor w -fill x
+	frame $w.topline -relief ridge -borderwidth 2 -height 2
+	pack $w.topline -side top -fill x
+
+	frame $w.botline -relief ridge -borderwidth 2 -height 2
+	pack $w.botline -side bottom -fill x
+
+	frame $w.config
+	pack $w.config -fill y -expand on
+
+	scrollbar $w.config.vscroll -command "$w.config.canvas yview"
+	pack $w.config.vscroll -side right -fill y
+
+	canvas $w.config.canvas -height 1\
+		-relief flat -borderwidth 0 -yscrollcommand "$w.config.vscroll set" \
+		-width [expr [winfo screenwidth .] * 1 / 2] 
+	frame $w.config.f
+	bind $w <Key-Down> "$w.config.canvas yview scroll  1 unit;break;"
+	bind $w <Key-Up> "$w.config.canvas yview scroll  -1 unit;break;"
+	bind $w <Key-Next> "$w.config.canvas yview scroll  1 page;break;"
+	bind $w <Key-Prior> "$w.config.canvas yview scroll  -1 page;break;"
+	bind $w <Key-Home> "$w.config.canvas yview moveto 0;break;"
+	bind $w <Key-End> "$w.config.canvas yview moveto 1 ;break;"
+	pack $w.config.canvas -side right -fill y
+
+
+	int $w.config.f 4 0 "SPARC register windows" CONFIG_IU_NWINDOWS
+	bool $w.config.f 4 1 "SPARC V8 MUL/DIV instructions" CONFIG_IU_V8MULDIV
+	global tmpvar_4
+	minimenu $w.config.f 4 2 "Hardware multiplier latency" tmpvar_4 CONFIG_IU_MUL_LATENCY_2
+	menu $w.config.f.x2.x.menu -tearoffcommand "menutitle \"Hardware multiplier latency\""
+	$w.config.f.x2.x.menu add radiobutton -label "2-cycles" -variable tmpvar_4 -value "2-cycles" -command "update_active"
+	$w.config.f.x2.x.menu add radiobutton -label "4-cycles" -variable tmpvar_4 -value "4-cycles" -command "update_active"
+	$w.config.f.x2.x.menu add radiobutton -label "5-cycles" -variable tmpvar_4 -value "5-cycles" -command "update_active"
+	menusplit $w $w.config.f.x2.x.menu 3
+	bool $w.config.f 4 3 "SPARC V8e SMAC/UMAC instructions     " CONFIG_IU_MUL_MAC
+	global tmpvar_5
+	minimenu $w.config.f 4 4 "Multipler structure        " tmpvar_5 CONFIG_IU_MUL_INFERRED
+	menu $w.config.f.x4.x.menu -tearoffcommand "menutitle \"Multipler structure        \""
+	$w.config.f.x4.x.menu add radiobutton -label "Inferred" -variable tmpvar_5 -value "Inferred" -command "update_active"
+	$w.config.f.x4.x.menu add radiobutton -label "NTNU_Modgen" -variable tmpvar_5 -value "NTNU_Modgen" -command "update_active"
+	$w.config.f.x4.x.menu add radiobutton -label "TechSpec" -variable tmpvar_5 -value "TechSpec" -command "update_active"
+	$w.config.f.x4.x.menu add radiobutton -label "Designware" -variable tmpvar_5 -value "Designware" -command "update_active"
+	menusplit $w $w.config.f.x4.x.menu 4
+	bool $w.config.f 4 5 "Branch prediction     " CONFIG_IU_BP
+	bool $w.config.f 4 6 "Single-vector trapping" CONFIG_IU_SVT
+	bool $w.config.f 4 7 "Disable tagged ADD/SUB and CASA" CONFIG_NOTAG
+	int $w.config.f 4 8 "Load delay" CONFIG_IU_LDELAY
+	int $w.config.f 4 9 "Hardware watchpoints" CONFIG_IU_WATCHPOINTS
+	bool $w.config.f 4 10 "Enable power-down mode " CONFIG_PWD
+	hex $w.config.f 4 11 " Reset start address (addr\[31:12\]) " CONFIG_IU_RSTADDR
+
+
+
+	focus $w
+	update_active
+	global winx; global winy
+	if {[winfo exists .menu3] == 0} then {menu3 .menu3 "Processor            "}
+	set winx [expr [winfo x .menu3]+30]; set winy [expr [winfo y .menu3]+30]
+	if {[winfo exists $w]} then {wm geometry $w +$winx+$winy}
+	update idletasks
+	if {[winfo exists $w]} then  {$w.config.canvas create window 0 0 -anchor nw -window $w.config.f
+
+	$w.config.canvas configure \
+		-width [expr [winfo reqwidth $w.config.f] + 1]\
+		-scrollregion "-1 -1 [expr [winfo reqwidth $w.config.f] + 1] \
+			 [expr [winfo reqheight $w.config.f] + 1]"
+
+	set winy [expr [winfo reqh $w] - [winfo reqh $w.config.canvas]]
+	set scry [expr [winfo screenh $w] / 2]
+	set maxy [expr [winfo screenh $w] * 3 / 4]
+	set canvtotal [expr [winfo reqh $w.config.f] + 2]
+	if [expr $winy + $canvtotal < $maxy] {
+		$w.config.canvas configure -height $canvtotal
+	} else {
+		$w.config.canvas configure -height [expr $scry - $winy]
+		}
+	}
+	update idletasks
+	if {[winfo exists $w]} then {
+	wm maxsize $w [winfo width $w] [winfo screenheight $w]
+	wm minsize $w [winfo width $w] 100
+
+	wm deiconify $w
+}
+}
+
+proc update_menu4 {} {
+	global CONFIG_LEON3
+	global CONFIG_LEON3_CUSTOM
+	global CONFIG_IU_NWINDOWS
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {.menu4.config.f.x0.x configure -state normal -foreground [ cget .ref -foreground ]; .menu4.config.f.x0.l configure -state normal; } else {.menu4.config.f.x0.x configure -state disabled -foreground [ cget .ref -disabledforeground ]; .menu4.config.f.x0.l configure -state disabled}
+	global CONFIG_IU_V8MULDIV
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {
+	configure_entry .menu4.config.f.x1 normal {n l y}} else {configure_entry .menu4.config.f.x1 disabled {y n l}}
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_IU_V8MULDIV == 1)} then {configure_entry .menu4.config.f.x2 normal {x l}} else {configure_entry .menu4.config.f.x2 disabled {x l}}
+	global CONFIG_IU_MUL_LATENCY_4
+	global CONFIG_IU_MUL_LATENCY_5
+	global CONFIG_IU_MUL_MAC
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_IU_V8MULDIV == 1) && ($CONFIG_IU_MUL_LATENCY_4 == 1 || $CONFIG_IU_MUL_LATENCY_5 == 1)} then {
+	configure_entry .menu4.config.f.x3 normal {n l y}} else {configure_entry .menu4.config.f.x3 disabled {y n l}}
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_IU_V8MULDIV == 1)} then {configure_entry .menu4.config.f.x4 normal {x l}} else {configure_entry .menu4.config.f.x4 disabled {x l}}
+	global CONFIG_IU_BP
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {
+	configure_entry .menu4.config.f.x5 normal {n l y}} else {configure_entry .menu4.config.f.x5 disabled {y n l}}
+	global CONFIG_IU_SVT
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {
+	configure_entry .menu4.config.f.x6 normal {n l y}} else {configure_entry .menu4.config.f.x6 disabled {y n l}}
+	global CONFIG_NOTAG
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {
+	configure_entry .menu4.config.f.x7 normal {n l y}} else {configure_entry .menu4.config.f.x7 disabled {y n l}}
+	global CONFIG_IU_LDELAY
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {.menu4.config.f.x8.x configure -state normal -foreground [ cget .ref -foreground ]; .menu4.config.f.x8.l configure -state normal; } else {.menu4.config.f.x8.x configure -state disabled -foreground [ cget .ref -disabledforeground ]; .menu4.config.f.x8.l configure -state disabled}
+	global CONFIG_IU_WATCHPOINTS
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {.menu4.config.f.x9.x configure -state normal -foreground [ cget .ref -foreground ]; .menu4.config.f.x9.l configure -state normal; } else {.menu4.config.f.x9.x configure -state disabled -foreground [ cget .ref -disabledforeground ]; .menu4.config.f.x9.l configure -state disabled}
+	global CONFIG_PWD
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {
+	configure_entry .menu4.config.f.x10 normal {n l y}} else {configure_entry .menu4.config.f.x10 disabled {y n l}}
+	global CONFIG_IU_RSTADDR
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {.menu4.config.f.x11.x configure -state normal -foreground [ cget .ref -foreground ]; .menu4.config.f.x11.l configure -state normal; } else {.menu4.config.f.x11.x configure -state disabled -foreground [ cget .ref -disabledforeground ]; .menu4.config.f.x11.l configure -state disabled}
+}
+
+
+proc update_define_menu4 {} {
+	update_define_mainmenu
+	global CONFIG_MODULES
+	global CONFIG_LEON3
+	global CONFIG_LEON3_CUSTOM
+	global CONFIG_IU_NWINDOWS
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {validate_int CONFIG_IU_NWINDOWS "$CONFIG_IU_NWINDOWS" 8}
+	global CONFIG_IU_V8MULDIV
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {
+	set CONFIG_IU_V8MULDIV [expr $CONFIG_IU_V8MULDIV&15]} else {set CONFIG_IU_V8MULDIV [expr $CONFIG_IU_V8MULDIV|16]}
+	global tmpvar_4
+	global CONFIG_IU_MUL_LATENCY_2
+	if {$tmpvar_4 == "2-cycles"} then {set CONFIG_IU_MUL_LATENCY_2 1} else {set CONFIG_IU_MUL_LATENCY_2 0}
+	global CONFIG_IU_MUL_LATENCY_4
+	if {$tmpvar_4 == "4-cycles"} then {set CONFIG_IU_MUL_LATENCY_4 1} else {set CONFIG_IU_MUL_LATENCY_4 0}
+	global CONFIG_IU_MUL_LATENCY_5
+	if {$tmpvar_4 == "5-cycles"} then {set CONFIG_IU_MUL_LATENCY_5 1} else {set CONFIG_IU_MUL_LATENCY_5 0}
+	global CONFIG_IU_MUL_MAC
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_IU_V8MULDIV == 1) && ($CONFIG_IU_MUL_LATENCY_4 == 1 || $CONFIG_IU_MUL_LATENCY_5 == 1)} then {
+	set CONFIG_IU_MUL_MAC [expr $CONFIG_IU_MUL_MAC&15]} else {set CONFIG_IU_MUL_MAC [expr $CONFIG_IU_MUL_MAC|16]}
+	global tmpvar_5
+	global CONFIG_IU_MUL_INFERRED
+	if {$tmpvar_5 == "Inferred"} then {set CONFIG_IU_MUL_INFERRED 1} else {set CONFIG_IU_MUL_INFERRED 0}
+	global CONFIG_IU_MUL_MODGEN
+	if {$tmpvar_5 == "NTNU_Modgen"} then {set CONFIG_IU_MUL_MODGEN 1} else {set CONFIG_IU_MUL_MODGEN 0}
+	global CONFIG_IU_MUL_TECHSPEC
+	if {$tmpvar_5 == "TechSpec"} then {set CONFIG_IU_MUL_TECHSPEC 1} else {set CONFIG_IU_MUL_TECHSPEC 0}
+	global CONFIG_IU_MUL_DW
+	if {$tmpvar_5 == "Designware"} then {set CONFIG_IU_MUL_DW 1} else {set CONFIG_IU_MUL_DW 0}
+	global CONFIG_IU_BP
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {
+	set CONFIG_IU_BP [expr $CONFIG_IU_BP&15]} else {set CONFIG_IU_BP [expr $CONFIG_IU_BP|16]}
+	global CONFIG_IU_SVT
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {
+	set CONFIG_IU_SVT [expr $CONFIG_IU_SVT&15]} else {set CONFIG_IU_SVT [expr $CONFIG_IU_SVT|16]}
+	global CONFIG_NOTAG
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {
+	set CONFIG_NOTAG [expr $CONFIG_NOTAG&15]} else {set CONFIG_NOTAG [expr $CONFIG_NOTAG|16]}
+	global CONFIG_IU_LDELAY
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {validate_int CONFIG_IU_LDELAY "$CONFIG_IU_LDELAY" 1}
+	global CONFIG_IU_WATCHPOINTS
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {validate_int CONFIG_IU_WATCHPOINTS "$CONFIG_IU_WATCHPOINTS" 0}
+	global CONFIG_PWD
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {
+	set CONFIG_PWD [expr $CONFIG_PWD&15]} else {set CONFIG_PWD [expr $CONFIG_PWD|16]}
+	global CONFIG_IU_RSTADDR
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {validate_hex CONFIG_IU_RSTADDR "$CONFIG_IU_RSTADDR" 00000}
+}
+
+
+proc menu5 {w title} {
+	set oldFocus [focus]
+	catch {focus .menu3}
+	catch {destroy $w; unregister_active 5}
+	toplevel $w -class Dialog
+	wm withdraw $w
+	global active_menus
+	set active_menus [lsort -integer [linsert $active_menus end 5]]
+	message $w.m -width 400 -aspect 300 -text \
+		"Floating-point unit"  -relief raised
+	pack $w.m -pady 10 -side top -padx 10
+	wm title $w "Floating-point unit" 
+
+	bind $w <Escape> "catch {focus $oldFocus}; destroy $w; unregister_active 5; break"
+	set nextscript "catch {focus $oldFocus}; destroy $w; unregister_active 5; menu6 .menu6 \"$title\""
+	frame $w.f
+	button $w.f.back -text "OK" \
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 5"
+	button $w.f.next -text "Next" -underline 0\
+		-width 15 -command $nextscript
+	bind all <Alt-n> $nextscript
+	button $w.f.prev -text "Prev" -underline 0\
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 5; menu4 .menu4 \"$title\""
+	bind $w <Alt-p> "catch {focus $oldFocus}; destroy $w; unregister_active 5; menu4 .menu4 \"$title\";break"
+	pack $w.f.back $w.f.next $w.f.prev -side left -expand on
+	pack $w.f -pady 10 -side bottom -anchor w -fill x
+	frame $w.topline -relief ridge -borderwidth 2 -height 2
+	pack $w.topline -side top -fill x
+
+	frame $w.botline -relief ridge -borderwidth 2 -height 2
+	pack $w.botline -side bottom -fill x
+
+	frame $w.config
+	pack $w.config -fill y -expand on
+
+	scrollbar $w.config.vscroll -command "$w.config.canvas yview"
+	pack $w.config.vscroll -side right -fill y
+
+	canvas $w.config.canvas -height 1\
+		-relief flat -borderwidth 0 -yscrollcommand "$w.config.vscroll set" \
+		-width [expr [winfo screenwidth .] * 1 / 2] 
+	frame $w.config.f
+	bind $w <Key-Down> "$w.config.canvas yview scroll  1 unit;break;"
+	bind $w <Key-Up> "$w.config.canvas yview scroll  -1 unit;break;"
+	bind $w <Key-Next> "$w.config.canvas yview scroll  1 page;break;"
+	bind $w <Key-Prior> "$w.config.canvas yview scroll  -1 page;break;"
+	bind $w <Key-Home> "$w.config.canvas yview moveto 0;break;"
+	bind $w <Key-End> "$w.config.canvas yview moveto 1 ;break;"
+	pack $w.config.canvas -side right -fill y
+
+
+	bool $w.config.f 5 0 "Enable FPU                             " CONFIG_FPU_ENABLE
+	global tmpvar_6
+	minimenu $w.config.f 5 1 "FPU core" tmpvar_6 CONFIG_FPU_GRFPU
+	menu $w.config.f.x1.x.menu -tearoffcommand "menutitle \"FPU core\""
+	$w.config.f.x1.x.menu add radiobutton -label "GRFPU" -variable tmpvar_6 -value "GRFPU" -command "update_active"
+	$w.config.f.x1.x.menu add radiobutton -label "GRFPU-LITE" -variable tmpvar_6 -value "GRFPU-LITE" -command "update_active"
+	$w.config.f.x1.x.menu add radiobutton -label "Meiko" -variable tmpvar_6 -value "Meiko" -command "update_active"
+	menusplit $w $w.config.f.x1.x.menu 3
+	global tmpvar_7
+	minimenu $w.config.f 5 2 "GRFPU multiplier" tmpvar_7 CONFIG_FPU_GRFPU_INFMUL
+	menu $w.config.f.x2.x.menu -tearoffcommand "menutitle \"GRFPU multiplier\""
+	$w.config.f.x2.x.menu add radiobutton -label "Inferred" -variable tmpvar_7 -value "Inferred" -command "update_active"
+	$w.config.f.x2.x.menu add radiobutton -label "DW" -variable tmpvar_7 -value "DW" -command "update_active"
+	$w.config.f.x2.x.menu add radiobutton -label "ModGen" -variable tmpvar_7 -value "ModGen" -command "update_active"
+	$w.config.f.x2.x.menu add radiobutton -label "TechSpec" -variable tmpvar_7 -value "TechSpec" -command "update_active"
+	menusplit $w $w.config.f.x2.x.menu 4
+	bool $w.config.f 5 3 "Shared GRFPU                      " CONFIG_FPU_GRFPU_SH
+	global tmpvar_8
+	minimenu $w.config.f 5 4 "GRFPU-LITE controller" tmpvar_8 CONFIG_FPU_GRFPC0
+	menu $w.config.f.x4.x.menu -tearoffcommand "menutitle \"GRFPU-LITE controller\""
+	$w.config.f.x4.x.menu add radiobutton -label "Simple" -variable tmpvar_8 -value "Simple" -command "update_active"
+	$w.config.f.x4.x.menu add radiobutton -label "Data-forwarding" -variable tmpvar_8 -value "Data-forwarding" -command "update_active"
+	$w.config.f.x4.x.menu add radiobutton -label "Non-blocking" -variable tmpvar_8 -value "Non-blocking" -command "update_active"
+	menusplit $w $w.config.f.x4.x.menu 3
+
+
+
+	focus $w
+	update_active
+	global winx; global winy
+	if {[winfo exists .menu3] == 0} then {menu3 .menu3 "Processor            "}
+	set winx [expr [winfo x .menu3]+30]; set winy [expr [winfo y .menu3]+30]
+	if {[winfo exists $w]} then {wm geometry $w +$winx+$winy}
+	update idletasks
+	if {[winfo exists $w]} then  {$w.config.canvas create window 0 0 -anchor nw -window $w.config.f
+
+	$w.config.canvas configure \
+		-width [expr [winfo reqwidth $w.config.f] + 1]\
+		-scrollregion "-1 -1 [expr [winfo reqwidth $w.config.f] + 1] \
+			 [expr [winfo reqheight $w.config.f] + 1]"
+
+	set winy [expr [winfo reqh $w] - [winfo reqh $w.config.canvas]]
+	set scry [expr [winfo screenh $w] / 2]
+	set maxy [expr [winfo screenh $w] * 3 / 4]
+	set canvtotal [expr [winfo reqh $w.config.f] + 2]
+	if [expr $winy + $canvtotal < $maxy] {
+		$w.config.canvas configure -height $canvtotal
+	} else {
+		$w.config.canvas configure -height [expr $scry - $winy]
+		}
+	}
+	update idletasks
+	if {[winfo exists $w]} then {
+	wm maxsize $w [winfo width $w] [winfo screenheight $w]
+	wm minsize $w [winfo width $w] 100
+
+	wm deiconify $w
+}
+}
+
+proc update_menu5 {} {
+	global CONFIG_LEON3
+	global CONFIG_LEON3_CUSTOM
+	global CONFIG_FPU_ENABLE
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {
+	configure_entry .menu5.config.f.x0 normal {n l y}} else {configure_entry .menu5.config.f.x0 disabled {y n l}}
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_FPU_ENABLE == 1)} then {configure_entry .menu5.config.f.x1 normal {x l}} else {configure_entry .menu5.config.f.x1 disabled {x l}}
+	global CONFIG_FPU_GRFPU
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_FPU_ENABLE == 1) && ($CONFIG_FPU_GRFPU == 1)} then {configure_entry .menu5.config.f.x2 normal {x l}} else {configure_entry .menu5.config.f.x2 disabled {x l}}
+	global CONFIG_HAS_SHARED_GRFPU
+	global CONFIG_FPU_GRFPU_SH
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_FPU_ENABLE == 1) && ($CONFIG_HAS_SHARED_GRFPU == 1 && $CONFIG_FPU_GRFPU == 1)} then {
+	configure_entry .menu5.config.f.x3 normal {n l y}} else {configure_entry .menu5.config.f.x3 disabled {y n l}}
+	global CONFIG_FPU_GRFPULITE
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_FPU_ENABLE == 1) && ($CONFIG_FPU_GRFPULITE == 1)} then {configure_entry .menu5.config.f.x4 normal {x l}} else {configure_entry .menu5.config.f.x4 disabled {x l}}
+}
+
+
+proc update_define_menu5 {} {
+	update_define_mainmenu
+	global CONFIG_MODULES
+	global CONFIG_LEON3
+	global CONFIG_LEON3_CUSTOM
+	global CONFIG_FPU_ENABLE
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {
+	set CONFIG_FPU_ENABLE [expr $CONFIG_FPU_ENABLE&15]} else {set CONFIG_FPU_ENABLE [expr $CONFIG_FPU_ENABLE|16]}
+	global tmpvar_6
+	global CONFIG_FPU_GRFPU
+	if {$tmpvar_6 == "GRFPU"} then {set CONFIG_FPU_GRFPU 1} else {set CONFIG_FPU_GRFPU 0}
+	global CONFIG_FPU_GRFPULITE
+	if {$tmpvar_6 == "GRFPU-LITE"} then {set CONFIG_FPU_GRFPULITE 1} else {set CONFIG_FPU_GRFPULITE 0}
+	global CONFIG_FPU_MEIKO
+	if {$tmpvar_6 == "Meiko"} then {set CONFIG_FPU_MEIKO 1} else {set CONFIG_FPU_MEIKO 0}
+	global tmpvar_7
+	global CONFIG_FPU_GRFPU_INFMUL
+	if {$tmpvar_7 == "Inferred"} then {set CONFIG_FPU_GRFPU_INFMUL 1} else {set CONFIG_FPU_GRFPU_INFMUL 0}
+	global CONFIG_FPU_GRFPU_DWMUL
+	if {$tmpvar_7 == "DW"} then {set CONFIG_FPU_GRFPU_DWMUL 1} else {set CONFIG_FPU_GRFPU_DWMUL 0}
+	global CONFIG_FPU_GRFPU_MODGEN
+	if {$tmpvar_7 == "ModGen"} then {set CONFIG_FPU_GRFPU_MODGEN 1} else {set CONFIG_FPU_GRFPU_MODGEN 0}
+	global CONFIG_FPU_GRFPU_TECHSPEC
+	if {$tmpvar_7 == "TechSpec"} then {set CONFIG_FPU_GRFPU_TECHSPEC 1} else {set CONFIG_FPU_GRFPU_TECHSPEC 0}
+	global CONFIG_HAS_SHARED_GRFPU
+	global CONFIG_FPU_GRFPU_SH
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_FPU_ENABLE == 1) && ($CONFIG_HAS_SHARED_GRFPU == 1 && $CONFIG_FPU_GRFPU == 1)} then {
+	set CONFIG_FPU_GRFPU_SH [expr $CONFIG_FPU_GRFPU_SH&15]} else {set CONFIG_FPU_GRFPU_SH [expr $CONFIG_FPU_GRFPU_SH|16]}
+	global tmpvar_8
+	global CONFIG_FPU_GRFPC0
+	if {$tmpvar_8 == "Simple"} then {set CONFIG_FPU_GRFPC0 1} else {set CONFIG_FPU_GRFPC0 0}
+	global CONFIG_FPU_GRFPC1
+	if {$tmpvar_8 == "Data-forwarding"} then {set CONFIG_FPU_GRFPC1 1} else {set CONFIG_FPU_GRFPC1 0}
+	global CONFIG_FPU_GRFPC2
+	if {$tmpvar_8 == "Non-blocking"} then {set CONFIG_FPU_GRFPC2 1} else {set CONFIG_FPU_GRFPC2 0}
+}
+
+
+proc menu6 {w title} {
+	set oldFocus [focus]
+	catch {focus .menu3}
+	catch {destroy $w; unregister_active 6}
+	toplevel $w -class Dialog
+	wm withdraw $w
+	global active_menus
+	set active_menus [lsort -integer [linsert $active_menus end 6]]
+	message $w.m -width 400 -aspect 300 -text \
+		"Cache system"  -relief raised
+	pack $w.m -pady 10 -side top -padx 10
+	wm title $w "Cache system" 
+
+	bind $w <Escape> "catch {focus $oldFocus}; destroy $w; unregister_active 6; break"
+	set nextscript "catch {focus $oldFocus}; destroy $w; unregister_active 6; menu7 .menu7 \"$title\""
+	frame $w.f
+	button $w.f.back -text "OK" \
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 6"
+	button $w.f.next -text "Next" -underline 0\
+		-width 15 -command $nextscript
+	bind all <Alt-n> $nextscript
+	button $w.f.prev -text "Prev" -underline 0\
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 6; menu5 .menu5 \"$title\""
+	bind $w <Alt-p> "catch {focus $oldFocus}; destroy $w; unregister_active 6; menu5 .menu5 \"$title\";break"
+	pack $w.f.back $w.f.next $w.f.prev -side left -expand on
+	pack $w.f -pady 10 -side bottom -anchor w -fill x
+	frame $w.topline -relief ridge -borderwidth 2 -height 2
+	pack $w.topline -side top -fill x
+
+	frame $w.botline -relief ridge -borderwidth 2 -height 2
+	pack $w.botline -side bottom -fill x
+
+	frame $w.config
+	pack $w.config -fill y -expand on
+
+	scrollbar $w.config.vscroll -command "$w.config.canvas yview"
+	pack $w.config.vscroll -side right -fill y
+
+	canvas $w.config.canvas -height 1\
+		-relief flat -borderwidth 0 -yscrollcommand "$w.config.vscroll set" \
+		-width [expr [winfo screenwidth .] * 1 / 2] 
+	frame $w.config.f
+	bind $w <Key-Down> "$w.config.canvas yview scroll  1 unit;break;"
+	bind $w <Key-Up> "$w.config.canvas yview scroll  -1 unit;break;"
+	bind $w <Key-Next> "$w.config.canvas yview scroll  1 page;break;"
+	bind $w <Key-Prior> "$w.config.canvas yview scroll  -1 page;break;"
+	bind $w <Key-Home> "$w.config.canvas yview moveto 0;break;"
+	bind $w <Key-End> "$w.config.canvas yview moveto 1 ;break;"
+	pack $w.config.canvas -side right -fill y
+
+
+	bool $w.config.f 6 0 "Enable instruction cache       " CONFIG_ICACHE_ENABLE
+	global tmpvar_9
+	minimenu $w.config.f 6 1 "Associativity (sets)            " tmpvar_9 CONFIG_ICACHE_ASSO1
+	menu $w.config.f.x1.x.menu -tearoffcommand "menutitle \"Associativity (sets)            \""
+	$w.config.f.x1.x.menu add radiobutton -label "1" -variable tmpvar_9 -value "1" -command "update_active"
+	$w.config.f.x1.x.menu add radiobutton -label "2" -variable tmpvar_9 -value "2" -command "update_active"
+	$w.config.f.x1.x.menu add radiobutton -label "3" -variable tmpvar_9 -value "3" -command "update_active"
+	$w.config.f.x1.x.menu add radiobutton -label "4" -variable tmpvar_9 -value "4" -command "update_active"
+	menusplit $w $w.config.f.x1.x.menu 4
+	global tmpvar_10
+	minimenu $w.config.f 6 2 "Way size (kbytes/way)" tmpvar_10 CONFIG_ICACHE_SZ1
+	menu $w.config.f.x2.x.menu -tearoffcommand "menutitle \"Way size (kbytes/way)\""
+	$w.config.f.x2.x.menu add radiobutton -label "1" -variable tmpvar_10 -value "1" -command "update_active"
+	$w.config.f.x2.x.menu add radiobutton -label "2" -variable tmpvar_10 -value "2" -command "update_active"
+	$w.config.f.x2.x.menu add radiobutton -label "4" -variable tmpvar_10 -value "4" -command "update_active"
+	$w.config.f.x2.x.menu add radiobutton -label "8" -variable tmpvar_10 -value "8" -command "update_active"
+	$w.config.f.x2.x.menu add radiobutton -label "16" -variable tmpvar_10 -value "16" -command "update_active"
+	$w.config.f.x2.x.menu add radiobutton -label "32" -variable tmpvar_10 -value "32" -command "update_active"
+	$w.config.f.x2.x.menu add radiobutton -label "64" -variable tmpvar_10 -value "64" -command "update_active"
+	$w.config.f.x2.x.menu add radiobutton -label "128" -variable tmpvar_10 -value "128" -command "update_active"
+	$w.config.f.x2.x.menu add radiobutton -label "256" -variable tmpvar_10 -value "256" -command "update_active"
+	menusplit $w $w.config.f.x2.x.menu 9
+	global tmpvar_11
+	minimenu $w.config.f 6 3 "Line size (bytes/line)" tmpvar_11 CONFIG_ICACHE_LZ16
+	menu $w.config.f.x3.x.menu -tearoffcommand "menutitle \"Line size (bytes/line)\""
+	$w.config.f.x3.x.menu add radiobutton -label "16" -variable tmpvar_11 -value "16" -command "update_active"
+	$w.config.f.x3.x.menu add radiobutton -label "32" -variable tmpvar_11 -value "32" -command "update_active"
+	menusplit $w $w.config.f.x3.x.menu 2
+	global tmpvar_12
+	minimenu $w.config.f 6 4 "Replacement alorithm" tmpvar_12 CONFIG_ICACHE_ALGORND
+	menu $w.config.f.x4.x.menu -tearoffcommand "menutitle \"Replacement alorithm\""
+	$w.config.f.x4.x.menu add radiobutton -label "Random" -variable tmpvar_12 -value "Random" -command "update_active"
+	$w.config.f.x4.x.menu add radiobutton -label "Direct" -variable tmpvar_12 -value "Direct" -command "update_active"
+	$w.config.f.x4.x.menu add radiobutton -label "LRR" -variable tmpvar_12 -value "LRR" -command "update_active"
+	$w.config.f.x4.x.menu add radiobutton -label "LRU" -variable tmpvar_12 -value "LRU" -command "update_active"
+	menusplit $w $w.config.f.x4.x.menu 4
+	bool $w.config.f 6 5 "Cache locking      " CONFIG_ICACHE_LOCK
+	bool $w.config.f 6 6 "Enable local instruction RAM            " CONFIG_ICACHE_LRAM
+	global tmpvar_13
+	minimenu $w.config.f 6 7 "Local data RAM size (kbytes)" tmpvar_13 CONFIG_ICACHE_LRAM_SZ1
+	menu $w.config.f.x7.x.menu -tearoffcommand "menutitle \"Local data RAM size (kbytes)\""
+	$w.config.f.x7.x.menu add radiobutton -label "1" -variable tmpvar_13 -value "1" -command "update_active"
+	$w.config.f.x7.x.menu add radiobutton -label "2" -variable tmpvar_13 -value "2" -command "update_active"
+	$w.config.f.x7.x.menu add radiobutton -label "4" -variable tmpvar_13 -value "4" -command "update_active"
+	$w.config.f.x7.x.menu add radiobutton -label "8" -variable tmpvar_13 -value "8" -command "update_active"
+	$w.config.f.x7.x.menu add radiobutton -label "16" -variable tmpvar_13 -value "16" -command "update_active"
+	$w.config.f.x7.x.menu add radiobutton -label "32" -variable tmpvar_13 -value "32" -command "update_active"
+	$w.config.f.x7.x.menu add radiobutton -label "64" -variable tmpvar_13 -value "64" -command "update_active"
+	$w.config.f.x7.x.menu add radiobutton -label "128" -variable tmpvar_13 -value "128" -command "update_active"
+	$w.config.f.x7.x.menu add radiobutton -label "256" -variable tmpvar_13 -value "256" -command "update_active"
+	menusplit $w $w.config.f.x7.x.menu 9
+	hex $w.config.f 6 8 " Local instruction RAM start address (8 MSB) " CONFIG_ICACHE_LRSTART
+	bool $w.config.f 6 9 "Enable data cache       " CONFIG_DCACHE_ENABLE
+	global tmpvar_14
+	minimenu $w.config.f 6 10 "Associativity (sets)" tmpvar_14 CONFIG_DCACHE_ASSO1
+	menu $w.config.f.x10.x.menu -tearoffcommand "menutitle \"Associativity (sets)\""
+	$w.config.f.x10.x.menu add radiobutton -label "1" -variable tmpvar_14 -value "1" -command "update_active"
+	$w.config.f.x10.x.menu add radiobutton -label "2" -variable tmpvar_14 -value "2" -command "update_active"
+	$w.config.f.x10.x.menu add radiobutton -label "3" -variable tmpvar_14 -value "3" -command "update_active"
+	$w.config.f.x10.x.menu add radiobutton -label "4" -variable tmpvar_14 -value "4" -command "update_active"
+	menusplit $w $w.config.f.x10.x.menu 4
+	global tmpvar_15
+	minimenu $w.config.f 6 11 "Set size (kbytes/set)" tmpvar_15 CONFIG_DCACHE_SZ1
+	menu $w.config.f.x11.x.menu -tearoffcommand "menutitle \"Set size (kbytes/set)\""
+	$w.config.f.x11.x.menu add radiobutton -label "1" -variable tmpvar_15 -value "1" -command "update_active"
+	$w.config.f.x11.x.menu add radiobutton -label "2" -variable tmpvar_15 -value "2" -command "update_active"
+	$w.config.f.x11.x.menu add radiobutton -label "4" -variable tmpvar_15 -value "4" -command "update_active"
+	$w.config.f.x11.x.menu add radiobutton -label "8" -variable tmpvar_15 -value "8" -command "update_active"
+	$w.config.f.x11.x.menu add radiobutton -label "16" -variable tmpvar_15 -value "16" -command "update_active"
+	$w.config.f.x11.x.menu add radiobutton -label "32" -variable tmpvar_15 -value "32" -command "update_active"
+	$w.config.f.x11.x.menu add radiobutton -label "64" -variable tmpvar_15 -value "64" -command "update_active"
+	$w.config.f.x11.x.menu add radiobutton -label "128" -variable tmpvar_15 -value "128" -command "update_active"
+	$w.config.f.x11.x.menu add radiobutton -label "256" -variable tmpvar_15 -value "256" -command "update_active"
+	menusplit $w $w.config.f.x11.x.menu 9
+	global tmpvar_16
+	minimenu $w.config.f 6 12 "Line size (bytes/line)" tmpvar_16 CONFIG_DCACHE_LZ16
+	menu $w.config.f.x12.x.menu -tearoffcommand "menutitle \"Line size (bytes/line)\""
+	$w.config.f.x12.x.menu add radiobutton -label "16" -variable tmpvar_16 -value "16" -command "update_active"
+	$w.config.f.x12.x.menu add radiobutton -label "32" -variable tmpvar_16 -value "32" -command "update_active"
+	menusplit $w $w.config.f.x12.x.menu 2
+	global tmpvar_17
+	minimenu $w.config.f 6 13 "Replacement alorithm" tmpvar_17 CONFIG_DCACHE_ALGORND
+	menu $w.config.f.x13.x.menu -tearoffcommand "menutitle \"Replacement alorithm\""
+	$w.config.f.x13.x.menu add radiobutton -label "Random" -variable tmpvar_17 -value "Random" -command "update_active"
+	$w.config.f.x13.x.menu add radiobutton -label "Direct" -variable tmpvar_17 -value "Direct" -command "update_active"
+	$w.config.f.x13.x.menu add radiobutton -label "LRR" -variable tmpvar_17 -value "LRR" -command "update_active"
+	$w.config.f.x13.x.menu add radiobutton -label "LRU" -variable tmpvar_17 -value "LRU" -command "update_active"
+	menusplit $w $w.config.f.x13.x.menu 4
+	bool $w.config.f 6 14 "Cache locking      " CONFIG_DCACHE_LOCK
+	bool $w.config.f 6 15 "AHB snooping       " CONFIG_DCACHE_SNOOP
+	bool $w.config.f 6 16 "Separate snoop tags  " CONFIG_DCACHE_SNOOP_SEPTAG
+	hex $w.config.f 6 17 "Fixed cacheability map  " CONFIG_CACHE_FIXED
+	bool $w.config.f 6 18 "Enable local data RAM            " CONFIG_DCACHE_LRAM
+	global tmpvar_18
+	minimenu $w.config.f 6 19 "Local data RAM size (kbytes)" tmpvar_18 CONFIG_DCACHE_LRAM_SZ1
+	menu $w.config.f.x19.x.menu -tearoffcommand "menutitle \"Local data RAM size (kbytes)\""
+	$w.config.f.x19.x.menu add radiobutton -label "1" -variable tmpvar_18 -value "1" -command "update_active"
+	$w.config.f.x19.x.menu add radiobutton -label "2" -variable tmpvar_18 -value "2" -command "update_active"
+	$w.config.f.x19.x.menu add radiobutton -label "4" -variable tmpvar_18 -value "4" -command "update_active"
+	$w.config.f.x19.x.menu add radiobutton -label "8" -variable tmpvar_18 -value "8" -command "update_active"
+	$w.config.f.x19.x.menu add radiobutton -label "16" -variable tmpvar_18 -value "16" -command "update_active"
+	$w.config.f.x19.x.menu add radiobutton -label "32" -variable tmpvar_18 -value "32" -command "update_active"
+	$w.config.f.x19.x.menu add radiobutton -label "64" -variable tmpvar_18 -value "64" -command "update_active"
+	$w.config.f.x19.x.menu add radiobutton -label "128" -variable tmpvar_18 -value "128" -command "update_active"
+	$w.config.f.x19.x.menu add radiobutton -label "256" -variable tmpvar_18 -value "256" -command "update_active"
+	menusplit $w $w.config.f.x19.x.menu 9
+	hex $w.config.f 6 20 " Local data RAM start address (8 MSB) " CONFIG_DCACHE_LRSTART
+
+
+
+	focus $w
+	update_active
+	global winx; global winy
+	if {[winfo exists .menu3] == 0} then {menu3 .menu3 "Processor            "}
+	set winx [expr [winfo x .menu3]+30]; set winy [expr [winfo y .menu3]+30]
+	if {[winfo exists $w]} then {wm geometry $w +$winx+$winy}
+	update idletasks
+	if {[winfo exists $w]} then  {$w.config.canvas create window 0 0 -anchor nw -window $w.config.f
+
+	$w.config.canvas configure \
+		-width [expr [winfo reqwidth $w.config.f] + 1]\
+		-scrollregion "-1 -1 [expr [winfo reqwidth $w.config.f] + 1] \
+			 [expr [winfo reqheight $w.config.f] + 1]"
+
+	set winy [expr [winfo reqh $w] - [winfo reqh $w.config.canvas]]
+	set scry [expr [winfo screenh $w] / 2]
+	set maxy [expr [winfo screenh $w] * 3 / 4]
+	set canvtotal [expr [winfo reqh $w.config.f] + 2]
+	if [expr $winy + $canvtotal < $maxy] {
+		$w.config.canvas configure -height $canvtotal
+	} else {
+		$w.config.canvas configure -height [expr $scry - $winy]
+		}
+	}
+	update idletasks
+	if {[winfo exists $w]} then {
+	wm maxsize $w [winfo width $w] [winfo screenheight $w]
+	wm minsize $w [winfo width $w] 100
+
+	wm deiconify $w
+}
+}
+
+proc update_menu6 {} {
+	global CONFIG_LEON3
+	global CONFIG_LEON3_CUSTOM
+	global CONFIG_ICACHE_ENABLE
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {
+	configure_entry .menu6.config.f.x0 normal {n l y}} else {configure_entry .menu6.config.f.x0 disabled {y n l}}
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_ICACHE_ENABLE == 1)} then {configure_entry .menu6.config.f.x1 normal {x l}} else {configure_entry .menu6.config.f.x1 disabled {x l}}
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_ICACHE_ENABLE == 1)} then {configure_entry .menu6.config.f.x2 normal {x l}} else {configure_entry .menu6.config.f.x2 disabled {x l}}
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_ICACHE_ENABLE == 1)} then {configure_entry .menu6.config.f.x3 normal {x l}} else {configure_entry .menu6.config.f.x3 disabled {x l}}
+	global CONFIG_ICACHE_ASSO1
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_ICACHE_ENABLE == 1) && ($CONFIG_ICACHE_ASSO1 != 1)} then {configure_entry .menu6.config.f.x4 normal {x l}} else {configure_entry .menu6.config.f.x4 disabled {x l}}
+	global CONFIG_ICACHE_LOCK
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_ICACHE_ENABLE == 1) && ($CONFIG_ICACHE_ASSO1 != 1)} then {
+	configure_entry .menu6.config.f.x5 normal {n l y}} else {configure_entry .menu6.config.f.x5 disabled {y n l}}
+	global CONFIG_MMU_ENABLE
+	global CONFIG_ICACHE_LRAM
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_MMU_ENABLE != 1)} then {
+	configure_entry .menu6.config.f.x6 normal {n l y}} else {configure_entry .menu6.config.f.x6 disabled {y n l}}
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_ICACHE_LRAM == 1)} then {configure_entry .menu6.config.f.x7 normal {x l}} else {configure_entry .menu6.config.f.x7 disabled {x l}}
+	global CONFIG_ICACHE_LRSTART
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_ICACHE_LRAM == 1)} then {.menu6.config.f.x8.x configure -state normal -foreground [ cget .ref -foreground ]; .menu6.config.f.x8.l configure -state normal; } else {.menu6.config.f.x8.x configure -state disabled -foreground [ cget .ref -disabledforeground ]; .menu6.config.f.x8.l configure -state disabled}
+	global CONFIG_DCACHE_ENABLE
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {
+	configure_entry .menu6.config.f.x9 normal {n l y}} else {configure_entry .menu6.config.f.x9 disabled {y n l}}
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_DCACHE_ENABLE == 1)} then {configure_entry .menu6.config.f.x10 normal {x l}} else {configure_entry .menu6.config.f.x10 disabled {x l}}
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_DCACHE_ENABLE == 1)} then {configure_entry .menu6.config.f.x11 normal {x l}} else {configure_entry .menu6.config.f.x11 disabled {x l}}
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_DCACHE_ENABLE == 1)} then {configure_entry .menu6.config.f.x12 normal {x l}} else {configure_entry .menu6.config.f.x12 disabled {x l}}
+	global CONFIG_DCACHE_ASSO1
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_DCACHE_ENABLE == 1) && ($CONFIG_DCACHE_ASSO1 != 1)} then {configure_entry .menu6.config.f.x13 normal {x l}} else {configure_entry .menu6.config.f.x13 disabled {x l}}
+	global CONFIG_DCACHE_LOCK
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_DCACHE_ENABLE == 1) && ($CONFIG_DCACHE_ASSO1 != 1)} then {
+	configure_entry .menu6.config.f.x14 normal {n l y}} else {configure_entry .menu6.config.f.x14 disabled {y n l}}
+	global CONFIG_DCACHE_SNOOP
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_DCACHE_ENABLE == 1)} then {
+	configure_entry .menu6.config.f.x15 normal {n l y}} else {configure_entry .menu6.config.f.x15 disabled {y n l}}
+	global CONFIG_DCACHE_SNOOP_SEPTAG
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_DCACHE_ENABLE == 1) && ($CONFIG_DCACHE_SNOOP == 1)} then {
+	configure_entry .menu6.config.f.x16 normal {n l y}} else {configure_entry .menu6.config.f.x16 disabled {y n l}}
+	global CONFIG_CACHE_FIXED
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_ICACHE_ENABLE == 1 || $CONFIG_DCACHE_ENABLE == 1)} then {.menu6.config.f.x17.x configure -state normal -foreground [ cget .ref -foreground ]; .menu6.config.f.x17.l configure -state normal; } else {.menu6.config.f.x17.x configure -state disabled -foreground [ cget .ref -disabledforeground ]; .menu6.config.f.x17.l configure -state disabled}
+	global CONFIG_DCACHE_LRAM
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_MMU_ENABLE != 1)} then {
+	configure_entry .menu6.config.f.x18 normal {n l y}} else {configure_entry .menu6.config.f.x18 disabled {y n l}}
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_DCACHE_LRAM == 1)} then {configure_entry .menu6.config.f.x19 normal {x l}} else {configure_entry .menu6.config.f.x19 disabled {x l}}
+	global CONFIG_DCACHE_LRSTART
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_DCACHE_LRAM == 1)} then {.menu6.config.f.x20.x configure -state normal -foreground [ cget .ref -foreground ]; .menu6.config.f.x20.l configure -state normal; } else {.menu6.config.f.x20.x configure -state disabled -foreground [ cget .ref -disabledforeground ]; .menu6.config.f.x20.l configure -state disabled}
+}
+
+
+proc update_define_menu6 {} {
+	update_define_mainmenu
+	global CONFIG_MODULES
+	global CONFIG_LEON3
+	global CONFIG_LEON3_CUSTOM
+	global CONFIG_ICACHE_ENABLE
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {
+	set CONFIG_ICACHE_ENABLE [expr $CONFIG_ICACHE_ENABLE&15]} else {set CONFIG_ICACHE_ENABLE [expr $CONFIG_ICACHE_ENABLE|16]}
+	global tmpvar_9
+	global CONFIG_ICACHE_ASSO1
+	if {$tmpvar_9 == "1"} then {set CONFIG_ICACHE_ASSO1 1} else {set CONFIG_ICACHE_ASSO1 0}
+	global CONFIG_ICACHE_ASSO2
+	if {$tmpvar_9 == "2"} then {set CONFIG_ICACHE_ASSO2 1} else {set CONFIG_ICACHE_ASSO2 0}
+	global CONFIG_ICACHE_ASSO3
+	if {$tmpvar_9 == "3"} then {set CONFIG_ICACHE_ASSO3 1} else {set CONFIG_ICACHE_ASSO3 0}
+	global CONFIG_ICACHE_ASSO4
+	if {$tmpvar_9 == "4"} then {set CONFIG_ICACHE_ASSO4 1} else {set CONFIG_ICACHE_ASSO4 0}
+	global tmpvar_10
+	global CONFIG_ICACHE_SZ1
+	if {$tmpvar_10 == "1"} then {set CONFIG_ICACHE_SZ1 1} else {set CONFIG_ICACHE_SZ1 0}
+	global CONFIG_ICACHE_SZ2
+	if {$tmpvar_10 == "2"} then {set CONFIG_ICACHE_SZ2 1} else {set CONFIG_ICACHE_SZ2 0}
+	global CONFIG_ICACHE_SZ4
+	if {$tmpvar_10 == "4"} then {set CONFIG_ICACHE_SZ4 1} else {set CONFIG_ICACHE_SZ4 0}
+	global CONFIG_ICACHE_SZ8
+	if {$tmpvar_10 == "8"} then {set CONFIG_ICACHE_SZ8 1} else {set CONFIG_ICACHE_SZ8 0}
+	global CONFIG_ICACHE_SZ16
+	if {$tmpvar_10 == "16"} then {set CONFIG_ICACHE_SZ16 1} else {set CONFIG_ICACHE_SZ16 0}
+	global CONFIG_ICACHE_SZ32
+	if {$tmpvar_10 == "32"} then {set CONFIG_ICACHE_SZ32 1} else {set CONFIG_ICACHE_SZ32 0}
+	global CONFIG_ICACHE_SZ64
+	if {$tmpvar_10 == "64"} then {set CONFIG_ICACHE_SZ64 1} else {set CONFIG_ICACHE_SZ64 0}
+	global CONFIG_ICACHE_SZ128
+	if {$tmpvar_10 == "128"} then {set CONFIG_ICACHE_SZ128 1} else {set CONFIG_ICACHE_SZ128 0}
+	global CONFIG_ICACHE_SZ256
+	if {$tmpvar_10 == "256"} then {set CONFIG_ICACHE_SZ256 1} else {set CONFIG_ICACHE_SZ256 0}
+	global tmpvar_11
+	global CONFIG_ICACHE_LZ16
+	if {$tmpvar_11 == "16"} then {set CONFIG_ICACHE_LZ16 1} else {set CONFIG_ICACHE_LZ16 0}
+	global CONFIG_ICACHE_LZ32
+	if {$tmpvar_11 == "32"} then {set CONFIG_ICACHE_LZ32 1} else {set CONFIG_ICACHE_LZ32 0}
+	global tmpvar_12
+	global CONFIG_ICACHE_ALGORND
+	if {$tmpvar_12 == "Random"} then {set CONFIG_ICACHE_ALGORND 1} else {set CONFIG_ICACHE_ALGORND 0}
+	global CONFIG_ICACHE_ALGODIR
+	if {$tmpvar_12 == "Direct"} then {set CONFIG_ICACHE_ALGODIR 1} else {set CONFIG_ICACHE_ALGODIR 0}
+	global CONFIG_ICACHE_ALGOLRR
+	if {$tmpvar_12 == "LRR"} then {set CONFIG_ICACHE_ALGOLRR 1} else {set CONFIG_ICACHE_ALGOLRR 0}
+	global CONFIG_ICACHE_ALGOLRU
+	if {$tmpvar_12 == "LRU"} then {set CONFIG_ICACHE_ALGOLRU 1} else {set CONFIG_ICACHE_ALGOLRU 0}
+	global CONFIG_ICACHE_LOCK
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_ICACHE_ENABLE == 1) && ($CONFIG_ICACHE_ASSO1 != 1)} then {
+	set CONFIG_ICACHE_LOCK [expr $CONFIG_ICACHE_LOCK&15]} else {set CONFIG_ICACHE_LOCK [expr $CONFIG_ICACHE_LOCK|16]}
+	global CONFIG_MMU_ENABLE
+	global CONFIG_ICACHE_LRAM
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_MMU_ENABLE != 1)} then {
+	set CONFIG_ICACHE_LRAM [expr $CONFIG_ICACHE_LRAM&15]} else {set CONFIG_ICACHE_LRAM [expr $CONFIG_ICACHE_LRAM|16]}
+	global tmpvar_13
+	global CONFIG_ICACHE_LRAM_SZ1
+	if {$tmpvar_13 == "1"} then {set CONFIG_ICACHE_LRAM_SZ1 1} else {set CONFIG_ICACHE_LRAM_SZ1 0}
+	global CONFIG_ICACHE_LRAM_SZ2
+	if {$tmpvar_13 == "2"} then {set CONFIG_ICACHE_LRAM_SZ2 1} else {set CONFIG_ICACHE_LRAM_SZ2 0}
+	global CONFIG_ICACHE_LRAM_SZ4
+	if {$tmpvar_13 == "4"} then {set CONFIG_ICACHE_LRAM_SZ4 1} else {set CONFIG_ICACHE_LRAM_SZ4 0}
+	global CONFIG_ICACHE_LRAM_SZ8
+	if {$tmpvar_13 == "8"} then {set CONFIG_ICACHE_LRAM_SZ8 1} else {set CONFIG_ICACHE_LRAM_SZ8 0}
+	global CONFIG_ICACHE_LRAM_SZ16
+	if {$tmpvar_13 == "16"} then {set CONFIG_ICACHE_LRAM_SZ16 1} else {set CONFIG_ICACHE_LRAM_SZ16 0}
+	global CONFIG_ICACHE_LRAM_SZ32
+	if {$tmpvar_13 == "32"} then {set CONFIG_ICACHE_LRAM_SZ32 1} else {set CONFIG_ICACHE_LRAM_SZ32 0}
+	global CONFIG_ICACHE_LRAM_SZ64
+	if {$tmpvar_13 == "64"} then {set CONFIG_ICACHE_LRAM_SZ64 1} else {set CONFIG_ICACHE_LRAM_SZ64 0}
+	global CONFIG_ICACHE_LRAM_SZ128
+	if {$tmpvar_13 == "128"} then {set CONFIG_ICACHE_LRAM_SZ128 1} else {set CONFIG_ICACHE_LRAM_SZ128 0}
+	global CONFIG_ICACHE_LRAM_SZ256
+	if {$tmpvar_13 == "256"} then {set CONFIG_ICACHE_LRAM_SZ256 1} else {set CONFIG_ICACHE_LRAM_SZ256 0}
+	global CONFIG_ICACHE_LRSTART
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_ICACHE_LRAM == 1)} then {validate_hex CONFIG_ICACHE_LRSTART "$CONFIG_ICACHE_LRSTART" 8e}
+	global CONFIG_DCACHE_ENABLE
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {
+	set CONFIG_DCACHE_ENABLE [expr $CONFIG_DCACHE_ENABLE&15]} else {set CONFIG_DCACHE_ENABLE [expr $CONFIG_DCACHE_ENABLE|16]}
+	global tmpvar_14
+	global CONFIG_DCACHE_ASSO1
+	if {$tmpvar_14 == "1"} then {set CONFIG_DCACHE_ASSO1 1} else {set CONFIG_DCACHE_ASSO1 0}
+	global CONFIG_DCACHE_ASSO2
+	if {$tmpvar_14 == "2"} then {set CONFIG_DCACHE_ASSO2 1} else {set CONFIG_DCACHE_ASSO2 0}
+	global CONFIG_DCACHE_ASSO3
+	if {$tmpvar_14 == "3"} then {set CONFIG_DCACHE_ASSO3 1} else {set CONFIG_DCACHE_ASSO3 0}
+	global CONFIG_DCACHE_ASSO4
+	if {$tmpvar_14 == "4"} then {set CONFIG_DCACHE_ASSO4 1} else {set CONFIG_DCACHE_ASSO4 0}
+	global tmpvar_15
+	global CONFIG_DCACHE_SZ1
+	if {$tmpvar_15 == "1"} then {set CONFIG_DCACHE_SZ1 1} else {set CONFIG_DCACHE_SZ1 0}
+	global CONFIG_DCACHE_SZ2
+	if {$tmpvar_15 == "2"} then {set CONFIG_DCACHE_SZ2 1} else {set CONFIG_DCACHE_SZ2 0}
+	global CONFIG_DCACHE_SZ4
+	if {$tmpvar_15 == "4"} then {set CONFIG_DCACHE_SZ4 1} else {set CONFIG_DCACHE_SZ4 0}
+	global CONFIG_DCACHE_SZ8
+	if {$tmpvar_15 == "8"} then {set CONFIG_DCACHE_SZ8 1} else {set CONFIG_DCACHE_SZ8 0}
+	global CONFIG_DCACHE_SZ16
+	if {$tmpvar_15 == "16"} then {set CONFIG_DCACHE_SZ16 1} else {set CONFIG_DCACHE_SZ16 0}
+	global CONFIG_DCACHE_SZ32
+	if {$tmpvar_15 == "32"} then {set CONFIG_DCACHE_SZ32 1} else {set CONFIG_DCACHE_SZ32 0}
+	global CONFIG_DCACHE_SZ64
+	if {$tmpvar_15 == "64"} then {set CONFIG_DCACHE_SZ64 1} else {set CONFIG_DCACHE_SZ64 0}
+	global CONFIG_DCACHE_SZ128
+	if {$tmpvar_15 == "128"} then {set CONFIG_DCACHE_SZ128 1} else {set CONFIG_DCACHE_SZ128 0}
+	global CONFIG_DCACHE_SZ256
+	if {$tmpvar_15 == "256"} then {set CONFIG_DCACHE_SZ256 1} else {set CONFIG_DCACHE_SZ256 0}
+	global tmpvar_16
+	global CONFIG_DCACHE_LZ16
+	if {$tmpvar_16 == "16"} then {set CONFIG_DCACHE_LZ16 1} else {set CONFIG_DCACHE_LZ16 0}
+	global CONFIG_DCACHE_LZ32
+	if {$tmpvar_16 == "32"} then {set CONFIG_DCACHE_LZ32 1} else {set CONFIG_DCACHE_LZ32 0}
+	global tmpvar_17
+	global CONFIG_DCACHE_ALGORND
+	if {$tmpvar_17 == "Random"} then {set CONFIG_DCACHE_ALGORND 1} else {set CONFIG_DCACHE_ALGORND 0}
+	global CONFIG_DCACHE_ALGODIR
+	if {$tmpvar_17 == "Direct"} then {set CONFIG_DCACHE_ALGODIR 1} else {set CONFIG_DCACHE_ALGODIR 0}
+	global CONFIG_DCACHE_ALGOLRR
+	if {$tmpvar_17 == "LRR"} then {set CONFIG_DCACHE_ALGOLRR 1} else {set CONFIG_DCACHE_ALGOLRR 0}
+	global CONFIG_DCACHE_ALGOLRU
+	if {$tmpvar_17 == "LRU"} then {set CONFIG_DCACHE_ALGOLRU 1} else {set CONFIG_DCACHE_ALGOLRU 0}
+	global CONFIG_DCACHE_LOCK
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_DCACHE_ENABLE == 1) && ($CONFIG_DCACHE_ASSO1 != 1)} then {
+	set CONFIG_DCACHE_LOCK [expr $CONFIG_DCACHE_LOCK&15]} else {set CONFIG_DCACHE_LOCK [expr $CONFIG_DCACHE_LOCK|16]}
+	global CONFIG_DCACHE_SNOOP
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_DCACHE_ENABLE == 1)} then {
+	set CONFIG_DCACHE_SNOOP [expr $CONFIG_DCACHE_SNOOP&15]} else {set CONFIG_DCACHE_SNOOP [expr $CONFIG_DCACHE_SNOOP|16]}
+	global CONFIG_DCACHE_SNOOP_SEPTAG
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_DCACHE_ENABLE == 1) && ($CONFIG_DCACHE_SNOOP == 1)} then {
+	set CONFIG_DCACHE_SNOOP_SEPTAG [expr $CONFIG_DCACHE_SNOOP_SEPTAG&15]} else {set CONFIG_DCACHE_SNOOP_SEPTAG [expr $CONFIG_DCACHE_SNOOP_SEPTAG|16]}
+	global CONFIG_CACHE_FIXED
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_ICACHE_ENABLE == 1 || $CONFIG_DCACHE_ENABLE == 1)} then {validate_hex CONFIG_CACHE_FIXED "$CONFIG_CACHE_FIXED" 0}
+	global CONFIG_DCACHE_LRAM
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_MMU_ENABLE != 1)} then {
+	set CONFIG_DCACHE_LRAM [expr $CONFIG_DCACHE_LRAM&15]} else {set CONFIG_DCACHE_LRAM [expr $CONFIG_DCACHE_LRAM|16]}
+	global tmpvar_18
+	global CONFIG_DCACHE_LRAM_SZ1
+	if {$tmpvar_18 == "1"} then {set CONFIG_DCACHE_LRAM_SZ1 1} else {set CONFIG_DCACHE_LRAM_SZ1 0}
+	global CONFIG_DCACHE_LRAM_SZ2
+	if {$tmpvar_18 == "2"} then {set CONFIG_DCACHE_LRAM_SZ2 1} else {set CONFIG_DCACHE_LRAM_SZ2 0}
+	global CONFIG_DCACHE_LRAM_SZ4
+	if {$tmpvar_18 == "4"} then {set CONFIG_DCACHE_LRAM_SZ4 1} else {set CONFIG_DCACHE_LRAM_SZ4 0}
+	global CONFIG_DCACHE_LRAM_SZ8
+	if {$tmpvar_18 == "8"} then {set CONFIG_DCACHE_LRAM_SZ8 1} else {set CONFIG_DCACHE_LRAM_SZ8 0}
+	global CONFIG_DCACHE_LRAM_SZ16
+	if {$tmpvar_18 == "16"} then {set CONFIG_DCACHE_LRAM_SZ16 1} else {set CONFIG_DCACHE_LRAM_SZ16 0}
+	global CONFIG_DCACHE_LRAM_SZ32
+	if {$tmpvar_18 == "32"} then {set CONFIG_DCACHE_LRAM_SZ32 1} else {set CONFIG_DCACHE_LRAM_SZ32 0}
+	global CONFIG_DCACHE_LRAM_SZ64
+	if {$tmpvar_18 == "64"} then {set CONFIG_DCACHE_LRAM_SZ64 1} else {set CONFIG_DCACHE_LRAM_SZ64 0}
+	global CONFIG_DCACHE_LRAM_SZ128
+	if {$tmpvar_18 == "128"} then {set CONFIG_DCACHE_LRAM_SZ128 1} else {set CONFIG_DCACHE_LRAM_SZ128 0}
+	global CONFIG_DCACHE_LRAM_SZ256
+	if {$tmpvar_18 == "256"} then {set CONFIG_DCACHE_LRAM_SZ256 1} else {set CONFIG_DCACHE_LRAM_SZ256 0}
+	global CONFIG_DCACHE_LRSTART
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_DCACHE_LRAM == 1)} then {validate_hex CONFIG_DCACHE_LRSTART "$CONFIG_DCACHE_LRSTART" 8f}
+}
+
+
+proc menu7 {w title} {
+	set oldFocus [focus]
+	catch {focus .menu3}
+	catch {destroy $w; unregister_active 7}
+	toplevel $w -class Dialog
+	wm withdraw $w
+	global active_menus
+	set active_menus [lsort -integer [linsert $active_menus end 7]]
+	message $w.m -width 400 -aspect 300 -text \
+		"MMU"  -relief raised
+	pack $w.m -pady 10 -side top -padx 10
+	wm title $w "MMU" 
+
+	bind $w <Escape> "catch {focus $oldFocus}; destroy $w; unregister_active 7; break"
+	set nextscript "catch {focus $oldFocus}; destroy $w; unregister_active 7; menu8 .menu8 \"$title\""
+	frame $w.f
+	button $w.f.back -text "OK" \
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 7"
+	button $w.f.next -text "Next" -underline 0\
+		-width 15 -command $nextscript
+	bind all <Alt-n> $nextscript
+	button $w.f.prev -text "Prev" -underline 0\
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 7; menu6 .menu6 \"$title\""
+	bind $w <Alt-p> "catch {focus $oldFocus}; destroy $w; unregister_active 7; menu6 .menu6 \"$title\";break"
+	pack $w.f.back $w.f.next $w.f.prev -side left -expand on
+	pack $w.f -pady 10 -side bottom -anchor w -fill x
+	frame $w.topline -relief ridge -borderwidth 2 -height 2
+	pack $w.topline -side top -fill x
+
+	frame $w.botline -relief ridge -borderwidth 2 -height 2
+	pack $w.botline -side bottom -fill x
+
+	frame $w.config
+	pack $w.config -fill y -expand on
+
+	scrollbar $w.config.vscroll -command "$w.config.canvas yview"
+	pack $w.config.vscroll -side right -fill y
+
+	canvas $w.config.canvas -height 1\
+		-relief flat -borderwidth 0 -yscrollcommand "$w.config.vscroll set" \
+		-width [expr [winfo screenwidth .] * 1 / 2] 
+	frame $w.config.f
+	bind $w <Key-Down> "$w.config.canvas yview scroll  1 unit;break;"
+	bind $w <Key-Up> "$w.config.canvas yview scroll  -1 unit;break;"
+	bind $w <Key-Next> "$w.config.canvas yview scroll  1 page;break;"
+	bind $w <Key-Prior> "$w.config.canvas yview scroll  -1 page;break;"
+	bind $w <Key-Home> "$w.config.canvas yview moveto 0;break;"
+	bind $w <Key-End> "$w.config.canvas yview moveto 1 ;break;"
+	pack $w.config.canvas -side right -fill y
+
+
+	bool $w.config.f 7 0 "Enable MMU       " CONFIG_MMU_ENABLE
+	global tmpvar_19
+	minimenu $w.config.f 7 1 "MMU type              " tmpvar_19 CONFIG_MMU_COMBINED
+	menu $w.config.f.x1.x.menu -tearoffcommand "menutitle \"MMU type              \""
+	$w.config.f.x1.x.menu add radiobutton -label "combined" -variable tmpvar_19 -value "combined" -command "update_active"
+	$w.config.f.x1.x.menu add radiobutton -label "split" -variable tmpvar_19 -value "split" -command "update_active"
+	menusplit $w $w.config.f.x1.x.menu 2
+	global tmpvar_20
+	minimenu $w.config.f 7 2 "TLB replacement sheme              " tmpvar_20 CONFIG_MMU_REPARRAY
+	menu $w.config.f.x2.x.menu -tearoffcommand "menutitle \"TLB replacement sheme              \""
+	$w.config.f.x2.x.menu add radiobutton -label "LRU" -variable tmpvar_20 -value "LRU" -command "update_active"
+	$w.config.f.x2.x.menu add radiobutton -label "Increment" -variable tmpvar_20 -value "Increment" -command "update_active"
+	menusplit $w $w.config.f.x2.x.menu 2
+	global tmpvar_21
+	minimenu $w.config.f 7 3 "Instruction (or combined) TLB entries" tmpvar_21 CONFIG_MMU_I2
+	menu $w.config.f.x3.x.menu -tearoffcommand "menutitle \"Instruction (or combined) TLB entries\""
+	$w.config.f.x3.x.menu add radiobutton -label "2" -variable tmpvar_21 -value "2" -command "update_active"
+	$w.config.f.x3.x.menu add radiobutton -label "4" -variable tmpvar_21 -value "4" -command "update_active"
+	$w.config.f.x3.x.menu add radiobutton -label "8" -variable tmpvar_21 -value "8" -command "update_active"
+	$w.config.f.x3.x.menu add radiobutton -label "16" -variable tmpvar_21 -value "16" -command "update_active"
+	$w.config.f.x3.x.menu add radiobutton -label "32" -variable tmpvar_21 -value "32" -command "update_active"
+	$w.config.f.x3.x.menu add radiobutton -label "64" -variable tmpvar_21 -value "64" -command "update_active"
+	menusplit $w $w.config.f.x3.x.menu 6
+	global tmpvar_22
+	minimenu $w.config.f 7 4 "Data TLB entries" tmpvar_22 CONFIG_MMU_D2
+	menu $w.config.f.x4.x.menu -tearoffcommand "menutitle \"Data TLB entries\""
+	$w.config.f.x4.x.menu add radiobutton -label "2" -variable tmpvar_22 -value "2" -command "update_active"
+	$w.config.f.x4.x.menu add radiobutton -label "4" -variable tmpvar_22 -value "4" -command "update_active"
+	$w.config.f.x4.x.menu add radiobutton -label "8" -variable tmpvar_22 -value "8" -command "update_active"
+	$w.config.f.x4.x.menu add radiobutton -label "16" -variable tmpvar_22 -value "16" -command "update_active"
+	$w.config.f.x4.x.menu add radiobutton -label "32" -variable tmpvar_22 -value "32" -command "update_active"
+	$w.config.f.x4.x.menu add radiobutton -label "64" -variable tmpvar_22 -value "64" -command "update_active"
+	menusplit $w $w.config.f.x4.x.menu 6
+	bool $w.config.f 7 5 "Fast writebuffer       " CONFIG_MMU_FASTWB
+	global tmpvar_23
+	minimenu $w.config.f 7 6 "MMU page size" tmpvar_23 CONFIG_MMU_PAGE_4K
+	menu $w.config.f.x6.x.menu -tearoffcommand "menutitle \"MMU page size\""
+	$w.config.f.x6.x.menu add radiobutton -label "4K" -variable tmpvar_23 -value "4K" -command "update_active"
+	$w.config.f.x6.x.menu add radiobutton -label "8K" -variable tmpvar_23 -value "8K" -command "update_active"
+	$w.config.f.x6.x.menu add radiobutton -label "16K" -variable tmpvar_23 -value "16K" -command "update_active"
+	$w.config.f.x6.x.menu add radiobutton -label "32K" -variable tmpvar_23 -value "32K" -command "update_active"
+	$w.config.f.x6.x.menu add radiobutton -label "Programmable" -variable tmpvar_23 -value "Programmable" -command "update_active"
+	menusplit $w $w.config.f.x6.x.menu 5
+
+
+
+	focus $w
+	update_active
+	global winx; global winy
+	if {[winfo exists .menu3] == 0} then {menu3 .menu3 "Processor            "}
+	set winx [expr [winfo x .menu3]+30]; set winy [expr [winfo y .menu3]+30]
+	if {[winfo exists $w]} then {wm geometry $w +$winx+$winy}
+	update idletasks
+	if {[winfo exists $w]} then  {$w.config.canvas create window 0 0 -anchor nw -window $w.config.f
+
+	$w.config.canvas configure \
+		-width [expr [winfo reqwidth $w.config.f] + 1]\
+		-scrollregion "-1 -1 [expr [winfo reqwidth $w.config.f] + 1] \
+			 [expr [winfo reqheight $w.config.f] + 1]"
+
+	set winy [expr [winfo reqh $w] - [winfo reqh $w.config.canvas]]
+	set scry [expr [winfo screenh $w] / 2]
+	set maxy [expr [winfo screenh $w] * 3 / 4]
+	set canvtotal [expr [winfo reqh $w.config.f] + 2]
+	if [expr $winy + $canvtotal < $maxy] {
+		$w.config.canvas configure -height $canvtotal
+	} else {
+		$w.config.canvas configure -height [expr $scry - $winy]
+		}
+	}
+	update idletasks
+	if {[winfo exists $w]} then {
+	wm maxsize $w [winfo width $w] [winfo screenheight $w]
+	wm minsize $w [winfo width $w] 100
+
+	wm deiconify $w
+}
+}
+
+proc update_menu7 {} {
+	global CONFIG_LEON3
+	global CONFIG_LEON3_CUSTOM
+	global CONFIG_MMU_ENABLE
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {
+	configure_entry .menu7.config.f.x0 normal {n l y}} else {configure_entry .menu7.config.f.x0 disabled {y n l}}
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_MMU_ENABLE == 1)} then {configure_entry .menu7.config.f.x1 normal {x l}} else {configure_entry .menu7.config.f.x1 disabled {x l}}
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_MMU_ENABLE == 1)} then {configure_entry .menu7.config.f.x2 normal {x l}} else {configure_entry .menu7.config.f.x2 disabled {x l}}
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_MMU_ENABLE == 1)} then {configure_entry .menu7.config.f.x3 normal {x l}} else {configure_entry .menu7.config.f.x3 disabled {x l}}
+	global CONFIG_MMU_SPLIT
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_MMU_ENABLE == 1) && ($CONFIG_MMU_SPLIT == 1)} then {configure_entry .menu7.config.f.x4 normal {x l}} else {configure_entry .menu7.config.f.x4 disabled {x l}}
+	global CONFIG_MMU_FASTWB
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_MMU_ENABLE == 1) && ($CONFIG_MMU_SPLIT == 1)} then {
+	configure_entry .menu7.config.f.x5 normal {n l y}} else {configure_entry .menu7.config.f.x5 disabled {y n l}}
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_MMU_ENABLE == 1)} then {configure_entry .menu7.config.f.x6 normal {x l}} else {configure_entry .menu7.config.f.x6 disabled {x l}}
+}
+
+
+proc update_define_menu7 {} {
+	update_define_mainmenu
+	global CONFIG_MODULES
+	global CONFIG_LEON3
+	global CONFIG_LEON3_CUSTOM
+	global CONFIG_MMU_ENABLE
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {
+	set CONFIG_MMU_ENABLE [expr $CONFIG_MMU_ENABLE&15]} else {set CONFIG_MMU_ENABLE [expr $CONFIG_MMU_ENABLE|16]}
+	global tmpvar_19
+	global CONFIG_MMU_COMBINED
+	if {$tmpvar_19 == "combined"} then {set CONFIG_MMU_COMBINED 1} else {set CONFIG_MMU_COMBINED 0}
+	global CONFIG_MMU_SPLIT
+	if {$tmpvar_19 == "split"} then {set CONFIG_MMU_SPLIT 1} else {set CONFIG_MMU_SPLIT 0}
+	global tmpvar_20
+	global CONFIG_MMU_REPARRAY
+	if {$tmpvar_20 == "LRU"} then {set CONFIG_MMU_REPARRAY 1} else {set CONFIG_MMU_REPARRAY 0}
+	global CONFIG_MMU_REPINCREMENT
+	if {$tmpvar_20 == "Increment"} then {set CONFIG_MMU_REPINCREMENT 1} else {set CONFIG_MMU_REPINCREMENT 0}
+	global tmpvar_21
+	global CONFIG_MMU_I2
+	if {$tmpvar_21 == "2"} then {set CONFIG_MMU_I2 1} else {set CONFIG_MMU_I2 0}
+	global CONFIG_MMU_I4
+	if {$tmpvar_21 == "4"} then {set CONFIG_MMU_I4 1} else {set CONFIG_MMU_I4 0}
+	global CONFIG_MMU_I8
+	if {$tmpvar_21 == "8"} then {set CONFIG_MMU_I8 1} else {set CONFIG_MMU_I8 0}
+	global CONFIG_MMU_I16
+	if {$tmpvar_21 == "16"} then {set CONFIG_MMU_I16 1} else {set CONFIG_MMU_I16 0}
+	global CONFIG_MMU_I32
+	if {$tmpvar_21 == "32"} then {set CONFIG_MMU_I32 1} else {set CONFIG_MMU_I32 0}
+	global CONFIG_MMU_I64
+	if {$tmpvar_21 == "64"} then {set CONFIG_MMU_I64 1} else {set CONFIG_MMU_I64 0}
+	global tmpvar_22
+	global CONFIG_MMU_D2
+	if {$tmpvar_22 == "2"} then {set CONFIG_MMU_D2 1} else {set CONFIG_MMU_D2 0}
+	global CONFIG_MMU_D4
+	if {$tmpvar_22 == "4"} then {set CONFIG_MMU_D4 1} else {set CONFIG_MMU_D4 0}
+	global CONFIG_MMU_D8
+	if {$tmpvar_22 == "8"} then {set CONFIG_MMU_D8 1} else {set CONFIG_MMU_D8 0}
+	global CONFIG_MMU_D16
+	if {$tmpvar_22 == "16"} then {set CONFIG_MMU_D16 1} else {set CONFIG_MMU_D16 0}
+	global CONFIG_MMU_D32
+	if {$tmpvar_22 == "32"} then {set CONFIG_MMU_D32 1} else {set CONFIG_MMU_D32 0}
+	global CONFIG_MMU_D64
+	if {$tmpvar_22 == "64"} then {set CONFIG_MMU_D64 1} else {set CONFIG_MMU_D64 0}
+	global CONFIG_MMU_FASTWB
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_MMU_ENABLE == 1) && ($CONFIG_MMU_SPLIT == 1)} then {
+	set CONFIG_MMU_FASTWB [expr $CONFIG_MMU_FASTWB&15]} else {set CONFIG_MMU_FASTWB [expr $CONFIG_MMU_FASTWB|16]}
+	global tmpvar_23
+	global CONFIG_MMU_PAGE_4K
+	if {$tmpvar_23 == "4K"} then {set CONFIG_MMU_PAGE_4K 1} else {set CONFIG_MMU_PAGE_4K 0}
+	global CONFIG_MMU_PAGE_8K
+	if {$tmpvar_23 == "8K"} then {set CONFIG_MMU_PAGE_8K 1} else {set CONFIG_MMU_PAGE_8K 0}
+	global CONFIG_MMU_PAGE_16K
+	if {$tmpvar_23 == "16K"} then {set CONFIG_MMU_PAGE_16K 1} else {set CONFIG_MMU_PAGE_16K 0}
+	global CONFIG_MMU_PAGE_32K
+	if {$tmpvar_23 == "32K"} then {set CONFIG_MMU_PAGE_32K 1} else {set CONFIG_MMU_PAGE_32K 0}
+	global CONFIG_MMU_PAGE_PROG
+	if {$tmpvar_23 == "Programmable"} then {set CONFIG_MMU_PAGE_PROG 1} else {set CONFIG_MMU_PAGE_PROG 0}
+}
+
+
+proc menu8 {w title} {
+	set oldFocus [focus]
+	catch {focus .menu3}
+	catch {destroy $w; unregister_active 8}
+	toplevel $w -class Dialog
+	wm withdraw $w
+	global active_menus
+	set active_menus [lsort -integer [linsert $active_menus end 8]]
+	message $w.m -width 400 -aspect 300 -text \
+		"Debug Support Unit        "  -relief raised
+	pack $w.m -pady 10 -side top -padx 10
+	wm title $w "Debug Support Unit        " 
+
+	bind $w <Escape> "catch {focus $oldFocus}; destroy $w; unregister_active 8; break"
+	set nextscript "catch {focus $oldFocus}; destroy $w; unregister_active 8; menu9 .menu9 \"$title\""
+	frame $w.f
+	button $w.f.back -text "OK" \
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 8"
+	button $w.f.next -text "Next" -underline 0\
+		-width 15 -command $nextscript
+	bind all <Alt-n> $nextscript
+	button $w.f.prev -text "Prev" -underline 0\
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 8; menu7 .menu7 \"$title\""
+	bind $w <Alt-p> "catch {focus $oldFocus}; destroy $w; unregister_active 8; menu7 .menu7 \"$title\";break"
+	pack $w.f.back $w.f.next $w.f.prev -side left -expand on
+	pack $w.f -pady 10 -side bottom -anchor w -fill x
+	frame $w.topline -relief ridge -borderwidth 2 -height 2
+	pack $w.topline -side top -fill x
+
+	frame $w.botline -relief ridge -borderwidth 2 -height 2
+	pack $w.botline -side bottom -fill x
+
+	frame $w.config
+	pack $w.config -fill y -expand on
+
+	scrollbar $w.config.vscroll -command "$w.config.canvas yview"
+	pack $w.config.vscroll -side right -fill y
+
+	canvas $w.config.canvas -height 1\
+		-relief flat -borderwidth 0 -yscrollcommand "$w.config.vscroll set" \
+		-width [expr [winfo screenwidth .] * 1 / 2] 
+	frame $w.config.f
+	bind $w <Key-Down> "$w.config.canvas yview scroll  1 unit;break;"
+	bind $w <Key-Up> "$w.config.canvas yview scroll  -1 unit;break;"
+	bind $w <Key-Next> "$w.config.canvas yview scroll  1 page;break;"
+	bind $w <Key-Prior> "$w.config.canvas yview scroll  -1 page;break;"
+	bind $w <Key-Home> "$w.config.canvas yview moveto 0;break;"
+	bind $w <Key-End> "$w.config.canvas yview moveto 1 ;break;"
+	pack $w.config.canvas -side right -fill y
+
+
+	bool $w.config.f 8 0 "Enable LEON3 Debug support unit    " CONFIG_DSU_ENABLE
+	bool $w.config.f 8 1 "Instruction trace buffer" CONFIG_DSU_ITRACE
+	global tmpvar_24
+	minimenu $w.config.f 8 2 "Instruction trace buffer size (kbytes)" tmpvar_24 CONFIG_DSU_ITRACESZ1
+	menu $w.config.f.x2.x.menu -tearoffcommand "menutitle \"Instruction trace buffer size (kbytes)\""
+	$w.config.f.x2.x.menu add radiobutton -label "1" -variable tmpvar_24 -value "1" -command "update_active"
+	$w.config.f.x2.x.menu add radiobutton -label "2" -variable tmpvar_24 -value "2" -command "update_active"
+	$w.config.f.x2.x.menu add radiobutton -label "4" -variable tmpvar_24 -value "4" -command "update_active"
+	$w.config.f.x2.x.menu add radiobutton -label "8" -variable tmpvar_24 -value "8" -command "update_active"
+	$w.config.f.x2.x.menu add radiobutton -label "16" -variable tmpvar_24 -value "16" -command "update_active"
+	menusplit $w $w.config.f.x2.x.menu 5
+	bool $w.config.f 8 3 "AHB trace buffer" CONFIG_DSU_ATRACE
+	global tmpvar_25
+	minimenu $w.config.f 8 4 "AHB trace buffer size (kbytes)" tmpvar_25 CONFIG_DSU_ATRACESZ1
+	menu $w.config.f.x4.x.menu -tearoffcommand "menutitle \"AHB trace buffer size (kbytes)\""
+	$w.config.f.x4.x.menu add radiobutton -label "1" -variable tmpvar_25 -value "1" -command "update_active"
+	$w.config.f.x4.x.menu add radiobutton -label "2" -variable tmpvar_25 -value "2" -command "update_active"
+	$w.config.f.x4.x.menu add radiobutton -label "4" -variable tmpvar_25 -value "4" -command "update_active"
+	$w.config.f.x4.x.menu add radiobutton -label "8" -variable tmpvar_25 -value "8" -command "update_active"
+	$w.config.f.x4.x.menu add radiobutton -label "16" -variable tmpvar_25 -value "16" -command "update_active"
+	menusplit $w $w.config.f.x4.x.menu 5
+
+
+
+	focus $w
+	update_active
+	global winx; global winy
+	if {[winfo exists .menu3] == 0} then {menu3 .menu3 "Processor            "}
+	set winx [expr [winfo x .menu3]+30]; set winy [expr [winfo y .menu3]+30]
+	if {[winfo exists $w]} then {wm geometry $w +$winx+$winy}
+	update idletasks
+	if {[winfo exists $w]} then  {$w.config.canvas create window 0 0 -anchor nw -window $w.config.f
+
+	$w.config.canvas configure \
+		-width [expr [winfo reqwidth $w.config.f] + 1]\
+		-scrollregion "-1 -1 [expr [winfo reqwidth $w.config.f] + 1] \
+			 [expr [winfo reqheight $w.config.f] + 1]"
+
+	set winy [expr [winfo reqh $w] - [winfo reqh $w.config.canvas]]
+	set scry [expr [winfo screenh $w] / 2]
+	set maxy [expr [winfo screenh $w] * 3 / 4]
+	set canvtotal [expr [winfo reqh $w.config.f] + 2]
+	if [expr $winy + $canvtotal < $maxy] {
+		$w.config.canvas configure -height $canvtotal
+	} else {
+		$w.config.canvas configure -height [expr $scry - $winy]
+		}
+	}
+	update idletasks
+	if {[winfo exists $w]} then {
+	wm maxsize $w [winfo width $w] [winfo screenheight $w]
+	wm minsize $w [winfo width $w] 100
+
+	wm deiconify $w
+}
+}
+
+proc update_menu8 {} {
+	global CONFIG_LEON3
+	global CONFIG_LEON3_CUSTOM
+	global CONFIG_DSU_ENABLE
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {
+	configure_entry .menu8.config.f.x0 normal {n l y}} else {configure_entry .menu8.config.f.x0 disabled {y n l}}
+	global CONFIG_DSU_ITRACE
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_DSU_ENABLE == 1)} then {
+	configure_entry .menu8.config.f.x1 normal {n l y}} else {configure_entry .menu8.config.f.x1 disabled {y n l}}
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_DSU_ENABLE == 1) && ($CONFIG_DSU_ITRACE == 1)} then {configure_entry .menu8.config.f.x2 normal {x l}} else {configure_entry .menu8.config.f.x2 disabled {x l}}
+	global CONFIG_DSU_ATRACE
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_DSU_ENABLE == 1)} then {
+	configure_entry .menu8.config.f.x3 normal {n l y}} else {configure_entry .menu8.config.f.x3 disabled {y n l}}
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_DSU_ENABLE == 1) && ($CONFIG_DSU_ATRACE == 1)} then {configure_entry .menu8.config.f.x4 normal {x l}} else {configure_entry .menu8.config.f.x4 disabled {x l}}
+}
+
+
+proc update_define_menu8 {} {
+	update_define_mainmenu
+	global CONFIG_MODULES
+	global CONFIG_LEON3
+	global CONFIG_LEON3_CUSTOM
+	global CONFIG_DSU_ENABLE
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {
+	set CONFIG_DSU_ENABLE [expr $CONFIG_DSU_ENABLE&15]} else {set CONFIG_DSU_ENABLE [expr $CONFIG_DSU_ENABLE|16]}
+	global CONFIG_DSU_ITRACE
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_DSU_ENABLE == 1)} then {
+	set CONFIG_DSU_ITRACE [expr $CONFIG_DSU_ITRACE&15]} else {set CONFIG_DSU_ITRACE [expr $CONFIG_DSU_ITRACE|16]}
+	global tmpvar_24
+	global CONFIG_DSU_ITRACESZ1
+	if {$tmpvar_24 == "1"} then {set CONFIG_DSU_ITRACESZ1 1} else {set CONFIG_DSU_ITRACESZ1 0}
+	global CONFIG_DSU_ITRACESZ2
+	if {$tmpvar_24 == "2"} then {set CONFIG_DSU_ITRACESZ2 1} else {set CONFIG_DSU_ITRACESZ2 0}
+	global CONFIG_DSU_ITRACESZ4
+	if {$tmpvar_24 == "4"} then {set CONFIG_DSU_ITRACESZ4 1} else {set CONFIG_DSU_ITRACESZ4 0}
+	global CONFIG_DSU_ITRACESZ8
+	if {$tmpvar_24 == "8"} then {set CONFIG_DSU_ITRACESZ8 1} else {set CONFIG_DSU_ITRACESZ8 0}
+	global CONFIG_DSU_ITRACESZ16
+	if {$tmpvar_24 == "16"} then {set CONFIG_DSU_ITRACESZ16 1} else {set CONFIG_DSU_ITRACESZ16 0}
+	global CONFIG_DSU_ATRACE
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_DSU_ENABLE == 1)} then {
+	set CONFIG_DSU_ATRACE [expr $CONFIG_DSU_ATRACE&15]} else {set CONFIG_DSU_ATRACE [expr $CONFIG_DSU_ATRACE|16]}
+	global tmpvar_25
+	global CONFIG_DSU_ATRACESZ1
+	if {$tmpvar_25 == "1"} then {set CONFIG_DSU_ATRACESZ1 1} else {set CONFIG_DSU_ATRACESZ1 0}
+	global CONFIG_DSU_ATRACESZ2
+	if {$tmpvar_25 == "2"} then {set CONFIG_DSU_ATRACESZ2 1} else {set CONFIG_DSU_ATRACESZ2 0}
+	global CONFIG_DSU_ATRACESZ4
+	if {$tmpvar_25 == "4"} then {set CONFIG_DSU_ATRACESZ4 1} else {set CONFIG_DSU_ATRACESZ4 0}
+	global CONFIG_DSU_ATRACESZ8
+	if {$tmpvar_25 == "8"} then {set CONFIG_DSU_ATRACESZ8 1} else {set CONFIG_DSU_ATRACESZ8 0}
+	global CONFIG_DSU_ATRACESZ16
+	if {$tmpvar_25 == "16"} then {set CONFIG_DSU_ATRACESZ16 1} else {set CONFIG_DSU_ATRACESZ16 0}
+}
+
+
+proc menu9 {w title} {
+	set oldFocus [focus]
+	catch {focus .menu3}
+	catch {destroy $w; unregister_active 9}
+	toplevel $w -class Dialog
+	wm withdraw $w
+	global active_menus
+	set active_menus [lsort -integer [linsert $active_menus end 9]]
+	message $w.m -width 400 -aspect 300 -text \
+		"Fault-tolerance  "  -relief raised
+	pack $w.m -pady 10 -side top -padx 10
+	wm title $w "Fault-tolerance  " 
+
+	bind $w <Escape> "catch {focus $oldFocus}; destroy $w; unregister_active 9; break"
+	set nextscript "catch {focus $oldFocus}; destroy $w; unregister_active 9; menu10 .menu10 \"$title\""
+	frame $w.f
+	button $w.f.back -text "OK" \
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 9"
+	button $w.f.next -text "Next" -underline 0\
+		-width 15 -command $nextscript
+	bind all <Alt-n> $nextscript
+	button $w.f.prev -text "Prev" -underline 0\
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 9; menu8 .menu8 \"$title\""
+	bind $w <Alt-p> "catch {focus $oldFocus}; destroy $w; unregister_active 9; menu8 .menu8 \"$title\";break"
+	pack $w.f.back $w.f.next $w.f.prev -side left -expand on
+	pack $w.f -pady 10 -side bottom -anchor w -fill x
+	frame $w.topline -relief ridge -borderwidth 2 -height 2
+	pack $w.topline -side top -fill x
+
+	frame $w.botline -relief ridge -borderwidth 2 -height 2
+	pack $w.botline -side bottom -fill x
+
+	frame $w.config
+	pack $w.config -fill y -expand on
+
+	scrollbar $w.config.vscroll -command "$w.config.canvas yview"
+	pack $w.config.vscroll -side right -fill y
+
+	canvas $w.config.canvas -height 1\
+		-relief flat -borderwidth 0 -yscrollcommand "$w.config.vscroll set" \
+		-width [expr [winfo screenwidth .] * 1 / 2] 
+	frame $w.config.f
+	bind $w <Key-Down> "$w.config.canvas yview scroll  1 unit;break;"
+	bind $w <Key-Up> "$w.config.canvas yview scroll  -1 unit;break;"
+	bind $w <Key-Next> "$w.config.canvas yview scroll  1 page;break;"
+	bind $w <Key-Prior> "$w.config.canvas yview scroll  -1 page;break;"
+	bind $w <Key-Home> "$w.config.canvas yview moveto 0;break;"
+	bind $w <Key-End> "$w.config.canvas yview moveto 1 ;break;"
+	pack $w.config.canvas -side right -fill y
+
+
+	bool $w.config.f 9 0 "Use LEON3-FT processor core      " CONFIG_LEON3FT_EN
+	global tmpvar_26
+	minimenu $w.config.f 9 1 "IU Register file protection     " tmpvar_26 CONFIG_IUFT_NONE
+	menu $w.config.f.x1.x.menu -tearoffcommand "menutitle \"IU Register file protection     \""
+	$w.config.f.x1.x.menu add radiobutton -label "None" -variable tmpvar_26 -value "None" -command "update_active"
+	$w.config.f.x1.x.menu add radiobutton -label "Parity" -variable tmpvar_26 -value "Parity" -command "update_active"
+	$w.config.f.x1.x.menu add radiobutton -label "PDMR" -variable tmpvar_26 -value "PDMR" -command "update_active"
+	$w.config.f.x1.x.menu add radiobutton -label "BCH" -variable tmpvar_26 -value "BCH" -command "update_active"
+	$w.config.f.x1.x.menu add radiobutton -label "TMR" -variable tmpvar_26 -value "TMR" -command "update_active"
+	menusplit $w $w.config.f.x1.x.menu 5
+	global tmpvar_27
+	minimenu $w.config.f 9 2 "FPU Register file protection     " tmpvar_27 CONFIG_FPUFT_NONE
+	menu $w.config.f.x2.x.menu -tearoffcommand "menutitle \"FPU Register file protection     \""
+	$w.config.f.x2.x.menu add radiobutton -label "None" -variable tmpvar_27 -value "None" -command "update_active"
+	$w.config.f.x2.x.menu add radiobutton -label "Parity" -variable tmpvar_27 -value "Parity" -command "update_active"
+	$w.config.f.x2.x.menu add radiobutton -label "PDMR" -variable tmpvar_27 -value "PDMR" -command "update_active"
+	$w.config.f.x2.x.menu add radiobutton -label "TMR" -variable tmpvar_27 -value "TMR" -command "update_active"
+	menusplit $w $w.config.f.x2.x.menu 4
+	bool $w.config.f 9 3 "Register file error injection" CONFIG_RF_ERRINJ
+	bool $w.config.f 9 4 "Cache memory protection        " CONFIG_CACHE_FT_EN
+	int $w.config.f 9 5 "Cache memory error injection" CONFIG_CACHE_ERRINJ
+
+
+
+	focus $w
+	update_active
+	global winx; global winy
+	if {[winfo exists .menu3] == 0} then {menu3 .menu3 "Processor            "}
+	set winx [expr [winfo x .menu3]+30]; set winy [expr [winfo y .menu3]+30]
+	if {[winfo exists $w]} then {wm geometry $w +$winx+$winy}
+	update idletasks
+	if {[winfo exists $w]} then  {$w.config.canvas create window 0 0 -anchor nw -window $w.config.f
+
+	$w.config.canvas configure \
+		-width [expr [winfo reqwidth $w.config.f] + 1]\
+		-scrollregion "-1 -1 [expr [winfo reqwidth $w.config.f] + 1] \
+			 [expr [winfo reqheight $w.config.f] + 1]"
+
+	set winy [expr [winfo reqh $w] - [winfo reqh $w.config.canvas]]
+	set scry [expr [winfo screenh $w] / 2]
+	set maxy [expr [winfo screenh $w] * 3 / 4]
+	set canvtotal [expr [winfo reqh $w.config.f] + 2]
+	if [expr $winy + $canvtotal < $maxy] {
+		$w.config.canvas configure -height $canvtotal
+	} else {
+		$w.config.canvas configure -height [expr $scry - $winy]
+		}
+	}
+	update idletasks
+	if {[winfo exists $w]} then {
+	wm maxsize $w [winfo width $w] [winfo screenheight $w]
+	wm minsize $w [winfo width $w] 100
+
+	wm deiconify $w
+}
+}
+
+proc update_menu9 {} {
+	global CONFIG_LEON3
+	global CONFIG_LEON3FT_PRESENT
+	global CONFIG_LEON3FT_EN
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3FT_PRESENT == 1)} then {
+	configure_entry .menu9.config.f.x0 normal {n l y}} else {configure_entry .menu9.config.f.x0 disabled {y n l}}
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3FT_PRESENT == 1) && ($CONFIG_LEON3FT_EN == 1)} then {configure_entry .menu9.config.f.x1 normal {x l}} else {configure_entry .menu9.config.f.x1 disabled {x l}}
+	global CONFIG_FPU_ENABLE
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3FT_PRESENT == 1) && ($CONFIG_LEON3FT_EN == 1) && ($CONFIG_FPU_ENABLE == 1)} then {configure_entry .menu9.config.f.x2 normal {x l}} else {configure_entry .menu9.config.f.x2 disabled {x l}}
+	global CONFIG_RF_ERRINJ
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3FT_PRESENT == 1) && ($CONFIG_LEON3FT_EN == 1)} then {
+	configure_entry .menu9.config.f.x3 normal {n l y}} else {configure_entry .menu9.config.f.x3 disabled {y n l}}
+	global CONFIG_CACHE_FT_EN
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3FT_PRESENT == 1) && ($CONFIG_LEON3FT_EN == 1)} then {
+	configure_entry .menu9.config.f.x4 normal {n l y}} else {configure_entry .menu9.config.f.x4 disabled {y n l}}
+	global CONFIG_CACHE_ERRINJ
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3FT_PRESENT == 1) && ($CONFIG_LEON3FT_EN == 1)} then {.menu9.config.f.x5.x configure -state normal -foreground [ cget .ref -foreground ]; .menu9.config.f.x5.l configure -state normal; } else {.menu9.config.f.x5.x configure -state disabled -foreground [ cget .ref -disabledforeground ]; .menu9.config.f.x5.l configure -state disabled}
+}
+
+
+proc update_define_menu9 {} {
+	update_define_mainmenu
+	global CONFIG_MODULES
+	global CONFIG_LEON3
+	global CONFIG_LEON3FT_PRESENT
+	global CONFIG_LEON3FT_EN
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3FT_PRESENT == 1)} then {
+	set CONFIG_LEON3FT_EN [expr $CONFIG_LEON3FT_EN&15]} else {set CONFIG_LEON3FT_EN [expr $CONFIG_LEON3FT_EN|16]}
+	global tmpvar_26
+	global CONFIG_IUFT_NONE
+	if {$tmpvar_26 == "None"} then {set CONFIG_IUFT_NONE 1} else {set CONFIG_IUFT_NONE 0}
+	global CONFIG_IUFT_PAR
+	if {$tmpvar_26 == "Parity"} then {set CONFIG_IUFT_PAR 1} else {set CONFIG_IUFT_PAR 0}
+	global CONFIG_IUFT_DMR
+	if {$tmpvar_26 == "PDMR"} then {set CONFIG_IUFT_DMR 1} else {set CONFIG_IUFT_DMR 0}
+	global CONFIG_IUFT_BCH
+	if {$tmpvar_26 == "BCH"} then {set CONFIG_IUFT_BCH 1} else {set CONFIG_IUFT_BCH 0}
+	global CONFIG_IUFT_TMR
+	if {$tmpvar_26 == "TMR"} then {set CONFIG_IUFT_TMR 1} else {set CONFIG_IUFT_TMR 0}
+	global tmpvar_27
+	global CONFIG_FPUFT_NONE
+	if {$tmpvar_27 == "None"} then {set CONFIG_FPUFT_NONE 1} else {set CONFIG_FPUFT_NONE 0}
+	global CONFIG_FPUFT_PAR
+	if {$tmpvar_27 == "Parity"} then {set CONFIG_FPUFT_PAR 1} else {set CONFIG_FPUFT_PAR 0}
+	global CONFIG_FPUFT_DMR
+	if {$tmpvar_27 == "PDMR"} then {set CONFIG_FPUFT_DMR 1} else {set CONFIG_FPUFT_DMR 0}
+	global CONFIG_FPUFT_TMR
+	if {$tmpvar_27 == "TMR"} then {set CONFIG_FPUFT_TMR 1} else {set CONFIG_FPUFT_TMR 0}
+	global CONFIG_RF_ERRINJ
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3FT_PRESENT == 1) && ($CONFIG_LEON3FT_EN == 1)} then {
+	set CONFIG_RF_ERRINJ [expr $CONFIG_RF_ERRINJ&15]} else {set CONFIG_RF_ERRINJ [expr $CONFIG_RF_ERRINJ|16]}
+	global CONFIG_CACHE_FT_EN
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3FT_PRESENT == 1) && ($CONFIG_LEON3FT_EN == 1)} then {
+	set CONFIG_CACHE_FT_EN [expr $CONFIG_CACHE_FT_EN&15]} else {set CONFIG_CACHE_FT_EN [expr $CONFIG_CACHE_FT_EN|16]}
+	global CONFIG_CACHE_ERRINJ
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3FT_PRESENT == 1) && ($CONFIG_LEON3FT_EN == 1)} then {validate_int CONFIG_CACHE_ERRINJ "$CONFIG_CACHE_ERRINJ" 0}
+}
+
+
+proc menu10 {w title} {
+	set oldFocus [focus]
+	catch {focus .menu3}
+	catch {destroy $w; unregister_active 10}
+	toplevel $w -class Dialog
+	wm withdraw $w
+	global active_menus
+	set active_menus [lsort -integer [linsert $active_menus end 10]]
+	message $w.m -width 400 -aspect 300 -text \
+		"VHDL debug settings       "  -relief raised
+	pack $w.m -pady 10 -side top -padx 10
+	wm title $w "VHDL debug settings       " 
+
+	bind $w <Escape> "catch {focus $oldFocus}; destroy $w; unregister_active 10; break"
+	set nextscript "catch {focus $oldFocus}; destroy $w; unregister_active 10; catch {destroy .menu3}; unregister_active 3; menu11 .menu11 \"$title\""
+	frame $w.f
+	button $w.f.back -text "OK" \
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 10"
+	button $w.f.next -text "Next" -underline 0\
+		-width 15 -command $nextscript
+	bind all <Alt-n> $nextscript
+	button $w.f.prev -text "Prev" -underline 0\
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 10; menu9 .menu9 \"$title\""
+	bind $w <Alt-p> "catch {focus $oldFocus}; destroy $w; unregister_active 10; menu9 .menu9 \"$title\";break"
+	pack $w.f.back $w.f.next $w.f.prev -side left -expand on
+	pack $w.f -pady 10 -side bottom -anchor w -fill x
+	frame $w.topline -relief ridge -borderwidth 2 -height 2
+	pack $w.topline -side top -fill x
+
+	frame $w.botline -relief ridge -borderwidth 2 -height 2
+	pack $w.botline -side bottom -fill x
+
+	frame $w.config
+	pack $w.config -fill y -expand on
+
+	scrollbar $w.config.vscroll -command "$w.config.canvas yview"
+	pack $w.config.vscroll -side right -fill y
+
+	canvas $w.config.canvas -height 1\
+		-relief flat -borderwidth 0 -yscrollcommand "$w.config.vscroll set" \
+		-width [expr [winfo screenwidth .] * 1 / 2] 
+	frame $w.config.f
+	bind $w <Key-Down> "$w.config.canvas yview scroll  1 unit;break;"
+	bind $w <Key-Up> "$w.config.canvas yview scroll  -1 unit;break;"
+	bind $w <Key-Next> "$w.config.canvas yview scroll  1 page;break;"
+	bind $w <Key-Prior> "$w.config.canvas yview scroll  -1 page;break;"
+	bind $w <Key-Home> "$w.config.canvas yview moveto 0;break;"
+	bind $w <Key-End> "$w.config.canvas yview moveto 1 ;break;"
+	pack $w.config.canvas -side right -fill y
+
+
+	bool $w.config.f 10 0 "Processor disassembly to console         " CONFIG_IU_DISAS
+	bool $w.config.f 10 1 "Processor disassembly in netlist         " CONFIG_IU_DISAS_NET
+	bool $w.config.f 10 2 "32-bit program counters       " CONFIG_DEBUG_PC32
+
+
+
+	focus $w
+	update_active
+	global winx; global winy
+	if {[winfo exists .menu3] == 0} then {menu3 .menu3 "Processor            "}
+	set winx [expr [winfo x .menu3]+30]; set winy [expr [winfo y .menu3]+30]
+	if {[winfo exists $w]} then {wm geometry $w +$winx+$winy}
+	update idletasks
+	if {[winfo exists $w]} then  {$w.config.canvas create window 0 0 -anchor nw -window $w.config.f
+
+	$w.config.canvas configure \
+		-width [expr [winfo reqwidth $w.config.f] + 1]\
+		-scrollregion "-1 -1 [expr [winfo reqwidth $w.config.f] + 1] \
+			 [expr [winfo reqheight $w.config.f] + 1]"
+
+	set winy [expr [winfo reqh $w] - [winfo reqh $w.config.canvas]]
+	set scry [expr [winfo screenh $w] / 2]
+	set maxy [expr [winfo screenh $w] * 3 / 4]
+	set canvtotal [expr [winfo reqh $w.config.f] + 2]
+	if [expr $winy + $canvtotal < $maxy] {
+		$w.config.canvas configure -height $canvtotal
+	} else {
+		$w.config.canvas configure -height [expr $scry - $winy]
+		}
+	}
+	update idletasks
+	if {[winfo exists $w]} then {
+	wm maxsize $w [winfo width $w] [winfo screenheight $w]
+	wm minsize $w [winfo width $w] 100
+
+	wm deiconify $w
+}
+}
+
+proc update_menu10 {} {
+	global CONFIG_LEON3
+	global CONFIG_IU_DISAS
+	if {($CONFIG_LEON3 == 1)} then {
+	configure_entry .menu10.config.f.x0 normal {n l y}} else {configure_entry .menu10.config.f.x0 disabled {y n l}}
+	global CONFIG_IU_DISAS_NET
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_IU_DISAS == 1)} then {
+	configure_entry .menu10.config.f.x1 normal {n l y}} else {configure_entry .menu10.config.f.x1 disabled {y n l}}
+	global CONFIG_DEBUG_PC32
+	if {($CONFIG_LEON3 == 1)} then {
+	configure_entry .menu10.config.f.x2 normal {n l y}} else {configure_entry .menu10.config.f.x2 disabled {y n l}}
+}
+
+
+proc update_define_menu10 {} {
+	update_define_mainmenu
+	global CONFIG_MODULES
+	global CONFIG_LEON3
+	global CONFIG_IU_DISAS
+	if {($CONFIG_LEON3 == 1)} then {
+	set CONFIG_IU_DISAS [expr $CONFIG_IU_DISAS&15]} else {set CONFIG_IU_DISAS [expr $CONFIG_IU_DISAS|16]}
+	global CONFIG_IU_DISAS_NET
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_IU_DISAS == 1)} then {
+	set CONFIG_IU_DISAS_NET [expr $CONFIG_IU_DISAS_NET&15]} else {set CONFIG_IU_DISAS_NET [expr $CONFIG_IU_DISAS_NET|16]}
+	global CONFIG_DEBUG_PC32
+	if {($CONFIG_LEON3 == 1)} then {
+	set CONFIG_DEBUG_PC32 [expr $CONFIG_DEBUG_PC32&15]} else {set CONFIG_DEBUG_PC32 [expr $CONFIG_DEBUG_PC32|16]}
+}
+
+
+menu_option menu11 11 "AMBA configuration"
+proc menu11 {w title} {
+	set oldFocus [focus]
+	catch {destroy $w; unregister_active 11}
+	toplevel $w -class Dialog
+	wm withdraw $w
+	global active_menus
+	set active_menus [lsort -integer [linsert $active_menus end 11]]
+	message $w.m -width 400 -aspect 300 -text \
+		"AMBA configuration"  -relief raised
+	pack $w.m -pady 10 -side top -padx 10
+	wm title $w "AMBA configuration" 
+
+	bind $w <Escape> "catch {focus $oldFocus}; destroy $w; unregister_active 11; break"
+	set nextscript "catch {focus $oldFocus}; destroy $w; unregister_active 11; menu12 .menu12 \"$title\""
+	frame $w.f
+	button $w.f.back -text "Main Menu" \
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 11"
+	button $w.f.next -text "Next" -underline 0\
+		-width 15 -command $nextscript
+	bind all <Alt-n> $nextscript
+	button $w.f.prev -text "Prev" -underline 0\
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 11; menu10 .menu10 \"$title\""
+	bind $w <Alt-p> "catch {focus $oldFocus}; destroy $w; unregister_active 11; menu10 .menu10 \"$title\";break"
+	pack $w.f.back $w.f.next $w.f.prev -side left -expand on
+	pack $w.f -pady 10 -side bottom -anchor w -fill x
+	frame $w.topline -relief ridge -borderwidth 2 -height 2
+	pack $w.topline -side top -fill x
+
+	frame $w.botline -relief ridge -borderwidth 2 -height 2
+	pack $w.botline -side bottom -fill x
+
+	frame $w.config
+	pack $w.config -fill y -expand on
+
+	scrollbar $w.config.vscroll -command "$w.config.canvas yview"
+	pack $w.config.vscroll -side right -fill y
+
+	canvas $w.config.canvas -height 1\
+		-relief flat -borderwidth 0 -yscrollcommand "$w.config.vscroll set" \
+		-width [expr [winfo screenwidth .] * 1 / 2] 
+	frame $w.config.f
+	bind $w <Key-Down> "$w.config.canvas yview scroll  1 unit;break;"
+	bind $w <Key-Up> "$w.config.canvas yview scroll  -1 unit;break;"
+	bind $w <Key-Next> "$w.config.canvas yview scroll  1 page;break;"
+	bind $w <Key-Prior> "$w.config.canvas yview scroll  -1 page;break;"
+	bind $w <Key-Home> "$w.config.canvas yview moveto 0;break;"
+	bind $w <Key-End> "$w.config.canvas yview moveto 1 ;break;"
+	pack $w.config.canvas -side right -fill y
+
+
+	int $w.config.f 11 0 "Default AHB master" CONFIG_AHB_DEFMST
+	bool $w.config.f 11 1 "Round-robin arbiter                       " CONFIG_AHB_RROBIN
+	bool $w.config.f 11 2 "AHB split-transaction support             " CONFIG_AHB_SPLIT
+	bool $w.config.f 11 3 "Enable full plug&play decoding            " CONFIG_AHB_FPNPEN
+	hex $w.config.f 11 4 "I/O area start address (haddr\[31:20\]) " CONFIG_AHB_IOADDR
+	hex $w.config.f 11 5 "AHB/APB bridge address (haddr\[31:20\]) " CONFIG_APB_HADDR
+	bool $w.config.f 11 6 "Enable AMBA AHB monitor              " CONFIG_AHB_MON
+	bool $w.config.f 11 7 "Report AHB errors                  " CONFIG_AHB_MONERR
+	bool $w.config.f 11 8 "Report AHB warings                 " CONFIG_AHB_MONWAR
+	bool $w.config.f 11 9 "Write trace to simulation console    " CONFIG_AHB_DTRACE
+
+
+
+	focus $w
+	update_active
+	global winx; global winy
+	set winx [expr [winfo x .]+30]; set winy [expr [winfo y .]+30]
+	if {[winfo exists $w]} then {wm geometry $w +$winx+$winy}
+	update idletasks
+	if {[winfo exists $w]} then  {$w.config.canvas create window 0 0 -anchor nw -window $w.config.f
+
+	$w.config.canvas configure \
+		-width [expr [winfo reqwidth $w.config.f] + 1]\
+		-scrollregion "-1 -1 [expr [winfo reqwidth $w.config.f] + 1] \
+			 [expr [winfo reqheight $w.config.f] + 1]"
+
+	set winy [expr [winfo reqh $w] - [winfo reqh $w.config.canvas]]
+	set scry [expr [winfo screenh $w] / 2]
+	set maxy [expr [winfo screenh $w] * 3 / 4]
+	set canvtotal [expr [winfo reqh $w.config.f] + 2]
+	if [expr $winy + $canvtotal < $maxy] {
+		$w.config.canvas configure -height $canvtotal
+	} else {
+		$w.config.canvas configure -height [expr $scry - $winy]
+		}
+	}
+	update idletasks
+	if {[winfo exists $w]} then {
+	wm maxsize $w [winfo width $w] [winfo screenheight $w]
+	wm minsize $w [winfo width $w] 100
+
+	wm deiconify $w
+}
+}
+
+proc update_menu11 {} {
+	global CONFIG_AHB_MON
+	global CONFIG_AHB_MONERR
+	if {($CONFIG_AHB_MON == 1)} then {
+	configure_entry .menu11.config.f.x7 normal {n l y}} else {configure_entry .menu11.config.f.x7 disabled {y n l}}
+	global CONFIG_AHB_MONWAR
+	if {($CONFIG_AHB_MON == 1)} then {
+	configure_entry .menu11.config.f.x8 normal {n l y}} else {configure_entry .menu11.config.f.x8 disabled {y n l}}
+}
+
+
+proc update_define_menu11 {} {
+	update_define_mainmenu
+	global CONFIG_MODULES
+	global CONFIG_AHB_MON
+	global CONFIG_AHB_MONERR
+	if {($CONFIG_AHB_MON == 1)} then {
+	set CONFIG_AHB_MONERR [expr $CONFIG_AHB_MONERR&15]} else {set CONFIG_AHB_MONERR [expr $CONFIG_AHB_MONERR|16]}
+	global CONFIG_AHB_MONWAR
+	if {($CONFIG_AHB_MON == 1)} then {
+	set CONFIG_AHB_MONWAR [expr $CONFIG_AHB_MONWAR&15]} else {set CONFIG_AHB_MONWAR [expr $CONFIG_AHB_MONWAR|16]}
+}
+
+
+menu_option menu12 12 "Debug Link           "
+proc menu12 {w title} {
+	set oldFocus [focus]
+	catch {destroy $w; unregister_active 12}
+	toplevel $w -class Dialog
+	wm withdraw $w
+	global active_menus
+	set active_menus [lsort -integer [linsert $active_menus end 12]]
+	message $w.m -width 400 -aspect 300 -text \
+		"Debug Link           "  -relief raised
+	pack $w.m -pady 10 -side top -padx 10
+	wm title $w "Debug Link           " 
+
+	bind $w <Escape> "catch {focus $oldFocus}; destroy $w; unregister_active 12; break"
+	set nextscript "catch {focus $oldFocus}; destroy $w; unregister_active 12; menu13 .menu13 \"$title\""
+	frame $w.f
+	button $w.f.back -text "Main Menu" \
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 12"
+	button $w.f.next -text "Next" -underline 0\
+		-width 15 -command $nextscript
+	bind all <Alt-n> $nextscript
+	button $w.f.prev -text "Prev" -underline 0\
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 12; menu11 .menu11 \"$title\""
+	bind $w <Alt-p> "catch {focus $oldFocus}; destroy $w; unregister_active 12; menu11 .menu11 \"$title\";break"
+	pack $w.f.back $w.f.next $w.f.prev -side left -expand on
+	pack $w.f -pady 10 -side bottom -anchor w -fill x
+	frame $w.topline -relief ridge -borderwidth 2 -height 2
+	pack $w.topline -side top -fill x
+
+	frame $w.botline -relief ridge -borderwidth 2 -height 2
+	pack $w.botline -side bottom -fill x
+
+	frame $w.config
+	pack $w.config -fill y -expand on
+
+	scrollbar $w.config.vscroll -command "$w.config.canvas yview"
+	pack $w.config.vscroll -side right -fill y
+
+	canvas $w.config.canvas -height 1\
+		-relief flat -borderwidth 0 -yscrollcommand "$w.config.vscroll set" \
+		-width [expr [winfo screenwidth .] * 1 / 2] 
+	frame $w.config.f
+	bind $w <Key-Down> "$w.config.canvas yview scroll  1 unit;break;"
+	bind $w <Key-Up> "$w.config.canvas yview scroll  -1 unit;break;"
+	bind $w <Key-Next> "$w.config.canvas yview scroll  1 page;break;"
+	bind $w <Key-Prior> "$w.config.canvas yview scroll  -1 page;break;"
+	bind $w <Key-Home> "$w.config.canvas yview moveto 0;break;"
+	bind $w <Key-End> "$w.config.canvas yview moveto 1 ;break;"
+	pack $w.config.canvas -side right -fill y
+
+
+	bool $w.config.f 12 0 "Serial Debug Link (RS232)                " CONFIG_DSU_UART
+	bool $w.config.f 12 1 "JTAG Debug Link" CONFIG_DSU_JTAG
+	bool $w.config.f 12 2 "Ethernet Debug Communication Link (EDCL)" CONFIG_DSU_ETH
+	global tmpvar_28
+	minimenu $w.config.f 12 3 "Ethernet/AHB bridge buffer size (kbytes)" tmpvar_28 CONFIG_DSU_ETHSZ1
+	menu $w.config.f.x3.x.menu -tearoffcommand "menutitle \"Ethernet/AHB bridge buffer size (kbytes)\""
+	$w.config.f.x3.x.menu add radiobutton -label "1" -variable tmpvar_28 -value "1" -command "update_active"
+	$w.config.f.x3.x.menu add radiobutton -label "2" -variable tmpvar_28 -value "2" -command "update_active"
+	$w.config.f.x3.x.menu add radiobutton -label "4" -variable tmpvar_28 -value "4" -command "update_active"
+	$w.config.f.x3.x.menu add radiobutton -label "8" -variable tmpvar_28 -value "8" -command "update_active"
+	$w.config.f.x3.x.menu add radiobutton -label "16" -variable tmpvar_28 -value "16" -command "update_active"
+	menusplit $w $w.config.f.x3.x.menu 5
+	hex $w.config.f 12 4 "MSB 16 bits of IP address (hex)       " CONFIG_DSU_IPMSB
+	hex $w.config.f 12 5 "LSB 16 bits of IP address (hex)       " CONFIG_DSU_IPLSB
+	hex $w.config.f 12 6 "MSB 24 bits of ethern number (hex)    " CONFIG_DSU_ETHMSB
+	hex $w.config.f 12 7 "LSB 24 bits of ethern number (hex)    " CONFIG_DSU_ETHLSB
+	bool $w.config.f 12 8 "Programmable 4-bit LSB of MAC/IP address" CONFIG_DSU_ETH_PROG
+	bool $w.config.f 12 9 "EDCL disable pin                     " CONFIG_DSU_ETH_DIS
+
+
+
+	focus $w
+	update_active
+	global winx; global winy
+	set winx [expr [winfo x .]+30]; set winy [expr [winfo y .]+30]
+	if {[winfo exists $w]} then {wm geometry $w +$winx+$winy}
+	update idletasks
+	if {[winfo exists $w]} then  {$w.config.canvas create window 0 0 -anchor nw -window $w.config.f
+
+	$w.config.canvas configure \
+		-width [expr [winfo reqwidth $w.config.f] + 1]\
+		-scrollregion "-1 -1 [expr [winfo reqwidth $w.config.f] + 1] \
+			 [expr [winfo reqheight $w.config.f] + 1]"
+
+	set winy [expr [winfo reqh $w] - [winfo reqh $w.config.canvas]]
+	set scry [expr [winfo screenh $w] / 2]
+	set maxy [expr [winfo screenh $w] * 3 / 4]
+	set canvtotal [expr [winfo reqh $w.config.f] + 2]
+	if [expr $winy + $canvtotal < $maxy] {
+		$w.config.canvas configure -height $canvtotal
+	} else {
+		$w.config.canvas configure -height [expr $scry - $winy]
+		}
+	}
+	update idletasks
+	if {[winfo exists $w]} then {
+	wm maxsize $w [winfo width $w] [winfo screenheight $w]
+	wm minsize $w [winfo width $w] 100
+
+	wm deiconify $w
+}
+}
+
+proc update_menu12 {} {
+	global CONFIG_GRETH_ENABLE
+	global CONFIG_DSU_ETH
+	if {($CONFIG_GRETH_ENABLE == 1)} then {
+	configure_entry .menu12.config.f.x2 normal {n l y}} else {configure_entry .menu12.config.f.x2 disabled {y n l}}
+	if {($CONFIG_GRETH_ENABLE == 1) && ($CONFIG_DSU_ETH == 1)} then {configure_entry .menu12.config.f.x3 normal {x l}} else {configure_entry .menu12.config.f.x3 disabled {x l}}
+	global CONFIG_DSU_IPMSB
+	if {($CONFIG_GRETH_ENABLE == 1) && ($CONFIG_DSU_ETH == 1)} then {.menu12.config.f.x4.x configure -state normal -foreground [ cget .ref -foreground ]; .menu12.config.f.x4.l configure -state normal; } else {.menu12.config.f.x4.x configure -state disabled -foreground [ cget .ref -disabledforeground ]; .menu12.config.f.x4.l configure -state disabled}
+	global CONFIG_DSU_IPLSB
+	if {($CONFIG_GRETH_ENABLE == 1) && ($CONFIG_DSU_ETH == 1)} then {.menu12.config.f.x5.x configure -state normal -foreground [ cget .ref -foreground ]; .menu12.config.f.x5.l configure -state normal; } else {.menu12.config.f.x5.x configure -state disabled -foreground [ cget .ref -disabledforeground ]; .menu12.config.f.x5.l configure -state disabled}
+	global CONFIG_DSU_ETHMSB
+	if {($CONFIG_GRETH_ENABLE == 1) && ($CONFIG_DSU_ETH == 1)} then {.menu12.config.f.x6.x configure -state normal -foreground [ cget .ref -foreground ]; .menu12.config.f.x6.l configure -state normal; } else {.menu12.config.f.x6.x configure -state disabled -foreground [ cget .ref -disabledforeground ]; .menu12.config.f.x6.l configure -state disabled}
+	global CONFIG_DSU_ETHLSB
+	if {($CONFIG_GRETH_ENABLE == 1) && ($CONFIG_DSU_ETH == 1)} then {.menu12.config.f.x7.x configure -state normal -foreground [ cget .ref -foreground ]; .menu12.config.f.x7.l configure -state normal; } else {.menu12.config.f.x7.x configure -state disabled -foreground [ cget .ref -disabledforeground ]; .menu12.config.f.x7.l configure -state disabled}
+	global CONFIG_DSU_ETH_PROG
+	if {($CONFIG_GRETH_ENABLE == 1) && ($CONFIG_DSU_ETH == 1)} then {
+	configure_entry .menu12.config.f.x8 normal {n l y}} else {configure_entry .menu12.config.f.x8 disabled {y n l}}
+	global CONFIG_DSU_ETH_DIS
+	if {($CONFIG_GRETH_ENABLE == 1) && ($CONFIG_DSU_ETH == 1) && ($CONFIG_DSU_ETH_PROG == 1)} then {
+	configure_entry .menu12.config.f.x9 normal {n l y}} else {configure_entry .menu12.config.f.x9 disabled {y n l}}
+}
+
+
+proc update_define_menu12 {} {
+	update_define_mainmenu
+	global CONFIG_MODULES
+	global CONFIG_GRETH_ENABLE
+	global CONFIG_DSU_ETH
+	if {($CONFIG_GRETH_ENABLE == 1)} then {
+	set CONFIG_DSU_ETH [expr $CONFIG_DSU_ETH&15]} else {set CONFIG_DSU_ETH [expr $CONFIG_DSU_ETH|16]}
+	global tmpvar_28
+	global CONFIG_DSU_ETHSZ1
+	if {$tmpvar_28 == "1"} then {set CONFIG_DSU_ETHSZ1 1} else {set CONFIG_DSU_ETHSZ1 0}
+	global CONFIG_DSU_ETHSZ2
+	if {$tmpvar_28 == "2"} then {set CONFIG_DSU_ETHSZ2 1} else {set CONFIG_DSU_ETHSZ2 0}
+	global CONFIG_DSU_ETHSZ4
+	if {$tmpvar_28 == "4"} then {set CONFIG_DSU_ETHSZ4 1} else {set CONFIG_DSU_ETHSZ4 0}
+	global CONFIG_DSU_ETHSZ8
+	if {$tmpvar_28 == "8"} then {set CONFIG_DSU_ETHSZ8 1} else {set CONFIG_DSU_ETHSZ8 0}
+	global CONFIG_DSU_ETHSZ16
+	if {$tmpvar_28 == "16"} then {set CONFIG_DSU_ETHSZ16 1} else {set CONFIG_DSU_ETHSZ16 0}
+	global CONFIG_DSU_IPMSB
+	if {($CONFIG_GRETH_ENABLE == 1) && ($CONFIG_DSU_ETH == 1)} then {validate_hex CONFIG_DSU_IPMSB "$CONFIG_DSU_IPMSB" C0A8}
+	global CONFIG_DSU_IPLSB
+	if {($CONFIG_GRETH_ENABLE == 1) && ($CONFIG_DSU_ETH == 1)} then {validate_hex CONFIG_DSU_IPLSB "$CONFIG_DSU_IPLSB" 0033}
+	global CONFIG_DSU_ETHMSB
+	if {($CONFIG_GRETH_ENABLE == 1) && ($CONFIG_DSU_ETH == 1)} then {validate_hex CONFIG_DSU_ETHMSB "$CONFIG_DSU_ETHMSB" 020000}
+	global CONFIG_DSU_ETHLSB
+	if {($CONFIG_GRETH_ENABLE == 1) && ($CONFIG_DSU_ETH == 1)} then {validate_hex CONFIG_DSU_ETHLSB "$CONFIG_DSU_ETHLSB" 000000}
+	global CONFIG_DSU_ETH_PROG
+	if {($CONFIG_GRETH_ENABLE == 1) && ($CONFIG_DSU_ETH == 1)} then {
+	set CONFIG_DSU_ETH_PROG [expr $CONFIG_DSU_ETH_PROG&15]} else {set CONFIG_DSU_ETH_PROG [expr $CONFIG_DSU_ETH_PROG|16]}
+	global CONFIG_DSU_ETH_DIS
+	if {($CONFIG_GRETH_ENABLE == 1) && ($CONFIG_DSU_ETH == 1) && ($CONFIG_DSU_ETH_PROG == 1)} then {
+	set CONFIG_DSU_ETH_DIS [expr $CONFIG_DSU_ETH_DIS&15]} else {set CONFIG_DSU_ETH_DIS [expr $CONFIG_DSU_ETH_DIS|16]}
+}
+
+
+menu_option menu13 13 "Peripherals             "
+proc menu13 {w title} {
+	set oldFocus [focus]
+	catch {destroy $w; unregister_active 13}
+	toplevel $w -class Dialog
+	wm withdraw $w
+	global active_menus
+	set active_menus [lsort -integer [linsert $active_menus end 13]]
+	message $w.m -width 400 -aspect 300 -text \
+		"Peripherals             "  -relief raised
+	pack $w.m -pady 10 -side top -padx 10
+	wm title $w "Peripherals             " 
+
+	bind $w <Escape> "catch {focus $oldFocus}; destroy $w; unregister_active 13; break"
+	set nextscript "catch {focus $oldFocus}; menu14 .menu14 \"$title\""
+	frame $w.f
+	button $w.f.back -text "Main Menu" \
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 13"
+	button $w.f.next -text "Next" -underline 0\
+		-width 15 -command $nextscript
+	bind all <Alt-n> $nextscript
+	button $w.f.prev -text "Prev" -underline 0\
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 13; menu12 .menu12 \"$title\""
+	bind $w <Alt-p> "catch {focus $oldFocus}; destroy $w; unregister_active 13; menu12 .menu12 \"$title\";break"
+	pack $w.f.back $w.f.next $w.f.prev -side left -expand on
+	pack $w.f -pady 10 -side bottom -anchor w -fill x
+	frame $w.topline -relief ridge -borderwidth 2 -height 2
+	pack $w.topline -side top -fill x
+
+	frame $w.botline -relief ridge -borderwidth 2 -height 2
+	pack $w.botline -side bottom -fill x
+
+	frame $w.config
+	pack $w.config -fill y -expand on
+
+	scrollbar $w.config.vscroll -command "$w.config.canvas yview"
+	pack $w.config.vscroll -side right -fill y
+
+	canvas $w.config.canvas -height 1\
+		-relief flat -borderwidth 0 -yscrollcommand "$w.config.vscroll set" \
+		-width [expr [winfo screenwidth .] * 1 / 2] 
+	frame $w.config.f
+	bind $w <Key-Down> "$w.config.canvas yview scroll  1 unit;break;"
+	bind $w <Key-Up> "$w.config.canvas yview scroll  -1 unit;break;"
+	bind $w <Key-Next> "$w.config.canvas yview scroll  1 page;break;"
+	bind $w <Key-Prior> "$w.config.canvas yview scroll  -1 page;break;"
+	bind $w <Key-Home> "$w.config.canvas yview moveto 0;break;"
+	bind $w <Key-End> "$w.config.canvas yview moveto 1 ;break;"
+	pack $w.config.canvas -side right -fill y
+
+
+	submenu $w.config.f 13 0 "Memory controllers             " 14
+	submenu $w.config.f 13 1 "On-chip RAM/ROM                 " 17
+	submenu $w.config.f 13 2 "Ethernet             " 18
+	submenu $w.config.f 13 3 "UARTs, timers and irq control         " 19
+	submenu $w.config.f 13 4 "Keybord and VGA interface" 20
+	submenu $w.config.f 13 5 "System ACE Interface Controller" 21
+	submenu $w.config.f 13 6 "PCI EXPRESS" 22
+
+
+
+	focus $w
+	update_active
+	global winx; global winy
+	set winx [expr [winfo x .]+30]; set winy [expr [winfo y .]+30]
+	if {[winfo exists $w]} then {wm geometry $w +$winx+$winy}
+	update idletasks
+	if {[winfo exists $w]} then  {$w.config.canvas create window 0 0 -anchor nw -window $w.config.f
+
+	$w.config.canvas configure \
+		-width [expr [winfo reqwidth $w.config.f] + 1]\
+		-scrollregion "-1 -1 [expr [winfo reqwidth $w.config.f] + 1] \
+			 [expr [winfo reqheight $w.config.f] + 1]"
+
+	set winy [expr [winfo reqh $w] - [winfo reqh $w.config.canvas]]
+	set scry [expr [winfo screenh $w] / 2]
+	set maxy [expr [winfo screenh $w] * 3 / 4]
+	set canvtotal [expr [winfo reqh $w.config.f] + 2]
+	if [expr $winy + $canvtotal < $maxy] {
+		$w.config.canvas configure -height $canvtotal
+	} else {
+		$w.config.canvas configure -height [expr $scry - $winy]
+		}
+	}
+	update idletasks
+	if {[winfo exists $w]} then {
+	wm maxsize $w [winfo width $w] [winfo screenheight $w]
+	wm minsize $w [winfo width $w] 100
+
+	wm deiconify $w
+}
+}
+
+proc update_menu13 {} {
+}
+
+
+proc update_define_menu13 {} {
+	update_define_mainmenu
+	global CONFIG_MODULES
+}
+
+
+proc menu14 {w title} {
+	set oldFocus [focus]
+	catch {focus .menu13}
+	catch {destroy $w; unregister_active 14}
+	toplevel $w -class Dialog
+	wm withdraw $w
+	global active_menus
+	set active_menus [lsort -integer [linsert $active_menus end 14]]
+	message $w.m -width 400 -aspect 300 -text \
+		"Memory controllers             "  -relief raised
+	pack $w.m -pady 10 -side top -padx 10
+	wm title $w "Memory controllers             " 
+
+	bind $w <Escape> "catch {focus $oldFocus}; destroy $w; unregister_active 14; break"
+	set nextscript "catch {focus $oldFocus}; menu15 .menu15 \"$title\""
+	frame $w.f
+	button $w.f.back -text "OK" \
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 14"
+	button $w.f.next -text "Next" -underline 0\
+		-width 15 -command $nextscript
+	bind all <Alt-n> $nextscript
+	button $w.f.prev -text "Prev" -underline 0\
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 14; menu13 .menu13 \"$title\""
+	bind $w <Alt-p> "catch {focus $oldFocus}; destroy $w; unregister_active 14; menu13 .menu13 \"$title\";break"
+	pack $w.f.back $w.f.next $w.f.prev -side left -expand on
+	pack $w.f -pady 10 -side bottom -anchor w -fill x
+	frame $w.topline -relief ridge -borderwidth 2 -height 2
+	pack $w.topline -side top -fill x
+
+	frame $w.botline -relief ridge -borderwidth 2 -height 2
+	pack $w.botline -side bottom -fill x
+
+	frame $w.config
+	pack $w.config -fill y -expand on
+
+	scrollbar $w.config.vscroll -command "$w.config.canvas yview"
+	pack $w.config.vscroll -side right -fill y
+
+	canvas $w.config.canvas -height 1\
+		-relief flat -borderwidth 0 -yscrollcommand "$w.config.vscroll set" \
+		-width [expr [winfo screenwidth .] * 1 / 2] 
+	frame $w.config.f
+	bind $w <Key-Down> "$w.config.canvas yview scroll  1 unit;break;"
+	bind $w <Key-Up> "$w.config.canvas yview scroll  -1 unit;break;"
+	bind $w <Key-Next> "$w.config.canvas yview scroll  1 page;break;"
+	bind $w <Key-Prior> "$w.config.canvas yview scroll  -1 page;break;"
+	bind $w <Key-Home> "$w.config.canvas yview moveto 0;break;"
+	bind $w <Key-End> "$w.config.canvas yview moveto 1 ;break;"
+	pack $w.config.canvas -side right -fill y
+
+
+	submenu $w.config.f 14 0 "Leon2 memory controller        " 15
+	submenu $w.config.f 14 1 "Xilinx MIG DDR2 controller   " 16
+
+
+
+	focus $w
+	update_active
+	global winx; global winy
+	if {[winfo exists .menu13] == 0} then {menu13 .menu13 "Peripherals             "}
+	set winx [expr [winfo x .menu13]+30]; set winy [expr [winfo y .menu13]+30]
+	if {[winfo exists $w]} then {wm geometry $w +$winx+$winy}
+	update idletasks
+	if {[winfo exists $w]} then  {$w.config.canvas create window 0 0 -anchor nw -window $w.config.f
+
+	$w.config.canvas configure \
+		-width [expr [winfo reqwidth $w.config.f] + 1]\
+		-scrollregion "-1 -1 [expr [winfo reqwidth $w.config.f] + 1] \
+			 [expr [winfo reqheight $w.config.f] + 1]"
+
+	set winy [expr [winfo reqh $w] - [winfo reqh $w.config.canvas]]
+	set scry [expr [winfo screenh $w] / 2]
+	set maxy [expr [winfo screenh $w] * 3 / 4]
+	set canvtotal [expr [winfo reqh $w.config.f] + 2]
+	if [expr $winy + $canvtotal < $maxy] {
+		$w.config.canvas configure -height $canvtotal
+	} else {
+		$w.config.canvas configure -height [expr $scry - $winy]
+		}
+	}
+	update idletasks
+	if {[winfo exists $w]} then {
+	wm maxsize $w [winfo width $w] [winfo screenheight $w]
+	wm minsize $w [winfo width $w] 100
+
+	wm deiconify $w
+}
+}
+
+proc update_menu14 {} {
+}
+
+
+proc update_define_menu14 {} {
+	update_define_mainmenu
+	global CONFIG_MODULES
+}
+
+
+proc menu15 {w title} {
+	set oldFocus [focus]
+	catch {focus .menu14}
+	catch {destroy $w; unregister_active 15}
+	toplevel $w -class Dialog
+	wm withdraw $w
+	global active_menus
+	set active_menus [lsort -integer [linsert $active_menus end 15]]
+	message $w.m -width 400 -aspect 300 -text \
+		"Leon2 memory controller        "  -relief raised
+	pack $w.m -pady 10 -side top -padx 10
+	wm title $w "Leon2 memory controller        " 
+
+	bind $w <Escape> "catch {focus $oldFocus}; destroy $w; unregister_active 15; break"
+	set nextscript "catch {focus $oldFocus}; destroy $w; unregister_active 15; menu16 .menu16 \"$title\""
+	frame $w.f
+	button $w.f.back -text "OK" \
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 15"
+	button $w.f.next -text "Next" -underline 0\
+		-width 15 -command $nextscript
+	bind all <Alt-n> $nextscript
+	button $w.f.prev -text "Prev" -underline 0\
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 15; menu14 .menu14 \"$title\""
+	bind $w <Alt-p> "catch {focus $oldFocus}; destroy $w; unregister_active 15; menu14 .menu14 \"$title\";break"
+	pack $w.f.back $w.f.next $w.f.prev -side left -expand on
+	pack $w.f -pady 10 -side bottom -anchor w -fill x
+	frame $w.topline -relief ridge -borderwidth 2 -height 2
+	pack $w.topline -side top -fill x
+
+	frame $w.botline -relief ridge -borderwidth 2 -height 2
+	pack $w.botline -side bottom -fill x
+
+	frame $w.config
+	pack $w.config -fill y -expand on
+
+	scrollbar $w.config.vscroll -command "$w.config.canvas yview"
+	pack $w.config.vscroll -side right -fill y
+
+	canvas $w.config.canvas -height 1\
+		-relief flat -borderwidth 0 -yscrollcommand "$w.config.vscroll set" \
+		-width [expr [winfo screenwidth .] * 1 / 2] 
+	frame $w.config.f
+	bind $w <Key-Down> "$w.config.canvas yview scroll  1 unit;break;"
+	bind $w <Key-Up> "$w.config.canvas yview scroll  -1 unit;break;"
+	bind $w <Key-Next> "$w.config.canvas yview scroll  1 page;break;"
+	bind $w <Key-Prior> "$w.config.canvas yview scroll  -1 page;break;"
+	bind $w <Key-Home> "$w.config.canvas yview moveto 0;break;"
+	bind $w <Key-End> "$w.config.canvas yview moveto 1 ;break;"
+	pack $w.config.canvas -side right -fill y
+
+
+	bool $w.config.f 15 0 "Enable Leon2 memory controller  " CONFIG_MCTRL_LEON2
+	bool $w.config.f 15 1 "8-bit PROM/SRAM bus support    " CONFIG_MCTRL_8BIT
+	bool $w.config.f 15 2 "16-bit PROM/SRAM bus support    " CONFIG_MCTRL_16BIT
+	bool $w.config.f 15 3 "5th SRAM chip-select  " CONFIG_MCTRL_5CS
+	bool $w.config.f 15 4 "SDRAM controller       " CONFIG_MCTRL_SDRAM
+	bool $w.config.f 15 5 "Separate address and data buses" CONFIG_MCTRL_SDRAM_SEPBUS
+	bool $w.config.f 15 6 "64-bit SDRAM data bus" CONFIG_MCTRL_SDRAM_BUS64
+	bool $w.config.f 15 7 "Unsynchronized sdclock" CONFIG_MCTRL_SDRAM_INVCLK
+	bool $w.config.f 15 8 "Enable page burst operation     " CONFIG_MCTRL_PAGE
+	bool $w.config.f 15 9 "Enable programmable page burst " CONFIG_MCTRL_PROGPAGE
+
+
+
+	focus $w
+	update_active
+	global winx; global winy
+	if {[winfo exists .menu14] == 0} then {menu14 .menu14 "Memory controllers             "}
+	set winx [expr [winfo x .menu14]+30]; set winy [expr [winfo y .menu14]+30]
+	if {[winfo exists $w]} then {wm geometry $w +$winx+$winy}
+	update idletasks
+	if {[winfo exists $w]} then  {$w.config.canvas create window 0 0 -anchor nw -window $w.config.f
+
+	$w.config.canvas configure \
+		-width [expr [winfo reqwidth $w.config.f] + 1]\
+		-scrollregion "-1 -1 [expr [winfo reqwidth $w.config.f] + 1] \
+			 [expr [winfo reqheight $w.config.f] + 1]"
+
+	set winy [expr [winfo reqh $w] - [winfo reqh $w.config.canvas]]
+	set scry [expr [winfo screenh $w] / 2]
+	set maxy [expr [winfo screenh $w] * 3 / 4]
+	set canvtotal [expr [winfo reqh $w.config.f] + 2]
+	if [expr $winy + $canvtotal < $maxy] {
+		$w.config.canvas configure -height $canvtotal
+	} else {
+		$w.config.canvas configure -height [expr $scry - $winy]
+		}
+	}
+	update idletasks
+	if {[winfo exists $w]} then {
+	wm maxsize $w [winfo width $w] [winfo screenheight $w]
+	wm minsize $w [winfo width $w] 100
+
+	wm deiconify $w
+}
+}
+
+proc update_menu15 {} {
+	global CONFIG_MCTRL_LEON2
+	global CONFIG_MCTRL_8BIT
+	if {($CONFIG_MCTRL_LEON2 == 1)} then {
+	configure_entry .menu15.config.f.x1 normal {n l y}} else {configure_entry .menu15.config.f.x1 disabled {y n l}}
+	global CONFIG_MCTRL_16BIT
+	if {($CONFIG_MCTRL_LEON2 == 1)} then {
+	configure_entry .menu15.config.f.x2 normal {n l y}} else {configure_entry .menu15.config.f.x2 disabled {y n l}}
+	global CONFIG_MCTRL_5CS
+	if {($CONFIG_MCTRL_LEON2 == 1)} then {
+	configure_entry .menu15.config.f.x3 normal {n l y}} else {configure_entry .menu15.config.f.x3 disabled {y n l}}
+	global CONFIG_MCTRL_SDRAM
+	if {($CONFIG_MCTRL_LEON2 == 1)} then {
+	configure_entry .menu15.config.f.x4 normal {n l y}} else {configure_entry .menu15.config.f.x4 disabled {y n l}}
+	global CONFIG_MCTRL_SDRAM_SEPBUS
+	if {($CONFIG_MCTRL_LEON2 == 1) && ($CONFIG_MCTRL_SDRAM == 1)} then {
+	configure_entry .menu15.config.f.x5 normal {n l y}} else {configure_entry .menu15.config.f.x5 disabled {y n l}}
+	global CONFIG_MCTRL_SDRAM_BUS64
+	if {($CONFIG_MCTRL_LEON2 == 1) && ($CONFIG_MCTRL_SDRAM == 1) && ($CONFIG_MCTRL_SDRAM_SEPBUS == 1)} then {
+	configure_entry .menu15.config.f.x6 normal {n l y}} else {configure_entry .menu15.config.f.x6 disabled {y n l}}
+	global CONFIG_MCTRL_SDRAM_INVCLK
+	if {($CONFIG_MCTRL_LEON2 == 1) && ($CONFIG_MCTRL_SDRAM == 1) && ($CONFIG_MCTRL_SDRAM_SEPBUS == 1)} then {
+	configure_entry .menu15.config.f.x7 normal {n l y}} else {configure_entry .menu15.config.f.x7 disabled {y n l}}
+	global CONFIG_MCTRL_PAGE
+	if {($CONFIG_MCTRL_LEON2 == 1) && ($CONFIG_MCTRL_SDRAM == 1)} then {
+	configure_entry .menu15.config.f.x8 normal {n l y}} else {configure_entry .menu15.config.f.x8 disabled {y n l}}
+	global CONFIG_MCTRL_PROGPAGE
+	if {($CONFIG_MCTRL_LEON2 == 1) && ($CONFIG_MCTRL_SDRAM == 1) && ($CONFIG_MCTRL_PAGE == 1)} then {
+	configure_entry .menu15.config.f.x9 normal {n l y}} else {configure_entry .menu15.config.f.x9 disabled {y n l}}
+}
+
+
+proc update_define_menu15 {} {
+	update_define_mainmenu
+	global CONFIG_MODULES
+	global CONFIG_MCTRL_LEON2
+	global CONFIG_MCTRL_8BIT
+	if {($CONFIG_MCTRL_LEON2 == 1)} then {
+	set CONFIG_MCTRL_8BIT [expr $CONFIG_MCTRL_8BIT&15]} else {set CONFIG_MCTRL_8BIT [expr $CONFIG_MCTRL_8BIT|16]}
+	global CONFIG_MCTRL_16BIT
+	if {($CONFIG_MCTRL_LEON2 == 1)} then {
+	set CONFIG_MCTRL_16BIT [expr $CONFIG_MCTRL_16BIT&15]} else {set CONFIG_MCTRL_16BIT [expr $CONFIG_MCTRL_16BIT|16]}
+	global CONFIG_MCTRL_5CS
+	if {($CONFIG_MCTRL_LEON2 == 1)} then {
+	set CONFIG_MCTRL_5CS [expr $CONFIG_MCTRL_5CS&15]} else {set CONFIG_MCTRL_5CS [expr $CONFIG_MCTRL_5CS|16]}
+	global CONFIG_MCTRL_SDRAM
+	if {($CONFIG_MCTRL_LEON2 == 1)} then {
+	set CONFIG_MCTRL_SDRAM [expr $CONFIG_MCTRL_SDRAM&15]} else {set CONFIG_MCTRL_SDRAM [expr $CONFIG_MCTRL_SDRAM|16]}
+	global CONFIG_MCTRL_SDRAM_SEPBUS
+	if {($CONFIG_MCTRL_LEON2 == 1) && ($CONFIG_MCTRL_SDRAM == 1)} then {
+	set CONFIG_MCTRL_SDRAM_SEPBUS [expr $CONFIG_MCTRL_SDRAM_SEPBUS&15]} else {set CONFIG_MCTRL_SDRAM_SEPBUS [expr $CONFIG_MCTRL_SDRAM_SEPBUS|16]}
+	global CONFIG_MCTRL_SDRAM_BUS64
+	if {($CONFIG_MCTRL_LEON2 == 1) && ($CONFIG_MCTRL_SDRAM == 1) && ($CONFIG_MCTRL_SDRAM_SEPBUS == 1)} then {
+	set CONFIG_MCTRL_SDRAM_BUS64 [expr $CONFIG_MCTRL_SDRAM_BUS64&15]} else {set CONFIG_MCTRL_SDRAM_BUS64 [expr $CONFIG_MCTRL_SDRAM_BUS64|16]}
+	global CONFIG_MCTRL_SDRAM_INVCLK
+	if {($CONFIG_MCTRL_LEON2 == 1) && ($CONFIG_MCTRL_SDRAM == 1) && ($CONFIG_MCTRL_SDRAM_SEPBUS == 1)} then {
+	set CONFIG_MCTRL_SDRAM_INVCLK [expr $CONFIG_MCTRL_SDRAM_INVCLK&15]} else {set CONFIG_MCTRL_SDRAM_INVCLK [expr $CONFIG_MCTRL_SDRAM_INVCLK|16]}
+	global CONFIG_MCTRL_PAGE
+	if {($CONFIG_MCTRL_LEON2 == 1) && ($CONFIG_MCTRL_SDRAM == 1)} then {
+	set CONFIG_MCTRL_PAGE [expr $CONFIG_MCTRL_PAGE&15]} else {set CONFIG_MCTRL_PAGE [expr $CONFIG_MCTRL_PAGE|16]}
+	global CONFIG_MCTRL_PROGPAGE
+	if {($CONFIG_MCTRL_LEON2 == 1) && ($CONFIG_MCTRL_SDRAM == 1) && ($CONFIG_MCTRL_PAGE == 1)} then {
+	set CONFIG_MCTRL_PROGPAGE [expr $CONFIG_MCTRL_PROGPAGE&15]} else {set CONFIG_MCTRL_PROGPAGE [expr $CONFIG_MCTRL_PROGPAGE|16]}
+}
+
+
+proc menu16 {w title} {
+	set oldFocus [focus]
+	catch {focus .menu14}
+	catch {destroy $w; unregister_active 16}
+	toplevel $w -class Dialog
+	wm withdraw $w
+	global active_menus
+	set active_menus [lsort -integer [linsert $active_menus end 16]]
+	message $w.m -width 400 -aspect 300 -text \
+		"Xilinx MIG DDR2 controller   "  -relief raised
+	pack $w.m -pady 10 -side top -padx 10
+	wm title $w "Xilinx MIG DDR2 controller   " 
+
+	bind $w <Escape> "catch {focus $oldFocus}; destroy $w; unregister_active 16; break"
+	set nextscript "catch {focus $oldFocus}; destroy $w; unregister_active 16; catch {destroy .menu14}; unregister_active 14; menu17 .menu17 \"$title\""
+	frame $w.f
+	button $w.f.back -text "OK" \
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 16"
+	button $w.f.next -text "Next" -underline 0\
+		-width 15 -command $nextscript
+	bind all <Alt-n> $nextscript
+	button $w.f.prev -text "Prev" -underline 0\
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 16; menu15 .menu15 \"$title\""
+	bind $w <Alt-p> "catch {focus $oldFocus}; destroy $w; unregister_active 16; menu15 .menu15 \"$title\";break"
+	pack $w.f.back $w.f.next $w.f.prev -side left -expand on
+	pack $w.f -pady 10 -side bottom -anchor w -fill x
+	frame $w.topline -relief ridge -borderwidth 2 -height 2
+	pack $w.topline -side top -fill x
+
+	frame $w.botline -relief ridge -borderwidth 2 -height 2
+	pack $w.botline -side bottom -fill x
+
+	frame $w.config
+	pack $w.config -fill y -expand on
+
+	scrollbar $w.config.vscroll -command "$w.config.canvas yview"
+	pack $w.config.vscroll -side right -fill y
+
+	canvas $w.config.canvas -height 1\
+		-relief flat -borderwidth 0 -yscrollcommand "$w.config.vscroll set" \
+		-width [expr [winfo screenwidth .] * 1 / 2] 
+	frame $w.config.f
+	bind $w <Key-Down> "$w.config.canvas yview scroll  1 unit;break;"
+	bind $w <Key-Up> "$w.config.canvas yview scroll  -1 unit;break;"
+	bind $w <Key-Next> "$w.config.canvas yview scroll  1 page;break;"
+	bind $w <Key-Prior> "$w.config.canvas yview scroll  -1 page;break;"
+	bind $w <Key-Home> "$w.config.canvas yview moveto 0;break;"
+	bind $w <Key-End> "$w.config.canvas yview moveto 1 ;break;"
+	pack $w.config.canvas -side right -fill y
+
+
+	bool $w.config.f 16 0 "Enable Xilinx MIG DDR2/3 controller" CONFIG_MIG_DDR2
+
+
+
+	focus $w
+	update_active
+	global winx; global winy
+	if {[winfo exists .menu14] == 0} then {menu14 .menu14 "Memory controllers             "}
+	set winx [expr [winfo x .menu14]+30]; set winy [expr [winfo y .menu14]+30]
+	if {[winfo exists $w]} then {wm geometry $w +$winx+$winy}
+	update idletasks
+	if {[winfo exists $w]} then  {$w.config.canvas create window 0 0 -anchor nw -window $w.config.f
+
+	$w.config.canvas configure \
+		-width [expr [winfo reqwidth $w.config.f] + 1]\
+		-scrollregion "-1 -1 [expr [winfo reqwidth $w.config.f] + 1] \
+			 [expr [winfo reqheight $w.config.f] + 1]"
+
+	set winy [expr [winfo reqh $w] - [winfo reqh $w.config.canvas]]
+	set scry [expr [winfo screenh $w] / 2]
+	set maxy [expr [winfo screenh $w] * 3 / 4]
+	set canvtotal [expr [winfo reqh $w.config.f] + 2]
+	if [expr $winy + $canvtotal < $maxy] {
+		$w.config.canvas configure -height $canvtotal
+	} else {
+		$w.config.canvas configure -height [expr $scry - $winy]
+		}
+	}
+	update idletasks
+	if {[winfo exists $w]} then {
+	wm maxsize $w [winfo width $w] [winfo screenheight $w]
+	wm minsize $w [winfo width $w] 100
+
+	wm deiconify $w
+}
+}
+
+proc update_menu16 {} {
+}
+
+
+proc update_define_menu16 {} {
+	update_define_mainmenu
+	global CONFIG_MODULES
+}
+
+
+proc menu17 {w title} {
+	set oldFocus [focus]
+	catch {focus .menu13}
+	catch {destroy $w; unregister_active 17}
+	toplevel $w -class Dialog
+	wm withdraw $w
+	global active_menus
+	set active_menus [lsort -integer [linsert $active_menus end 17]]
+	message $w.m -width 400 -aspect 300 -text \
+		"On-chip RAM/ROM                 "  -relief raised
+	pack $w.m -pady 10 -side top -padx 10
+	wm title $w "On-chip RAM/ROM                 " 
+
+	bind $w <Escape> "catch {focus $oldFocus}; destroy $w; unregister_active 17; break"
+	set nextscript "catch {focus $oldFocus}; destroy $w; unregister_active 17; menu18 .menu18 \"$title\""
+	frame $w.f
+	button $w.f.back -text "OK" \
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 17"
+	button $w.f.next -text "Next" -underline 0\
+		-width 15 -command $nextscript
+	bind all <Alt-n> $nextscript
+	button $w.f.prev -text "Prev" -underline 0\
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 17; menu16 .menu16 \"$title\""
+	bind $w <Alt-p> "catch {focus $oldFocus}; destroy $w; unregister_active 17; menu16 .menu16 \"$title\";break"
+	pack $w.f.back $w.f.next $w.f.prev -side left -expand on
+	pack $w.f -pady 10 -side bottom -anchor w -fill x
+	frame $w.topline -relief ridge -borderwidth 2 -height 2
+	pack $w.topline -side top -fill x
+
+	frame $w.botline -relief ridge -borderwidth 2 -height 2
+	pack $w.botline -side bottom -fill x
+
+	frame $w.config
+	pack $w.config -fill y -expand on
+
+	scrollbar $w.config.vscroll -command "$w.config.canvas yview"
+	pack $w.config.vscroll -side right -fill y
+
+	canvas $w.config.canvas -height 1\
+		-relief flat -borderwidth 0 -yscrollcommand "$w.config.vscroll set" \
+		-width [expr [winfo screenwidth .] * 1 / 2] 
+	frame $w.config.f
+	bind $w <Key-Down> "$w.config.canvas yview scroll  1 unit;break;"
+	bind $w <Key-Up> "$w.config.canvas yview scroll  -1 unit;break;"
+	bind $w <Key-Next> "$w.config.canvas yview scroll  1 page;break;"
+	bind $w <Key-Prior> "$w.config.canvas yview scroll  -1 page;break;"
+	bind $w <Key-Home> "$w.config.canvas yview moveto 0;break;"
+	bind $w <Key-End> "$w.config.canvas yview moveto 1 ;break;"
+	pack $w.config.canvas -side right -fill y
+
+
+	bool $w.config.f 17 0 "On-chip AHB ROM                   " CONFIG_AHBROM_ENABLE
+	hex $w.config.f 17 1 "ROM start address (haddr\[31:20\]) " CONFIG_AHBROM_START
+	bool $w.config.f 17 2 "Pipelined ROM access              " CONFIG_AHBROM_PIPE
+	bool $w.config.f 17 3 "On-chip AHB RAM                   " CONFIG_AHBRAM_ENABLE
+	global tmpvar_29
+	minimenu $w.config.f 17 4 "AHB RAM size (Kbyte)" tmpvar_29 CONFIG_AHBRAM_SZ1
+	menu $w.config.f.x4.x.menu -tearoffcommand "menutitle \"AHB RAM size (Kbyte)\""
+	$w.config.f.x4.x.menu add radiobutton -label "1" -variable tmpvar_29 -value "1" -command "update_active"
+	$w.config.f.x4.x.menu add radiobutton -label "2" -variable tmpvar_29 -value "2" -command "update_active"
+	$w.config.f.x4.x.menu add radiobutton -label "4" -variable tmpvar_29 -value "4" -command "update_active"
+	$w.config.f.x4.x.menu add radiobutton -label "8" -variable tmpvar_29 -value "8" -command "update_active"
+	$w.config.f.x4.x.menu add radiobutton -label "16" -variable tmpvar_29 -value "16" -command "update_active"
+	$w.config.f.x4.x.menu add radiobutton -label "32" -variable tmpvar_29 -value "32" -command "update_active"
+	$w.config.f.x4.x.menu add radiobutton -label "64" -variable tmpvar_29 -value "64" -command "update_active"
+	$w.config.f.x4.x.menu add radiobutton -label "128" -variable tmpvar_29 -value "128" -command "update_active"
+	$w.config.f.x4.x.menu add radiobutton -label "256" -variable tmpvar_29 -value "256" -command "update_active"
+	$w.config.f.x4.x.menu add radiobutton -label "512" -variable tmpvar_29 -value "512" -command "update_active"
+	$w.config.f.x4.x.menu add radiobutton -label "1024" -variable tmpvar_29 -value "1024" -command "update_active"
+	$w.config.f.x4.x.menu add radiobutton -label "2048" -variable tmpvar_29 -value "2048" -command "update_active"
+	$w.config.f.x4.x.menu add radiobutton -label "4096" -variable tmpvar_29 -value "4096" -command "update_active"
+	menusplit $w $w.config.f.x4.x.menu 13
+	hex $w.config.f 17 5 "RAM start address (haddr\[31:20\]) " CONFIG_AHBRAM_START
+	bool $w.config.f 17 6 "Extra pipeline stage             " CONFIG_AHBRAM_PIPE
+
+
+
+	focus $w
+	update_active
+	global winx; global winy
+	if {[winfo exists .menu13] == 0} then {menu13 .menu13 "Peripherals             "}
+	set winx [expr [winfo x .menu13]+30]; set winy [expr [winfo y .menu13]+30]
+	if {[winfo exists $w]} then {wm geometry $w +$winx+$winy}
+	update idletasks
+	if {[winfo exists $w]} then  {$w.config.canvas create window 0 0 -anchor nw -window $w.config.f
+
+	$w.config.canvas configure \
+		-width [expr [winfo reqwidth $w.config.f] + 1]\
+		-scrollregion "-1 -1 [expr [winfo reqwidth $w.config.f] + 1] \
+			 [expr [winfo reqheight $w.config.f] + 1]"
+
+	set winy [expr [winfo reqh $w] - [winfo reqh $w.config.canvas]]
+	set scry [expr [winfo screenh $w] / 2]
+	set maxy [expr [winfo screenh $w] * 3 / 4]
+	set canvtotal [expr [winfo reqh $w.config.f] + 2]
+	if [expr $winy + $canvtotal < $maxy] {
+		$w.config.canvas configure -height $canvtotal
+	} else {
+		$w.config.canvas configure -height [expr $scry - $winy]
+		}
+	}
+	update idletasks
+	if {[winfo exists $w]} then {
+	wm maxsize $w [winfo width $w] [winfo screenheight $w]
+	wm minsize $w [winfo width $w] 100
+
+	wm deiconify $w
+}
+}
+
+proc update_menu17 {} {
+	global CONFIG_AHBROM_ENABLE
+	global CONFIG_AHBROM_START
+	if {($CONFIG_AHBROM_ENABLE == 1)} then {.menu17.config.f.x1.x configure -state normal -foreground [ cget .ref -foreground ]; .menu17.config.f.x1.l configure -state normal; } else {.menu17.config.f.x1.x configure -state disabled -foreground [ cget .ref -disabledforeground ]; .menu17.config.f.x1.l configure -state disabled}
+	global CONFIG_AHBROM_PIPE
+	if {($CONFIG_AHBROM_ENABLE == 1)} then {
+	configure_entry .menu17.config.f.x2 normal {n l y}} else {configure_entry .menu17.config.f.x2 disabled {y n l}}
+	global CONFIG_AHBRAM_ENABLE
+	if {($CONFIG_AHBRAM_ENABLE == 1)} then {configure_entry .menu17.config.f.x4 normal {x l}} else {configure_entry .menu17.config.f.x4 disabled {x l}}
+	global CONFIG_AHBRAM_START
+	if {($CONFIG_AHBRAM_ENABLE == 1)} then {.menu17.config.f.x5.x configure -state normal -foreground [ cget .ref -foreground ]; .menu17.config.f.x5.l configure -state normal; } else {.menu17.config.f.x5.x configure -state disabled -foreground [ cget .ref -disabledforeground ]; .menu17.config.f.x5.l configure -state disabled}
+	global CONFIG_AHBRAM_PIPE
+	if {($CONFIG_AHBRAM_ENABLE == 1)} then {
+	configure_entry .menu17.config.f.x6 normal {n l y}} else {configure_entry .menu17.config.f.x6 disabled {y n l}}
+}
+
+
+proc update_define_menu17 {} {
+	update_define_mainmenu
+	global CONFIG_MODULES
+	global CONFIG_AHBROM_ENABLE
+	global CONFIG_AHBROM_START
+	if {($CONFIG_AHBROM_ENABLE == 1)} then {validate_hex CONFIG_AHBROM_START "$CONFIG_AHBROM_START" 000}
+	global CONFIG_AHBROM_PIPE
+	if {($CONFIG_AHBROM_ENABLE == 1)} then {
+	set CONFIG_AHBROM_PIPE [expr $CONFIG_AHBROM_PIPE&15]} else {set CONFIG_AHBROM_PIPE [expr $CONFIG_AHBROM_PIPE|16]}
+	global tmpvar_29
+	global CONFIG_AHBRAM_SZ1
+	if {$tmpvar_29 == "1"} then {set CONFIG_AHBRAM_SZ1 1} else {set CONFIG_AHBRAM_SZ1 0}
+	global CONFIG_AHBRAM_SZ2
+	if {$tmpvar_29 == "2"} then {set CONFIG_AHBRAM_SZ2 1} else {set CONFIG_AHBRAM_SZ2 0}
+	global CONFIG_AHBRAM_SZ4
+	if {$tmpvar_29 == "4"} then {set CONFIG_AHBRAM_SZ4 1} else {set CONFIG_AHBRAM_SZ4 0}
+	global CONFIG_AHBRAM_SZ8
+	if {$tmpvar_29 == "8"} then {set CONFIG_AHBRAM_SZ8 1} else {set CONFIG_AHBRAM_SZ8 0}
+	global CONFIG_AHBRAM_SZ16
+	if {$tmpvar_29 == "16"} then {set CONFIG_AHBRAM_SZ16 1} else {set CONFIG_AHBRAM_SZ16 0}
+	global CONFIG_AHBRAM_SZ32
+	if {$tmpvar_29 == "32"} then {set CONFIG_AHBRAM_SZ32 1} else {set CONFIG_AHBRAM_SZ32 0}
+	global CONFIG_AHBRAM_SZ64
+	if {$tmpvar_29 == "64"} then {set CONFIG_AHBRAM_SZ64 1} else {set CONFIG_AHBRAM_SZ64 0}
+	global CONFIG_AHBRAM_SZ128
+	if {$tmpvar_29 == "128"} then {set CONFIG_AHBRAM_SZ128 1} else {set CONFIG_AHBRAM_SZ128 0}
+	global CONFIG_AHBRAM_SZ256
+	if {$tmpvar_29 == "256"} then {set CONFIG_AHBRAM_SZ256 1} else {set CONFIG_AHBRAM_SZ256 0}
+	global CONFIG_AHBRAM_SZ512
+	if {$tmpvar_29 == "512"} then {set CONFIG_AHBRAM_SZ512 1} else {set CONFIG_AHBRAM_SZ512 0}
+	global CONFIG_AHBRAM_SZ1024
+	if {$tmpvar_29 == "1024"} then {set CONFIG_AHBRAM_SZ1024 1} else {set CONFIG_AHBRAM_SZ1024 0}
+	global CONFIG_AHBRAM_SZ2048
+	if {$tmpvar_29 == "2048"} then {set CONFIG_AHBRAM_SZ2048 1} else {set CONFIG_AHBRAM_SZ2048 0}
+	global CONFIG_AHBRAM_SZ4096
+	if {$tmpvar_29 == "4096"} then {set CONFIG_AHBRAM_SZ4096 1} else {set CONFIG_AHBRAM_SZ4096 0}
+	global CONFIG_AHBRAM_ENABLE
+	global CONFIG_AHBRAM_START
+	if {($CONFIG_AHBRAM_ENABLE == 1)} then {validate_hex CONFIG_AHBRAM_START "$CONFIG_AHBRAM_START" A00}
+	global CONFIG_AHBRAM_PIPE
+	if {($CONFIG_AHBRAM_ENABLE == 1)} then {
+	set CONFIG_AHBRAM_PIPE [expr $CONFIG_AHBRAM_PIPE&15]} else {set CONFIG_AHBRAM_PIPE [expr $CONFIG_AHBRAM_PIPE|16]}
+}
+
+
+proc menu18 {w title} {
+	set oldFocus [focus]
+	catch {focus .menu13}
+	catch {destroy $w; unregister_active 18}
+	toplevel $w -class Dialog
+	wm withdraw $w
+	global active_menus
+	set active_menus [lsort -integer [linsert $active_menus end 18]]
+	message $w.m -width 400 -aspect 300 -text \
+		"Ethernet             "  -relief raised
+	pack $w.m -pady 10 -side top -padx 10
+	wm title $w "Ethernet             " 
+
+	bind $w <Escape> "catch {focus $oldFocus}; destroy $w; unregister_active 18; break"
+	set nextscript "catch {focus $oldFocus}; destroy $w; unregister_active 18; menu19 .menu19 \"$title\""
+	frame $w.f
+	button $w.f.back -text "OK" \
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 18"
+	button $w.f.next -text "Next" -underline 0\
+		-width 15 -command $nextscript
+	bind all <Alt-n> $nextscript
+	button $w.f.prev -text "Prev" -underline 0\
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 18; menu17 .menu17 \"$title\""
+	bind $w <Alt-p> "catch {focus $oldFocus}; destroy $w; unregister_active 18; menu17 .menu17 \"$title\";break"
+	pack $w.f.back $w.f.next $w.f.prev -side left -expand on
+	pack $w.f -pady 10 -side bottom -anchor w -fill x
+	frame $w.topline -relief ridge -borderwidth 2 -height 2
+	pack $w.topline -side top -fill x
+
+	frame $w.botline -relief ridge -borderwidth 2 -height 2
+	pack $w.botline -side bottom -fill x
+
+	frame $w.config
+	pack $w.config -fill y -expand on
+
+	scrollbar $w.config.vscroll -command "$w.config.canvas yview"
+	pack $w.config.vscroll -side right -fill y
+
+	canvas $w.config.canvas -height 1\
+		-relief flat -borderwidth 0 -yscrollcommand "$w.config.vscroll set" \
+		-width [expr [winfo screenwidth .] * 1 / 2] 
+	frame $w.config.f
+	bind $w <Key-Down> "$w.config.canvas yview scroll  1 unit;break;"
+	bind $w <Key-Up> "$w.config.canvas yview scroll  -1 unit;break;"
+	bind $w <Key-Next> "$w.config.canvas yview scroll  1 page;break;"
+	bind $w <Key-Prior> "$w.config.canvas yview scroll  -1 page;break;"
+	bind $w <Key-Home> "$w.config.canvas yview moveto 0;break;"
+	bind $w <Key-End> "$w.config.canvas yview moveto 1 ;break;"
+	pack $w.config.canvas -side right -fill y
+
+
+	bool $w.config.f 18 0 "Gaisler Research 10/100/1000 Mbit Ethernet MAC " CONFIG_GRETH_ENABLE
+	bool $w.config.f 18 1 "Enable 1000 Mbit support    " CONFIG_GRETH_GIGA
+	global tmpvar_30
+	minimenu $w.config.f 18 2 "AHB FIFO size (words)            " tmpvar_30 CONFIG_GRETH_FIFO4
+	menu $w.config.f.x2.x.menu -tearoffcommand "menutitle \"AHB FIFO size (words)            \""
+	$w.config.f.x2.x.menu add radiobutton -label "4" -variable tmpvar_30 -value "4" -command "update_active"
+	$w.config.f.x2.x.menu add radiobutton -label "8" -variable tmpvar_30 -value "8" -command "update_active"
+	$w.config.f.x2.x.menu add radiobutton -label "16" -variable tmpvar_30 -value "16" -command "update_active"
+	$w.config.f.x2.x.menu add radiobutton -label "32" -variable tmpvar_30 -value "32" -command "update_active"
+	$w.config.f.x2.x.menu add radiobutton -label "64" -variable tmpvar_30 -value "64" -command "update_active"
+	menusplit $w $w.config.f.x2.x.menu 5
+	bool $w.config.f 18 3 "Enable fault-tolerance" CONFIG_GRETH_FT
+	bool $w.config.f 18 4 "Enable fault tolerance for EDCL buffer " CONFIG_GRETH_EDCLFT
+
+
+
+	focus $w
+	update_active
+	global winx; global winy
+	if {[winfo exists .menu13] == 0} then {menu13 .menu13 "Peripherals             "}
+	set winx [expr [winfo x .menu13]+30]; set winy [expr [winfo y .menu13]+30]
+	if {[winfo exists $w]} then {wm geometry $w +$winx+$winy}
+	update idletasks
+	if {[winfo exists $w]} then  {$w.config.canvas create window 0 0 -anchor nw -window $w.config.f
+
+	$w.config.canvas configure \
+		-width [expr [winfo reqwidth $w.config.f] + 1]\
+		-scrollregion "-1 -1 [expr [winfo reqwidth $w.config.f] + 1] \
+			 [expr [winfo reqheight $w.config.f] + 1]"
+
+	set winy [expr [winfo reqh $w] - [winfo reqh $w.config.canvas]]
+	set scry [expr [winfo screenh $w] / 2]
+	set maxy [expr [winfo screenh $w] * 3 / 4]
+	set canvtotal [expr [winfo reqh $w.config.f] + 2]
+	if [expr $winy + $canvtotal < $maxy] {
+		$w.config.canvas configure -height $canvtotal
+	} else {
+		$w.config.canvas configure -height [expr $scry - $winy]
+		}
+	}
+	update idletasks
+	if {[winfo exists $w]} then {
+	wm maxsize $w [winfo width $w] [winfo screenheight $w]
+	wm minsize $w [winfo width $w] 100
+
+	wm deiconify $w
+}
+}
+
+proc update_menu18 {} {
+	global CONFIG_GRETH_ENABLE
+	global CONFIG_GRETH_GIGA
+	if {($CONFIG_GRETH_ENABLE == 1)} then {
+	configure_entry .menu18.config.f.x1 normal {n l y}} else {configure_entry .menu18.config.f.x1 disabled {y n l}}
+	if {($CONFIG_GRETH_ENABLE == 1) && ($CONFIG_GRETH_GIGA == 0)} then {configure_entry .menu18.config.f.x2 normal {x l}} else {configure_entry .menu18.config.f.x2 disabled {x l}}
+	global CONFIG_LEON3FT_PRESENT
+	global CONFIG_GRETH_FT
+	if {($CONFIG_GRETH_ENABLE == 1) && ($CONFIG_LEON3FT_PRESENT == 1)} then {
+	configure_entry .menu18.config.f.x3 normal {n l y}} else {configure_entry .menu18.config.f.x3 disabled {y n l}}
+	global CONFIG_GRETH_EDCLFT
+	if {($CONFIG_GRETH_ENABLE == 1) && ($CONFIG_LEON3FT_PRESENT == 1) && ($CONFIG_GRETH_FT == 1)} then {
+	configure_entry .menu18.config.f.x4 normal {n l y}} else {configure_entry .menu18.config.f.x4 disabled {y n l}}
+}
+
+
+proc update_define_menu18 {} {
+	update_define_mainmenu
+	global CONFIG_MODULES
+	global CONFIG_GRETH_ENABLE
+	global CONFIG_GRETH_GIGA
+	if {($CONFIG_GRETH_ENABLE == 1)} then {
+	set CONFIG_GRETH_GIGA [expr $CONFIG_GRETH_GIGA&15]} else {set CONFIG_GRETH_GIGA [expr $CONFIG_GRETH_GIGA|16]}
+	global tmpvar_30
+	global CONFIG_GRETH_FIFO4
+	if {$tmpvar_30 == "4"} then {set CONFIG_GRETH_FIFO4 1} else {set CONFIG_GRETH_FIFO4 0}
+	global CONFIG_GRETH_FIFO8
+	if {$tmpvar_30 == "8"} then {set CONFIG_GRETH_FIFO8 1} else {set CONFIG_GRETH_FIFO8 0}
+	global CONFIG_GRETH_FIFO16
+	if {$tmpvar_30 == "16"} then {set CONFIG_GRETH_FIFO16 1} else {set CONFIG_GRETH_FIFO16 0}
+	global CONFIG_GRETH_FIFO32
+	if {$tmpvar_30 == "32"} then {set CONFIG_GRETH_FIFO32 1} else {set CONFIG_GRETH_FIFO32 0}
+	global CONFIG_GRETH_FIFO64
+	if {$tmpvar_30 == "64"} then {set CONFIG_GRETH_FIFO64 1} else {set CONFIG_GRETH_FIFO64 0}
+	global CONFIG_LEON3FT_PRESENT
+	global CONFIG_GRETH_FT
+	if {($CONFIG_GRETH_ENABLE == 1) && ($CONFIG_LEON3FT_PRESENT == 1)} then {
+	set CONFIG_GRETH_FT [expr $CONFIG_GRETH_FT&15]} else {set CONFIG_GRETH_FT [expr $CONFIG_GRETH_FT|16]}
+	global CONFIG_GRETH_EDCLFT
+	if {($CONFIG_GRETH_ENABLE == 1) && ($CONFIG_LEON3FT_PRESENT == 1) && ($CONFIG_GRETH_FT == 1)} then {
+	set CONFIG_GRETH_EDCLFT [expr $CONFIG_GRETH_EDCLFT&15]} else {set CONFIG_GRETH_EDCLFT [expr $CONFIG_GRETH_EDCLFT|16]}
+}
+
+
+proc menu19 {w title} {
+	set oldFocus [focus]
+	catch {focus .menu13}
+	catch {destroy $w; unregister_active 19}
+	toplevel $w -class Dialog
+	wm withdraw $w
+	global active_menus
+	set active_menus [lsort -integer [linsert $active_menus end 19]]
+	message $w.m -width 400 -aspect 300 -text \
+		"UARTs, timers and irq control         "  -relief raised
+	pack $w.m -pady 10 -side top -padx 10
+	wm title $w "UARTs, timers and irq control         " 
+
+	bind $w <Escape> "catch {focus $oldFocus}; destroy $w; unregister_active 19; break"
+	set nextscript "catch {focus $oldFocus}; destroy $w; unregister_active 19; menu20 .menu20 \"$title\""
+	frame $w.f
+	button $w.f.back -text "OK" \
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 19"
+	button $w.f.next -text "Next" -underline 0\
+		-width 15 -command $nextscript
+	bind all <Alt-n> $nextscript
+	button $w.f.prev -text "Prev" -underline 0\
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 19; menu18 .menu18 \"$title\""
+	bind $w <Alt-p> "catch {focus $oldFocus}; destroy $w; unregister_active 19; menu18 .menu18 \"$title\";break"
+	pack $w.f.back $w.f.next $w.f.prev -side left -expand on
+	pack $w.f -pady 10 -side bottom -anchor w -fill x
+	frame $w.topline -relief ridge -borderwidth 2 -height 2
+	pack $w.topline -side top -fill x
+
+	frame $w.botline -relief ridge -borderwidth 2 -height 2
+	pack $w.botline -side bottom -fill x
+
+	frame $w.config
+	pack $w.config -fill y -expand on
+
+	scrollbar $w.config.vscroll -command "$w.config.canvas yview"
+	pack $w.config.vscroll -side right -fill y
+
+	canvas $w.config.canvas -height 1\
+		-relief flat -borderwidth 0 -yscrollcommand "$w.config.vscroll set" \
+		-width [expr [winfo screenwidth .] * 1 / 2] 
+	frame $w.config.f
+	bind $w <Key-Down> "$w.config.canvas yview scroll  1 unit;break;"
+	bind $w <Key-Up> "$w.config.canvas yview scroll  -1 unit;break;"
+	bind $w <Key-Next> "$w.config.canvas yview scroll  1 page;break;"
+	bind $w <Key-Prior> "$w.config.canvas yview scroll  -1 page;break;"
+	bind $w <Key-Home> "$w.config.canvas yview moveto 0;break;"
+	bind $w <Key-End> "$w.config.canvas yview moveto 1 ;break;"
+	pack $w.config.canvas -side right -fill y
+
+
+	bool $w.config.f 19 0 "Enable console UART                  " CONFIG_UART1_ENABLE
+	global tmpvar_31
+	minimenu $w.config.f 19 1 "UART1 FIFO depth" tmpvar_31 CONFIG_UA1_FIFO1
+	menu $w.config.f.x1.x.menu -tearoffcommand "menutitle \"UART1 FIFO depth\""
+	$w.config.f.x1.x.menu add radiobutton -label "1" -variable tmpvar_31 -value "1" -command "update_active"
+	$w.config.f.x1.x.menu add radiobutton -label "2" -variable tmpvar_31 -value "2" -command "update_active"
+	$w.config.f.x1.x.menu add radiobutton -label "4" -variable tmpvar_31 -value "4" -command "update_active"
+	$w.config.f.x1.x.menu add radiobutton -label "8" -variable tmpvar_31 -value "8" -command "update_active"
+	$w.config.f.x1.x.menu add radiobutton -label "16" -variable tmpvar_31 -value "16" -command "update_active"
+	$w.config.f.x1.x.menu add radiobutton -label "32" -variable tmpvar_31 -value "32" -command "update_active"
+	menusplit $w $w.config.f.x1.x.menu 6
+	bool $w.config.f 19 2 "Enable LEON3 interrupt controller    " CONFIG_IRQ3_ENABLE
+	bool $w.config.f 19 3 "Enable secondary interrupts           " CONFIG_IRQ3_SEC
+	int $w.config.f 19 4 "Secondary interrupt number (1 - 15)    " CONFIG_IRQ3_NSEC
+	bool $w.config.f 19 5 "Enable Timer Unit                    " CONFIG_GPT_ENABLE
+	int $w.config.f 19 6 "Number of timers (1 - 7)              " CONFIG_GPT_NTIM
+	int $w.config.f 19 7 "Scaler width (2 - 16)                 " CONFIG_GPT_SW
+	int $w.config.f 19 8 "Timer width (2 - 32)                  " CONFIG_GPT_TW
+	int $w.config.f 19 9 "Timer unit interrupt                  " CONFIG_GPT_IRQ
+	bool $w.config.f 19 10 "Separate interrupts                  " CONFIG_GPT_SEPIRQ
+	bool $w.config.f 19 11 "Watchdog enable                      " CONFIG_GPT_WDOGEN
+	hex $w.config.f 19 12 "Initial watchdog time-out value       " CONFIG_GPT_WDOG
+	bool $w.config.f 19 13 "Enable generic GPIO port              " CONFIG_GRGPIO_ENABLE
+	int $w.config.f 19 14 "GPIO width            " CONFIG_GRGPIO_WIDTH
+	hex $w.config.f 19 15 "GPIO interrupt mask   " CONFIG_GRGPIO_IMASK
+	bool $w.config.f 19 16 "Enable I2C master " CONFIG_I2C_ENABLE
+
+
+
+	focus $w
+	update_active
+	global winx; global winy
+	if {[winfo exists .menu13] == 0} then {menu13 .menu13 "Peripherals             "}
+	set winx [expr [winfo x .menu13]+30]; set winy [expr [winfo y .menu13]+30]
+	if {[winfo exists $w]} then {wm geometry $w +$winx+$winy}
+	update idletasks
+	if {[winfo exists $w]} then  {$w.config.canvas create window 0 0 -anchor nw -window $w.config.f
+
+	$w.config.canvas configure \
+		-width [expr [winfo reqwidth $w.config.f] + 1]\
+		-scrollregion "-1 -1 [expr [winfo reqwidth $w.config.f] + 1] \
+			 [expr [winfo reqheight $w.config.f] + 1]"
+
+	set winy [expr [winfo reqh $w] - [winfo reqh $w.config.canvas]]
+	set scry [expr [winfo screenh $w] / 2]
+	set maxy [expr [winfo screenh $w] * 3 / 4]
+	set canvtotal [expr [winfo reqh $w.config.f] + 2]
+	if [expr $winy + $canvtotal < $maxy] {
+		$w.config.canvas configure -height $canvtotal
+	} else {
+		$w.config.canvas configure -height [expr $scry - $winy]
+		}
+	}
+	update idletasks
+	if {[winfo exists $w]} then {
+	wm maxsize $w [winfo width $w] [winfo screenheight $w]
+	wm minsize $w [winfo width $w] 100
+
+	wm deiconify $w
+}
+}
+
+proc update_menu19 {} {
+	global CONFIG_UART1_ENABLE
+	if {($CONFIG_UART1_ENABLE == 1)} then {configure_entry .menu19.config.f.x1 normal {x l}} else {configure_entry .menu19.config.f.x1 disabled {x l}}
+	global CONFIG_IRQ3_ENABLE
+	global CONFIG_IRQ3_SEC
+	if {($CONFIG_IRQ3_ENABLE == 1)} then {
+	configure_entry .menu19.config.f.x3 normal {n l y}} else {configure_entry .menu19.config.f.x3 disabled {y n l}}
+	global CONFIG_IRQ3_NSEC
+	if {($CONFIG_IRQ3_ENABLE == 1) && ($CONFIG_IRQ3_SEC == 1)} then {.menu19.config.f.x4.x configure -state normal -foreground [ cget .ref -foreground ]; .menu19.config.f.x4.l configure -state normal; } else {.menu19.config.f.x4.x configure -state disabled -foreground [ cget .ref -disabledforeground ]; .menu19.config.f.x4.l configure -state disabled}
+	global CONFIG_GPT_ENABLE
+	global CONFIG_GPT_NTIM
+	if {($CONFIG_GPT_ENABLE == 1)} then {.menu19.config.f.x6.x configure -state normal -foreground [ cget .ref -foreground ]; .menu19.config.f.x6.l configure -state normal; } else {.menu19.config.f.x6.x configure -state disabled -foreground [ cget .ref -disabledforeground ]; .menu19.config.f.x6.l configure -state disabled}
+	global CONFIG_GPT_SW
+	if {($CONFIG_GPT_ENABLE == 1)} then {.menu19.config.f.x7.x configure -state normal -foreground [ cget .ref -foreground ]; .menu19.config.f.x7.l configure -state normal; } else {.menu19.config.f.x7.x configure -state disabled -foreground [ cget .ref -disabledforeground ]; .menu19.config.f.x7.l configure -state disabled}
+	global CONFIG_GPT_TW
+	if {($CONFIG_GPT_ENABLE == 1)} then {.menu19.config.f.x8.x configure -state normal -foreground [ cget .ref -foreground ]; .menu19.config.f.x8.l configure -state normal; } else {.menu19.config.f.x8.x configure -state disabled -foreground [ cget .ref -disabledforeground ]; .menu19.config.f.x8.l configure -state disabled}
+	global CONFIG_GPT_IRQ
+	if {($CONFIG_GPT_ENABLE == 1)} then {.menu19.config.f.x9.x configure -state normal -foreground [ cget .ref -foreground ]; .menu19.config.f.x9.l configure -state normal; } else {.menu19.config.f.x9.x configure -state disabled -foreground [ cget .ref -disabledforeground ]; .menu19.config.f.x9.l configure -state disabled}
+	global CONFIG_GPT_SEPIRQ
+	if {($CONFIG_GPT_ENABLE == 1)} then {
+	configure_entry .menu19.config.f.x10 normal {n l y}} else {configure_entry .menu19.config.f.x10 disabled {y n l}}
+	global CONFIG_GPT_WDOGEN
+	if {($CONFIG_GPT_ENABLE == 1)} then {
+	configure_entry .menu19.config.f.x11 normal {n l y}} else {configure_entry .menu19.config.f.x11 disabled {y n l}}
+	global CONFIG_GPT_WDOG
+	if {($CONFIG_GPT_ENABLE == 1) && ($CONFIG_GPT_WDOGEN == 1)} then {.menu19.config.f.x12.x configure -state normal -foreground [ cget .ref -foreground ]; .menu19.config.f.x12.l configure -state normal; } else {.menu19.config.f.x12.x configure -state disabled -foreground [ cget .ref -disabledforeground ]; .menu19.config.f.x12.l configure -state disabled}
+	global CONFIG_GRGPIO_ENABLE
+	global CONFIG_GRGPIO_WIDTH
+	if {($CONFIG_GRGPIO_ENABLE == 1)} then {.menu19.config.f.x14.x configure -state normal -foreground [ cget .ref -foreground ]; .menu19.config.f.x14.l configure -state normal; } else {.menu19.config.f.x14.x configure -state disabled -foreground [ cget .ref -disabledforeground ]; .menu19.config.f.x14.l configure -state disabled}
+	global CONFIG_GRGPIO_IMASK
+	if {($CONFIG_GRGPIO_ENABLE == 1)} then {.menu19.config.f.x15.x configure -state normal -foreground [ cget .ref -foreground ]; .menu19.config.f.x15.l configure -state normal; } else {.menu19.config.f.x15.x configure -state disabled -foreground [ cget .ref -disabledforeground ]; .menu19.config.f.x15.l configure -state disabled}
+}
+
+
+proc update_define_menu19 {} {
+	update_define_mainmenu
+	global CONFIG_MODULES
+	global tmpvar_31
+	global CONFIG_UA1_FIFO1
+	if {$tmpvar_31 == "1"} then {set CONFIG_UA1_FIFO1 1} else {set CONFIG_UA1_FIFO1 0}
+	global CONFIG_UA1_FIFO2
+	if {$tmpvar_31 == "2"} then {set CONFIG_UA1_FIFO2 1} else {set CONFIG_UA1_FIFO2 0}
+	global CONFIG_UA1_FIFO4
+	if {$tmpvar_31 == "4"} then {set CONFIG_UA1_FIFO4 1} else {set CONFIG_UA1_FIFO4 0}
+	global CONFIG_UA1_FIFO8
+	if {$tmpvar_31 == "8"} then {set CONFIG_UA1_FIFO8 1} else {set CONFIG_UA1_FIFO8 0}
+	global CONFIG_UA1_FIFO16
+	if {$tmpvar_31 == "16"} then {set CONFIG_UA1_FIFO16 1} else {set CONFIG_UA1_FIFO16 0}
+	global CONFIG_UA1_FIFO32
+	if {$tmpvar_31 == "32"} then {set CONFIG_UA1_FIFO32 1} else {set CONFIG_UA1_FIFO32 0}
+	global CONFIG_IRQ3_ENABLE
+	global CONFIG_IRQ3_SEC
+	if {($CONFIG_IRQ3_ENABLE == 1)} then {
+	set CONFIG_IRQ3_SEC [expr $CONFIG_IRQ3_SEC&15]} else {set CONFIG_IRQ3_SEC [expr $CONFIG_IRQ3_SEC|16]}
+	global CONFIG_IRQ3_NSEC
+	if {($CONFIG_IRQ3_ENABLE == 1) && ($CONFIG_IRQ3_SEC == 1)} then {validate_int CONFIG_IRQ3_NSEC "$CONFIG_IRQ3_NSEC" 12}
+	global CONFIG_GPT_ENABLE
+	global CONFIG_GPT_NTIM
+	if {($CONFIG_GPT_ENABLE == 1)} then {validate_int CONFIG_GPT_NTIM "$CONFIG_GPT_NTIM" 2}
+	global CONFIG_GPT_SW
+	if {($CONFIG_GPT_ENABLE == 1)} then {validate_int CONFIG_GPT_SW "$CONFIG_GPT_SW" 8}
+	global CONFIG_GPT_TW
+	if {($CONFIG_GPT_ENABLE == 1)} then {validate_int CONFIG_GPT_TW "$CONFIG_GPT_TW" 32}
+	global CONFIG_GPT_IRQ
+	if {($CONFIG_GPT_ENABLE == 1)} then {validate_int CONFIG_GPT_IRQ "$CONFIG_GPT_IRQ" 8}
+	global CONFIG_GPT_SEPIRQ
+	if {($CONFIG_GPT_ENABLE == 1)} then {
+	set CONFIG_GPT_SEPIRQ [expr $CONFIG_GPT_SEPIRQ&15]} else {set CONFIG_GPT_SEPIRQ [expr $CONFIG_GPT_SEPIRQ|16]}
+	global CONFIG_GPT_WDOGEN
+	if {($CONFIG_GPT_ENABLE == 1)} then {
+	set CONFIG_GPT_WDOGEN [expr $CONFIG_GPT_WDOGEN&15]} else {set CONFIG_GPT_WDOGEN [expr $CONFIG_GPT_WDOGEN|16]}
+	global CONFIG_GPT_WDOG
+	if {($CONFIG_GPT_ENABLE == 1) && ($CONFIG_GPT_WDOGEN == 1)} then {validate_hex CONFIG_GPT_WDOG "$CONFIG_GPT_WDOG" FFFF}
+	global CONFIG_GRGPIO_ENABLE
+	global CONFIG_GRGPIO_WIDTH
+	if {($CONFIG_GRGPIO_ENABLE == 1)} then {validate_int CONFIG_GRGPIO_WIDTH "$CONFIG_GRGPIO_WIDTH" 8}
+	global CONFIG_GRGPIO_IMASK
+	if {($CONFIG_GRGPIO_ENABLE == 1)} then {validate_hex CONFIG_GRGPIO_IMASK "$CONFIG_GRGPIO_IMASK" 0000}
+}
+
+
+proc menu20 {w title} {
+	set oldFocus [focus]
+	catch {focus .menu13}
+	catch {destroy $w; unregister_active 20}
+	toplevel $w -class Dialog
+	wm withdraw $w
+	global active_menus
+	set active_menus [lsort -integer [linsert $active_menus end 20]]
+	message $w.m -width 400 -aspect 300 -text \
+		"Keybord and VGA interface"  -relief raised
+	pack $w.m -pady 10 -side top -padx 10
+	wm title $w "Keybord and VGA interface" 
+
+	bind $w <Escape> "catch {focus $oldFocus}; destroy $w; unregister_active 20; break"
+	set nextscript "catch {focus $oldFocus}; destroy $w; unregister_active 20; menu21 .menu21 \"$title\""
+	frame $w.f
+	button $w.f.back -text "OK" \
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 20"
+	button $w.f.next -text "Next" -underline 0\
+		-width 15 -command $nextscript
+	bind all <Alt-n> $nextscript
+	button $w.f.prev -text "Prev" -underline 0\
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 20; menu19 .menu19 \"$title\""
+	bind $w <Alt-p> "catch {focus $oldFocus}; destroy $w; unregister_active 20; menu19 .menu19 \"$title\";break"
+	pack $w.f.back $w.f.next $w.f.prev -side left -expand on
+	pack $w.f -pady 10 -side bottom -anchor w -fill x
+	frame $w.topline -relief ridge -borderwidth 2 -height 2
+	pack $w.topline -side top -fill x
+
+	frame $w.botline -relief ridge -borderwidth 2 -height 2
+	pack $w.botline -side bottom -fill x
+
+	frame $w.config
+	pack $w.config -fill y -expand on
+
+	scrollbar $w.config.vscroll -command "$w.config.canvas yview"
+	pack $w.config.vscroll -side right -fill y
+
+	canvas $w.config.canvas -height 1\
+		-relief flat -borderwidth 0 -yscrollcommand "$w.config.vscroll set" \
+		-width [expr [winfo screenwidth .] * 1 / 2] 
+	frame $w.config.f
+	bind $w <Key-Down> "$w.config.canvas yview scroll  1 unit;break;"
+	bind $w <Key-Up> "$w.config.canvas yview scroll  -1 unit;break;"
+	bind $w <Key-Next> "$w.config.canvas yview scroll  1 page;break;"
+	bind $w <Key-Prior> "$w.config.canvas yview scroll  -1 page;break;"
+	bind $w <Key-Home> "$w.config.canvas yview moveto 0;break;"
+	bind $w <Key-End> "$w.config.canvas yview moveto 1 ;break;"
+	pack $w.config.canvas -side right -fill y
+
+
+	bool $w.config.f 20 0 "Keyboard/mouse (PS2) interface  " CONFIG_KBD_ENABLE
+	bool $w.config.f 20 1 "Text-based VGA interface  " CONFIG_VGA_ENABLE
+	bool $w.config.f 20 2 "SVGA graphical frame buffer  " CONFIG_SVGA_ENABLE
+
+
+
+	focus $w
+	update_active
+	global winx; global winy
+	if {[winfo exists .menu13] == 0} then {menu13 .menu13 "Peripherals             "}
+	set winx [expr [winfo x .menu13]+30]; set winy [expr [winfo y .menu13]+30]
+	if {[winfo exists $w]} then {wm geometry $w +$winx+$winy}
+	update idletasks
+	if {[winfo exists $w]} then  {$w.config.canvas create window 0 0 -anchor nw -window $w.config.f
+
+	$w.config.canvas configure \
+		-width [expr [winfo reqwidth $w.config.f] + 1]\
+		-scrollregion "-1 -1 [expr [winfo reqwidth $w.config.f] + 1] \
+			 [expr [winfo reqheight $w.config.f] + 1]"
+
+	set winy [expr [winfo reqh $w] - [winfo reqh $w.config.canvas]]
+	set scry [expr [winfo screenh $w] / 2]
+	set maxy [expr [winfo screenh $w] * 3 / 4]
+	set canvtotal [expr [winfo reqh $w.config.f] + 2]
+	if [expr $winy + $canvtotal < $maxy] {
+		$w.config.canvas configure -height $canvtotal
+	} else {
+		$w.config.canvas configure -height [expr $scry - $winy]
+		}
+	}
+	update idletasks
+	if {[winfo exists $w]} then {
+	wm maxsize $w [winfo width $w] [winfo screenheight $w]
+	wm minsize $w [winfo width $w] 100
+
+	wm deiconify $w
+}
+}
+
+proc update_menu20 {} {
+	global CONFIG_VGA_ENABLE
+	global CONFIG_SVGA_ENABLE
+	if {($CONFIG_VGA_ENABLE == 0)} then {
+	configure_entry .menu20.config.f.x2 normal {n l y}} else {configure_entry .menu20.config.f.x2 disabled {y n l}}
+}
+
+
+proc update_define_menu20 {} {
+	update_define_mainmenu
+	global CONFIG_MODULES
+	global CONFIG_VGA_ENABLE
+	global CONFIG_SVGA_ENABLE
+	if {($CONFIG_VGA_ENABLE == 0)} then {
+	set CONFIG_SVGA_ENABLE [expr $CONFIG_SVGA_ENABLE&15]} else {set CONFIG_SVGA_ENABLE [expr $CONFIG_SVGA_ENABLE|16]}
+}
+
+
+proc menu21 {w title} {
+	set oldFocus [focus]
+	catch {focus .menu13}
+	catch {destroy $w; unregister_active 21}
+	toplevel $w -class Dialog
+	wm withdraw $w
+	global active_menus
+	set active_menus [lsort -integer [linsert $active_menus end 21]]
+	message $w.m -width 400 -aspect 300 -text \
+		"System ACE Interface Controller"  -relief raised
+	pack $w.m -pady 10 -side top -padx 10
+	wm title $w "System ACE Interface Controller" 
+
+	bind $w <Escape> "catch {focus $oldFocus}; destroy $w; unregister_active 21; break"
+	set nextscript "catch {focus $oldFocus}; destroy $w; unregister_active 21; menu22 .menu22 \"$title\""
+	frame $w.f
+	button $w.f.back -text "OK" \
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 21"
+	button $w.f.next -text "Next" -underline 0\
+		-width 15 -command $nextscript
+	bind all <Alt-n> $nextscript
+	button $w.f.prev -text "Prev" -underline 0\
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 21; menu20 .menu20 \"$title\""
+	bind $w <Alt-p> "catch {focus $oldFocus}; destroy $w; unregister_active 21; menu20 .menu20 \"$title\";break"
+	pack $w.f.back $w.f.next $w.f.prev -side left -expand on
+	pack $w.f -pady 10 -side bottom -anchor w -fill x
+	frame $w.topline -relief ridge -borderwidth 2 -height 2
+	pack $w.topline -side top -fill x
+
+	frame $w.botline -relief ridge -borderwidth 2 -height 2
+	pack $w.botline -side bottom -fill x
+
+	frame $w.config
+	pack $w.config -fill y -expand on
+
+	scrollbar $w.config.vscroll -command "$w.config.canvas yview"
+	pack $w.config.vscroll -side right -fill y
+
+	canvas $w.config.canvas -height 1\
+		-relief flat -borderwidth 0 -yscrollcommand "$w.config.vscroll set" \
+		-width [expr [winfo screenwidth .] * 1 / 2] 
+	frame $w.config.f
+	bind $w <Key-Down> "$w.config.canvas yview scroll  1 unit;break;"
+	bind $w <Key-Up> "$w.config.canvas yview scroll  -1 unit;break;"
+	bind $w <Key-Next> "$w.config.canvas yview scroll  1 page;break;"
+	bind $w <Key-Prior> "$w.config.canvas yview scroll  -1 page;break;"
+	bind $w <Key-Home> "$w.config.canvas yview moveto 0;break;"
+	bind $w <Key-End> "$w.config.canvas yview moveto 1 ;break;"
+	pack $w.config.canvas -side right -fill y
+
+
+	bool $w.config.f 21 0 "Enable System ACE I/F Controller " CONFIG_GRACECTRL
+
+
+
+	focus $w
+	update_active
+	global winx; global winy
+	if {[winfo exists .menu13] == 0} then {menu13 .menu13 "Peripherals             "}
+	set winx [expr [winfo x .menu13]+30]; set winy [expr [winfo y .menu13]+30]
+	if {[winfo exists $w]} then {wm geometry $w +$winx+$winy}
+	update idletasks
+	if {[winfo exists $w]} then  {$w.config.canvas create window 0 0 -anchor nw -window $w.config.f
+
+	$w.config.canvas configure \
+		-width [expr [winfo reqwidth $w.config.f] + 1]\
+		-scrollregion "-1 -1 [expr [winfo reqwidth $w.config.f] + 1] \
+			 [expr [winfo reqheight $w.config.f] + 1]"
+
+	set winy [expr [winfo reqh $w] - [winfo reqh $w.config.canvas]]
+	set scry [expr [winfo screenh $w] / 2]
+	set maxy [expr [winfo screenh $w] * 3 / 4]
+	set canvtotal [expr [winfo reqh $w.config.f] + 2]
+	if [expr $winy + $canvtotal < $maxy] {
+		$w.config.canvas configure -height $canvtotal
+	} else {
+		$w.config.canvas configure -height [expr $scry - $winy]
+		}
+	}
+	update idletasks
+	if {[winfo exists $w]} then {
+	wm maxsize $w [winfo width $w] [winfo screenheight $w]
+	wm minsize $w [winfo width $w] 100
+
+	wm deiconify $w
+}
+}
+
+proc update_menu21 {} {
+}
+
+
+proc update_define_menu21 {} {
+	update_define_mainmenu
+	global CONFIG_MODULES
+}
+
+
+proc menu22 {w title} {
+	set oldFocus [focus]
+	catch {focus .menu13}
+	catch {destroy $w; unregister_active 22}
+	toplevel $w -class Dialog
+	wm withdraw $w
+	global active_menus
+	set active_menus [lsort -integer [linsert $active_menus end 22]]
+	message $w.m -width 400 -aspect 300 -text \
+		"PCI EXPRESS"  -relief raised
+	pack $w.m -pady 10 -side top -padx 10
+	wm title $w "PCI EXPRESS" 
+
+	bind $w <Escape> "catch {focus $oldFocus}; destroy $w; unregister_active 22; break"
+	set nextscript "catch {focus $oldFocus}; destroy $w; unregister_active 22; catch {destroy .menu13}; unregister_active 13; menu23 .menu23 \"$title\""
+	frame $w.f
+	button $w.f.back -text "OK" \
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 22"
+	button $w.f.next -text "Next" -underline 0\
+		-width 15 -command $nextscript
+	bind all <Alt-n> $nextscript
+	button $w.f.prev -text "Prev" -underline 0\
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 22; menu21 .menu21 \"$title\""
+	bind $w <Alt-p> "catch {focus $oldFocus}; destroy $w; unregister_active 22; menu21 .menu21 \"$title\";break"
+	pack $w.f.back $w.f.next $w.f.prev -side left -expand on
+	pack $w.f -pady 10 -side bottom -anchor w -fill x
+	frame $w.topline -relief ridge -borderwidth 2 -height 2
+	pack $w.topline -side top -fill x
+
+	frame $w.botline -relief ridge -borderwidth 2 -height 2
+	pack $w.botline -side bottom -fill x
+
+	frame $w.config
+	pack $w.config -fill y -expand on
+
+	scrollbar $w.config.vscroll -command "$w.config.canvas yview"
+	pack $w.config.vscroll -side right -fill y
+
+	canvas $w.config.canvas -height 1\
+		-relief flat -borderwidth 0 -yscrollcommand "$w.config.vscroll set" \
+		-width [expr [winfo screenwidth .] * 1 / 2] 
+	frame $w.config.f
+	bind $w <Key-Down> "$w.config.canvas yview scroll  1 unit;break;"
+	bind $w <Key-Up> "$w.config.canvas yview scroll  -1 unit;break;"
+	bind $w <Key-Next> "$w.config.canvas yview scroll  1 page;break;"
+	bind $w <Key-Prior> "$w.config.canvas yview scroll  -1 page;break;"
+	bind $w <Key-Home> "$w.config.canvas yview moveto 0;break;"
+	bind $w <Key-End> "$w.config.canvas yview moveto 1 ;break;"
+	pack $w.config.canvas -side right -fill y
+
+
+	bool $w.config.f 22 0 "simple interface      " CONFIG_PCIEXP_MASTER_TARGET
+	bool $w.config.f 22 1 "interface, target-only     " CONFIG_PCIEXP_SIMPLE_TARGET
+	bool $w.config.f 22 2 "interface with FIFO      " CONFIG_PCIEXP_MASTER_FIFO
+	bool $w.config.f 22 3 "DMA controller     " CONFIG_PCIEXP_MASTER_FIFO_DMA
+	hex $w.config.f 22 4 "vendor ID" CONFIG_PCIEXP_VENDORID
+	hex $w.config.f 22 5 "device ID" CONFIG_PCIEXP_DEVICEID
+	global tmpvar_32
+	minimenu $w.config.f 22 6 "Lane Width            " tmpvar_32 CONFIG_LANE_WIDTH1
+	menu $w.config.f.x6.x.menu -tearoffcommand "menutitle \"Lane Width            \""
+	$w.config.f.x6.x.menu add radiobutton -label "1" -variable tmpvar_32 -value "1" -command "update_active"
+	$w.config.f.x6.x.menu add radiobutton -label "2" -variable tmpvar_32 -value "2" -command "update_active"
+	$w.config.f.x6.x.menu add radiobutton -label "4" -variable tmpvar_32 -value "4" -command "update_active"
+	$w.config.f.x6.x.menu add radiobutton -label "8" -variable tmpvar_32 -value "8" -command "update_active"
+	menusplit $w $w.config.f.x6.x.menu 4
+	global tmpvar_33
+	minimenu $w.config.f 22 7 "Lane Width FIFO            " tmpvar_33 CONFIG_LANE_WIDTH1
+	menu $w.config.f.x7.x.menu -tearoffcommand "menutitle \"Lane Width FIFO            \""
+	$w.config.f.x7.x.menu add radiobutton -label "1" -variable tmpvar_33 -value "1" -command "update_active"
+	$w.config.f.x7.x.menu add radiobutton -label "2" -variable tmpvar_33 -value "2" -command "update_active"
+	$w.config.f.x7.x.menu add radiobutton -label "4" -variable tmpvar_33 -value "4" -command "update_active"
+	menusplit $w $w.config.f.x7.x.menu 3
+
+
+
+	focus $w
+	update_active
+	global winx; global winy
+	if {[winfo exists .menu13] == 0} then {menu13 .menu13 "Peripherals             "}
+	set winx [expr [winfo x .menu13]+30]; set winy [expr [winfo y .menu13]+30]
+	if {[winfo exists $w]} then {wm geometry $w +$winx+$winy}
+	update idletasks
+	if {[winfo exists $w]} then  {$w.config.canvas create window 0 0 -anchor nw -window $w.config.f
+
+	$w.config.canvas configure \
+		-width [expr [winfo reqwidth $w.config.f] + 1]\
+		-scrollregion "-1 -1 [expr [winfo reqwidth $w.config.f] + 1] \
+			 [expr [winfo reqheight $w.config.f] + 1]"
+
+	set winy [expr [winfo reqh $w] - [winfo reqh $w.config.canvas]]
+	set scry [expr [winfo screenh $w] / 2]
+	set maxy [expr [winfo screenh $w] * 3 / 4]
+	set canvtotal [expr [winfo reqh $w.config.f] + 2]
+	if [expr $winy + $canvtotal < $maxy] {
+		$w.config.canvas configure -height $canvtotal
+	} else {
+		$w.config.canvas configure -height [expr $scry - $winy]
+		}
+	}
+	update idletasks
+	if {[winfo exists $w]} then {
+	wm maxsize $w [winfo width $w] [winfo screenheight $w]
+	wm minsize $w [winfo width $w] 100
+
+	wm deiconify $w
+}
+}
+
+proc update_menu22 {} {
+	global CONFIG_SYN_VIRTEX6
+	global CONFIG_SYN_SPARTAN6
+	global CONFIG_BOARD_ML505
+	global CONFIG_PCIEXP_MASTER_TARGET
+	if {($CONFIG_SYN_VIRTEX6 == 1 || $CONFIG_SYN_SPARTAN6 == 1 || $CONFIG_BOARD_ML505 == 1)} then {
+	configure_entry .menu22.config.f.x0 normal {n l y}} else {configure_entry .menu22.config.f.x0 disabled {y n l}}
+	global CONFIG_PCIEXP_SIMPLE_TARGET
+	if {($CONFIG_SYN_VIRTEX6 == 1 || $CONFIG_SYN_SPARTAN6 == 1 || $CONFIG_BOARD_ML505 == 1) && ($CONFIG_PCIEXP_MASTER_TARGET == 1)} then {
+	configure_entry .menu22.config.f.x1 normal {n l y}} else {configure_entry .menu22.config.f.x1 disabled {y n l}}
+	global CONFIG_PCIEXP_MASTER_FIFO
+	if {($CONFIG_SYN_VIRTEX6 == 1 || $CONFIG_SYN_SPARTAN6 == 1 || $CONFIG_BOARD_ML505 == 1) && ($CONFIG_PCIEXP_MASTER_TARGET != 1)} then {
+	configure_entry .menu22.config.f.x2 normal {n l y}} else {configure_entry .menu22.config.f.x2 disabled {y n l}}
+	global CONFIG_PCIEXP_MASTER_FIFO_DMA
+	if {($CONFIG_SYN_VIRTEX6 == 1 || $CONFIG_SYN_SPARTAN6 == 1 || $CONFIG_BOARD_ML505 == 1) && ($CONFIG_PCIEXP_MASTER_TARGET != 1) && ($CONFIG_PCIEXP_MASTER_FIFO == 1)} then {
+	configure_entry .menu22.config.f.x3 normal {n l y}} else {configure_entry .menu22.config.f.x3 disabled {y n l}}
+	global CONFIG_PCIEXP_VENDORID
+	if {($CONFIG_SYN_VIRTEX6 == 1 || $CONFIG_SYN_SPARTAN6 == 1 || $CONFIG_BOARD_ML505 == 1) && ($CONFIG_PCIEXP_MASTER_TARGET == 1 || $CONFIG_PCIEXP_MASTER_FIFO == 1)} then {.menu22.config.f.x4.x configure -state normal -foreground [ cget .ref -foreground ]; .menu22.config.f.x4.l configure -state normal; } else {.menu22.config.f.x4.x configure -state disabled -foreground [ cget .ref -disabledforeground ]; .menu22.config.f.x4.l configure -state disabled}
+	global CONFIG_PCIEXP_DEVICEID
+	if {($CONFIG_SYN_VIRTEX6 == 1 || $CONFIG_SYN_SPARTAN6 == 1 || $CONFIG_BOARD_ML505 == 1) && ($CONFIG_PCIEXP_MASTER_TARGET == 1 || $CONFIG_PCIEXP_MASTER_FIFO == 1)} then {.menu22.config.f.x5.x configure -state normal -foreground [ cget .ref -foreground ]; .menu22.config.f.x5.l configure -state normal; } else {.menu22.config.f.x5.x configure -state disabled -foreground [ cget .ref -disabledforeground ]; .menu22.config.f.x5.l configure -state disabled}
+	if {($CONFIG_SYN_VIRTEX6 == 1 || $CONFIG_SYN_SPARTAN6 == 1 || $CONFIG_BOARD_ML505 == 1) && ($CONFIG_PCIEXP_MASTER_TARGET == 1 || $CONFIG_PCIEXP_MASTER_FIFO == 1) && ($CONFIG_SYN_VIRTEX6 == 1) && ($CONFIG_PCIEXP_MASTER_TARGET == 1)} then {configure_entry .menu22.config.f.x6 normal {x l}} else {configure_entry .menu22.config.f.x6 disabled {x l}}
+	if {($CONFIG_SYN_VIRTEX6 == 1 || $CONFIG_SYN_SPARTAN6 == 1 || $CONFIG_BOARD_ML505 == 1) && ($CONFIG_PCIEXP_MASTER_TARGET == 1 || $CONFIG_PCIEXP_MASTER_FIFO == 1) && ($CONFIG_SYN_VIRTEX6 == 1) && ($CONFIG_PCIEXP_MASTER_FIFO == 1)} then {configure_entry .menu22.config.f.x7 normal {x l}} else {configure_entry .menu22.config.f.x7 disabled {x l}}
+}
+
+
+proc update_define_menu22 {} {
+	update_define_mainmenu
+	global CONFIG_MODULES
+	global CONFIG_SYN_VIRTEX6
+	global CONFIG_SYN_SPARTAN6
+	global CONFIG_BOARD_ML505
+	global CONFIG_PCIEXP_MASTER_TARGET
+	if {($CONFIG_SYN_VIRTEX6 == 1 || $CONFIG_SYN_SPARTAN6 == 1 || $CONFIG_BOARD_ML505 == 1)} then {
+	set CONFIG_PCIEXP_MASTER_TARGET [expr $CONFIG_PCIEXP_MASTER_TARGET&15]} else {set CONFIG_PCIEXP_MASTER_TARGET [expr $CONFIG_PCIEXP_MASTER_TARGET|16]}
+	global CONFIG_PCIEXP_SIMPLE_TARGET
+	if {($CONFIG_SYN_VIRTEX6 == 1 || $CONFIG_SYN_SPARTAN6 == 1 || $CONFIG_BOARD_ML505 == 1) && ($CONFIG_PCIEXP_MASTER_TARGET == 1)} then {
+	set CONFIG_PCIEXP_SIMPLE_TARGET [expr $CONFIG_PCIEXP_SIMPLE_TARGET&15]} else {set CONFIG_PCIEXP_SIMPLE_TARGET [expr $CONFIG_PCIEXP_SIMPLE_TARGET|16]}
+	global CONFIG_PCIEXP_MASTER_FIFO
+	if {($CONFIG_SYN_VIRTEX6 == 1 || $CONFIG_SYN_SPARTAN6 == 1 || $CONFIG_BOARD_ML505 == 1) && ($CONFIG_PCIEXP_MASTER_TARGET != 1)} then {
+	set CONFIG_PCIEXP_MASTER_FIFO [expr $CONFIG_PCIEXP_MASTER_FIFO&15]} else {set CONFIG_PCIEXP_MASTER_FIFO [expr $CONFIG_PCIEXP_MASTER_FIFO|16]}
+	global CONFIG_PCIEXP_MASTER_FIFO_DMA
+	if {($CONFIG_SYN_VIRTEX6 == 1 || $CONFIG_SYN_SPARTAN6 == 1 || $CONFIG_BOARD_ML505 == 1) && ($CONFIG_PCIEXP_MASTER_TARGET != 1) && ($CONFIG_PCIEXP_MASTER_FIFO == 1)} then {
+	set CONFIG_PCIEXP_MASTER_FIFO_DMA [expr $CONFIG_PCIEXP_MASTER_FIFO_DMA&15]} else {set CONFIG_PCIEXP_MASTER_FIFO_DMA [expr $CONFIG_PCIEXP_MASTER_FIFO_DMA|16]}
+	global CONFIG_PCIEXP_VENDORID
+	if {($CONFIG_SYN_VIRTEX6 == 1 || $CONFIG_SYN_SPARTAN6 == 1 || $CONFIG_BOARD_ML505 == 1) && ($CONFIG_PCIEXP_MASTER_TARGET == 1 || $CONFIG_PCIEXP_MASTER_FIFO == 1)} then {validate_hex CONFIG_PCIEXP_VENDORID "$CONFIG_PCIEXP_VENDORID" 10EE}
+	global CONFIG_PCIEXP_DEVICEID
+	if {($CONFIG_SYN_VIRTEX6 == 1 || $CONFIG_SYN_SPARTAN6 == 1 || $CONFIG_BOARD_ML505 == 1) && ($CONFIG_PCIEXP_MASTER_TARGET == 1 || $CONFIG_PCIEXP_MASTER_FIFO == 1)} then {validate_hex CONFIG_PCIEXP_DEVICEID "$CONFIG_PCIEXP_DEVICEID" 0009}
+	global tmpvar_32
+	global CONFIG_LANE_WIDTH1
+	if {$tmpvar_32 == "1"} then {set CONFIG_LANE_WIDTH1 1} else {set CONFIG_LANE_WIDTH1 0}
+	global CONFIG_LANE_WIDTH2
+	if {$tmpvar_32 == "2"} then {set CONFIG_LANE_WIDTH2 1} else {set CONFIG_LANE_WIDTH2 0}
+	global CONFIG_LANE_WIDTH4
+	if {$tmpvar_32 == "4"} then {set CONFIG_LANE_WIDTH4 1} else {set CONFIG_LANE_WIDTH4 0}
+	global CONFIG_LANE_WIDTH8
+	if {$tmpvar_32 == "8"} then {set CONFIG_LANE_WIDTH8 1} else {set CONFIG_LANE_WIDTH8 0}
+	global tmpvar_33
+	global CONFIG_LANE_WIDTH1
+	if {$tmpvar_33 == "1"} then {set CONFIG_LANE_WIDTH1 1} else {set CONFIG_LANE_WIDTH1 0}
+	global CONFIG_LANE_WIDTH2
+	if {$tmpvar_33 == "2"} then {set CONFIG_LANE_WIDTH2 1} else {set CONFIG_LANE_WIDTH2 0}
+	global CONFIG_LANE_WIDTH4
+	if {$tmpvar_33 == "4"} then {set CONFIG_LANE_WIDTH4 1} else {set CONFIG_LANE_WIDTH4 0}
+}
+
+
+menu_option menu23 23 "VHDL Debugging        "
+proc menu23 {w title} {
+	set oldFocus [focus]
+	catch {destroy $w; unregister_active 23}
+	toplevel $w -class Dialog
+	wm withdraw $w
+	global active_menus
+	set active_menus [lsort -integer [linsert $active_menus end 23]]
+	message $w.m -width 400 -aspect 300 -text \
+		"VHDL Debugging        "  -relief raised
+	pack $w.m -pady 10 -side top -padx 10
+	wm title $w "VHDL Debugging        " 
+
+	bind $w <Escape> "catch {focus $oldFocus}; destroy $w; unregister_active 23; break"
+	set nextscript "catch {focus $oldFocus}; menu24 .menu24 \"$title\""
+	frame $w.f
+	button $w.f.back -text "Main Menu" \
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 23"
+	button $w.f.next -text "Next" -underline 0\
+		-width 15 -command $nextscript
+	$w.f.next configure -state disabled
+	bind all <Alt-n> "puts \"no more menus\" "
+	button $w.f.prev -text "Prev" -underline 0\
+		-width 15 -command "catch {focus $oldFocus}; destroy $w; unregister_active 23; menu22 .menu22 \"$title\""
+	bind $w <Alt-p> "catch {focus $oldFocus}; destroy $w; unregister_active 23; menu22 .menu22 \"$title\";break"
+	pack $w.f.back $w.f.next $w.f.prev -side left -expand on
+	pack $w.f -pady 10 -side bottom -anchor w -fill x
+	frame $w.topline -relief ridge -borderwidth 2 -height 2
+	pack $w.topline -side top -fill x
+
+	frame $w.botline -relief ridge -borderwidth 2 -height 2
+	pack $w.botline -side bottom -fill x
+
+	frame $w.config
+	pack $w.config -fill y -expand on
+
+	scrollbar $w.config.vscroll -command "$w.config.canvas yview"
+	pack $w.config.vscroll -side right -fill y
+
+	canvas $w.config.canvas -height 1\
+		-relief flat -borderwidth 0 -yscrollcommand "$w.config.vscroll set" \
+		-width [expr [winfo screenwidth .] * 1 / 2] 
+	frame $w.config.f
+	bind $w <Key-Down> "$w.config.canvas yview scroll  1 unit;break;"
+	bind $w <Key-Up> "$w.config.canvas yview scroll  -1 unit;break;"
+	bind $w <Key-Next> "$w.config.canvas yview scroll  1 page;break;"
+	bind $w <Key-Prior> "$w.config.canvas yview scroll  -1 page;break;"
+	bind $w <Key-Home> "$w.config.canvas yview moveto 0;break;"
+	bind $w <Key-End> "$w.config.canvas yview moveto 1 ;break;"
+	pack $w.config.canvas -side right -fill y
+
+
+	bool $w.config.f 23 0 "Accelerated UART tracing       " CONFIG_DEBUG_UART
+
+
+
+	focus $w
+	update_active
+	global winx; global winy
+	set winx [expr [winfo x .]+30]; set winy [expr [winfo y .]+30]
+	if {[winfo exists $w]} then {wm geometry $w +$winx+$winy}
+	update idletasks
+	if {[winfo exists $w]} then  {$w.config.canvas create window 0 0 -anchor nw -window $w.config.f
+
+	$w.config.canvas configure \
+		-width [expr [winfo reqwidth $w.config.f] + 1]\
+		-scrollregion "-1 -1 [expr [winfo reqwidth $w.config.f] + 1] \
+			 [expr [winfo reqheight $w.config.f] + 1]"
+
+	set winy [expr [winfo reqh $w] - [winfo reqh $w.config.canvas]]
+	set scry [expr [winfo screenh $w] / 2]
+	set maxy [expr [winfo screenh $w] * 3 / 4]
+	set canvtotal [expr [winfo reqh $w.config.f] + 2]
+	if [expr $winy + $canvtotal < $maxy] {
+		$w.config.canvas configure -height $canvtotal
+	} else {
+		$w.config.canvas configure -height [expr $scry - $winy]
+		}
+	}
+	update idletasks
+	if {[winfo exists $w]} then {
+	wm maxsize $w [winfo width $w] [winfo screenheight $w]
+	wm minsize $w [winfo width $w] 100
+
+	wm deiconify $w
+}
+}
+
+proc update_menu23 {} {
+}
+
+
+proc update_define_menu23 {} {
+	update_define_mainmenu
+	global CONFIG_MODULES
+}
+
+
+proc update_mainmenu {}  {
+}
+
+
+set tmpvar_0 "(not set)"
+set CONFIG_SYN_INFERRED 0
+set CONFIG_SYN_STRATIX 0
+set CONFIG_SYN_STRATIXII 0
+set CONFIG_SYN_STRATIXIII 0
+set CONFIG_SYN_STRATIXIV 0
+set CONFIG_SYN_CYCLONEIII 0
+set CONFIG_SYN_ALTERA 0
+set CONFIG_SYN_AXCEL 0
+set CONFIG_SYN_AXDSP 0
+set CONFIG_SYN_PROASIC 0
+set CONFIG_SYN_PROASICPLUS 0
+set CONFIG_SYN_PROASIC3 0
+set CONFIG_SYN_PROASIC3E 0
+set CONFIG_SYN_PROASIC3L 0
+set CONFIG_SYN_IGLOO 0
+set CONFIG_SYN_FUSION 0
+set CONFIG_SYN_UT025CRH 0
+set CONFIG_SYN_UT130HBD 0
+set CONFIG_SYN_UT90NHBD 0
+set CONFIG_SYN_ATC18 0
+set CONFIG_SYN_ATC18RHA 0
+set CONFIG_SYN_CMOS9SF 0
+set CONFIG_SYN_CUSTOM1 0
+set CONFIG_SYN_EASIC90 0
+set CONFIG_SYN_EASIC45 0
+set CONFIG_SYN_IHP25 0
+set CONFIG_SYN_IHP25RH 0
+set CONFIG_SYN_LATTICE 0
+set CONFIG_SYN_ECLIPSE 0
+set CONFIG_SYN_PEREGRINE 0
+set CONFIG_SYN_RH_LIB18T 0
+set CONFIG_SYN_RHUMC 0
+set CONFIG_SYN_SAED32 0
+set CONFIG_SYN_DARE 0
+set CONFIG_SYN_SMIC13 0
+set CONFIG_SYN_TM65GPLUS 0
+set CONFIG_SYN_TSMC90 0
+set CONFIG_SYN_UMC 0
+set CONFIG_SYN_ARTIX7 0
+set CONFIG_SYN_KINTEX7 0
+set CONFIG_SYN_SPARTAN3 0
+set CONFIG_SYN_SPARTAN3E 0
+set CONFIG_SYN_SPARTAN6 0
+set CONFIG_SYN_VIRTEXE 0
+set CONFIG_SYN_VIRTEX2 0
+set CONFIG_SYN_VIRTEX4 0
+set CONFIG_SYN_VIRTEX5 0
+set CONFIG_SYN_VIRTEX6 0
+set CONFIG_SYN_VIRTEX7 0
+set CONFIG_SYN_ZYNQ7000 0
+set tmpvar_1 "(not set)"
+set CONFIG_MEM_INFERRED 0
+set CONFIG_MEM_UMC 0
+set CONFIG_MEM_RHUMC 0
+set CONFIG_MEM_SAED32 0
+set CONFIG_MEM_DARE 0
+set CONFIG_MEM_ARTISAN 0
+set CONFIG_MEM_CUSTOM1 0
+set CONFIG_MEM_EASIC45 0
+set CONFIG_MEM_VIRAGE 0
+set CONFIG_MEM_VIRAGE90 0
+set CONFIG_SYN_INFER_RAM 0
+set CONFIG_SYN_INFER_PADS 0
+set CONFIG_SYN_NO_ASYNC 0
+set CONFIG_SYN_SCAN 0
+set tmpvar_2 "(not set)"
+set CONFIG_FREQ60 0
+set CONFIG_FREQ75 0
+set CONFIG_FREQ80 0
+set CONFIG_FREQ100 0
+set CONFIG_FREQ120 0
+set CONFIG_LEON3 0
+set CONFIG_PROC_NUM 1
+set tmpvar_3 "(not set)"
+set CONFIG_LEON3_MIN 0
+set CONFIG_LEON3_GP 0
+set CONFIG_LEON3_HP 0
+set CONFIG_LEON3_CUSTOM 0
+set CONFIG_IU_NWINDOWS 8
+set CONFIG_IU_V8MULDIV 0
+set tmpvar_4 "(not set)"
+set CONFIG_IU_MUL_LATENCY_2 0
+set CONFIG_IU_MUL_LATENCY_4 0
+set CONFIG_IU_MUL_LATENCY_5 0
+set CONFIG_IU_MUL_MAC 0
+set tmpvar_5 "(not set)"
+set CONFIG_IU_MUL_INFERRED 0
+set CONFIG_IU_MUL_MODGEN 0
+set CONFIG_IU_MUL_TECHSPEC 0
+set CONFIG_IU_MUL_DW 0
+set CONFIG_IU_BP 0
+set CONFIG_IU_SVT 0
+set CONFIG_NOTAG 0
+set CONFIG_IU_LDELAY 1
+set CONFIG_IU_WATCHPOINTS 0
+set CONFIG_PWD 0
+set CONFIG_IU_RSTADDR 00000
+set CONFIG_FPU_ENABLE 0
+set tmpvar_6 "(not set)"
+set CONFIG_FPU_GRFPU 0
+set CONFIG_FPU_GRFPULITE 0
+set CONFIG_FPU_MEIKO 0
+set tmpvar_7 "(not set)"
+set CONFIG_FPU_GRFPU_INFMUL 0
+set CONFIG_FPU_GRFPU_DWMUL 0
+set CONFIG_FPU_GRFPU_MODGEN 0
+set CONFIG_FPU_GRFPU_TECHSPEC 0
+set CONFIG_FPU_GRFPU_SH 0
+set tmpvar_8 "(not set)"
+set CONFIG_FPU_GRFPC0 0
+set CONFIG_FPU_GRFPC1 0
+set CONFIG_FPU_GRFPC2 0
+set CONFIG_ICACHE_ENABLE 0
+set tmpvar_9 "(not set)"
+set CONFIG_ICACHE_ASSO1 0
+set CONFIG_ICACHE_ASSO2 0
+set CONFIG_ICACHE_ASSO3 0
+set CONFIG_ICACHE_ASSO4 0
+set tmpvar_10 "(not set)"
+set CONFIG_ICACHE_SZ1 0
+set CONFIG_ICACHE_SZ2 0
+set CONFIG_ICACHE_SZ4 0
+set CONFIG_ICACHE_SZ8 0
+set CONFIG_ICACHE_SZ16 0
+set CONFIG_ICACHE_SZ32 0
+set CONFIG_ICACHE_SZ64 0
+set CONFIG_ICACHE_SZ128 0
+set CONFIG_ICACHE_SZ256 0
+set tmpvar_11 "(not set)"
+set CONFIG_ICACHE_LZ16 0
+set CONFIG_ICACHE_LZ32 0
+set tmpvar_12 "(not set)"
+set CONFIG_ICACHE_ALGORND 0
+set CONFIG_ICACHE_ALGODIR 0
+set CONFIG_ICACHE_ALGOLRR 0
+set CONFIG_ICACHE_ALGOLRU 0
+set CONFIG_ICACHE_LOCK 0
+set CONFIG_ICACHE_LRAM 0
+set tmpvar_13 "(not set)"
+set CONFIG_ICACHE_LRAM_SZ1 0
+set CONFIG_ICACHE_LRAM_SZ2 0
+set CONFIG_ICACHE_LRAM_SZ4 0
+set CONFIG_ICACHE_LRAM_SZ8 0
+set CONFIG_ICACHE_LRAM_SZ16 0
+set CONFIG_ICACHE_LRAM_SZ32 0
+set CONFIG_ICACHE_LRAM_SZ64 0
+set CONFIG_ICACHE_LRAM_SZ128 0
+set CONFIG_ICACHE_LRAM_SZ256 0
+set CONFIG_ICACHE_LRSTART 8e
+set CONFIG_DCACHE_ENABLE 0
+set tmpvar_14 "(not set)"
+set CONFIG_DCACHE_ASSO1 0
+set CONFIG_DCACHE_ASSO2 0
+set CONFIG_DCACHE_ASSO3 0
+set CONFIG_DCACHE_ASSO4 0
+set tmpvar_15 "(not set)"
+set CONFIG_DCACHE_SZ1 0
+set CONFIG_DCACHE_SZ2 0
+set CONFIG_DCACHE_SZ4 0
+set CONFIG_DCACHE_SZ8 0
+set CONFIG_DCACHE_SZ16 0
+set CONFIG_DCACHE_SZ32 0
+set CONFIG_DCACHE_SZ64 0
+set CONFIG_DCACHE_SZ128 0
+set CONFIG_DCACHE_SZ256 0
+set tmpvar_16 "(not set)"
+set CONFIG_DCACHE_LZ16 0
+set CONFIG_DCACHE_LZ32 0
+set tmpvar_17 "(not set)"
+set CONFIG_DCACHE_ALGORND 0
+set CONFIG_DCACHE_ALGODIR 0
+set CONFIG_DCACHE_ALGOLRR 0
+set CONFIG_DCACHE_ALGOLRU 0
+set CONFIG_DCACHE_LOCK 0
+set CONFIG_DCACHE_SNOOP 0
+set CONFIG_DCACHE_SNOOP_SEPTAG 0
+set CONFIG_CACHE_FIXED 0
+set CONFIG_DCACHE_LRAM 0
+set tmpvar_18 "(not set)"
+set CONFIG_DCACHE_LRAM_SZ1 0
+set CONFIG_DCACHE_LRAM_SZ2 0
+set CONFIG_DCACHE_LRAM_SZ4 0
+set CONFIG_DCACHE_LRAM_SZ8 0
+set CONFIG_DCACHE_LRAM_SZ16 0
+set CONFIG_DCACHE_LRAM_SZ32 0
+set CONFIG_DCACHE_LRAM_SZ64 0
+set CONFIG_DCACHE_LRAM_SZ128 0
+set CONFIG_DCACHE_LRAM_SZ256 0
+set CONFIG_DCACHE_LRSTART 8f
+set CONFIG_MMU_ENABLE 0
+set tmpvar_19 "(not set)"
+set CONFIG_MMU_COMBINED 0
+set CONFIG_MMU_SPLIT 0
+set tmpvar_20 "(not set)"
+set CONFIG_MMU_REPARRAY 0
+set CONFIG_MMU_REPINCREMENT 0
+set tmpvar_21 "(not set)"
+set CONFIG_MMU_I2 0
+set CONFIG_MMU_I4 0
+set CONFIG_MMU_I8 0
+set CONFIG_MMU_I16 0
+set CONFIG_MMU_I32 0
+set CONFIG_MMU_I64 0
+set tmpvar_22 "(not set)"
+set CONFIG_MMU_D2 0
+set CONFIG_MMU_D4 0
+set CONFIG_MMU_D8 0
+set CONFIG_MMU_D16 0
+set CONFIG_MMU_D32 0
+set CONFIG_MMU_D64 0
+set CONFIG_MMU_FASTWB 0
+set tmpvar_23 "(not set)"
+set CONFIG_MMU_PAGE_4K 0
+set CONFIG_MMU_PAGE_8K 0
+set CONFIG_MMU_PAGE_16K 0
+set CONFIG_MMU_PAGE_32K 0
+set CONFIG_MMU_PAGE_PROG 0
+set CONFIG_DSU_ENABLE 0
+set CONFIG_DSU_ITRACE 0
+set tmpvar_24 "(not set)"
+set CONFIG_DSU_ITRACESZ1 0
+set CONFIG_DSU_ITRACESZ2 0
+set CONFIG_DSU_ITRACESZ4 0
+set CONFIG_DSU_ITRACESZ8 0
+set CONFIG_DSU_ITRACESZ16 0
+set CONFIG_DSU_ATRACE 0
+set tmpvar_25 "(not set)"
+set CONFIG_DSU_ATRACESZ1 0
+set CONFIG_DSU_ATRACESZ2 0
+set CONFIG_DSU_ATRACESZ4 0
+set CONFIG_DSU_ATRACESZ8 0
+set CONFIG_DSU_ATRACESZ16 0
+set CONFIG_LEON3FT_EN 0
+set tmpvar_26 "(not set)"
+set CONFIG_IUFT_NONE 0
+set CONFIG_IUFT_PAR 0
+set CONFIG_IUFT_DMR 0
+set CONFIG_IUFT_BCH 0
+set CONFIG_IUFT_TMR 0
+set tmpvar_27 "(not set)"
+set CONFIG_FPUFT_NONE 0
+set CONFIG_FPUFT_PAR 0
+set CONFIG_FPUFT_DMR 0
+set CONFIG_FPUFT_TMR 0
+set CONFIG_RF_ERRINJ 0
+set CONFIG_CACHE_FT_EN 0
+set CONFIG_CACHE_ERRINJ 0
+set CONFIG_IU_DISAS 0
+set CONFIG_IU_DISAS_NET 0
+set CONFIG_DEBUG_PC32 0
+set CONFIG_AHB_DEFMST 0
+set CONFIG_AHB_RROBIN 0
+set CONFIG_AHB_SPLIT 0
+set CONFIG_AHB_FPNPEN 0
+set CONFIG_AHB_IOADDR FFF
+set CONFIG_APB_HADDR 800
+set CONFIG_AHB_MON 0
+set CONFIG_AHB_MONERR 0
+set CONFIG_AHB_MONWAR 0
+set CONFIG_AHB_DTRACE 0
+set CONFIG_DSU_UART 0
+set CONFIG_DSU_JTAG 0
+set CONFIG_DSU_ETH 0
+set tmpvar_28 "(not set)"
+set CONFIG_DSU_ETHSZ1 0
+set CONFIG_DSU_ETHSZ2 0
+set CONFIG_DSU_ETHSZ4 0
+set CONFIG_DSU_ETHSZ8 0
+set CONFIG_DSU_ETHSZ16 0
+set CONFIG_DSU_IPMSB C0A8
+set CONFIG_DSU_IPLSB 0033
+set CONFIG_DSU_ETHMSB 020000
+set CONFIG_DSU_ETHLSB 000000
+set CONFIG_DSU_ETH_PROG 0
+set CONFIG_DSU_ETH_DIS 0
+set CONFIG_MCTRL_LEON2 0
+set CONFIG_MCTRL_8BIT 0
+set CONFIG_MCTRL_16BIT 0
+set CONFIG_MCTRL_5CS 0
+set CONFIG_MCTRL_SDRAM 0
+set CONFIG_MCTRL_SDRAM_SEPBUS 0
+set CONFIG_MCTRL_SDRAM_BUS64 0
+set CONFIG_MCTRL_SDRAM_INVCLK 0
+set CONFIG_MCTRL_PAGE 0
+set CONFIG_MCTRL_PROGPAGE 0
+set CONFIG_MIG_DDR2 0
+set CONFIG_AHBROM_ENABLE 0
+set CONFIG_AHBROM_START 000
+set CONFIG_AHBROM_PIPE 0
+set CONFIG_AHBRAM_ENABLE 0
+set tmpvar_29 "(not set)"
+set CONFIG_AHBRAM_SZ1 0
+set CONFIG_AHBRAM_SZ2 0
+set CONFIG_AHBRAM_SZ4 0
+set CONFIG_AHBRAM_SZ8 0
+set CONFIG_AHBRAM_SZ16 0
+set CONFIG_AHBRAM_SZ32 0
+set CONFIG_AHBRAM_SZ64 0
+set CONFIG_AHBRAM_SZ128 0
+set CONFIG_AHBRAM_SZ256 0
+set CONFIG_AHBRAM_SZ512 0
+set CONFIG_AHBRAM_SZ1024 0
+set CONFIG_AHBRAM_SZ2048 0
+set CONFIG_AHBRAM_SZ4096 0
+set CONFIG_AHBRAM_START A00
+set CONFIG_AHBRAM_PIPE 0
+set CONFIG_GRETH_ENABLE 0
+set CONFIG_GRETH_GIGA 0
+set tmpvar_30 "(not set)"
+set CONFIG_GRETH_FIFO4 0
+set CONFIG_GRETH_FIFO8 0
+set CONFIG_GRETH_FIFO16 0
+set CONFIG_GRETH_FIFO32 0
+set CONFIG_GRETH_FIFO64 0
+set CONFIG_GRETH_FT 0
+set CONFIG_GRETH_EDCLFT 0
+set CONFIG_UART1_ENABLE 0
+set tmpvar_31 "(not set)"
+set CONFIG_UA1_FIFO1 0
+set CONFIG_UA1_FIFO2 0
+set CONFIG_UA1_FIFO4 0
+set CONFIG_UA1_FIFO8 0
+set CONFIG_UA1_FIFO16 0
+set CONFIG_UA1_FIFO32 0
+set CONFIG_IRQ3_ENABLE 0
+set CONFIG_IRQ3_SEC 0
+set CONFIG_IRQ3_NSEC 12
+set CONFIG_GPT_ENABLE 0
+set CONFIG_GPT_NTIM 2
+set CONFIG_GPT_SW 8
+set CONFIG_GPT_TW 32
+set CONFIG_GPT_IRQ 8
+set CONFIG_GPT_SEPIRQ 0
+set CONFIG_GPT_WDOGEN 0
+set CONFIG_GPT_WDOG FFFF
+set CONFIG_GRGPIO_ENABLE 0
+set CONFIG_GRGPIO_WIDTH 8
+set CONFIG_GRGPIO_IMASK 0000
+set CONFIG_I2C_ENABLE 0
+set CONFIG_KBD_ENABLE 0
+set CONFIG_VGA_ENABLE 0
+set CONFIG_SVGA_ENABLE 0
+set CONFIG_GRACECTRL 0
+set CONFIG_PCIEXP_MASTER_TARGET 0
+set CONFIG_PCIEXP_SIMPLE_TARGET 0
+set CONFIG_PCIEXP_MASTER_FIFO 0
+set CONFIG_PCIEXP_MASTER_FIFO_DMA 0
+set CONFIG_PCIEXP_VENDORID 10EE
+set CONFIG_PCIEXP_DEVICEID 0009
+set tmpvar_32 "(not set)"
+set CONFIG_LANE_WIDTH1 0
+set CONFIG_LANE_WIDTH2 0
+set CONFIG_LANE_WIDTH4 0
+set CONFIG_LANE_WIDTH8 0
+set tmpvar_33 "(not set)"
+set CONFIG_DEBUG_UART 0
+set CONFIG_LEON3FT_PRESENT 4
+set CONFIG_HAS_SHARED_GRFPU 4
+set CONFIG_SYN_ARTISAN 4
+set CONFIG_DCACHE_SNOOP_FAST 4
+set CONFIG_BOARD_ML505 4
+set CONFIG_MODULES 4
+proc writeconfig {file1 file2} {
+	set cfg [open $file1 w]
+	set autocfg [open $file2 w]
+	set notmod 1
+	set notset 0
+	puts $cfg "#"
+	puts $cfg "# Automatically generated make config: don't edit"
+	puts $cfg "#"
+	puts $autocfg "/*"
+	puts $autocfg " * Automatically generated C config: don't edit"
+	puts $autocfg " */"
+	puts $autocfg "#define AUTOCONF_INCLUDED"
+	global CONFIG_LEON3FT_PRESENT
+	global CONSTANT_Y
+	write_tristate $cfg $autocfg CONFIG_LEON3FT_PRESENT $CONFIG_LEON3FT_PRESENT [list $notmod] 2
+	global CONFIG_HAS_SHARED_GRFPU
+	write_tristate $cfg $autocfg CONFIG_HAS_SHARED_GRFPU $CONFIG_HAS_SHARED_GRFPU [list $notmod] 2
+	write_comment $cfg $autocfg "Synthesis      "
+	global tmpvar_0
+	
+	if { $tmpvar_0 == "Inferred" } then { write_tristate $cfg $autocfg CONFIG_SYN_INFERRED 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_INFERRED 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "Altera-Stratix" } then { write_tristate $cfg $autocfg CONFIG_SYN_STRATIX 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_STRATIX 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "Altera-StratixII" } then { write_tristate $cfg $autocfg CONFIG_SYN_STRATIXII 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_STRATIXII 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "Altera-StratixIII" } then { write_tristate $cfg $autocfg CONFIG_SYN_STRATIXIII 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_STRATIXIII 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "Altera-StratixIV" } then { write_tristate $cfg $autocfg CONFIG_SYN_STRATIXIV 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_STRATIXIV 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "Altera-CycloneIII" } then { write_tristate $cfg $autocfg CONFIG_SYN_CYCLONEIII 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_CYCLONEIII 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "Altera-Others" } then { write_tristate $cfg $autocfg CONFIG_SYN_ALTERA 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_ALTERA 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "Actel-Axcelerator" } then { write_tristate $cfg $autocfg CONFIG_SYN_AXCEL 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_AXCEL 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "Actel-Axcelerator-DSP" } then { write_tristate $cfg $autocfg CONFIG_SYN_AXDSP 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_AXDSP 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "Actel-Proasic" } then { write_tristate $cfg $autocfg CONFIG_SYN_PROASIC 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_PROASIC 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "Actel-ProasicPlus" } then { write_tristate $cfg $autocfg CONFIG_SYN_PROASICPLUS 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_PROASICPLUS 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "Actel-Proasic3" } then { write_tristate $cfg $autocfg CONFIG_SYN_PROASIC3 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_PROASIC3 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "Actel-Proasic3E" } then { write_tristate $cfg $autocfg CONFIG_SYN_PROASIC3E 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_PROASIC3E 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "Actel-Proasic3L" } then { write_tristate $cfg $autocfg CONFIG_SYN_PROASIC3L 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_PROASIC3L 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "Actel-IGLOO/p/L" } then { write_tristate $cfg $autocfg CONFIG_SYN_IGLOO 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_IGLOO 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "Actel-Fusion" } then { write_tristate $cfg $autocfg CONFIG_SYN_FUSION 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_FUSION 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "Aeroflex-UT025CRH" } then { write_tristate $cfg $autocfg CONFIG_SYN_UT025CRH 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_UT025CRH 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "Aeroflex-UT130HBD" } then { write_tristate $cfg $autocfg CONFIG_SYN_UT130HBD 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_UT130HBD 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "Aeroflex-UT90NHBD" } then { write_tristate $cfg $autocfg CONFIG_SYN_UT90NHBD 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_UT90NHBD 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "Atmel-ATC18" } then { write_tristate $cfg $autocfg CONFIG_SYN_ATC18 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_ATC18 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "Atmel-ATC18RHA" } then { write_tristate $cfg $autocfg CONFIG_SYN_ATC18RHA 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_ATC18RHA 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "IBM-CMOS9SF" } then { write_tristate $cfg $autocfg CONFIG_SYN_CMOS9SF 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_CMOS9SF 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "Custom1" } then { write_tristate $cfg $autocfg CONFIG_SYN_CUSTOM1 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_CUSTOM1 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "eASIC90" } then { write_tristate $cfg $autocfg CONFIG_SYN_EASIC90 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_EASIC90 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "eASIC45" } then { write_tristate $cfg $autocfg CONFIG_SYN_EASIC45 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_EASIC45 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "IHP25" } then { write_tristate $cfg $autocfg CONFIG_SYN_IHP25 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_IHP25 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "IHP25RH" } then { write_tristate $cfg $autocfg CONFIG_SYN_IHP25RH 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_IHP25RH 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "Lattice-EC/ECP/XP" } then { write_tristate $cfg $autocfg CONFIG_SYN_LATTICE 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_LATTICE 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "Quicklogic-Eclipse" } then { write_tristate $cfg $autocfg CONFIG_SYN_ECLIPSE 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_ECLIPSE 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "Peregrine" } then { write_tristate $cfg $autocfg CONFIG_SYN_PEREGRINE 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_PEREGRINE 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "RH-LIB18T" } then { write_tristate $cfg $autocfg CONFIG_SYN_RH_LIB18T 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_RH_LIB18T 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "RH-UMC" } then { write_tristate $cfg $autocfg CONFIG_SYN_RHUMC 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_RHUMC 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "SAED32" } then { write_tristate $cfg $autocfg CONFIG_SYN_SAED32 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_SAED32 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "DARE" } then { write_tristate $cfg $autocfg CONFIG_SYN_DARE 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_DARE 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "SMIC130" } then { write_tristate $cfg $autocfg CONFIG_SYN_SMIC13 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_SMIC13 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "TM65Gplus" } then { write_tristate $cfg $autocfg CONFIG_SYN_TM65GPLUS 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_TM65GPLUS 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "TSMC90" } then { write_tristate $cfg $autocfg CONFIG_SYN_TSMC90 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_TSMC90 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "UMC180" } then { write_tristate $cfg $autocfg CONFIG_SYN_UMC 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_UMC 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "Xilinx-Artix7" } then { write_tristate $cfg $autocfg CONFIG_SYN_ARTIX7 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_ARTIX7 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "Xilinx-Kintex7" } then { write_tristate $cfg $autocfg CONFIG_SYN_KINTEX7 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_KINTEX7 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "Xilinx-Spartan3" } then { write_tristate $cfg $autocfg CONFIG_SYN_SPARTAN3 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_SPARTAN3 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "Xilinx-Spartan3E" } then { write_tristate $cfg $autocfg CONFIG_SYN_SPARTAN3E 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_SPARTAN3E 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "Xilinx-Spartan6" } then { write_tristate $cfg $autocfg CONFIG_SYN_SPARTAN6 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_SPARTAN6 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "Xilinx-VirtexE" } then { write_tristate $cfg $autocfg CONFIG_SYN_VIRTEXE 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_VIRTEXE 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "Xilinx-Virtex2" } then { write_tristate $cfg $autocfg CONFIG_SYN_VIRTEX2 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_VIRTEX2 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "Xilinx-Virtex4" } then { write_tristate $cfg $autocfg CONFIG_SYN_VIRTEX4 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_VIRTEX4 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "Xilinx-Virtex5" } then { write_tristate $cfg $autocfg CONFIG_SYN_VIRTEX5 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_VIRTEX5 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "Xilinx-Virtex6" } then { write_tristate $cfg $autocfg CONFIG_SYN_VIRTEX6 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_VIRTEX6 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "Xilinx-Virtex7" } then { write_tristate $cfg $autocfg CONFIG_SYN_VIRTEX7 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_VIRTEX7 0 [list $notmod] 2 }
+	if { $tmpvar_0 == "Xilinx-Zynq7000" } then { write_tristate $cfg $autocfg CONFIG_SYN_ZYNQ7000 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_SYN_ZYNQ7000 0 [list $notmod] 2 }
+	global tmpvar_1
+	global CONFIG_SYN_INFERRED
+	global CONFIG_SYN_CUSTOM1
+	global CONFIG_SYN_ATC18
+	global CONFIG_SYN_TSMC90
+	global CONFIG_SYN_EASIC45
+	global CONFIG_SYN_UMC
+	global CONFIG_SYN_RHUMC
+	global CONFIG_SYN_DARE
+	global CONFIG_SYN_SAED32
+	global CONFIG_SYN_ARTISAN
+	if {($CONFIG_SYN_INFERRED == 1 || $CONFIG_SYN_CUSTOM1 == 1 || $CONFIG_SYN_ATC18 == 1 || $CONFIG_SYN_TSMC90 == 1 || $CONFIG_SYN_EASIC45 == 1 || $CONFIG_SYN_UMC == 1 || $CONFIG_SYN_RHUMC == 1 || $CONFIG_SYN_DARE == 1 || $CONFIG_SYN_SAED32 == 1 || $CONFIG_SYN_ARTISAN == 1)} then {
+	if { $tmpvar_1 == "Inferred" } then { write_tristate $cfg $autocfg CONFIG_MEM_INFERRED 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_MEM_INFERRED 0 [list $notmod] 2 }
+	if { $tmpvar_1 == "UMC18" } then { write_tristate $cfg $autocfg CONFIG_MEM_UMC 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_MEM_UMC 0 [list $notmod] 2 }
+	if { $tmpvar_1 == "RH-UMC" } then { write_tristate $cfg $autocfg CONFIG_MEM_RHUMC 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_MEM_RHUMC 0 [list $notmod] 2 }
+	if { $tmpvar_1 == "SAED32" } then { write_tristate $cfg $autocfg CONFIG_MEM_SAED32 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_MEM_SAED32 0 [list $notmod] 2 }
+	if { $tmpvar_1 == "DARE" } then { write_tristate $cfg $autocfg CONFIG_MEM_DARE 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_MEM_DARE 0 [list $notmod] 2 }
+	if { $tmpvar_1 == "Artisan" } then { write_tristate $cfg $autocfg CONFIG_MEM_ARTISAN 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_MEM_ARTISAN 0 [list $notmod] 2 }
+	if { $tmpvar_1 == "Custom1" } then { write_tristate $cfg $autocfg CONFIG_MEM_CUSTOM1 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_MEM_CUSTOM1 0 [list $notmod] 2 }
+	if { $tmpvar_1 == "EASIC45" } then { write_tristate $cfg $autocfg CONFIG_MEM_EASIC45 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_MEM_EASIC45 0 [list $notmod] 2 }
+	if { $tmpvar_1 == "Virage" } then { write_tristate $cfg $autocfg CONFIG_MEM_VIRAGE 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_MEM_VIRAGE 0 [list $notmod] 2 }
+	if { $tmpvar_1 == "Virage-TSMC90" } then { write_tristate $cfg $autocfg CONFIG_MEM_VIRAGE90 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_MEM_VIRAGE90 0 [list $notmod] 2 }}
+	global CONFIG_SYN_INFER_RAM
+	if {($CONFIG_SYN_INFERRED != 1)} then {write_tristate $cfg $autocfg CONFIG_SYN_INFER_RAM $CONFIG_SYN_INFER_RAM [list $notmod] 2 }
+	global CONFIG_SYN_INFER_PADS
+	if {($CONFIG_SYN_INFERRED != 1)} then {write_tristate $cfg $autocfg CONFIG_SYN_INFER_PADS $CONFIG_SYN_INFER_PADS [list $notmod] 2 }
+	global CONFIG_SYN_NO_ASYNC
+	write_tristate $cfg $autocfg CONFIG_SYN_NO_ASYNC $CONFIG_SYN_NO_ASYNC [list $notmod] 2
+	global CONFIG_SYN_SCAN
+	write_tristate $cfg $autocfg CONFIG_SYN_SCAN $CONFIG_SYN_SCAN [list $notmod] 2
+	write_comment $cfg $autocfg "Clock generation"
+	global tmpvar_2
+	
+	if { $tmpvar_2 == "60MHz" } then { write_tristate $cfg $autocfg CONFIG_FREQ60 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_FREQ60 0 [list $notmod] 2 }
+	if { $tmpvar_2 == "75MHz" } then { write_tristate $cfg $autocfg CONFIG_FREQ75 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_FREQ75 0 [list $notmod] 2 }
+	if { $tmpvar_2 == "80MHz" } then { write_tristate $cfg $autocfg CONFIG_FREQ80 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_FREQ80 0 [list $notmod] 2 }
+	if { $tmpvar_2 == "100MHz" } then { write_tristate $cfg $autocfg CONFIG_FREQ100 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_FREQ100 0 [list $notmod] 2 }
+	if { $tmpvar_2 == "120MHz" } then { write_tristate $cfg $autocfg CONFIG_FREQ120 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_FREQ120 0 [list $notmod] 2 }
+	write_comment $cfg $autocfg "Processor            "
+	global CONFIG_LEON3
+	write_tristate $cfg $autocfg CONFIG_LEON3 $CONFIG_LEON3 [list $notmod] 2
+	global CONFIG_PROC_NUM
+	if {($CONFIG_LEON3 == 1)} then {write_int $cfg $autocfg CONFIG_PROC_NUM $CONFIG_PROC_NUM $notmod }
+	global tmpvar_3
+	if {($CONFIG_LEON3 == 1)} then {
+	if { $tmpvar_3 == "Minimal-configuration" } then { write_tristate $cfg $autocfg CONFIG_LEON3_MIN 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_LEON3_MIN 0 [list $notmod] 2 }
+	if { $tmpvar_3 == "General-purpose-cfg" } then { write_tristate $cfg $autocfg CONFIG_LEON3_GP 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_LEON3_GP 0 [list $notmod] 2 }
+	if { $tmpvar_3 == "High-Performance-cfg" } then { write_tristate $cfg $autocfg CONFIG_LEON3_HP 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_LEON3_HP 0 [list $notmod] 2 }
+	if { $tmpvar_3 == "Custom-configuration" } then { write_tristate $cfg $autocfg CONFIG_LEON3_CUSTOM 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_LEON3_CUSTOM 0 [list $notmod] 2 }}
+	global CONFIG_IU_NWINDOWS
+	global CONFIG_LEON3_MIN
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {write_int $cfg $autocfg CONFIG_IU_NWINDOWS 8 $notmod }
+	global CONFIG_IU_V8MULDIV
+	global CONSTANT_N
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {write_tristate $cfg $autocfg CONFIG_IU_V8MULDIV $CONSTANT_N [list $notmod] 2 }
+	global CONFIG_IU_BP
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {write_tristate $cfg $autocfg CONFIG_IU_BP $CONSTANT_N [list $notmod] 2 }
+	global CONFIG_IU_SVT
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {write_tristate $cfg $autocfg CONFIG_IU_SVT $CONSTANT_Y [list $notmod] 2 }
+	global CONFIG_NOTAG
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {write_tristate $cfg $autocfg CONFIG_NOTAG $CONSTANT_N [list $notmod] 2 }
+	global CONFIG_IU_LDELAY
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {write_int $cfg $autocfg CONFIG_IU_LDELAY 1 $notmod }
+	global CONFIG_IU_WATCHPOINTS
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {write_int $cfg $autocfg CONFIG_IU_WATCHPOINTS 0 $notmod }
+	global CONFIG_PWD
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {write_tristate $cfg $autocfg CONFIG_PWD $CONSTANT_N [list $notmod] 2 }
+	global CONFIG_IU_RSTADDR
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {write_hex $cfg $autocfg CONFIG_IU_RSTADDR 00000 $notmod }
+	global CONFIG_FPU_ENABLE
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {write_tristate $cfg $autocfg CONFIG_FPU_ENABLE $CONSTANT_N [list $notmod] 2 }
+	global CONFIG_ICACHE_ENABLE
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {write_tristate $cfg $autocfg CONFIG_ICACHE_ENABLE $CONSTANT_Y [list $notmod] 2 }
+	global CONFIG_ICACHE_ASSO1
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {write_tristate $cfg $autocfg CONFIG_ICACHE_ASSO1 $CONSTANT_Y [list $notmod] 2 }
+	global CONFIG_ICACHE_SZ2
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {write_tristate $cfg $autocfg CONFIG_ICACHE_SZ2 $CONSTANT_Y [list $notmod] 2 }
+	global CONFIG_ICACHE_LZ16
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {write_tristate $cfg $autocfg CONFIG_ICACHE_LZ16 $CONSTANT_Y [list $notmod] 2 }
+	global CONFIG_ICACHE_ALGORND
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {write_tristate $cfg $autocfg CONFIG_ICACHE_ALGORND $CONSTANT_Y [list $notmod] 2 }
+	global CONFIG_ICACHE_LOCK
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {write_tristate $cfg $autocfg CONFIG_ICACHE_LOCK $CONSTANT_N [list $notmod] 2 }
+	global CONFIG_DCACHE_ENABLE
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {write_tristate $cfg $autocfg CONFIG_DCACHE_ENABLE $CONSTANT_Y [list $notmod] 2 }
+	global CONFIG_DCACHE_ASSO1
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {write_tristate $cfg $autocfg CONFIG_DCACHE_ASSO1 $CONSTANT_Y [list $notmod] 2 }
+	global CONFIG_DCACHE_SZ2
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {write_tristate $cfg $autocfg CONFIG_DCACHE_SZ2 $CONSTANT_Y [list $notmod] 2 }
+	global CONFIG_DCACHE_LZ16
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {write_tristate $cfg $autocfg CONFIG_DCACHE_LZ16 $CONSTANT_Y [list $notmod] 2 }
+	global CONFIG_DCACHE_ALGORND
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {write_tristate $cfg $autocfg CONFIG_DCACHE_ALGORND $CONSTANT_Y [list $notmod] 2 }
+	global CONFIG_DCACHE_LOCK
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {write_tristate $cfg $autocfg CONFIG_DCACHE_LOCK $CONSTANT_N [list $notmod] 2 }
+	global CONFIG_DCACHE_SNOOP
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {write_tristate $cfg $autocfg CONFIG_DCACHE_SNOOP $CONSTANT_N [list $notmod] 2 }
+	global CONFIG_CACHE_FIXED
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {write_hex $cfg $autocfg CONFIG_CACHE_FIXED 0 $notmod }
+	global CONFIG_MMU_ENABLE
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {write_tristate $cfg $autocfg CONFIG_MMU_ENABLE $CONSTANT_N [list $notmod] 2 }
+	global CONFIG_DSU_ENABLE
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_MIN == 1)} then {write_tristate $cfg $autocfg CONFIG_DSU_ENABLE $CONSTANT_N [list $notmod] 2 }
+	global CONFIG_LEON3_GP
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {write_int $cfg $autocfg CONFIG_IU_NWINDOWS 8 $notmod }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {write_tristate $cfg $autocfg CONFIG_IU_V8MULDIV $CONSTANT_Y [list $notmod] 2 }
+	global CONFIG_IU_MUL_LATENCY_5
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {write_tristate $cfg $autocfg CONFIG_IU_MUL_LATENCY_5 $CONSTANT_Y [list $notmod] 2 }
+	global CONFIG_IU_MUL_MAC
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {write_tristate $cfg $autocfg CONFIG_IU_MUL_MAC $CONSTANT_N [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {write_tristate $cfg $autocfg CONFIG_IU_BP $CONSTANT_Y [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {write_tristate $cfg $autocfg CONFIG_IU_SVT $CONSTANT_Y [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {write_tristate $cfg $autocfg CONFIG_NOTAG $CONSTANT_N [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {write_int $cfg $autocfg CONFIG_IU_LDELAY 1 $notmod }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {write_int $cfg $autocfg CONFIG_IU_WATCHPOINTS 2 $notmod }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {write_tristate $cfg $autocfg CONFIG_PWD $CONSTANT_Y [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {write_hex $cfg $autocfg CONFIG_IU_RSTADDR 00000 $notmod }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {write_tristate $cfg $autocfg CONFIG_FPU_ENABLE $CONSTANT_N [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {write_tristate $cfg $autocfg CONFIG_ICACHE_ENABLE $CONSTANT_Y [list $notmod] 2 }
+	global CONFIG_ICACHE_ASSO2
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {write_tristate $cfg $autocfg CONFIG_ICACHE_ASSO2 $CONSTANT_Y [list $notmod] 2 }
+	global CONFIG_ICACHE_SZ4
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {write_tristate $cfg $autocfg CONFIG_ICACHE_SZ4 $CONSTANT_Y [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {write_tristate $cfg $autocfg CONFIG_ICACHE_LZ16 $CONSTANT_Y [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {write_tristate $cfg $autocfg CONFIG_ICACHE_ALGORND $CONSTANT_Y [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {write_tristate $cfg $autocfg CONFIG_ICACHE_LOCK $CONSTANT_N [list $notmod] 2 }
+	global CONFIG_ICACHE_LRAM
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {write_tristate $cfg $autocfg CONFIG_ICACHE_LRAM $CONSTANT_N [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {write_tristate $cfg $autocfg CONFIG_DCACHE_ENABLE $CONSTANT_Y [list $notmod] 2 }
+	global CONFIG_DCACHE_ASSO2
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {write_tristate $cfg $autocfg CONFIG_DCACHE_ASSO2 $CONSTANT_Y [list $notmod] 2 }
+	global CONFIG_DCACHE_SZ4
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {write_tristate $cfg $autocfg CONFIG_DCACHE_SZ4 $CONSTANT_Y [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {write_tristate $cfg $autocfg CONFIG_DCACHE_LZ16 $CONSTANT_Y [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {write_tristate $cfg $autocfg CONFIG_DCACHE_ALGORND $CONSTANT_Y [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {write_tristate $cfg $autocfg CONFIG_DCACHE_LOCK $CONSTANT_N [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {write_tristate $cfg $autocfg CONFIG_DCACHE_SNOOP $CONSTANT_Y [list $notmod] 2 }
+	global CONFIG_DCACHE_SNOOP_FAST
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {write_tristate $cfg $autocfg CONFIG_DCACHE_SNOOP_FAST $CONSTANT_Y [list $notmod] 2 }
+	global CONFIG_DCACHE_SNOOP_SEPTAG
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {write_tristate $cfg $autocfg CONFIG_DCACHE_SNOOP_SEPTAG $CONSTANT_Y [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {write_hex $cfg $autocfg CONFIG_CACHE_FIXED 0 $notmod }
+	global CONFIG_DCACHE_LRAM
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {write_tristate $cfg $autocfg CONFIG_DCACHE_LRAM $CONSTANT_N [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {write_tristate $cfg $autocfg CONFIG_MMU_ENABLE $CONSTANT_Y [list $notmod] 2 }
+	global CONFIG_MMU_SPLIT
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {write_tristate $cfg $autocfg CONFIG_MMU_SPLIT $CONSTANT_Y [list $notmod] 2 }
+	global CONFIG_MMU_REPARRAY
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {write_tristate $cfg $autocfg CONFIG_MMU_REPARRAY $CONSTANT_Y [list $notmod] 2 }
+	global CONFIG_MMU_I8
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {write_tristate $cfg $autocfg CONFIG_MMU_I8 $CONSTANT_Y [list $notmod] 2 }
+	global CONFIG_MMU_D8
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {write_tristate $cfg $autocfg CONFIG_MMU_D8 $CONSTANT_Y [list $notmod] 2 }
+	global CONFIG_MMU_FASTWB
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {write_tristate $cfg $autocfg CONFIG_MMU_FASTWB $CONSTANT_Y [list $notmod] 2 }
+	global CONFIG_MMU_PAGE_4K
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {write_tristate $cfg $autocfg CONFIG_MMU_PAGE_4K $CONSTANT_Y [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {write_tristate $cfg $autocfg CONFIG_DSU_ENABLE $CONSTANT_Y [list $notmod] 2 }
+	global CONFIG_DSU_ITRACE
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {write_tristate $cfg $autocfg CONFIG_DSU_ITRACE $CONSTANT_Y [list $notmod] 2 }
+	global CONFIG_DSU_ITRACESZ4
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {write_tristate $cfg $autocfg CONFIG_DSU_ITRACESZ4 $CONSTANT_Y [list $notmod] 2 }
+	global CONFIG_DSU_ATRACESZ4
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_GP == 1)} then {write_tristate $cfg $autocfg CONFIG_DSU_ATRACESZ4 $CONSTANT_Y [list $notmod] 2 }
+	global CONFIG_LEON3_HP
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {write_int $cfg $autocfg CONFIG_IU_NWINDOWS 8 $notmod }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {write_tristate $cfg $autocfg CONFIG_IU_V8MULDIV $CONSTANT_Y [list $notmod] 2 }
+	global CONFIG_IU_MUL_LATENCY_2
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {write_tristate $cfg $autocfg CONFIG_IU_MUL_LATENCY_2 $CONSTANT_Y [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {write_tristate $cfg $autocfg CONFIG_IU_MUL_MAC $CONSTANT_N [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {write_tristate $cfg $autocfg CONFIG_IU_BP $CONSTANT_Y [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {write_tristate $cfg $autocfg CONFIG_IU_SVT $CONSTANT_Y [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {write_tristate $cfg $autocfg CONFIG_NOTAG $CONSTANT_N [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {write_int $cfg $autocfg CONFIG_IU_LDELAY 1 $notmod }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {write_int $cfg $autocfg CONFIG_IU_WATCHPOINTS 4 $notmod }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {write_tristate $cfg $autocfg CONFIG_PWD $CONSTANT_Y [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {write_hex $cfg $autocfg CONFIG_IU_RSTADDR 00000 $notmod }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {write_tristate $cfg $autocfg CONFIG_FPU_ENABLE $CONSTANT_Y [list $notmod] 2 }
+	global CONFIG_FPU_GRFPU
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {write_tristate $cfg $autocfg CONFIG_FPU_GRFPU $CONSTANT_Y [list $notmod] 2 }
+	global CONFIG_FPU_GRFPU_INFMUL
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {write_tristate $cfg $autocfg CONFIG_FPU_GRFPU_INFMUL $CONSTANT_Y [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {write_tristate $cfg $autocfg CONFIG_ICACHE_ENABLE $CONSTANT_Y [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {write_tristate $cfg $autocfg CONFIG_ICACHE_ASSO2 $CONSTANT_Y [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {write_tristate $cfg $autocfg CONFIG_ICACHE_SZ4 $CONSTANT_Y [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {write_tristate $cfg $autocfg CONFIG_ICACHE_LZ16 $CONSTANT_Y [list $notmod] 2 }
+	global CONFIG_ICACHE_ALGOLRU
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {write_tristate $cfg $autocfg CONFIG_ICACHE_ALGOLRU $CONSTANT_Y [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {write_tristate $cfg $autocfg CONFIG_ICACHE_LOCK $CONSTANT_N [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {write_tristate $cfg $autocfg CONFIG_ICACHE_LRAM $CONSTANT_N [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {write_tristate $cfg $autocfg CONFIG_DCACHE_ENABLE $CONSTANT_Y [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {write_tristate $cfg $autocfg CONFIG_DCACHE_ASSO2 $CONSTANT_Y [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {write_tristate $cfg $autocfg CONFIG_DCACHE_SZ4 $CONSTANT_Y [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {write_tristate $cfg $autocfg CONFIG_DCACHE_LZ16 $CONSTANT_Y [list $notmod] 2 }
+	global CONFIG_DCACHE_ALGOLRU
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {write_tristate $cfg $autocfg CONFIG_DCACHE_ALGOLRU $CONSTANT_Y [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {write_tristate $cfg $autocfg CONFIG_DCACHE_LOCK $CONSTANT_N [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {write_tristate $cfg $autocfg CONFIG_DCACHE_SNOOP $CONSTANT_Y [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {write_tristate $cfg $autocfg CONFIG_DCACHE_SNOOP_FAST $CONSTANT_Y [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {write_tristate $cfg $autocfg CONFIG_DCACHE_SNOOP_SEPTAG $CONSTANT_Y [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {write_hex $cfg $autocfg CONFIG_CACHE_FIXED 0 $notmod }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {write_tristate $cfg $autocfg CONFIG_DCACHE_LRAM $CONSTANT_N [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {write_tristate $cfg $autocfg CONFIG_MMU_ENABLE $CONSTANT_Y [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {write_tristate $cfg $autocfg CONFIG_MMU_SPLIT $CONSTANT_Y [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {write_tristate $cfg $autocfg CONFIG_MMU_REPARRAY $CONSTANT_Y [list $notmod] 2 }
+	global CONFIG_MMU_I16
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {write_tristate $cfg $autocfg CONFIG_MMU_I16 $CONSTANT_Y [list $notmod] 2 }
+	global CONFIG_MMU_D16
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {write_tristate $cfg $autocfg CONFIG_MMU_D16 $CONSTANT_Y [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {write_tristate $cfg $autocfg CONFIG_MMU_FASTWB $CONSTANT_Y [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {write_tristate $cfg $autocfg CONFIG_MMU_PAGE_4K $CONSTANT_Y [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {write_tristate $cfg $autocfg CONFIG_DSU_ENABLE $CONSTANT_Y [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {write_tristate $cfg $autocfg CONFIG_DSU_ITRACE $CONSTANT_Y [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {write_tristate $cfg $autocfg CONFIG_DSU_ITRACESZ4 $CONSTANT_Y [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_HP == 1)} then {write_tristate $cfg $autocfg CONFIG_DSU_ATRACESZ4 $CONSTANT_Y [list $notmod] 2 }
+	global CONFIG_LEON3_CUSTOM
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {write_comment $cfg $autocfg "Integer unit                                           "}
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {write_int $cfg $autocfg CONFIG_IU_NWINDOWS $CONFIG_IU_NWINDOWS $notmod }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {write_tristate $cfg $autocfg CONFIG_IU_V8MULDIV $CONFIG_IU_V8MULDIV [list $notmod] 2 }
+	global tmpvar_4
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_IU_V8MULDIV == 1)} then {
+	if { $tmpvar_4 == "2-cycles" } then { write_tristate $cfg $autocfg CONFIG_IU_MUL_LATENCY_2 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_IU_MUL_LATENCY_2 0 [list $notmod] 2 }
+	if { $tmpvar_4 == "4-cycles" } then { write_tristate $cfg $autocfg CONFIG_IU_MUL_LATENCY_4 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_IU_MUL_LATENCY_4 0 [list $notmod] 2 }
+	if { $tmpvar_4 == "5-cycles" } then { write_tristate $cfg $autocfg CONFIG_IU_MUL_LATENCY_5 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_IU_MUL_LATENCY_5 0 [list $notmod] 2 }}
+	global CONFIG_IU_MUL_LATENCY_4
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_IU_V8MULDIV == 1) && ($CONFIG_IU_MUL_LATENCY_4 == 1 || $CONFIG_IU_MUL_LATENCY_5 == 1)} then {write_tristate $cfg $autocfg CONFIG_IU_MUL_MAC $CONFIG_IU_MUL_MAC [list $notmod] 2 }
+	global tmpvar_5
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_IU_V8MULDIV == 1)} then {
+	if { $tmpvar_5 == "Inferred" } then { write_tristate $cfg $autocfg CONFIG_IU_MUL_INFERRED 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_IU_MUL_INFERRED 0 [list $notmod] 2 }
+	if { $tmpvar_5 == "NTNU_Modgen" } then { write_tristate $cfg $autocfg CONFIG_IU_MUL_MODGEN 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_IU_MUL_MODGEN 0 [list $notmod] 2 }
+	if { $tmpvar_5 == "TechSpec" } then { write_tristate $cfg $autocfg CONFIG_IU_MUL_TECHSPEC 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_IU_MUL_TECHSPEC 0 [list $notmod] 2 }
+	if { $tmpvar_5 == "Designware" } then { write_tristate $cfg $autocfg CONFIG_IU_MUL_DW 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_IU_MUL_DW 0 [list $notmod] 2 }}
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {write_tristate $cfg $autocfg CONFIG_IU_BP $CONFIG_IU_BP [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {write_tristate $cfg $autocfg CONFIG_IU_SVT $CONFIG_IU_SVT [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {write_tristate $cfg $autocfg CONFIG_NOTAG $CONFIG_NOTAG [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {write_int $cfg $autocfg CONFIG_IU_LDELAY $CONFIG_IU_LDELAY $notmod }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {write_int $cfg $autocfg CONFIG_IU_WATCHPOINTS $CONFIG_IU_WATCHPOINTS $notmod }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {write_tristate $cfg $autocfg CONFIG_PWD $CONFIG_PWD [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {write_hex $cfg $autocfg CONFIG_IU_RSTADDR $CONFIG_IU_RSTADDR $notmod }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {write_comment $cfg $autocfg "Floating-point unit"}
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {write_tristate $cfg $autocfg CONFIG_FPU_ENABLE $CONFIG_FPU_ENABLE [list $notmod] 2 }
+	global tmpvar_6
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_FPU_ENABLE == 1)} then {
+	if { $tmpvar_6 == "GRFPU" } then { write_tristate $cfg $autocfg CONFIG_FPU_GRFPU 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_FPU_GRFPU 0 [list $notmod] 2 }
+	if { $tmpvar_6 == "GRFPU-LITE" } then { write_tristate $cfg $autocfg CONFIG_FPU_GRFPULITE 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_FPU_GRFPULITE 0 [list $notmod] 2 }
+	if { $tmpvar_6 == "Meiko" } then { write_tristate $cfg $autocfg CONFIG_FPU_MEIKO 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_FPU_MEIKO 0 [list $notmod] 2 }}
+	global tmpvar_7
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_FPU_ENABLE == 1) && ($CONFIG_FPU_GRFPU == 1)} then {
+	if { $tmpvar_7 == "Inferred" } then { write_tristate $cfg $autocfg CONFIG_FPU_GRFPU_INFMUL 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_FPU_GRFPU_INFMUL 0 [list $notmod] 2 }
+	if { $tmpvar_7 == "DW" } then { write_tristate $cfg $autocfg CONFIG_FPU_GRFPU_DWMUL 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_FPU_GRFPU_DWMUL 0 [list $notmod] 2 }
+	if { $tmpvar_7 == "ModGen" } then { write_tristate $cfg $autocfg CONFIG_FPU_GRFPU_MODGEN 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_FPU_GRFPU_MODGEN 0 [list $notmod] 2 }
+	if { $tmpvar_7 == "TechSpec" } then { write_tristate $cfg $autocfg CONFIG_FPU_GRFPU_TECHSPEC 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_FPU_GRFPU_TECHSPEC 0 [list $notmod] 2 }}
+	global CONFIG_FPU_GRFPU_SH
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_FPU_ENABLE == 1) && ($CONFIG_HAS_SHARED_GRFPU == 1 && $CONFIG_FPU_GRFPU == 1)} then {write_tristate $cfg $autocfg CONFIG_FPU_GRFPU_SH $CONFIG_FPU_GRFPU_SH [list $notmod] 2 }
+	global tmpvar_8
+	global CONFIG_FPU_GRFPULITE
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_FPU_ENABLE == 1) && ($CONFIG_FPU_GRFPULITE == 1)} then {
+	if { $tmpvar_8 == "Simple" } then { write_tristate $cfg $autocfg CONFIG_FPU_GRFPC0 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_FPU_GRFPC0 0 [list $notmod] 2 }
+	if { $tmpvar_8 == "Data-forwarding" } then { write_tristate $cfg $autocfg CONFIG_FPU_GRFPC1 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_FPU_GRFPC1 0 [list $notmod] 2 }
+	if { $tmpvar_8 == "Non-blocking" } then { write_tristate $cfg $autocfg CONFIG_FPU_GRFPC2 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_FPU_GRFPC2 0 [list $notmod] 2 }}
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {write_comment $cfg $autocfg "Cache system"}
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {write_tristate $cfg $autocfg CONFIG_ICACHE_ENABLE $CONFIG_ICACHE_ENABLE [list $notmod] 2 }
+	global tmpvar_9
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_ICACHE_ENABLE == 1)} then {
+	if { $tmpvar_9 == "1" } then { write_tristate $cfg $autocfg CONFIG_ICACHE_ASSO1 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_ICACHE_ASSO1 0 [list $notmod] 2 }
+	if { $tmpvar_9 == "2" } then { write_tristate $cfg $autocfg CONFIG_ICACHE_ASSO2 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_ICACHE_ASSO2 0 [list $notmod] 2 }
+	if { $tmpvar_9 == "3" } then { write_tristate $cfg $autocfg CONFIG_ICACHE_ASSO3 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_ICACHE_ASSO3 0 [list $notmod] 2 }
+	if { $tmpvar_9 == "4" } then { write_tristate $cfg $autocfg CONFIG_ICACHE_ASSO4 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_ICACHE_ASSO4 0 [list $notmod] 2 }}
+	global tmpvar_10
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_ICACHE_ENABLE == 1)} then {
+	if { $tmpvar_10 == "1" } then { write_tristate $cfg $autocfg CONFIG_ICACHE_SZ1 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_ICACHE_SZ1 0 [list $notmod] 2 }
+	if { $tmpvar_10 == "2" } then { write_tristate $cfg $autocfg CONFIG_ICACHE_SZ2 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_ICACHE_SZ2 0 [list $notmod] 2 }
+	if { $tmpvar_10 == "4" } then { write_tristate $cfg $autocfg CONFIG_ICACHE_SZ4 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_ICACHE_SZ4 0 [list $notmod] 2 }
+	if { $tmpvar_10 == "8" } then { write_tristate $cfg $autocfg CONFIG_ICACHE_SZ8 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_ICACHE_SZ8 0 [list $notmod] 2 }
+	if { $tmpvar_10 == "16" } then { write_tristate $cfg $autocfg CONFIG_ICACHE_SZ16 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_ICACHE_SZ16 0 [list $notmod] 2 }
+	if { $tmpvar_10 == "32" } then { write_tristate $cfg $autocfg CONFIG_ICACHE_SZ32 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_ICACHE_SZ32 0 [list $notmod] 2 }
+	if { $tmpvar_10 == "64" } then { write_tristate $cfg $autocfg CONFIG_ICACHE_SZ64 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_ICACHE_SZ64 0 [list $notmod] 2 }
+	if { $tmpvar_10 == "128" } then { write_tristate $cfg $autocfg CONFIG_ICACHE_SZ128 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_ICACHE_SZ128 0 [list $notmod] 2 }
+	if { $tmpvar_10 == "256" } then { write_tristate $cfg $autocfg CONFIG_ICACHE_SZ256 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_ICACHE_SZ256 0 [list $notmod] 2 }}
+	global tmpvar_11
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_ICACHE_ENABLE == 1)} then {
+	if { $tmpvar_11 == "16" } then { write_tristate $cfg $autocfg CONFIG_ICACHE_LZ16 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_ICACHE_LZ16 0 [list $notmod] 2 }
+	if { $tmpvar_11 == "32" } then { write_tristate $cfg $autocfg CONFIG_ICACHE_LZ32 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_ICACHE_LZ32 0 [list $notmod] 2 }}
+	global tmpvar_12
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_ICACHE_ENABLE == 1) && ($CONFIG_ICACHE_ASSO1 != 1)} then {
+	if { $tmpvar_12 == "Random" } then { write_tristate $cfg $autocfg CONFIG_ICACHE_ALGORND 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_ICACHE_ALGORND 0 [list $notmod] 2 }
+	if { $tmpvar_12 == "Direct" } then { write_tristate $cfg $autocfg CONFIG_ICACHE_ALGODIR 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_ICACHE_ALGODIR 0 [list $notmod] 2 }
+	if { $tmpvar_12 == "LRR" } then { write_tristate $cfg $autocfg CONFIG_ICACHE_ALGOLRR 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_ICACHE_ALGOLRR 0 [list $notmod] 2 }
+	if { $tmpvar_12 == "LRU" } then { write_tristate $cfg $autocfg CONFIG_ICACHE_ALGOLRU 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_ICACHE_ALGOLRU 0 [list $notmod] 2 }}
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_ICACHE_ENABLE == 1) && ($CONFIG_ICACHE_ASSO1 != 1)} then {write_tristate $cfg $autocfg CONFIG_ICACHE_LOCK $CONFIG_ICACHE_LOCK [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_MMU_ENABLE != 1)} then {write_tristate $cfg $autocfg CONFIG_ICACHE_LRAM $CONFIG_ICACHE_LRAM [list $notmod] 2 }
+	global tmpvar_13
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_ICACHE_LRAM == 1)} then {
+	if { $tmpvar_13 == "1" } then { write_tristate $cfg $autocfg CONFIG_ICACHE_LRAM_SZ1 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_ICACHE_LRAM_SZ1 0 [list $notmod] 2 }
+	if { $tmpvar_13 == "2" } then { write_tristate $cfg $autocfg CONFIG_ICACHE_LRAM_SZ2 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_ICACHE_LRAM_SZ2 0 [list $notmod] 2 }
+	if { $tmpvar_13 == "4" } then { write_tristate $cfg $autocfg CONFIG_ICACHE_LRAM_SZ4 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_ICACHE_LRAM_SZ4 0 [list $notmod] 2 }
+	if { $tmpvar_13 == "8" } then { write_tristate $cfg $autocfg CONFIG_ICACHE_LRAM_SZ8 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_ICACHE_LRAM_SZ8 0 [list $notmod] 2 }
+	if { $tmpvar_13 == "16" } then { write_tristate $cfg $autocfg CONFIG_ICACHE_LRAM_SZ16 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_ICACHE_LRAM_SZ16 0 [list $notmod] 2 }
+	if { $tmpvar_13 == "32" } then { write_tristate $cfg $autocfg CONFIG_ICACHE_LRAM_SZ32 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_ICACHE_LRAM_SZ32 0 [list $notmod] 2 }
+	if { $tmpvar_13 == "64" } then { write_tristate $cfg $autocfg CONFIG_ICACHE_LRAM_SZ64 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_ICACHE_LRAM_SZ64 0 [list $notmod] 2 }
+	if { $tmpvar_13 == "128" } then { write_tristate $cfg $autocfg CONFIG_ICACHE_LRAM_SZ128 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_ICACHE_LRAM_SZ128 0 [list $notmod] 2 }
+	if { $tmpvar_13 == "256" } then { write_tristate $cfg $autocfg CONFIG_ICACHE_LRAM_SZ256 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_ICACHE_LRAM_SZ256 0 [list $notmod] 2 }}
+	global CONFIG_ICACHE_LRSTART
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_ICACHE_LRAM == 1)} then {write_hex $cfg $autocfg CONFIG_ICACHE_LRSTART $CONFIG_ICACHE_LRSTART $notmod }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {write_tristate $cfg $autocfg CONFIG_DCACHE_ENABLE $CONFIG_DCACHE_ENABLE [list $notmod] 2 }
+	global tmpvar_14
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_DCACHE_ENABLE == 1)} then {
+	if { $tmpvar_14 == "1" } then { write_tristate $cfg $autocfg CONFIG_DCACHE_ASSO1 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_DCACHE_ASSO1 0 [list $notmod] 2 }
+	if { $tmpvar_14 == "2" } then { write_tristate $cfg $autocfg CONFIG_DCACHE_ASSO2 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_DCACHE_ASSO2 0 [list $notmod] 2 }
+	if { $tmpvar_14 == "3" } then { write_tristate $cfg $autocfg CONFIG_DCACHE_ASSO3 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_DCACHE_ASSO3 0 [list $notmod] 2 }
+	if { $tmpvar_14 == "4" } then { write_tristate $cfg $autocfg CONFIG_DCACHE_ASSO4 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_DCACHE_ASSO4 0 [list $notmod] 2 }}
+	global tmpvar_15
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_DCACHE_ENABLE == 1)} then {
+	if { $tmpvar_15 == "1" } then { write_tristate $cfg $autocfg CONFIG_DCACHE_SZ1 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_DCACHE_SZ1 0 [list $notmod] 2 }
+	if { $tmpvar_15 == "2" } then { write_tristate $cfg $autocfg CONFIG_DCACHE_SZ2 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_DCACHE_SZ2 0 [list $notmod] 2 }
+	if { $tmpvar_15 == "4" } then { write_tristate $cfg $autocfg CONFIG_DCACHE_SZ4 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_DCACHE_SZ4 0 [list $notmod] 2 }
+	if { $tmpvar_15 == "8" } then { write_tristate $cfg $autocfg CONFIG_DCACHE_SZ8 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_DCACHE_SZ8 0 [list $notmod] 2 }
+	if { $tmpvar_15 == "16" } then { write_tristate $cfg $autocfg CONFIG_DCACHE_SZ16 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_DCACHE_SZ16 0 [list $notmod] 2 }
+	if { $tmpvar_15 == "32" } then { write_tristate $cfg $autocfg CONFIG_DCACHE_SZ32 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_DCACHE_SZ32 0 [list $notmod] 2 }
+	if { $tmpvar_15 == "64" } then { write_tristate $cfg $autocfg CONFIG_DCACHE_SZ64 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_DCACHE_SZ64 0 [list $notmod] 2 }
+	if { $tmpvar_15 == "128" } then { write_tristate $cfg $autocfg CONFIG_DCACHE_SZ128 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_DCACHE_SZ128 0 [list $notmod] 2 }
+	if { $tmpvar_15 == "256" } then { write_tristate $cfg $autocfg CONFIG_DCACHE_SZ256 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_DCACHE_SZ256 0 [list $notmod] 2 }}
+	global tmpvar_16
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_DCACHE_ENABLE == 1)} then {
+	if { $tmpvar_16 == "16" } then { write_tristate $cfg $autocfg CONFIG_DCACHE_LZ16 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_DCACHE_LZ16 0 [list $notmod] 2 }
+	if { $tmpvar_16 == "32" } then { write_tristate $cfg $autocfg CONFIG_DCACHE_LZ32 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_DCACHE_LZ32 0 [list $notmod] 2 }}
+	global tmpvar_17
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_DCACHE_ENABLE == 1) && ($CONFIG_DCACHE_ASSO1 != 1)} then {
+	if { $tmpvar_17 == "Random" } then { write_tristate $cfg $autocfg CONFIG_DCACHE_ALGORND 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_DCACHE_ALGORND 0 [list $notmod] 2 }
+	if { $tmpvar_17 == "Direct" } then { write_tristate $cfg $autocfg CONFIG_DCACHE_ALGODIR 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_DCACHE_ALGODIR 0 [list $notmod] 2 }
+	if { $tmpvar_17 == "LRR" } then { write_tristate $cfg $autocfg CONFIG_DCACHE_ALGOLRR 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_DCACHE_ALGOLRR 0 [list $notmod] 2 }
+	if { $tmpvar_17 == "LRU" } then { write_tristate $cfg $autocfg CONFIG_DCACHE_ALGOLRU 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_DCACHE_ALGOLRU 0 [list $notmod] 2 }}
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_DCACHE_ENABLE == 1) && ($CONFIG_DCACHE_ASSO1 != 1)} then {write_tristate $cfg $autocfg CONFIG_DCACHE_LOCK $CONFIG_DCACHE_LOCK [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_DCACHE_ENABLE == 1)} then {write_tristate $cfg $autocfg CONFIG_DCACHE_SNOOP $CONFIG_DCACHE_SNOOP [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_DCACHE_ENABLE == 1) && ($CONFIG_DCACHE_SNOOP == 1)} then {write_tristate $cfg $autocfg CONFIG_DCACHE_SNOOP_SEPTAG $CONFIG_DCACHE_SNOOP_SEPTAG [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_ICACHE_ENABLE == 1 || $CONFIG_DCACHE_ENABLE == 1)} then {write_hex $cfg $autocfg CONFIG_CACHE_FIXED $CONFIG_CACHE_FIXED $notmod }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_MMU_ENABLE != 1)} then {write_tristate $cfg $autocfg CONFIG_DCACHE_LRAM $CONFIG_DCACHE_LRAM [list $notmod] 2 }
+	global tmpvar_18
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_DCACHE_LRAM == 1)} then {
+	if { $tmpvar_18 == "1" } then { write_tristate $cfg $autocfg CONFIG_DCACHE_LRAM_SZ1 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_DCACHE_LRAM_SZ1 0 [list $notmod] 2 }
+	if { $tmpvar_18 == "2" } then { write_tristate $cfg $autocfg CONFIG_DCACHE_LRAM_SZ2 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_DCACHE_LRAM_SZ2 0 [list $notmod] 2 }
+	if { $tmpvar_18 == "4" } then { write_tristate $cfg $autocfg CONFIG_DCACHE_LRAM_SZ4 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_DCACHE_LRAM_SZ4 0 [list $notmod] 2 }
+	if { $tmpvar_18 == "8" } then { write_tristate $cfg $autocfg CONFIG_DCACHE_LRAM_SZ8 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_DCACHE_LRAM_SZ8 0 [list $notmod] 2 }
+	if { $tmpvar_18 == "16" } then { write_tristate $cfg $autocfg CONFIG_DCACHE_LRAM_SZ16 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_DCACHE_LRAM_SZ16 0 [list $notmod] 2 }
+	if { $tmpvar_18 == "32" } then { write_tristate $cfg $autocfg CONFIG_DCACHE_LRAM_SZ32 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_DCACHE_LRAM_SZ32 0 [list $notmod] 2 }
+	if { $tmpvar_18 == "64" } then { write_tristate $cfg $autocfg CONFIG_DCACHE_LRAM_SZ64 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_DCACHE_LRAM_SZ64 0 [list $notmod] 2 }
+	if { $tmpvar_18 == "128" } then { write_tristate $cfg $autocfg CONFIG_DCACHE_LRAM_SZ128 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_DCACHE_LRAM_SZ128 0 [list $notmod] 2 }
+	if { $tmpvar_18 == "256" } then { write_tristate $cfg $autocfg CONFIG_DCACHE_LRAM_SZ256 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_DCACHE_LRAM_SZ256 0 [list $notmod] 2 }}
+	global CONFIG_DCACHE_LRSTART
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_DCACHE_LRAM == 1)} then {write_hex $cfg $autocfg CONFIG_DCACHE_LRSTART $CONFIG_DCACHE_LRSTART $notmod }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {write_comment $cfg $autocfg "MMU"}
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {write_tristate $cfg $autocfg CONFIG_MMU_ENABLE $CONFIG_MMU_ENABLE [list $notmod] 2 }
+	global tmpvar_19
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_MMU_ENABLE == 1)} then {
+	if { $tmpvar_19 == "combined" } then { write_tristate $cfg $autocfg CONFIG_MMU_COMBINED 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_MMU_COMBINED 0 [list $notmod] 2 }
+	if { $tmpvar_19 == "split" } then { write_tristate $cfg $autocfg CONFIG_MMU_SPLIT 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_MMU_SPLIT 0 [list $notmod] 2 }}
+	global tmpvar_20
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_MMU_ENABLE == 1)} then {
+	if { $tmpvar_20 == "LRU" } then { write_tristate $cfg $autocfg CONFIG_MMU_REPARRAY 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_MMU_REPARRAY 0 [list $notmod] 2 }
+	if { $tmpvar_20 == "Increment" } then { write_tristate $cfg $autocfg CONFIG_MMU_REPINCREMENT 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_MMU_REPINCREMENT 0 [list $notmod] 2 }}
+	global tmpvar_21
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_MMU_ENABLE == 1)} then {
+	if { $tmpvar_21 == "2" } then { write_tristate $cfg $autocfg CONFIG_MMU_I2 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_MMU_I2 0 [list $notmod] 2 }
+	if { $tmpvar_21 == "4" } then { write_tristate $cfg $autocfg CONFIG_MMU_I4 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_MMU_I4 0 [list $notmod] 2 }
+	if { $tmpvar_21 == "8" } then { write_tristate $cfg $autocfg CONFIG_MMU_I8 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_MMU_I8 0 [list $notmod] 2 }
+	if { $tmpvar_21 == "16" } then { write_tristate $cfg $autocfg CONFIG_MMU_I16 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_MMU_I16 0 [list $notmod] 2 }
+	if { $tmpvar_21 == "32" } then { write_tristate $cfg $autocfg CONFIG_MMU_I32 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_MMU_I32 0 [list $notmod] 2 }
+	if { $tmpvar_21 == "64" } then { write_tristate $cfg $autocfg CONFIG_MMU_I64 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_MMU_I64 0 [list $notmod] 2 }}
+	global tmpvar_22
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_MMU_ENABLE == 1) && ($CONFIG_MMU_SPLIT == 1)} then {
+	if { $tmpvar_22 == "2" } then { write_tristate $cfg $autocfg CONFIG_MMU_D2 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_MMU_D2 0 [list $notmod] 2 }
+	if { $tmpvar_22 == "4" } then { write_tristate $cfg $autocfg CONFIG_MMU_D4 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_MMU_D4 0 [list $notmod] 2 }
+	if { $tmpvar_22 == "8" } then { write_tristate $cfg $autocfg CONFIG_MMU_D8 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_MMU_D8 0 [list $notmod] 2 }
+	if { $tmpvar_22 == "16" } then { write_tristate $cfg $autocfg CONFIG_MMU_D16 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_MMU_D16 0 [list $notmod] 2 }
+	if { $tmpvar_22 == "32" } then { write_tristate $cfg $autocfg CONFIG_MMU_D32 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_MMU_D32 0 [list $notmod] 2 }
+	if { $tmpvar_22 == "64" } then { write_tristate $cfg $autocfg CONFIG_MMU_D64 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_MMU_D64 0 [list $notmod] 2 }}
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_MMU_ENABLE == 1) && ($CONFIG_MMU_SPLIT == 1)} then {write_tristate $cfg $autocfg CONFIG_MMU_FASTWB $CONFIG_MMU_FASTWB [list $notmod] 2 }
+	global tmpvar_23
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_MMU_ENABLE == 1)} then {
+	if { $tmpvar_23 == "4K" } then { write_tristate $cfg $autocfg CONFIG_MMU_PAGE_4K 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_MMU_PAGE_4K 0 [list $notmod] 2 }
+	if { $tmpvar_23 == "8K" } then { write_tristate $cfg $autocfg CONFIG_MMU_PAGE_8K 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_MMU_PAGE_8K 0 [list $notmod] 2 }
+	if { $tmpvar_23 == "16K" } then { write_tristate $cfg $autocfg CONFIG_MMU_PAGE_16K 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_MMU_PAGE_16K 0 [list $notmod] 2 }
+	if { $tmpvar_23 == "32K" } then { write_tristate $cfg $autocfg CONFIG_MMU_PAGE_32K 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_MMU_PAGE_32K 0 [list $notmod] 2 }
+	if { $tmpvar_23 == "Programmable" } then { write_tristate $cfg $autocfg CONFIG_MMU_PAGE_PROG 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_MMU_PAGE_PROG 0 [list $notmod] 2 }}
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {write_comment $cfg $autocfg "Debug Support Unit        "}
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1)} then {write_tristate $cfg $autocfg CONFIG_DSU_ENABLE $CONFIG_DSU_ENABLE [list $notmod] 2 }
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_DSU_ENABLE == 1)} then {write_tristate $cfg $autocfg CONFIG_DSU_ITRACE $CONFIG_DSU_ITRACE [list $notmod] 2 }
+	global tmpvar_24
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_DSU_ENABLE == 1) && ($CONFIG_DSU_ITRACE == 1)} then {
+	if { $tmpvar_24 == "1" } then { write_tristate $cfg $autocfg CONFIG_DSU_ITRACESZ1 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_DSU_ITRACESZ1 0 [list $notmod] 2 }
+	if { $tmpvar_24 == "2" } then { write_tristate $cfg $autocfg CONFIG_DSU_ITRACESZ2 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_DSU_ITRACESZ2 0 [list $notmod] 2 }
+	if { $tmpvar_24 == "4" } then { write_tristate $cfg $autocfg CONFIG_DSU_ITRACESZ4 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_DSU_ITRACESZ4 0 [list $notmod] 2 }
+	if { $tmpvar_24 == "8" } then { write_tristate $cfg $autocfg CONFIG_DSU_ITRACESZ8 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_DSU_ITRACESZ8 0 [list $notmod] 2 }
+	if { $tmpvar_24 == "16" } then { write_tristate $cfg $autocfg CONFIG_DSU_ITRACESZ16 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_DSU_ITRACESZ16 0 [list $notmod] 2 }}
+	global CONFIG_DSU_ATRACE
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_DSU_ENABLE == 1)} then {write_tristate $cfg $autocfg CONFIG_DSU_ATRACE $CONFIG_DSU_ATRACE [list $notmod] 2 }
+	global tmpvar_25
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3_CUSTOM == 1) && ($CONFIG_DSU_ENABLE == 1) && ($CONFIG_DSU_ATRACE == 1)} then {
+	if { $tmpvar_25 == "1" } then { write_tristate $cfg $autocfg CONFIG_DSU_ATRACESZ1 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_DSU_ATRACESZ1 0 [list $notmod] 2 }
+	if { $tmpvar_25 == "2" } then { write_tristate $cfg $autocfg CONFIG_DSU_ATRACESZ2 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_DSU_ATRACESZ2 0 [list $notmod] 2 }
+	if { $tmpvar_25 == "4" } then { write_tristate $cfg $autocfg CONFIG_DSU_ATRACESZ4 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_DSU_ATRACESZ4 0 [list $notmod] 2 }
+	if { $tmpvar_25 == "8" } then { write_tristate $cfg $autocfg CONFIG_DSU_ATRACESZ8 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_DSU_ATRACESZ8 0 [list $notmod] 2 }
+	if { $tmpvar_25 == "16" } then { write_tristate $cfg $autocfg CONFIG_DSU_ATRACESZ16 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_DSU_ATRACESZ16 0 [list $notmod] 2 }}
+	if {($CONFIG_LEON3 == 1)} then {write_comment $cfg $autocfg "Fault-tolerance  "}
+	global CONFIG_LEON3FT_EN
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3FT_PRESENT == 1)} then {write_tristate $cfg $autocfg CONFIG_LEON3FT_EN $CONFIG_LEON3FT_EN [list $notmod] 2 }
+	global tmpvar_26
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3FT_PRESENT == 1) && ($CONFIG_LEON3FT_EN == 1)} then {
+	if { $tmpvar_26 == "None" } then { write_tristate $cfg $autocfg CONFIG_IUFT_NONE 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_IUFT_NONE 0 [list $notmod] 2 }
+	if { $tmpvar_26 == "Parity" } then { write_tristate $cfg $autocfg CONFIG_IUFT_PAR 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_IUFT_PAR 0 [list $notmod] 2 }
+	if { $tmpvar_26 == "PDMR" } then { write_tristate $cfg $autocfg CONFIG_IUFT_DMR 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_IUFT_DMR 0 [list $notmod] 2 }
+	if { $tmpvar_26 == "BCH" } then { write_tristate $cfg $autocfg CONFIG_IUFT_BCH 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_IUFT_BCH 0 [list $notmod] 2 }
+	if { $tmpvar_26 == "TMR" } then { write_tristate $cfg $autocfg CONFIG_IUFT_TMR 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_IUFT_TMR 0 [list $notmod] 2 }}
+	global tmpvar_27
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3FT_PRESENT == 1) && ($CONFIG_LEON3FT_EN == 1) && ($CONFIG_FPU_ENABLE == 1)} then {
+	if { $tmpvar_27 == "None" } then { write_tristate $cfg $autocfg CONFIG_FPUFT_NONE 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_FPUFT_NONE 0 [list $notmod] 2 }
+	if { $tmpvar_27 == "Parity" } then { write_tristate $cfg $autocfg CONFIG_FPUFT_PAR 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_FPUFT_PAR 0 [list $notmod] 2 }
+	if { $tmpvar_27 == "PDMR" } then { write_tristate $cfg $autocfg CONFIG_FPUFT_DMR 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_FPUFT_DMR 0 [list $notmod] 2 }
+	if { $tmpvar_27 == "TMR" } then { write_tristate $cfg $autocfg CONFIG_FPUFT_TMR 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_FPUFT_TMR 0 [list $notmod] 2 }}
+	global CONFIG_RF_ERRINJ
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3FT_PRESENT == 1) && ($CONFIG_LEON3FT_EN == 1)} then {write_tristate $cfg $autocfg CONFIG_RF_ERRINJ $CONFIG_RF_ERRINJ [list $notmod] 2 }
+	global CONFIG_CACHE_FT_EN
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3FT_PRESENT == 1) && ($CONFIG_LEON3FT_EN == 1)} then {write_tristate $cfg $autocfg CONFIG_CACHE_FT_EN $CONFIG_CACHE_FT_EN [list $notmod] 2 }
+	global CONFIG_CACHE_ERRINJ
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_LEON3FT_PRESENT == 1) && ($CONFIG_LEON3FT_EN == 1)} then {write_int $cfg $autocfg CONFIG_CACHE_ERRINJ $CONFIG_CACHE_ERRINJ $notmod }
+	if {($CONFIG_LEON3 == 1)} then {write_comment $cfg $autocfg "VHDL debug settings       "}
+	global CONFIG_IU_DISAS
+	if {($CONFIG_LEON3 == 1)} then {write_tristate $cfg $autocfg CONFIG_IU_DISAS $CONFIG_IU_DISAS [list $notmod] 2 }
+	global CONFIG_IU_DISAS_NET
+	if {($CONFIG_LEON3 == 1) && ($CONFIG_IU_DISAS == 1)} then {write_tristate $cfg $autocfg CONFIG_IU_DISAS_NET $CONFIG_IU_DISAS_NET [list $notmod] 2 }
+	global CONFIG_DEBUG_PC32
+	if {($CONFIG_LEON3 == 1)} then {write_tristate $cfg $autocfg CONFIG_DEBUG_PC32 $CONFIG_DEBUG_PC32 [list $notmod] 2 }
+	write_comment $cfg $autocfg "AMBA configuration"
+	global CONFIG_AHB_DEFMST
+	write_int $cfg $autocfg CONFIG_AHB_DEFMST $CONFIG_AHB_DEFMST $notmod
+	global CONFIG_AHB_RROBIN
+	write_tristate $cfg $autocfg CONFIG_AHB_RROBIN $CONFIG_AHB_RROBIN [list $notmod] 2
+	global CONFIG_AHB_SPLIT
+	write_tristate $cfg $autocfg CONFIG_AHB_SPLIT $CONFIG_AHB_SPLIT [list $notmod] 2
+	global CONFIG_AHB_FPNPEN
+	write_tristate $cfg $autocfg CONFIG_AHB_FPNPEN $CONFIG_AHB_FPNPEN [list $notmod] 2
+	global CONFIG_AHB_IOADDR
+	write_hex $cfg $autocfg CONFIG_AHB_IOADDR $CONFIG_AHB_IOADDR $notmod
+	global CONFIG_APB_HADDR
+	write_hex $cfg $autocfg CONFIG_APB_HADDR $CONFIG_APB_HADDR $notmod
+	global CONFIG_AHB_MON
+	write_tristate $cfg $autocfg CONFIG_AHB_MON $CONFIG_AHB_MON [list $notmod] 2
+	global CONFIG_AHB_MONERR
+	if {($CONFIG_AHB_MON == 1)} then {write_tristate $cfg $autocfg CONFIG_AHB_MONERR $CONFIG_AHB_MONERR [list $notmod] 2 }
+	global CONFIG_AHB_MONWAR
+	if {($CONFIG_AHB_MON == 1)} then {write_tristate $cfg $autocfg CONFIG_AHB_MONWAR $CONFIG_AHB_MONWAR [list $notmod] 2 }
+	global CONFIG_AHB_DTRACE
+	write_tristate $cfg $autocfg CONFIG_AHB_DTRACE $CONFIG_AHB_DTRACE [list $notmod] 2
+	write_comment $cfg $autocfg "Debug Link           "
+	global CONFIG_DSU_UART
+	write_tristate $cfg $autocfg CONFIG_DSU_UART $CONFIG_DSU_UART [list $notmod] 2
+	global CONFIG_DSU_JTAG
+	write_tristate $cfg $autocfg CONFIG_DSU_JTAG $CONFIG_DSU_JTAG [list $notmod] 2
+	global CONFIG_DSU_ETH
+	global CONFIG_GRETH_ENABLE
+	if {($CONFIG_GRETH_ENABLE == 1)} then {write_tristate $cfg $autocfg CONFIG_DSU_ETH $CONFIG_DSU_ETH [list $notmod] 2 }
+	global tmpvar_28
+	if {($CONFIG_GRETH_ENABLE == 1) && ($CONFIG_DSU_ETH == 1)} then {
+	if { $tmpvar_28 == "1" } then { write_tristate $cfg $autocfg CONFIG_DSU_ETHSZ1 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_DSU_ETHSZ1 0 [list $notmod] 2 }
+	if { $tmpvar_28 == "2" } then { write_tristate $cfg $autocfg CONFIG_DSU_ETHSZ2 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_DSU_ETHSZ2 0 [list $notmod] 2 }
+	if { $tmpvar_28 == "4" } then { write_tristate $cfg $autocfg CONFIG_DSU_ETHSZ4 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_DSU_ETHSZ4 0 [list $notmod] 2 }
+	if { $tmpvar_28 == "8" } then { write_tristate $cfg $autocfg CONFIG_DSU_ETHSZ8 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_DSU_ETHSZ8 0 [list $notmod] 2 }
+	if { $tmpvar_28 == "16" } then { write_tristate $cfg $autocfg CONFIG_DSU_ETHSZ16 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_DSU_ETHSZ16 0 [list $notmod] 2 }}
+	global CONFIG_DSU_IPMSB
+	if {($CONFIG_GRETH_ENABLE == 1) && ($CONFIG_DSU_ETH == 1)} then {write_hex $cfg $autocfg CONFIG_DSU_IPMSB $CONFIG_DSU_IPMSB $notmod }
+	global CONFIG_DSU_IPLSB
+	if {($CONFIG_GRETH_ENABLE == 1) && ($CONFIG_DSU_ETH == 1)} then {write_hex $cfg $autocfg CONFIG_DSU_IPLSB $CONFIG_DSU_IPLSB $notmod }
+	global CONFIG_DSU_ETHMSB
+	if {($CONFIG_GRETH_ENABLE == 1) && ($CONFIG_DSU_ETH == 1)} then {write_hex $cfg $autocfg CONFIG_DSU_ETHMSB $CONFIG_DSU_ETHMSB $notmod }
+	global CONFIG_DSU_ETHLSB
+	if {($CONFIG_GRETH_ENABLE == 1) && ($CONFIG_DSU_ETH == 1)} then {write_hex $cfg $autocfg CONFIG_DSU_ETHLSB $CONFIG_DSU_ETHLSB $notmod }
+	global CONFIG_DSU_ETH_PROG
+	if {($CONFIG_GRETH_ENABLE == 1) && ($CONFIG_DSU_ETH == 1)} then {write_tristate $cfg $autocfg CONFIG_DSU_ETH_PROG $CONFIG_DSU_ETH_PROG [list $notmod] 2 }
+	global CONFIG_DSU_ETH_DIS
+	if {($CONFIG_GRETH_ENABLE == 1) && ($CONFIG_DSU_ETH == 1) && ($CONFIG_DSU_ETH_PROG == 1)} then {write_tristate $cfg $autocfg CONFIG_DSU_ETH_DIS $CONFIG_DSU_ETH_DIS [list $notmod] 2 }
+	write_comment $cfg $autocfg "Peripherals             "
+	write_comment $cfg $autocfg "Memory controllers             "
+	write_comment $cfg $autocfg "Leon2 memory controller        "
+	global CONFIG_MCTRL_LEON2
+	write_tristate $cfg $autocfg CONFIG_MCTRL_LEON2 $CONFIG_MCTRL_LEON2 [list $notmod] 2
+	global CONFIG_MCTRL_8BIT
+	if {($CONFIG_MCTRL_LEON2 == 1)} then {write_tristate $cfg $autocfg CONFIG_MCTRL_8BIT $CONFIG_MCTRL_8BIT [list $notmod] 2 }
+	global CONFIG_MCTRL_16BIT
+	if {($CONFIG_MCTRL_LEON2 == 1)} then {write_tristate $cfg $autocfg CONFIG_MCTRL_16BIT $CONFIG_MCTRL_16BIT [list $notmod] 2 }
+	global CONFIG_MCTRL_5CS
+	if {($CONFIG_MCTRL_LEON2 == 1)} then {write_tristate $cfg $autocfg CONFIG_MCTRL_5CS $CONFIG_MCTRL_5CS [list $notmod] 2 }
+	global CONFIG_MCTRL_SDRAM
+	if {($CONFIG_MCTRL_LEON2 == 1)} then {write_tristate $cfg $autocfg CONFIG_MCTRL_SDRAM $CONFIG_MCTRL_SDRAM [list $notmod] 2 }
+	global CONFIG_MCTRL_SDRAM_SEPBUS
+	if {($CONFIG_MCTRL_LEON2 == 1) && ($CONFIG_MCTRL_SDRAM == 1)} then {write_tristate $cfg $autocfg CONFIG_MCTRL_SDRAM_SEPBUS $CONFIG_MCTRL_SDRAM_SEPBUS [list $notmod] 2 }
+	global CONFIG_MCTRL_SDRAM_BUS64
+	if {($CONFIG_MCTRL_LEON2 == 1) && ($CONFIG_MCTRL_SDRAM == 1) && ($CONFIG_MCTRL_SDRAM_SEPBUS == 1)} then {write_tristate $cfg $autocfg CONFIG_MCTRL_SDRAM_BUS64 $CONFIG_MCTRL_SDRAM_BUS64 [list $notmod] 2 }
+	global CONFIG_MCTRL_SDRAM_INVCLK
+	if {($CONFIG_MCTRL_LEON2 == 1) && ($CONFIG_MCTRL_SDRAM == 1) && ($CONFIG_MCTRL_SDRAM_SEPBUS == 1)} then {write_tristate $cfg $autocfg CONFIG_MCTRL_SDRAM_INVCLK $CONFIG_MCTRL_SDRAM_INVCLK [list $notmod] 2 }
+	global CONFIG_MCTRL_PAGE
+	if {($CONFIG_MCTRL_LEON2 == 1) && ($CONFIG_MCTRL_SDRAM == 1)} then {write_tristate $cfg $autocfg CONFIG_MCTRL_PAGE $CONFIG_MCTRL_PAGE [list $notmod] 2 }
+	global CONFIG_MCTRL_PROGPAGE
+	if {($CONFIG_MCTRL_LEON2 == 1) && ($CONFIG_MCTRL_SDRAM == 1) && ($CONFIG_MCTRL_PAGE == 1)} then {write_tristate $cfg $autocfg CONFIG_MCTRL_PROGPAGE $CONFIG_MCTRL_PROGPAGE [list $notmod] 2 }
+	write_comment $cfg $autocfg "Xilinx MIG DDR2 controller   "
+	global CONFIG_MIG_DDR2
+	write_tristate $cfg $autocfg CONFIG_MIG_DDR2 $CONFIG_MIG_DDR2 [list $notmod] 2
+	write_comment $cfg $autocfg "On-chip RAM/ROM                 "
+	global CONFIG_AHBROM_ENABLE
+	write_tristate $cfg $autocfg CONFIG_AHBROM_ENABLE $CONFIG_AHBROM_ENABLE [list $notmod] 2
+	global CONFIG_AHBROM_START
+	if {($CONFIG_AHBROM_ENABLE == 1)} then {write_hex $cfg $autocfg CONFIG_AHBROM_START $CONFIG_AHBROM_START $notmod }
+	global CONFIG_AHBROM_PIPE
+	if {($CONFIG_AHBROM_ENABLE == 1)} then {write_tristate $cfg $autocfg CONFIG_AHBROM_PIPE $CONFIG_AHBROM_PIPE [list $notmod] 2 }
+	global CONFIG_AHBRAM_ENABLE
+	write_tristate $cfg $autocfg CONFIG_AHBRAM_ENABLE $CONFIG_AHBRAM_ENABLE [list $notmod] 2
+	global tmpvar_29
+	if {($CONFIG_AHBRAM_ENABLE == 1)} then {
+	if { $tmpvar_29 == "1" } then { write_tristate $cfg $autocfg CONFIG_AHBRAM_SZ1 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_AHBRAM_SZ1 0 [list $notmod] 2 }
+	if { $tmpvar_29 == "2" } then { write_tristate $cfg $autocfg CONFIG_AHBRAM_SZ2 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_AHBRAM_SZ2 0 [list $notmod] 2 }
+	if { $tmpvar_29 == "4" } then { write_tristate $cfg $autocfg CONFIG_AHBRAM_SZ4 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_AHBRAM_SZ4 0 [list $notmod] 2 }
+	if { $tmpvar_29 == "8" } then { write_tristate $cfg $autocfg CONFIG_AHBRAM_SZ8 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_AHBRAM_SZ8 0 [list $notmod] 2 }
+	if { $tmpvar_29 == "16" } then { write_tristate $cfg $autocfg CONFIG_AHBRAM_SZ16 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_AHBRAM_SZ16 0 [list $notmod] 2 }
+	if { $tmpvar_29 == "32" } then { write_tristate $cfg $autocfg CONFIG_AHBRAM_SZ32 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_AHBRAM_SZ32 0 [list $notmod] 2 }
+	if { $tmpvar_29 == "64" } then { write_tristate $cfg $autocfg CONFIG_AHBRAM_SZ64 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_AHBRAM_SZ64 0 [list $notmod] 2 }
+	if { $tmpvar_29 == "128" } then { write_tristate $cfg $autocfg CONFIG_AHBRAM_SZ128 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_AHBRAM_SZ128 0 [list $notmod] 2 }
+	if { $tmpvar_29 == "256" } then { write_tristate $cfg $autocfg CONFIG_AHBRAM_SZ256 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_AHBRAM_SZ256 0 [list $notmod] 2 }
+	if { $tmpvar_29 == "512" } then { write_tristate $cfg $autocfg CONFIG_AHBRAM_SZ512 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_AHBRAM_SZ512 0 [list $notmod] 2 }
+	if { $tmpvar_29 == "1024" } then { write_tristate $cfg $autocfg CONFIG_AHBRAM_SZ1024 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_AHBRAM_SZ1024 0 [list $notmod] 2 }
+	if { $tmpvar_29 == "2048" } then { write_tristate $cfg $autocfg CONFIG_AHBRAM_SZ2048 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_AHBRAM_SZ2048 0 [list $notmod] 2 }
+	if { $tmpvar_29 == "4096" } then { write_tristate $cfg $autocfg CONFIG_AHBRAM_SZ4096 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_AHBRAM_SZ4096 0 [list $notmod] 2 }}
+	global CONFIG_AHBRAM_START
+	if {($CONFIG_AHBRAM_ENABLE == 1)} then {write_hex $cfg $autocfg CONFIG_AHBRAM_START $CONFIG_AHBRAM_START $notmod }
+	global CONFIG_AHBRAM_PIPE
+	if {($CONFIG_AHBRAM_ENABLE == 1)} then {write_tristate $cfg $autocfg CONFIG_AHBRAM_PIPE $CONFIG_AHBRAM_PIPE [list $notmod] 2 }
+	write_comment $cfg $autocfg "Ethernet             "
+	write_tristate $cfg $autocfg CONFIG_GRETH_ENABLE $CONFIG_GRETH_ENABLE [list $notmod] 2
+	global CONFIG_GRETH_GIGA
+	if {($CONFIG_GRETH_ENABLE == 1)} then {write_tristate $cfg $autocfg CONFIG_GRETH_GIGA $CONFIG_GRETH_GIGA [list $notmod] 2 }
+	global tmpvar_30
+	if {($CONFIG_GRETH_ENABLE == 1) && ($CONFIG_GRETH_GIGA == 0)} then {
+	if { $tmpvar_30 == "4" } then { write_tristate $cfg $autocfg CONFIG_GRETH_FIFO4 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_GRETH_FIFO4 0 [list $notmod] 2 }
+	if { $tmpvar_30 == "8" } then { write_tristate $cfg $autocfg CONFIG_GRETH_FIFO8 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_GRETH_FIFO8 0 [list $notmod] 2 }
+	if { $tmpvar_30 == "16" } then { write_tristate $cfg $autocfg CONFIG_GRETH_FIFO16 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_GRETH_FIFO16 0 [list $notmod] 2 }
+	if { $tmpvar_30 == "32" } then { write_tristate $cfg $autocfg CONFIG_GRETH_FIFO32 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_GRETH_FIFO32 0 [list $notmod] 2 }
+	if { $tmpvar_30 == "64" } then { write_tristate $cfg $autocfg CONFIG_GRETH_FIFO64 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_GRETH_FIFO64 0 [list $notmod] 2 }}
+	global CONFIG_GRETH_FT
+	if {($CONFIG_GRETH_ENABLE == 1) && ($CONFIG_LEON3FT_PRESENT == 1)} then {write_tristate $cfg $autocfg CONFIG_GRETH_FT $CONFIG_GRETH_FT [list $notmod] 2 }
+	global CONFIG_GRETH_EDCLFT
+	if {($CONFIG_GRETH_ENABLE == 1) && ($CONFIG_LEON3FT_PRESENT == 1) && ($CONFIG_GRETH_FT == 1)} then {write_tristate $cfg $autocfg CONFIG_GRETH_EDCLFT $CONFIG_GRETH_EDCLFT [list $notmod] 2 }
+	write_comment $cfg $autocfg "UARTs, timers and irq control         "
+	global CONFIG_UART1_ENABLE
+	write_tristate $cfg $autocfg CONFIG_UART1_ENABLE $CONFIG_UART1_ENABLE [list $notmod] 2
+	global tmpvar_31
+	if {($CONFIG_UART1_ENABLE == 1)} then {
+	if { $tmpvar_31 == "1" } then { write_tristate $cfg $autocfg CONFIG_UA1_FIFO1 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_UA1_FIFO1 0 [list $notmod] 2 }
+	if { $tmpvar_31 == "2" } then { write_tristate $cfg $autocfg CONFIG_UA1_FIFO2 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_UA1_FIFO2 0 [list $notmod] 2 }
+	if { $tmpvar_31 == "4" } then { write_tristate $cfg $autocfg CONFIG_UA1_FIFO4 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_UA1_FIFO4 0 [list $notmod] 2 }
+	if { $tmpvar_31 == "8" } then { write_tristate $cfg $autocfg CONFIG_UA1_FIFO8 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_UA1_FIFO8 0 [list $notmod] 2 }
+	if { $tmpvar_31 == "16" } then { write_tristate $cfg $autocfg CONFIG_UA1_FIFO16 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_UA1_FIFO16 0 [list $notmod] 2 }
+	if { $tmpvar_31 == "32" } then { write_tristate $cfg $autocfg CONFIG_UA1_FIFO32 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_UA1_FIFO32 0 [list $notmod] 2 }}
+	global CONFIG_IRQ3_ENABLE
+	write_tristate $cfg $autocfg CONFIG_IRQ3_ENABLE $CONFIG_IRQ3_ENABLE [list $notmod] 2
+	global CONFIG_IRQ3_SEC
+	if {($CONFIG_IRQ3_ENABLE == 1)} then {write_tristate $cfg $autocfg CONFIG_IRQ3_SEC $CONFIG_IRQ3_SEC [list $notmod] 2 }
+	global CONFIG_IRQ3_NSEC
+	if {($CONFIG_IRQ3_ENABLE == 1) && ($CONFIG_IRQ3_SEC == 1)} then {write_int $cfg $autocfg CONFIG_IRQ3_NSEC $CONFIG_IRQ3_NSEC $notmod }
+	global CONFIG_GPT_ENABLE
+	write_tristate $cfg $autocfg CONFIG_GPT_ENABLE $CONFIG_GPT_ENABLE [list $notmod] 2
+	global CONFIG_GPT_NTIM
+	if {($CONFIG_GPT_ENABLE == 1)} then {write_int $cfg $autocfg CONFIG_GPT_NTIM $CONFIG_GPT_NTIM $notmod }
+	global CONFIG_GPT_SW
+	if {($CONFIG_GPT_ENABLE == 1)} then {write_int $cfg $autocfg CONFIG_GPT_SW $CONFIG_GPT_SW $notmod }
+	global CONFIG_GPT_TW
+	if {($CONFIG_GPT_ENABLE == 1)} then {write_int $cfg $autocfg CONFIG_GPT_TW $CONFIG_GPT_TW $notmod }
+	global CONFIG_GPT_IRQ
+	if {($CONFIG_GPT_ENABLE == 1)} then {write_int $cfg $autocfg CONFIG_GPT_IRQ $CONFIG_GPT_IRQ $notmod }
+	global CONFIG_GPT_SEPIRQ
+	if {($CONFIG_GPT_ENABLE == 1)} then {write_tristate $cfg $autocfg CONFIG_GPT_SEPIRQ $CONFIG_GPT_SEPIRQ [list $notmod] 2 }
+	global CONFIG_GPT_WDOGEN
+	if {($CONFIG_GPT_ENABLE == 1)} then {write_tristate $cfg $autocfg CONFIG_GPT_WDOGEN $CONFIG_GPT_WDOGEN [list $notmod] 2 }
+	global CONFIG_GPT_WDOG
+	if {($CONFIG_GPT_ENABLE == 1) && ($CONFIG_GPT_WDOGEN == 1)} then {write_hex $cfg $autocfg CONFIG_GPT_WDOG $CONFIG_GPT_WDOG $notmod }
+	global CONFIG_GRGPIO_ENABLE
+	write_tristate $cfg $autocfg CONFIG_GRGPIO_ENABLE $CONFIG_GRGPIO_ENABLE [list $notmod] 2
+	global CONFIG_GRGPIO_WIDTH
+	if {($CONFIG_GRGPIO_ENABLE == 1)} then {write_int $cfg $autocfg CONFIG_GRGPIO_WIDTH $CONFIG_GRGPIO_WIDTH $notmod }
+	global CONFIG_GRGPIO_IMASK
+	if {($CONFIG_GRGPIO_ENABLE == 1)} then {write_hex $cfg $autocfg CONFIG_GRGPIO_IMASK $CONFIG_GRGPIO_IMASK $notmod }
+	global CONFIG_I2C_ENABLE
+	write_tristate $cfg $autocfg CONFIG_I2C_ENABLE $CONFIG_I2C_ENABLE [list $notmod] 2
+	write_comment $cfg $autocfg "Keybord and VGA interface"
+	global CONFIG_KBD_ENABLE
+	write_tristate $cfg $autocfg CONFIG_KBD_ENABLE $CONFIG_KBD_ENABLE [list $notmod] 2
+	global CONFIG_VGA_ENABLE
+	write_tristate $cfg $autocfg CONFIG_VGA_ENABLE $CONFIG_VGA_ENABLE [list $notmod] 2
+	global CONFIG_SVGA_ENABLE
+	if {($CONFIG_VGA_ENABLE == 0)} then {write_tristate $cfg $autocfg CONFIG_SVGA_ENABLE $CONFIG_SVGA_ENABLE [list $notmod] 2 }
+	write_comment $cfg $autocfg "System ACE Interface Controller"
+	global CONFIG_GRACECTRL
+	write_tristate $cfg $autocfg CONFIG_GRACECTRL $CONFIG_GRACECTRL [list $notmod] 2
+	write_comment $cfg $autocfg "PCI EXPRESS"
+	global CONFIG_PCIEXP_MASTER_TARGET
+	global CONFIG_SYN_VIRTEX6
+	global CONFIG_SYN_SPARTAN6
+	global CONFIG_BOARD_ML505
+	if {($CONFIG_SYN_VIRTEX6 == 1 || $CONFIG_SYN_SPARTAN6 == 1 || $CONFIG_BOARD_ML505 == 1)} then {write_tristate $cfg $autocfg CONFIG_PCIEXP_MASTER_TARGET $CONFIG_PCIEXP_MASTER_TARGET [list $notmod] 2 }
+	global CONFIG_PCIEXP_SIMPLE_TARGET
+	if {($CONFIG_SYN_VIRTEX6 == 1 || $CONFIG_SYN_SPARTAN6 == 1 || $CONFIG_BOARD_ML505 == 1) && ($CONFIG_PCIEXP_MASTER_TARGET == 1)} then {write_tristate $cfg $autocfg CONFIG_PCIEXP_SIMPLE_TARGET $CONFIG_PCIEXP_SIMPLE_TARGET [list $notmod] 2 }
+	global CONFIG_PCIEXP_MASTER_FIFO
+	if {($CONFIG_SYN_VIRTEX6 == 1 || $CONFIG_SYN_SPARTAN6 == 1 || $CONFIG_BOARD_ML505 == 1) && ($CONFIG_PCIEXP_MASTER_TARGET != 1)} then {write_tristate $cfg $autocfg CONFIG_PCIEXP_MASTER_FIFO $CONFIG_PCIEXP_MASTER_FIFO [list $notmod] 2 }
+	global CONFIG_PCIEXP_MASTER_FIFO_DMA
+	if {($CONFIG_SYN_VIRTEX6 == 1 || $CONFIG_SYN_SPARTAN6 == 1 || $CONFIG_BOARD_ML505 == 1) && ($CONFIG_PCIEXP_MASTER_TARGET != 1) && ($CONFIG_PCIEXP_MASTER_FIFO == 1)} then {write_tristate $cfg $autocfg CONFIG_PCIEXP_MASTER_FIFO_DMA $CONFIG_PCIEXP_MASTER_FIFO_DMA [list $notmod] 2 }
+	global CONFIG_PCIEXP_VENDORID
+	if {($CONFIG_SYN_VIRTEX6 == 1 || $CONFIG_SYN_SPARTAN6 == 1 || $CONFIG_BOARD_ML505 == 1) && ($CONFIG_PCIEXP_MASTER_TARGET == 1 || $CONFIG_PCIEXP_MASTER_FIFO == 1)} then {write_hex $cfg $autocfg CONFIG_PCIEXP_VENDORID $CONFIG_PCIEXP_VENDORID $notmod }
+	global CONFIG_PCIEXP_DEVICEID
+	if {($CONFIG_SYN_VIRTEX6 == 1 || $CONFIG_SYN_SPARTAN6 == 1 || $CONFIG_BOARD_ML505 == 1) && ($CONFIG_PCIEXP_MASTER_TARGET == 1 || $CONFIG_PCIEXP_MASTER_FIFO == 1)} then {write_hex $cfg $autocfg CONFIG_PCIEXP_DEVICEID $CONFIG_PCIEXP_DEVICEID $notmod }
+	global tmpvar_32
+	if {($CONFIG_SYN_VIRTEX6 == 1 || $CONFIG_SYN_SPARTAN6 == 1 || $CONFIG_BOARD_ML505 == 1) && ($CONFIG_PCIEXP_MASTER_TARGET == 1 || $CONFIG_PCIEXP_MASTER_FIFO == 1) && ($CONFIG_SYN_VIRTEX6 == 1) && ($CONFIG_PCIEXP_MASTER_TARGET == 1)} then {
+	if { $tmpvar_32 == "1" } then { write_tristate $cfg $autocfg CONFIG_LANE_WIDTH1 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_LANE_WIDTH1 0 [list $notmod] 2 }
+	if { $tmpvar_32 == "2" } then { write_tristate $cfg $autocfg CONFIG_LANE_WIDTH2 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_LANE_WIDTH2 0 [list $notmod] 2 }
+	if { $tmpvar_32 == "4" } then { write_tristate $cfg $autocfg CONFIG_LANE_WIDTH4 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_LANE_WIDTH4 0 [list $notmod] 2 }
+	if { $tmpvar_32 == "8" } then { write_tristate $cfg $autocfg CONFIG_LANE_WIDTH8 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_LANE_WIDTH8 0 [list $notmod] 2 }}
+	global tmpvar_33
+	if {($CONFIG_SYN_VIRTEX6 == 1 || $CONFIG_SYN_SPARTAN6 == 1 || $CONFIG_BOARD_ML505 == 1) && ($CONFIG_PCIEXP_MASTER_TARGET == 1 || $CONFIG_PCIEXP_MASTER_FIFO == 1) && ($CONFIG_SYN_VIRTEX6 == 1) && ($CONFIG_PCIEXP_MASTER_FIFO == 1)} then {
+	if { $tmpvar_33 == "1" } then { write_tristate $cfg $autocfg CONFIG_LANE_WIDTH1 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_LANE_WIDTH1 0 [list $notmod] 2 }
+	if { $tmpvar_33 == "2" } then { write_tristate $cfg $autocfg CONFIG_LANE_WIDTH2 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_LANE_WIDTH2 0 [list $notmod] 2 }
+	if { $tmpvar_33 == "4" } then { write_tristate $cfg $autocfg CONFIG_LANE_WIDTH4 1 [list $notmod] 2 } else { write_tristate $cfg $autocfg CONFIG_LANE_WIDTH4 0 [list $notmod] 2 }}
+	write_comment $cfg $autocfg "VHDL Debugging        "
+	global CONFIG_DEBUG_UART
+	write_tristate $cfg $autocfg CONFIG_DEBUG_UART $CONFIG_DEBUG_UART [list $notmod] 2
+	close $cfg
+	close $autocfg
+}
+
+
+proc clear_choices { } {
+	global CONFIG_SYN_INFERRED; set CONFIG_SYN_INFERRED 0
+	global CONFIG_SYN_STRATIX; set CONFIG_SYN_STRATIX 0
+	global CONFIG_SYN_STRATIXII; set CONFIG_SYN_STRATIXII 0
+	global CONFIG_SYN_STRATIXIII; set CONFIG_SYN_STRATIXIII 0
+	global CONFIG_SYN_STRATIXIV; set CONFIG_SYN_STRATIXIV 0
+	global CONFIG_SYN_CYCLONEIII; set CONFIG_SYN_CYCLONEIII 0
+	global CONFIG_SYN_ALTERA; set CONFIG_SYN_ALTERA 0
+	global CONFIG_SYN_AXCEL; set CONFIG_SYN_AXCEL 0
+	global CONFIG_SYN_AXDSP; set CONFIG_SYN_AXDSP 0
+	global CONFIG_SYN_PROASIC; set CONFIG_SYN_PROASIC 0
+	global CONFIG_SYN_PROASICPLUS; set CONFIG_SYN_PROASICPLUS 0
+	global CONFIG_SYN_PROASIC3; set CONFIG_SYN_PROASIC3 0
+	global CONFIG_SYN_PROASIC3E; set CONFIG_SYN_PROASIC3E 0
+	global CONFIG_SYN_PROASIC3L; set CONFIG_SYN_PROASIC3L 0
+	global CONFIG_SYN_IGLOO; set CONFIG_SYN_IGLOO 0
+	global CONFIG_SYN_FUSION; set CONFIG_SYN_FUSION 0
+	global CONFIG_SYN_UT025CRH; set CONFIG_SYN_UT025CRH 0
+	global CONFIG_SYN_UT130HBD; set CONFIG_SYN_UT130HBD 0
+	global CONFIG_SYN_UT90NHBD; set CONFIG_SYN_UT90NHBD 0
+	global CONFIG_SYN_ATC18; set CONFIG_SYN_ATC18 0
+	global CONFIG_SYN_ATC18RHA; set CONFIG_SYN_ATC18RHA 0
+	global CONFIG_SYN_CMOS9SF; set CONFIG_SYN_CMOS9SF 0
+	global CONFIG_SYN_CUSTOM1; set CONFIG_SYN_CUSTOM1 0
+	global CONFIG_SYN_EASIC90; set CONFIG_SYN_EASIC90 0
+	global CONFIG_SYN_EASIC45; set CONFIG_SYN_EASIC45 0
+	global CONFIG_SYN_IHP25; set CONFIG_SYN_IHP25 0
+	global CONFIG_SYN_IHP25RH; set CONFIG_SYN_IHP25RH 0
+	global CONFIG_SYN_LATTICE; set CONFIG_SYN_LATTICE 0
+	global CONFIG_SYN_ECLIPSE; set CONFIG_SYN_ECLIPSE 0
+	global CONFIG_SYN_PEREGRINE; set CONFIG_SYN_PEREGRINE 0
+	global CONFIG_SYN_RH_LIB18T; set CONFIG_SYN_RH_LIB18T 0
+	global CONFIG_SYN_RHUMC; set CONFIG_SYN_RHUMC 0
+	global CONFIG_SYN_SAED32; set CONFIG_SYN_SAED32 0
+	global CONFIG_SYN_DARE; set CONFIG_SYN_DARE 0
+	global CONFIG_SYN_SMIC13; set CONFIG_SYN_SMIC13 0
+	global CONFIG_SYN_TM65GPLUS; set CONFIG_SYN_TM65GPLUS 0
+	global CONFIG_SYN_TSMC90; set CONFIG_SYN_TSMC90 0
+	global CONFIG_SYN_UMC; set CONFIG_SYN_UMC 0
+	global CONFIG_SYN_ARTIX7; set CONFIG_SYN_ARTIX7 0
+	global CONFIG_SYN_KINTEX7; set CONFIG_SYN_KINTEX7 0
+	global CONFIG_SYN_SPARTAN3; set CONFIG_SYN_SPARTAN3 0
+	global CONFIG_SYN_SPARTAN3E; set CONFIG_SYN_SPARTAN3E 0
+	global CONFIG_SYN_SPARTAN6; set CONFIG_SYN_SPARTAN6 0
+	global CONFIG_SYN_VIRTEXE; set CONFIG_SYN_VIRTEXE 0
+	global CONFIG_SYN_VIRTEX2; set CONFIG_SYN_VIRTEX2 0
+	global CONFIG_SYN_VIRTEX4; set CONFIG_SYN_VIRTEX4 0
+	global CONFIG_SYN_VIRTEX5; set CONFIG_SYN_VIRTEX5 0
+	global CONFIG_SYN_VIRTEX6; set CONFIG_SYN_VIRTEX6 0
+	global CONFIG_SYN_VIRTEX7; set CONFIG_SYN_VIRTEX7 0
+	global CONFIG_SYN_ZYNQ7000; set CONFIG_SYN_ZYNQ7000 0
+	global CONFIG_MEM_INFERRED; set CONFIG_MEM_INFERRED 0
+	global CONFIG_MEM_UMC; set CONFIG_MEM_UMC 0
+	global CONFIG_MEM_RHUMC; set CONFIG_MEM_RHUMC 0
+	global CONFIG_MEM_SAED32; set CONFIG_MEM_SAED32 0
+	global CONFIG_MEM_DARE; set CONFIG_MEM_DARE 0
+	global CONFIG_MEM_ARTISAN; set CONFIG_MEM_ARTISAN 0
+	global CONFIG_MEM_CUSTOM1; set CONFIG_MEM_CUSTOM1 0
+	global CONFIG_MEM_EASIC45; set CONFIG_MEM_EASIC45 0
+	global CONFIG_MEM_VIRAGE; set CONFIG_MEM_VIRAGE 0
+	global CONFIG_MEM_VIRAGE90; set CONFIG_MEM_VIRAGE90 0
+	global CONFIG_FREQ60; set CONFIG_FREQ60 0
+	global CONFIG_FREQ75; set CONFIG_FREQ75 0
+	global CONFIG_FREQ80; set CONFIG_FREQ80 0
+	global CONFIG_FREQ100; set CONFIG_FREQ100 0
+	global CONFIG_FREQ120; set CONFIG_FREQ120 0
+	global CONFIG_LEON3_MIN; set CONFIG_LEON3_MIN 0
+	global CONFIG_LEON3_GP; set CONFIG_LEON3_GP 0
+	global CONFIG_LEON3_HP; set CONFIG_LEON3_HP 0
+	global CONFIG_LEON3_CUSTOM; set CONFIG_LEON3_CUSTOM 0
+	global CONFIG_IU_MUL_LATENCY_2; set CONFIG_IU_MUL_LATENCY_2 0
+	global CONFIG_IU_MUL_LATENCY_4; set CONFIG_IU_MUL_LATENCY_4 0
+	global CONFIG_IU_MUL_LATENCY_5; set CONFIG_IU_MUL_LATENCY_5 0
+	global CONFIG_IU_MUL_INFERRED; set CONFIG_IU_MUL_INFERRED 0
+	global CONFIG_IU_MUL_MODGEN; set CONFIG_IU_MUL_MODGEN 0
+	global CONFIG_IU_MUL_TECHSPEC; set CONFIG_IU_MUL_TECHSPEC 0
+	global CONFIG_IU_MUL_DW; set CONFIG_IU_MUL_DW 0
+	global CONFIG_FPU_GRFPU; set CONFIG_FPU_GRFPU 0
+	global CONFIG_FPU_GRFPULITE; set CONFIG_FPU_GRFPULITE 0
+	global CONFIG_FPU_MEIKO; set CONFIG_FPU_MEIKO 0
+	global CONFIG_FPU_GRFPU_INFMUL; set CONFIG_FPU_GRFPU_INFMUL 0
+	global CONFIG_FPU_GRFPU_DWMUL; set CONFIG_FPU_GRFPU_DWMUL 0
+	global CONFIG_FPU_GRFPU_MODGEN; set CONFIG_FPU_GRFPU_MODGEN 0
+	global CONFIG_FPU_GRFPU_TECHSPEC; set CONFIG_FPU_GRFPU_TECHSPEC 0
+	global CONFIG_FPU_GRFPC0; set CONFIG_FPU_GRFPC0 0
+	global CONFIG_FPU_GRFPC1; set CONFIG_FPU_GRFPC1 0
+	global CONFIG_FPU_GRFPC2; set CONFIG_FPU_GRFPC2 0
+	global CONFIG_ICACHE_ASSO1; set CONFIG_ICACHE_ASSO1 0
+	global CONFIG_ICACHE_ASSO2; set CONFIG_ICACHE_ASSO2 0
+	global CONFIG_ICACHE_ASSO3; set CONFIG_ICACHE_ASSO3 0
+	global CONFIG_ICACHE_ASSO4; set CONFIG_ICACHE_ASSO4 0
+	global CONFIG_ICACHE_SZ1; set CONFIG_ICACHE_SZ1 0
+	global CONFIG_ICACHE_SZ2; set CONFIG_ICACHE_SZ2 0
+	global CONFIG_ICACHE_SZ4; set CONFIG_ICACHE_SZ4 0
+	global CONFIG_ICACHE_SZ8; set CONFIG_ICACHE_SZ8 0
+	global CONFIG_ICACHE_SZ16; set CONFIG_ICACHE_SZ16 0
+	global CONFIG_ICACHE_SZ32; set CONFIG_ICACHE_SZ32 0
+	global CONFIG_ICACHE_SZ64; set CONFIG_ICACHE_SZ64 0
+	global CONFIG_ICACHE_SZ128; set CONFIG_ICACHE_SZ128 0
+	global CONFIG_ICACHE_SZ256; set CONFIG_ICACHE_SZ256 0
+	global CONFIG_ICACHE_LZ16; set CONFIG_ICACHE_LZ16 0
+	global CONFIG_ICACHE_LZ32; set CONFIG_ICACHE_LZ32 0
+	global CONFIG_ICACHE_ALGORND; set CONFIG_ICACHE_ALGORND 0
+	global CONFIG_ICACHE_ALGODIR; set CONFIG_ICACHE_ALGODIR 0
+	global CONFIG_ICACHE_ALGOLRR; set CONFIG_ICACHE_ALGOLRR 0
+	global CONFIG_ICACHE_ALGOLRU; set CONFIG_ICACHE_ALGOLRU 0
+	global CONFIG_ICACHE_LRAM_SZ1; set CONFIG_ICACHE_LRAM_SZ1 0
+	global CONFIG_ICACHE_LRAM_SZ2; set CONFIG_ICACHE_LRAM_SZ2 0
+	global CONFIG_ICACHE_LRAM_SZ4; set CONFIG_ICACHE_LRAM_SZ4 0
+	global CONFIG_ICACHE_LRAM_SZ8; set CONFIG_ICACHE_LRAM_SZ8 0
+	global CONFIG_ICACHE_LRAM_SZ16; set CONFIG_ICACHE_LRAM_SZ16 0
+	global CONFIG_ICACHE_LRAM_SZ32; set CONFIG_ICACHE_LRAM_SZ32 0
+	global CONFIG_ICACHE_LRAM_SZ64; set CONFIG_ICACHE_LRAM_SZ64 0
+	global CONFIG_ICACHE_LRAM_SZ128; set CONFIG_ICACHE_LRAM_SZ128 0
+	global CONFIG_ICACHE_LRAM_SZ256; set CONFIG_ICACHE_LRAM_SZ256 0
+	global CONFIG_DCACHE_ASSO1; set CONFIG_DCACHE_ASSO1 0
+	global CONFIG_DCACHE_ASSO2; set CONFIG_DCACHE_ASSO2 0
+	global CONFIG_DCACHE_ASSO3; set CONFIG_DCACHE_ASSO3 0
+	global CONFIG_DCACHE_ASSO4; set CONFIG_DCACHE_ASSO4 0
+	global CONFIG_DCACHE_SZ1; set CONFIG_DCACHE_SZ1 0
+	global CONFIG_DCACHE_SZ2; set CONFIG_DCACHE_SZ2 0
+	global CONFIG_DCACHE_SZ4; set CONFIG_DCACHE_SZ4 0
+	global CONFIG_DCACHE_SZ8; set CONFIG_DCACHE_SZ8 0
+	global CONFIG_DCACHE_SZ16; set CONFIG_DCACHE_SZ16 0
+	global CONFIG_DCACHE_SZ32; set CONFIG_DCACHE_SZ32 0
+	global CONFIG_DCACHE_SZ64; set CONFIG_DCACHE_SZ64 0
+	global CONFIG_DCACHE_SZ128; set CONFIG_DCACHE_SZ128 0
+	global CONFIG_DCACHE_SZ256; set CONFIG_DCACHE_SZ256 0
+	global CONFIG_DCACHE_LZ16; set CONFIG_DCACHE_LZ16 0
+	global CONFIG_DCACHE_LZ32; set CONFIG_DCACHE_LZ32 0
+	global CONFIG_DCACHE_ALGORND; set CONFIG_DCACHE_ALGORND 0
+	global CONFIG_DCACHE_ALGODIR; set CONFIG_DCACHE_ALGODIR 0
+	global CONFIG_DCACHE_ALGOLRR; set CONFIG_DCACHE_ALGOLRR 0
+	global CONFIG_DCACHE_ALGOLRU; set CONFIG_DCACHE_ALGOLRU 0
+	global CONFIG_DCACHE_LRAM_SZ1; set CONFIG_DCACHE_LRAM_SZ1 0
+	global CONFIG_DCACHE_LRAM_SZ2; set CONFIG_DCACHE_LRAM_SZ2 0
+	global CONFIG_DCACHE_LRAM_SZ4; set CONFIG_DCACHE_LRAM_SZ4 0
+	global CONFIG_DCACHE_LRAM_SZ8; set CONFIG_DCACHE_LRAM_SZ8 0
+	global CONFIG_DCACHE_LRAM_SZ16; set CONFIG_DCACHE_LRAM_SZ16 0
+	global CONFIG_DCACHE_LRAM_SZ32; set CONFIG_DCACHE_LRAM_SZ32 0
+	global CONFIG_DCACHE_LRAM_SZ64; set CONFIG_DCACHE_LRAM_SZ64 0
+	global CONFIG_DCACHE_LRAM_SZ128; set CONFIG_DCACHE_LRAM_SZ128 0
+	global CONFIG_DCACHE_LRAM_SZ256; set CONFIG_DCACHE_LRAM_SZ256 0
+	global CONFIG_MMU_COMBINED; set CONFIG_MMU_COMBINED 0
+	global CONFIG_MMU_SPLIT; set CONFIG_MMU_SPLIT 0
+	global CONFIG_MMU_REPARRAY; set CONFIG_MMU_REPARRAY 0
+	global CONFIG_MMU_REPINCREMENT; set CONFIG_MMU_REPINCREMENT 0
+	global CONFIG_MMU_I2; set CONFIG_MMU_I2 0
+	global CONFIG_MMU_I4; set CONFIG_MMU_I4 0
+	global CONFIG_MMU_I8; set CONFIG_MMU_I8 0
+	global CONFIG_MMU_I16; set CONFIG_MMU_I16 0
+	global CONFIG_MMU_I32; set CONFIG_MMU_I32 0
+	global CONFIG_MMU_I64; set CONFIG_MMU_I64 0
+	global CONFIG_MMU_D2; set CONFIG_MMU_D2 0
+	global CONFIG_MMU_D4; set CONFIG_MMU_D4 0
+	global CONFIG_MMU_D8; set CONFIG_MMU_D8 0
+	global CONFIG_MMU_D16; set CONFIG_MMU_D16 0
+	global CONFIG_MMU_D32; set CONFIG_MMU_D32 0
+	global CONFIG_MMU_D64; set CONFIG_MMU_D64 0
+	global CONFIG_MMU_PAGE_4K; set CONFIG_MMU_PAGE_4K 0
+	global CONFIG_MMU_PAGE_8K; set CONFIG_MMU_PAGE_8K 0
+	global CONFIG_MMU_PAGE_16K; set CONFIG_MMU_PAGE_16K 0
+	global CONFIG_MMU_PAGE_32K; set CONFIG_MMU_PAGE_32K 0
+	global CONFIG_MMU_PAGE_PROG; set CONFIG_MMU_PAGE_PROG 0
+	global CONFIG_DSU_ITRACESZ1; set CONFIG_DSU_ITRACESZ1 0
+	global CONFIG_DSU_ITRACESZ2; set CONFIG_DSU_ITRACESZ2 0
+	global CONFIG_DSU_ITRACESZ4; set CONFIG_DSU_ITRACESZ4 0
+	global CONFIG_DSU_ITRACESZ8; set CONFIG_DSU_ITRACESZ8 0
+	global CONFIG_DSU_ITRACESZ16; set CONFIG_DSU_ITRACESZ16 0
+	global CONFIG_DSU_ATRACESZ1; set CONFIG_DSU_ATRACESZ1 0
+	global CONFIG_DSU_ATRACESZ2; set CONFIG_DSU_ATRACESZ2 0
+	global CONFIG_DSU_ATRACESZ4; set CONFIG_DSU_ATRACESZ4 0
+	global CONFIG_DSU_ATRACESZ8; set CONFIG_DSU_ATRACESZ8 0
+	global CONFIG_DSU_ATRACESZ16; set CONFIG_DSU_ATRACESZ16 0
+	global CONFIG_IUFT_NONE; set CONFIG_IUFT_NONE 0
+	global CONFIG_IUFT_PAR; set CONFIG_IUFT_PAR 0
+	global CONFIG_IUFT_DMR; set CONFIG_IUFT_DMR 0
+	global CONFIG_IUFT_BCH; set CONFIG_IUFT_BCH 0
+	global CONFIG_IUFT_TMR; set CONFIG_IUFT_TMR 0
+	global CONFIG_FPUFT_NONE; set CONFIG_FPUFT_NONE 0
+	global CONFIG_FPUFT_PAR; set CONFIG_FPUFT_PAR 0
+	global CONFIG_FPUFT_DMR; set CONFIG_FPUFT_DMR 0
+	global CONFIG_FPUFT_TMR; set CONFIG_FPUFT_TMR 0
+	global CONFIG_DSU_ETHSZ1; set CONFIG_DSU_ETHSZ1 0
+	global CONFIG_DSU_ETHSZ2; set CONFIG_DSU_ETHSZ2 0
+	global CONFIG_DSU_ETHSZ4; set CONFIG_DSU_ETHSZ4 0
+	global CONFIG_DSU_ETHSZ8; set CONFIG_DSU_ETHSZ8 0
+	global CONFIG_DSU_ETHSZ16; set CONFIG_DSU_ETHSZ16 0
+	global CONFIG_AHBRAM_SZ1; set CONFIG_AHBRAM_SZ1 0
+	global CONFIG_AHBRAM_SZ2; set CONFIG_AHBRAM_SZ2 0
+	global CONFIG_AHBRAM_SZ4; set CONFIG_AHBRAM_SZ4 0
+	global CONFIG_AHBRAM_SZ8; set CONFIG_AHBRAM_SZ8 0
+	global CONFIG_AHBRAM_SZ16; set CONFIG_AHBRAM_SZ16 0
+	global CONFIG_AHBRAM_SZ32; set CONFIG_AHBRAM_SZ32 0
+	global CONFIG_AHBRAM_SZ64; set CONFIG_AHBRAM_SZ64 0
+	global CONFIG_AHBRAM_SZ128; set CONFIG_AHBRAM_SZ128 0
+	global CONFIG_AHBRAM_SZ256; set CONFIG_AHBRAM_SZ256 0
+	global CONFIG_AHBRAM_SZ512; set CONFIG_AHBRAM_SZ512 0
+	global CONFIG_AHBRAM_SZ1024; set CONFIG_AHBRAM_SZ1024 0
+	global CONFIG_AHBRAM_SZ2048; set CONFIG_AHBRAM_SZ2048 0
+	global CONFIG_AHBRAM_SZ4096; set CONFIG_AHBRAM_SZ4096 0
+	global CONFIG_GRETH_FIFO4; set CONFIG_GRETH_FIFO4 0
+	global CONFIG_GRETH_FIFO8; set CONFIG_GRETH_FIFO8 0
+	global CONFIG_GRETH_FIFO16; set CONFIG_GRETH_FIFO16 0
+	global CONFIG_GRETH_FIFO32; set CONFIG_GRETH_FIFO32 0
+	global CONFIG_GRETH_FIFO64; set CONFIG_GRETH_FIFO64 0
+	global CONFIG_UA1_FIFO1; set CONFIG_UA1_FIFO1 0
+	global CONFIG_UA1_FIFO2; set CONFIG_UA1_FIFO2 0
+	global CONFIG_UA1_FIFO4; set CONFIG_UA1_FIFO4 0
+	global CONFIG_UA1_FIFO8; set CONFIG_UA1_FIFO8 0
+	global CONFIG_UA1_FIFO16; set CONFIG_UA1_FIFO16 0
+	global CONFIG_UA1_FIFO32; set CONFIG_UA1_FIFO32 0
+	global CONFIG_LANE_WIDTH1; set CONFIG_LANE_WIDTH1 0
+	global CONFIG_LANE_WIDTH2; set CONFIG_LANE_WIDTH2 0
+	global CONFIG_LANE_WIDTH4; set CONFIG_LANE_WIDTH4 0
+	global CONFIG_LANE_WIDTH8; set CONFIG_LANE_WIDTH8 0
+	global CONFIG_LANE_WIDTH1; set CONFIG_LANE_WIDTH1 0
+	global CONFIG_LANE_WIDTH2; set CONFIG_LANE_WIDTH2 0
+	global CONFIG_LANE_WIDTH4; set CONFIG_LANE_WIDTH4 0
+}
+
+
+proc update_choices { } {
+	global tmpvar_0
+	set tmpvar_0 "Inferred"
+	global CONFIG_SYN_INFERRED
+	if { $CONFIG_SYN_INFERRED == 1 } then { set tmpvar_0 "Inferred" }
+	global CONFIG_SYN_STRATIX
+	if { $CONFIG_SYN_STRATIX == 1 } then { set tmpvar_0 "Altera-Stratix" }
+	global CONFIG_SYN_STRATIXII
+	if { $CONFIG_SYN_STRATIXII == 1 } then { set tmpvar_0 "Altera-StratixII" }
+	global CONFIG_SYN_STRATIXIII
+	if { $CONFIG_SYN_STRATIXIII == 1 } then { set tmpvar_0 "Altera-StratixIII" }
+	global CONFIG_SYN_STRATIXIV
+	if { $CONFIG_SYN_STRATIXIV == 1 } then { set tmpvar_0 "Altera-StratixIV" }
+	global CONFIG_SYN_CYCLONEIII
+	if { $CONFIG_SYN_CYCLONEIII == 1 } then { set tmpvar_0 "Altera-CycloneIII" }
+	global CONFIG_SYN_ALTERA
+	if { $CONFIG_SYN_ALTERA == 1 } then { set tmpvar_0 "Altera-Others" }
+	global CONFIG_SYN_AXCEL
+	if { $CONFIG_SYN_AXCEL == 1 } then { set tmpvar_0 "Actel-Axcelerator" }
+	global CONFIG_SYN_AXDSP
+	if { $CONFIG_SYN_AXDSP == 1 } then { set tmpvar_0 "Actel-Axcelerator-DSP" }
+	global CONFIG_SYN_PROASIC
+	if { $CONFIG_SYN_PROASIC == 1 } then { set tmpvar_0 "Actel-Proasic" }
+	global CONFIG_SYN_PROASICPLUS
+	if { $CONFIG_SYN_PROASICPLUS == 1 } then { set tmpvar_0 "Actel-ProasicPlus" }
+	global CONFIG_SYN_PROASIC3
+	if { $CONFIG_SYN_PROASIC3 == 1 } then { set tmpvar_0 "Actel-Proasic3" }
+	global CONFIG_SYN_PROASIC3E
+	if { $CONFIG_SYN_PROASIC3E == 1 } then { set tmpvar_0 "Actel-Proasic3E" }
+	global CONFIG_SYN_PROASIC3L
+	if { $CONFIG_SYN_PROASIC3L == 1 } then { set tmpvar_0 "Actel-Proasic3L" }
+	global CONFIG_SYN_IGLOO
+	if { $CONFIG_SYN_IGLOO == 1 } then { set tmpvar_0 "Actel-IGLOO/p/L" }
+	global CONFIG_SYN_FUSION
+	if { $CONFIG_SYN_FUSION == 1 } then { set tmpvar_0 "Actel-Fusion" }
+	global CONFIG_SYN_UT025CRH
+	if { $CONFIG_SYN_UT025CRH == 1 } then { set tmpvar_0 "Aeroflex-UT025CRH" }
+	global CONFIG_SYN_UT130HBD
+	if { $CONFIG_SYN_UT130HBD == 1 } then { set tmpvar_0 "Aeroflex-UT130HBD" }
+	global CONFIG_SYN_UT90NHBD
+	if { $CONFIG_SYN_UT90NHBD == 1 } then { set tmpvar_0 "Aeroflex-UT90NHBD" }
+	global CONFIG_SYN_ATC18
+	if { $CONFIG_SYN_ATC18 == 1 } then { set tmpvar_0 "Atmel-ATC18" }
+	global CONFIG_SYN_ATC18RHA
+	if { $CONFIG_SYN_ATC18RHA == 1 } then { set tmpvar_0 "Atmel-ATC18RHA" }
+	global CONFIG_SYN_CMOS9SF
+	if { $CONFIG_SYN_CMOS9SF == 1 } then { set tmpvar_0 "IBM-CMOS9SF" }
+	global CONFIG_SYN_CUSTOM1
+	if { $CONFIG_SYN_CUSTOM1 == 1 } then { set tmpvar_0 "Custom1" }
+	global CONFIG_SYN_EASIC90
+	if { $CONFIG_SYN_EASIC90 == 1 } then { set tmpvar_0 "eASIC90" }
+	global CONFIG_SYN_EASIC45
+	if { $CONFIG_SYN_EASIC45 == 1 } then { set tmpvar_0 "eASIC45" }
+	global CONFIG_SYN_IHP25
+	if { $CONFIG_SYN_IHP25 == 1 } then { set tmpvar_0 "IHP25" }
+	global CONFIG_SYN_IHP25RH
+	if { $CONFIG_SYN_IHP25RH == 1 } then { set tmpvar_0 "IHP25RH" }
+	global CONFIG_SYN_LATTICE
+	if { $CONFIG_SYN_LATTICE == 1 } then { set tmpvar_0 "Lattice-EC/ECP/XP" }
+	global CONFIG_SYN_ECLIPSE
+	if { $CONFIG_SYN_ECLIPSE == 1 } then { set tmpvar_0 "Quicklogic-Eclipse" }
+	global CONFIG_SYN_PEREGRINE
+	if { $CONFIG_SYN_PEREGRINE == 1 } then { set tmpvar_0 "Peregrine" }
+	global CONFIG_SYN_RH_LIB18T
+	if { $CONFIG_SYN_RH_LIB18T == 1 } then { set tmpvar_0 "RH-LIB18T" }
+	global CONFIG_SYN_RHUMC
+	if { $CONFIG_SYN_RHUMC == 1 } then { set tmpvar_0 "RH-UMC" }
+	global CONFIG_SYN_SAED32
+	if { $CONFIG_SYN_SAED32 == 1 } then { set tmpvar_0 "SAED32" }
+	global CONFIG_SYN_DARE
+	if { $CONFIG_SYN_DARE == 1 } then { set tmpvar_0 "DARE" }
+	global CONFIG_SYN_SMIC13
+	if { $CONFIG_SYN_SMIC13 == 1 } then { set tmpvar_0 "SMIC130" }
+	global CONFIG_SYN_TM65GPLUS
+	if { $CONFIG_SYN_TM65GPLUS == 1 } then { set tmpvar_0 "TM65Gplus" }
+	global CONFIG_SYN_TSMC90
+	if { $CONFIG_SYN_TSMC90 == 1 } then { set tmpvar_0 "TSMC90" }
+	global CONFIG_SYN_UMC
+	if { $CONFIG_SYN_UMC == 1 } then { set tmpvar_0 "UMC180" }
+	global CONFIG_SYN_ARTIX7
+	if { $CONFIG_SYN_ARTIX7 == 1 } then { set tmpvar_0 "Xilinx-Artix7" }
+	global CONFIG_SYN_KINTEX7
+	if { $CONFIG_SYN_KINTEX7 == 1 } then { set tmpvar_0 "Xilinx-Kintex7" }
+	global CONFIG_SYN_SPARTAN3
+	if { $CONFIG_SYN_SPARTAN3 == 1 } then { set tmpvar_0 "Xilinx-Spartan3" }
+	global CONFIG_SYN_SPARTAN3E
+	if { $CONFIG_SYN_SPARTAN3E == 1 } then { set tmpvar_0 "Xilinx-Spartan3E" }
+	global CONFIG_SYN_SPARTAN6
+	if { $CONFIG_SYN_SPARTAN6 == 1 } then { set tmpvar_0 "Xilinx-Spartan6" }
+	global CONFIG_SYN_VIRTEXE
+	if { $CONFIG_SYN_VIRTEXE == 1 } then { set tmpvar_0 "Xilinx-VirtexE" }
+	global CONFIG_SYN_VIRTEX2
+	if { $CONFIG_SYN_VIRTEX2 == 1 } then { set tmpvar_0 "Xilinx-Virtex2" }
+	global CONFIG_SYN_VIRTEX4
+	if { $CONFIG_SYN_VIRTEX4 == 1 } then { set tmpvar_0 "Xilinx-Virtex4" }
+	global CONFIG_SYN_VIRTEX5
+	if { $CONFIG_SYN_VIRTEX5 == 1 } then { set tmpvar_0 "Xilinx-Virtex5" }
+	global CONFIG_SYN_VIRTEX6
+	if { $CONFIG_SYN_VIRTEX6 == 1 } then { set tmpvar_0 "Xilinx-Virtex6" }
+	global CONFIG_SYN_VIRTEX7
+	if { $CONFIG_SYN_VIRTEX7 == 1 } then { set tmpvar_0 "Xilinx-Virtex7" }
+	global CONFIG_SYN_ZYNQ7000
+	if { $CONFIG_SYN_ZYNQ7000 == 1 } then { set tmpvar_0 "Xilinx-Zynq7000" }
+	global tmpvar_1
+	set tmpvar_1 "Inferred"
+	global CONFIG_MEM_INFERRED
+	if { $CONFIG_MEM_INFERRED == 1 } then { set tmpvar_1 "Inferred" }
+	global CONFIG_MEM_UMC
+	if { $CONFIG_MEM_UMC == 1 } then { set tmpvar_1 "UMC18" }
+	global CONFIG_MEM_RHUMC
+	if { $CONFIG_MEM_RHUMC == 1 } then { set tmpvar_1 "RH-UMC" }
+	global CONFIG_MEM_SAED32
+	if { $CONFIG_MEM_SAED32 == 1 } then { set tmpvar_1 "SAED32" }
+	global CONFIG_MEM_DARE
+	if { $CONFIG_MEM_DARE == 1 } then { set tmpvar_1 "DARE" }
+	global CONFIG_MEM_ARTISAN
+	if { $CONFIG_MEM_ARTISAN == 1 } then { set tmpvar_1 "Artisan" }
+	global CONFIG_MEM_CUSTOM1
+	if { $CONFIG_MEM_CUSTOM1 == 1 } then { set tmpvar_1 "Custom1" }
+	global CONFIG_MEM_EASIC45
+	if { $CONFIG_MEM_EASIC45 == 1 } then { set tmpvar_1 "EASIC45" }
+	global CONFIG_MEM_VIRAGE
+	if { $CONFIG_MEM_VIRAGE == 1 } then { set tmpvar_1 "Virage" }
+	global CONFIG_MEM_VIRAGE90
+	if { $CONFIG_MEM_VIRAGE90 == 1 } then { set tmpvar_1 "Virage-TSMC90" }
+	global tmpvar_2
+	set tmpvar_2 "80MHz"
+	global CONFIG_FREQ60
+	if { $CONFIG_FREQ60 == 1 } then { set tmpvar_2 "60MHz" }
+	global CONFIG_FREQ75
+	if { $CONFIG_FREQ75 == 1 } then { set tmpvar_2 "75MHz" }
+	global CONFIG_FREQ80
+	if { $CONFIG_FREQ80 == 1 } then { set tmpvar_2 "80MHz" }
+	global CONFIG_FREQ100
+	if { $CONFIG_FREQ100 == 1 } then { set tmpvar_2 "100MHz" }
+	global CONFIG_FREQ120
+	if { $CONFIG_FREQ120 == 1 } then { set tmpvar_2 "120MHz" }
+	global tmpvar_3
+	set tmpvar_3 "Custom-configuration"
+	global CONFIG_LEON3_MIN
+	if { $CONFIG_LEON3_MIN == 1 } then { set tmpvar_3 "Minimal-configuration" }
+	global CONFIG_LEON3_GP
+	if { $CONFIG_LEON3_GP == 1 } then { set tmpvar_3 "General-purpose-cfg" }
+	global CONFIG_LEON3_HP
+	if { $CONFIG_LEON3_HP == 1 } then { set tmpvar_3 "High-Performance-cfg" }
+	global CONFIG_LEON3_CUSTOM
+	if { $CONFIG_LEON3_CUSTOM == 1 } then { set tmpvar_3 "Custom-configuration" }
+	global tmpvar_4
+	set tmpvar_4 "5-cycles"
+	global CONFIG_IU_MUL_LATENCY_2
+	if { $CONFIG_IU_MUL_LATENCY_2 == 1 } then { set tmpvar_4 "2-cycles" }
+	global CONFIG_IU_MUL_LATENCY_4
+	if { $CONFIG_IU_MUL_LATENCY_4 == 1 } then { set tmpvar_4 "4-cycles" }
+	global CONFIG_IU_MUL_LATENCY_5
+	if { $CONFIG_IU_MUL_LATENCY_5 == 1 } then { set tmpvar_4 "5-cycles" }
+	global tmpvar_5
+	set tmpvar_5 "Inferred"
+	global CONFIG_IU_MUL_INFERRED
+	if { $CONFIG_IU_MUL_INFERRED == 1 } then { set tmpvar_5 "Inferred" }
+	global CONFIG_IU_MUL_MODGEN
+	if { $CONFIG_IU_MUL_MODGEN == 1 } then { set tmpvar_5 "NTNU_Modgen" }
+	global CONFIG_IU_MUL_TECHSPEC
+	if { $CONFIG_IU_MUL_TECHSPEC == 1 } then { set tmpvar_5 "TechSpec" }
+	global CONFIG_IU_MUL_DW
+	if { $CONFIG_IU_MUL_DW == 1 } then { set tmpvar_5 "Designware" }
+	global tmpvar_6
+	set tmpvar_6 "GRFPU"
+	global CONFIG_FPU_GRFPU
+	if { $CONFIG_FPU_GRFPU == 1 } then { set tmpvar_6 "GRFPU" }
+	global CONFIG_FPU_GRFPULITE
+	if { $CONFIG_FPU_GRFPULITE == 1 } then { set tmpvar_6 "GRFPU-LITE" }
+	global CONFIG_FPU_MEIKO
+	if { $CONFIG_FPU_MEIKO == 1 } then { set tmpvar_6 "Meiko" }
+	global tmpvar_7
+	set tmpvar_7 "Inferred"
+	global CONFIG_FPU_GRFPU_INFMUL
+	if { $CONFIG_FPU_GRFPU_INFMUL == 1 } then { set tmpvar_7 "Inferred" }
+	global CONFIG_FPU_GRFPU_DWMUL
+	if { $CONFIG_FPU_GRFPU_DWMUL == 1 } then { set tmpvar_7 "DW" }
+	global CONFIG_FPU_GRFPU_MODGEN
+	if { $CONFIG_FPU_GRFPU_MODGEN == 1 } then { set tmpvar_7 "ModGen" }
+	global CONFIG_FPU_GRFPU_TECHSPEC
+	if { $CONFIG_FPU_GRFPU_TECHSPEC == 1 } then { set tmpvar_7 "TechSpec" }
+	global tmpvar_8
+	set tmpvar_8 "Simple"
+	global CONFIG_FPU_GRFPC0
+	if { $CONFIG_FPU_GRFPC0 == 1 } then { set tmpvar_8 "Simple" }
+	global CONFIG_FPU_GRFPC1
+	if { $CONFIG_FPU_GRFPC1 == 1 } then { set tmpvar_8 "Data-forwarding" }
+	global CONFIG_FPU_GRFPC2
+	if { $CONFIG_FPU_GRFPC2 == 1 } then { set tmpvar_8 "Non-blocking" }
+	global tmpvar_9
+	set tmpvar_9 "1"
+	global CONFIG_ICACHE_ASSO1
+	if { $CONFIG_ICACHE_ASSO1 == 1 } then { set tmpvar_9 "1" }
+	global CONFIG_ICACHE_ASSO2
+	if { $CONFIG_ICACHE_ASSO2 == 1 } then { set tmpvar_9 "2" }
+	global CONFIG_ICACHE_ASSO3
+	if { $CONFIG_ICACHE_ASSO3 == 1 } then { set tmpvar_9 "3" }
+	global CONFIG_ICACHE_ASSO4
+	if { $CONFIG_ICACHE_ASSO4 == 1 } then { set tmpvar_9 "4" }
+	global tmpvar_10
+	set tmpvar_10 "4"
+	global CONFIG_ICACHE_SZ1
+	if { $CONFIG_ICACHE_SZ1 == 1 } then { set tmpvar_10 "1" }
+	global CONFIG_ICACHE_SZ2
+	if { $CONFIG_ICACHE_SZ2 == 1 } then { set tmpvar_10 "2" }
+	global CONFIG_ICACHE_SZ4
+	if { $CONFIG_ICACHE_SZ4 == 1 } then { set tmpvar_10 "4" }
+	global CONFIG_ICACHE_SZ8
+	if { $CONFIG_ICACHE_SZ8 == 1 } then { set tmpvar_10 "8" }
+	global CONFIG_ICACHE_SZ16
+	if { $CONFIG_ICACHE_SZ16 == 1 } then { set tmpvar_10 "16" }
+	global CONFIG_ICACHE_SZ32
+	if { $CONFIG_ICACHE_SZ32 == 1 } then { set tmpvar_10 "32" }
+	global CONFIG_ICACHE_SZ64
+	if { $CONFIG_ICACHE_SZ64 == 1 } then { set tmpvar_10 "64" }
+	global CONFIG_ICACHE_SZ128
+	if { $CONFIG_ICACHE_SZ128 == 1 } then { set tmpvar_10 "128" }
+	global CONFIG_ICACHE_SZ256
+	if { $CONFIG_ICACHE_SZ256 == 1 } then { set tmpvar_10 "256" }
+	global tmpvar_11
+	set tmpvar_11 "32"
+	global CONFIG_ICACHE_LZ16
+	if { $CONFIG_ICACHE_LZ16 == 1 } then { set tmpvar_11 "16" }
+	global CONFIG_ICACHE_LZ32
+	if { $CONFIG_ICACHE_LZ32 == 1 } then { set tmpvar_11 "32" }
+	global tmpvar_12
+	set tmpvar_12 "Random"
+	global CONFIG_ICACHE_ALGORND
+	if { $CONFIG_ICACHE_ALGORND == 1 } then { set tmpvar_12 "Random" }
+	global CONFIG_ICACHE_ALGODIR
+	if { $CONFIG_ICACHE_ALGODIR == 1 } then { set tmpvar_12 "Direct" }
+	global CONFIG_ICACHE_ALGOLRR
+	if { $CONFIG_ICACHE_ALGOLRR == 1 } then { set tmpvar_12 "LRR" }
+	global CONFIG_ICACHE_ALGOLRU
+	if { $CONFIG_ICACHE_ALGOLRU == 1 } then { set tmpvar_12 "LRU" }
+	global tmpvar_13
+	set tmpvar_13 "4"
+	global CONFIG_ICACHE_LRAM_SZ1
+	if { $CONFIG_ICACHE_LRAM_SZ1 == 1 } then { set tmpvar_13 "1" }
+	global CONFIG_ICACHE_LRAM_SZ2
+	if { $CONFIG_ICACHE_LRAM_SZ2 == 1 } then { set tmpvar_13 "2" }
+	global CONFIG_ICACHE_LRAM_SZ4
+	if { $CONFIG_ICACHE_LRAM_SZ4 == 1 } then { set tmpvar_13 "4" }
+	global CONFIG_ICACHE_LRAM_SZ8
+	if { $CONFIG_ICACHE_LRAM_SZ8 == 1 } then { set tmpvar_13 "8" }
+	global CONFIG_ICACHE_LRAM_SZ16
+	if { $CONFIG_ICACHE_LRAM_SZ16 == 1 } then { set tmpvar_13 "16" }
+	global CONFIG_ICACHE_LRAM_SZ32
+	if { $CONFIG_ICACHE_LRAM_SZ32 == 1 } then { set tmpvar_13 "32" }
+	global CONFIG_ICACHE_LRAM_SZ64
+	if { $CONFIG_ICACHE_LRAM_SZ64 == 1 } then { set tmpvar_13 "64" }
+	global CONFIG_ICACHE_LRAM_SZ128
+	if { $CONFIG_ICACHE_LRAM_SZ128 == 1 } then { set tmpvar_13 "128" }
+	global CONFIG_ICACHE_LRAM_SZ256
+	if { $CONFIG_ICACHE_LRAM_SZ256 == 1 } then { set tmpvar_13 "256" }
+	global tmpvar_14
+	set tmpvar_14 "1"
+	global CONFIG_DCACHE_ASSO1
+	if { $CONFIG_DCACHE_ASSO1 == 1 } then { set tmpvar_14 "1" }
+	global CONFIG_DCACHE_ASSO2
+	if { $CONFIG_DCACHE_ASSO2 == 1 } then { set tmpvar_14 "2" }
+	global CONFIG_DCACHE_ASSO3
+	if { $CONFIG_DCACHE_ASSO3 == 1 } then { set tmpvar_14 "3" }
+	global CONFIG_DCACHE_ASSO4
+	if { $CONFIG_DCACHE_ASSO4 == 1 } then { set tmpvar_14 "4" }
+	global tmpvar_15
+	set tmpvar_15 "4"
+	global CONFIG_DCACHE_SZ1
+	if { $CONFIG_DCACHE_SZ1 == 1 } then { set tmpvar_15 "1" }
+	global CONFIG_DCACHE_SZ2
+	if { $CONFIG_DCACHE_SZ2 == 1 } then { set tmpvar_15 "2" }
+	global CONFIG_DCACHE_SZ4
+	if { $CONFIG_DCACHE_SZ4 == 1 } then { set tmpvar_15 "4" }
+	global CONFIG_DCACHE_SZ8
+	if { $CONFIG_DCACHE_SZ8 == 1 } then { set tmpvar_15 "8" }
+	global CONFIG_DCACHE_SZ16
+	if { $CONFIG_DCACHE_SZ16 == 1 } then { set tmpvar_15 "16" }
+	global CONFIG_DCACHE_SZ32
+	if { $CONFIG_DCACHE_SZ32 == 1 } then { set tmpvar_15 "32" }
+	global CONFIG_DCACHE_SZ64
+	if { $CONFIG_DCACHE_SZ64 == 1 } then { set tmpvar_15 "64" }
+	global CONFIG_DCACHE_SZ128
+	if { $CONFIG_DCACHE_SZ128 == 1 } then { set tmpvar_15 "128" }
+	global CONFIG_DCACHE_SZ256
+	if { $CONFIG_DCACHE_SZ256 == 1 } then { set tmpvar_15 "256" }
+	global tmpvar_16
+	set tmpvar_16 "32"
+	global CONFIG_DCACHE_LZ16
+	if { $CONFIG_DCACHE_LZ16 == 1 } then { set tmpvar_16 "16" }
+	global CONFIG_DCACHE_LZ32
+	if { $CONFIG_DCACHE_LZ32 == 1 } then { set tmpvar_16 "32" }
+	global tmpvar_17
+	set tmpvar_17 "Random"
+	global CONFIG_DCACHE_ALGORND
+	if { $CONFIG_DCACHE_ALGORND == 1 } then { set tmpvar_17 "Random" }
+	global CONFIG_DCACHE_ALGODIR
+	if { $CONFIG_DCACHE_ALGODIR == 1 } then { set tmpvar_17 "Direct" }
+	global CONFIG_DCACHE_ALGOLRR
+	if { $CONFIG_DCACHE_ALGOLRR == 1 } then { set tmpvar_17 "LRR" }
+	global CONFIG_DCACHE_ALGOLRU
+	if { $CONFIG_DCACHE_ALGOLRU == 1 } then { set tmpvar_17 "LRU" }
+	global tmpvar_18
+	set tmpvar_18 "4"
+	global CONFIG_DCACHE_LRAM_SZ1
+	if { $CONFIG_DCACHE_LRAM_SZ1 == 1 } then { set tmpvar_18 "1" }
+	global CONFIG_DCACHE_LRAM_SZ2
+	if { $CONFIG_DCACHE_LRAM_SZ2 == 1 } then { set tmpvar_18 "2" }
+	global CONFIG_DCACHE_LRAM_SZ4
+	if { $CONFIG_DCACHE_LRAM_SZ4 == 1 } then { set tmpvar_18 "4" }
+	global CONFIG_DCACHE_LRAM_SZ8
+	if { $CONFIG_DCACHE_LRAM_SZ8 == 1 } then { set tmpvar_18 "8" }
+	global CONFIG_DCACHE_LRAM_SZ16
+	if { $CONFIG_DCACHE_LRAM_SZ16 == 1 } then { set tmpvar_18 "16" }
+	global CONFIG_DCACHE_LRAM_SZ32
+	if { $CONFIG_DCACHE_LRAM_SZ32 == 1 } then { set tmpvar_18 "32" }
+	global CONFIG_DCACHE_LRAM_SZ64
+	if { $CONFIG_DCACHE_LRAM_SZ64 == 1 } then { set tmpvar_18 "64" }
+	global CONFIG_DCACHE_LRAM_SZ128
+	if { $CONFIG_DCACHE_LRAM_SZ128 == 1 } then { set tmpvar_18 "128" }
+	global CONFIG_DCACHE_LRAM_SZ256
+	if { $CONFIG_DCACHE_LRAM_SZ256 == 1 } then { set tmpvar_18 "256" }
+	global tmpvar_19
+	set tmpvar_19 "combined"
+	global CONFIG_MMU_COMBINED
+	if { $CONFIG_MMU_COMBINED == 1 } then { set tmpvar_19 "combined" }
+	global CONFIG_MMU_SPLIT
+	if { $CONFIG_MMU_SPLIT == 1 } then { set tmpvar_19 "split" }
+	global tmpvar_20
+	set tmpvar_20 "Increment"
+	global CONFIG_MMU_REPARRAY
+	if { $CONFIG_MMU_REPARRAY == 1 } then { set tmpvar_20 "LRU" }
+	global CONFIG_MMU_REPINCREMENT
+	if { $CONFIG_MMU_REPINCREMENT == 1 } then { set tmpvar_20 "Increment" }
+	global tmpvar_21
+	set tmpvar_21 "8"
+	global CONFIG_MMU_I2
+	if { $CONFIG_MMU_I2 == 1 } then { set tmpvar_21 "2" }
+	global CONFIG_MMU_I4
+	if { $CONFIG_MMU_I4 == 1 } then { set tmpvar_21 "4" }
+	global CONFIG_MMU_I8
+	if { $CONFIG_MMU_I8 == 1 } then { set tmpvar_21 "8" }
+	global CONFIG_MMU_I16
+	if { $CONFIG_MMU_I16 == 1 } then { set tmpvar_21 "16" }
+	global CONFIG_MMU_I32
+	if { $CONFIG_MMU_I32 == 1 } then { set tmpvar_21 "32" }
+	global CONFIG_MMU_I64
+	if { $CONFIG_MMU_I64 == 1 } then { set tmpvar_21 "64" }
+	global tmpvar_22
+	set tmpvar_22 "8"
+	global CONFIG_MMU_D2
+	if { $CONFIG_MMU_D2 == 1 } then { set tmpvar_22 "2" }
+	global CONFIG_MMU_D4
+	if { $CONFIG_MMU_D4 == 1 } then { set tmpvar_22 "4" }
+	global CONFIG_MMU_D8
+	if { $CONFIG_MMU_D8 == 1 } then { set tmpvar_22 "8" }
+	global CONFIG_MMU_D16
+	if { $CONFIG_MMU_D16 == 1 } then { set tmpvar_22 "16" }
+	global CONFIG_MMU_D32
+	if { $CONFIG_MMU_D32 == 1 } then { set tmpvar_22 "32" }
+	global CONFIG_MMU_D64
+	if { $CONFIG_MMU_D64 == 1 } then { set tmpvar_22 "64" }
+	global tmpvar_23
+	set tmpvar_23 "4K"
+	global CONFIG_MMU_PAGE_4K
+	if { $CONFIG_MMU_PAGE_4K == 1 } then { set tmpvar_23 "4K" }
+	global CONFIG_MMU_PAGE_8K
+	if { $CONFIG_MMU_PAGE_8K == 1 } then { set tmpvar_23 "8K" }
+	global CONFIG_MMU_PAGE_16K
+	if { $CONFIG_MMU_PAGE_16K == 1 } then { set tmpvar_23 "16K" }
+	global CONFIG_MMU_PAGE_32K
+	if { $CONFIG_MMU_PAGE_32K == 1 } then { set tmpvar_23 "32K" }
+	global CONFIG_MMU_PAGE_PROG
+	if { $CONFIG_MMU_PAGE_PROG == 1 } then { set tmpvar_23 "Programmable" }
+	global tmpvar_24
+	set tmpvar_24 "1"
+	global CONFIG_DSU_ITRACESZ1
+	if { $CONFIG_DSU_ITRACESZ1 == 1 } then { set tmpvar_24 "1" }
+	global CONFIG_DSU_ITRACESZ2
+	if { $CONFIG_DSU_ITRACESZ2 == 1 } then { set tmpvar_24 "2" }
+	global CONFIG_DSU_ITRACESZ4
+	if { $CONFIG_DSU_ITRACESZ4 == 1 } then { set tmpvar_24 "4" }
+	global CONFIG_DSU_ITRACESZ8
+	if { $CONFIG_DSU_ITRACESZ8 == 1 } then { set tmpvar_24 "8" }
+	global CONFIG_DSU_ITRACESZ16
+	if { $CONFIG_DSU_ITRACESZ16 == 1 } then { set tmpvar_24 "16" }
+	global tmpvar_25
+	set tmpvar_25 "1"
+	global CONFIG_DSU_ATRACESZ1
+	if { $CONFIG_DSU_ATRACESZ1 == 1 } then { set tmpvar_25 "1" }
+	global CONFIG_DSU_ATRACESZ2
+	if { $CONFIG_DSU_ATRACESZ2 == 1 } then { set tmpvar_25 "2" }
+	global CONFIG_DSU_ATRACESZ4
+	if { $CONFIG_DSU_ATRACESZ4 == 1 } then { set tmpvar_25 "4" }
+	global CONFIG_DSU_ATRACESZ8
+	if { $CONFIG_DSU_ATRACESZ8 == 1 } then { set tmpvar_25 "8" }
+	global CONFIG_DSU_ATRACESZ16
+	if { $CONFIG_DSU_ATRACESZ16 == 1 } then { set tmpvar_25 "16" }
+	global tmpvar_26
+	set tmpvar_26 "None"
+	global CONFIG_IUFT_NONE
+	if { $CONFIG_IUFT_NONE == 1 } then { set tmpvar_26 "None" }
+	global CONFIG_IUFT_PAR
+	if { $CONFIG_IUFT_PAR == 1 } then { set tmpvar_26 "Parity" }
+	global CONFIG_IUFT_DMR
+	if { $CONFIG_IUFT_DMR == 1 } then { set tmpvar_26 "PDMR" }
+	global CONFIG_IUFT_BCH
+	if { $CONFIG_IUFT_BCH == 1 } then { set tmpvar_26 "BCH" }
+	global CONFIG_IUFT_TMR
+	if { $CONFIG_IUFT_TMR == 1 } then { set tmpvar_26 "TMR" }
+	global tmpvar_27
+	set tmpvar_27 "None"
+	global CONFIG_FPUFT_NONE
+	if { $CONFIG_FPUFT_NONE == 1 } then { set tmpvar_27 "None" }
+	global CONFIG_FPUFT_PAR
+	if { $CONFIG_FPUFT_PAR == 1 } then { set tmpvar_27 "Parity" }
+	global CONFIG_FPUFT_DMR
+	if { $CONFIG_FPUFT_DMR == 1 } then { set tmpvar_27 "PDMR" }
+	global CONFIG_FPUFT_TMR
+	if { $CONFIG_FPUFT_TMR == 1 } then { set tmpvar_27 "TMR" }
+	global tmpvar_28
+	set tmpvar_28 "2"
+	global CONFIG_DSU_ETHSZ1
+	if { $CONFIG_DSU_ETHSZ1 == 1 } then { set tmpvar_28 "1" }
+	global CONFIG_DSU_ETHSZ2
+	if { $CONFIG_DSU_ETHSZ2 == 1 } then { set tmpvar_28 "2" }
+	global CONFIG_DSU_ETHSZ4
+	if { $CONFIG_DSU_ETHSZ4 == 1 } then { set tmpvar_28 "4" }
+	global CONFIG_DSU_ETHSZ8
+	if { $CONFIG_DSU_ETHSZ8 == 1 } then { set tmpvar_28 "8" }
+	global CONFIG_DSU_ETHSZ16
+	if { $CONFIG_DSU_ETHSZ16 == 1 } then { set tmpvar_28 "16" }
+	global tmpvar_29
+	set tmpvar_29 "4"
+	global CONFIG_AHBRAM_SZ1
+	if { $CONFIG_AHBRAM_SZ1 == 1 } then { set tmpvar_29 "1" }
+	global CONFIG_AHBRAM_SZ2
+	if { $CONFIG_AHBRAM_SZ2 == 1 } then { set tmpvar_29 "2" }
+	global CONFIG_AHBRAM_SZ4
+	if { $CONFIG_AHBRAM_SZ4 == 1 } then { set tmpvar_29 "4" }
+	global CONFIG_AHBRAM_SZ8
+	if { $CONFIG_AHBRAM_SZ8 == 1 } then { set tmpvar_29 "8" }
+	global CONFIG_AHBRAM_SZ16
+	if { $CONFIG_AHBRAM_SZ16 == 1 } then { set tmpvar_29 "16" }
+	global CONFIG_AHBRAM_SZ32
+	if { $CONFIG_AHBRAM_SZ32 == 1 } then { set tmpvar_29 "32" }
+	global CONFIG_AHBRAM_SZ64
+	if { $CONFIG_AHBRAM_SZ64 == 1 } then { set tmpvar_29 "64" }
+	global CONFIG_AHBRAM_SZ128
+	if { $CONFIG_AHBRAM_SZ128 == 1 } then { set tmpvar_29 "128" }
+	global CONFIG_AHBRAM_SZ256
+	if { $CONFIG_AHBRAM_SZ256 == 1 } then { set tmpvar_29 "256" }
+	global CONFIG_AHBRAM_SZ512
+	if { $CONFIG_AHBRAM_SZ512 == 1 } then { set tmpvar_29 "512" }
+	global CONFIG_AHBRAM_SZ1024
+	if { $CONFIG_AHBRAM_SZ1024 == 1 } then { set tmpvar_29 "1024" }
+	global CONFIG_AHBRAM_SZ2048
+	if { $CONFIG_AHBRAM_SZ2048 == 1 } then { set tmpvar_29 "2048" }
+	global CONFIG_AHBRAM_SZ4096
+	if { $CONFIG_AHBRAM_SZ4096 == 1 } then { set tmpvar_29 "4096" }
+	global tmpvar_30
+	set tmpvar_30 "8"
+	global CONFIG_GRETH_FIFO4
+	if { $CONFIG_GRETH_FIFO4 == 1 } then { set tmpvar_30 "4" }
+	global CONFIG_GRETH_FIFO8
+	if { $CONFIG_GRETH_FIFO8 == 1 } then { set tmpvar_30 "8" }
+	global CONFIG_GRETH_FIFO16
+	if { $CONFIG_GRETH_FIFO16 == 1 } then { set tmpvar_30 "16" }
+	global CONFIG_GRETH_FIFO32
+	if { $CONFIG_GRETH_FIFO32 == 1 } then { set tmpvar_30 "32" }
+	global CONFIG_GRETH_FIFO64
+	if { $CONFIG_GRETH_FIFO64 == 1 } then { set tmpvar_30 "64" }
+	global tmpvar_31
+	set tmpvar_31 "1"
+	global CONFIG_UA1_FIFO1
+	if { $CONFIG_UA1_FIFO1 == 1 } then { set tmpvar_31 "1" }
+	global CONFIG_UA1_FIFO2
+	if { $CONFIG_UA1_FIFO2 == 1 } then { set tmpvar_31 "2" }
+	global CONFIG_UA1_FIFO4
+	if { $CONFIG_UA1_FIFO4 == 1 } then { set tmpvar_31 "4" }
+	global CONFIG_UA1_FIFO8
+	if { $CONFIG_UA1_FIFO8 == 1 } then { set tmpvar_31 "8" }
+	global CONFIG_UA1_FIFO16
+	if { $CONFIG_UA1_FIFO16 == 1 } then { set tmpvar_31 "16" }
+	global CONFIG_UA1_FIFO32
+	if { $CONFIG_UA1_FIFO32 == 1 } then { set tmpvar_31 "32" }
+	global tmpvar_32
+	set tmpvar_32 "1"
+	global CONFIG_LANE_WIDTH1
+	if { $CONFIG_LANE_WIDTH1 == 1 } then { set tmpvar_32 "1" }
+	global CONFIG_LANE_WIDTH2
+	if { $CONFIG_LANE_WIDTH2 == 1 } then { set tmpvar_32 "2" }
+	global CONFIG_LANE_WIDTH4
+	if { $CONFIG_LANE_WIDTH4 == 1 } then { set tmpvar_32 "4" }
+	global CONFIG_LANE_WIDTH8
+	if { $CONFIG_LANE_WIDTH8 == 1 } then { set tmpvar_32 "8" }
+	global tmpvar_33
+	set tmpvar_33 "1"
+	global CONFIG_LANE_WIDTH1
+	if { $CONFIG_LANE_WIDTH1 == 1 } then { set tmpvar_33 "1" }
+	global CONFIG_LANE_WIDTH2
+	if { $CONFIG_LANE_WIDTH2 == 1 } then { set tmpvar_33 "2" }
+	global CONFIG_LANE_WIDTH4
+	if { $CONFIG_LANE_WIDTH4 == 1 } then { set tmpvar_33 "4" }
+}
+
+
+proc update_define_mainmenu {} {
+	global CONFIG_MODULES
+	global CONFIG_LEON3FT_PRESENT
+	global CONFIG_HAS_SHARED_GRFPU
+	global CONSTANT_Y
+	set CONFIG_LEON3FT_PRESENT $CONSTANT_Y
+	set CONFIG_HAS_SHARED_GRFPU $CONSTANT_Y
+}
+
+
+# FILE: tail.tk
+# This file is boilerplate TCL/TK function definitions for 'make xconfig'.
+#
+# CHANGES
+# =======
+#
+# 8 January 1998, Michael Elizabeth Chastain, <mec@shout.net>
+# Arrange buttons in three columns for better screen fitting.
+#
+
+#
+# Read the user's settings from .config.  These will override whatever is
+# in config.in.  Don't do this if the user specified a -D to force
+# the defaults.
+#
+
+set defaults defconfig
+
+if { [file readable .config] == 1} then {
+	if { $argc > 0 } then {
+		if { [lindex $argv 0] != "-D" } then {
+			read_config .config
+			if { [lindex $argv 0] == "-regen" } then {
+				catch {exec cp -f .config .config.old};
+				writeconfig .config config.h
+				exit 2
+			}
+		}
+		else
+		{
+			read_config $defaults
+		}
+	} else {
+		read_config .config
+	}
+} else {
+	read_config $defaults
+}
+
+update_define 1 $total_menus 0
+update_mainmenu
+
+button .f0.right.save -anchor w -text "Save and Exit" -underline 0\
+    -command { catch {exec cp -f .config .config.old}; \
+		writeconfig .config config.h; wrapup .wrap }
+
+button .f0.right.quit -anchor w -text "Quit Without Saving" -underline 0\
+    -command { maybe_exit .maybe }
+
+button .f0.right.load -anchor w -text "Load Configuration from File" \
+    -command { load_configfile .load "Load Configuration from file" read_config_file
+}
+
+button .f0.right.store -anchor w -text "Store Configuration to File" \
+    -command { load_configfile .load "Store Configuration to file" write_config_file }
+
+#
+# Now pack everything.
+#
+
+pack .f0.right.store .f0.right.load .f0.right.quit .f0.right.save \
+    -padx 0 -pady 0 -side bottom -fill x
+pack .f0.left .f0.middle .f0.right -side left -padx 5 -pady 0 -fill y
+pack .f0 -padx 5 -pady 5
+
+update idletasks
+set winy [expr 10 + [winfo reqheight .f0]]
+set scry [lindex [wm maxsize .] 1]
+set winx [expr 10 + [winfo reqwidth .f0]]
+set scrx [lindex [wm maxsize .] 0]
+if {$winx < $scrx} then {set maxx -1} else {set maxx $winx}
+if {$winy < $scry} then {set maxy -1} else {set maxy $winy}
+.f0 configure -width $winx -height $winy 
+wm maxsize . $maxx $maxy
+
+#
+# If we cannot write our config files, disable the write button.
+#
+if { [file exists .config] == 1 } then {
+		if { [file writable .config] == 0 } then {
+			.f0.right.save configure -state disabled
+		}
+	} else {
+		if { [file writable .] == 0 } then {
+			.f0.right.save configure -state disabled
+		}
+	}
+
+#if { [file exists include/linux/autoconf.h] == 1 } then {
+#		if { [file writable include/linux/autoconf.h] == 0 } then {
+#			.f0.right.save configure -state disabled
+#		}
+#	} else {
+#		if { [file writable include/linux/] == 0 } then {
+#			.f0.right.save configure -state disabled
+#		}
+#	}
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/leon3mp_mig39.ucf work/leon3-xilinx-ml605/leon3mp_mig39.ucf
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/leon3mp_mig39.ucf	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/leon3mp_mig39.ucf	2019-12-29 15:59:50.134753990 +0100
@@ -0,0 +1,195 @@
+
+NET "clk_ref_p" TNM_NET = TNM_clk_ref;
+TIMESPEC "TS_clk_ref" = PERIOD "TNM_clk_ref" 5 ns ;
+
+NET "reset" IOSTANDARD = SSTL15;
+NET "reset" LOC = "H10";
+NET "errorn" LOC = "AD24";
+
+NET "address(0)"                      LOC = "AL8";    ## 29 on U4, A1 on U27
+NET "address(1)"                      LOC = "AK8";    ## 25 on U4, B1 on U27
+NET "address(2)"                      LOC = "AC9";    ## 24 on U4, C1 on U27
+NET "address(3)"                      LOC = "AD10";   ## 23 on U4, D1 on U27
+NET "address(4)"                      LOC = "C8";     ## 22 on U4, D2 on U27
+NET "address(5)"                      LOC = "B8";     ## 21 on U4, A2 on U27
+NET "address(6)"                      LOC = "E9";     ## 20 on U4, C2 on U27
+NET "address(7)"                      LOC = "E8";     ## 19 on U4, A3 on U27
+NET "address(8)"                      LOC = "A8";     ## 8  on U4, B3 on U27
+NET "address(9)"                      LOC = "A9";     ## 7  on U4, C3 on U27
+NET "address(10)"                     LOC = "D9";     ## 6  on U4, D3 on U27
+NET "address(11)"                     LOC = "C9";     ## 5  on U4, C4 on U27
+NET "address(12)"                     LOC = "D10";    ## 4  on U4, A5 on U27
+NET "address(13)"                     LOC = "C10";    ## 3  on U4, B5 on U27
+NET "address(14)"                     LOC = "F10";    ## 2  on U4, C5 on U27
+NET "address(15)"                     LOC = "F9";     ## 1  on U4, D7 on U27
+NET "address(16)"                     LOC = "AH8";    ## 55 on U4, D8 on U27
+NET "address(17)"                     LOC = "AG8";    ## 18 on U4, A7 on U27
+NET "address(18)"                     LOC = "AP9";    ## 17 on U4, B7 on U27
+NET "address(19)"                     LOC = "AN9";    ## 16 on U4, C7 on U27
+NET "address(20)"                     LOC = "AF10";   ## 11 on U4, C8 on U27
+NET "address(21)"                     LOC = "AF9";    ## 10 on U4, A8 on U27
+NET "address(22)"                     LOC = "AL9";    ## 9  on U4, G1 on U27
+NET "address(23)"                     LOC = "AA23";   ## 26 on U4
+NET "data(0)"                      LOC = "AF24";   ## 34 on U4, F2 on U27
+NET "data(1)"                      LOC = "AF25";   ## 36 on U4, E2 on U27
+NET "data(2)"                      LOC = "W24";    ## 39 on U4, G3 on U27
+NET "data(3)"                      LOC = "V24";    ## 41 on U4, E4 on U27
+NET "data(4)"                      LOC = "H24";    ## 47 on U4, E5 on U27
+NET "data(5)"                      LOC = "H25";    ## 49 on U4, G5 on U27
+NET "data(6)"                      LOC = "P24";    ## 51 on U4, G6 on U27
+NET "data(7)"                      LOC = "R24";    ## 53 on U4, H7 on U27
+NET "data(8)"                      LOC = "G23";    ## 35 on U4, E1 on U27
+NET "data(9)"                      LOC = "H23";    ## 37 on U4, E3 on U27
+NET "data(10)"                     LOC = "N24";    ## 40 on U4, F3 on U27
+NET "data(11)"                     LOC = "N23";    ## 42 on U4, F4 on U27
+NET "data(12)"                     LOC = "F23";    ## 48 on U4, F5 on U27
+NET "data(13)"                     LOC = "F24";    ## 50 on U4, H5 on U27
+NET "data(14)"                     LOC = "L24";    ## 52 on U4, G7 on U27
+NET "data(15)"                     LOC = "M23";    ## 54 on U4, E7 on U27
+#NET "FLASH_WAIT"                    LOC = "J26";    ## 56 on U4
+NET "writen"                    LOC = "AF23";   ## 14 on U4, G8 on U27
+NET "oen"                    LOC = "AA24";   ## 32 on U4, F8 on U27
+#NET "FPGA_CCLK"                     LOC = "K8";     ##           F1 on U27
+NET "alatch"                 LOC = "AC23";   ##           H1 on U27
+NET "romsn"                    LOC = "Y24";    ## 30 on U4, B4 on U27 (U10 and switch S2.2 setting select either U4 or U27)
+##
+
+NET "erx_col"                       LOC = "AK13";   ## 114 on U80
+NET "erx_crs"                       LOC = "AL13";   ## 115 on U80
+NET "emdint"                       LOC = "AH14";   ## 32  on U80
+NET "emdc"                       LOC = "AP14";   ## 35  on U80
+NET "emdio"                      LOC = "AN14";   ## 33  on U80
+NET "erstn"                     LOC = "AH13";   ## 36  on U80
+NET "erx_clk"                     LOC = "AP11";   ## 7   on U80
+NET "erx_dv"                LOC = "AM13";   ## 4   on U80
+NET "erxd(0)"                      LOC = "AN13";   ## 3   on U80
+NET "erxd(1)"                      LOC = "AF14";   ## 128 on U80
+NET "erxd(2)"                      LOC = "AE14";   ## 126 on U80
+NET "erxd(3)"                      LOC = "AN12";   ## 125 on U80
+NET "erxd(4)"                      LOC = "AM12";   ## 124 on U80
+NET "erxd(5)"                      LOC = "AD11";   ## 123 on U80
+NET "erxd(6)"                      LOC = "AC12";   ## 121 on U80
+NET "erxd(7)"                      LOC = "AC13";   ## 120 on U80
+NET "erx_er"                      LOC = "AG12";   ## 9   on U80
+NET "etx_clk"                     LOC = "AD12";   ## 10  on U80
+NET "etx_en"                LOC = "AJ10";   ## 16  on U80
+NET "egtx_clk"                LOC = "AH12";   ## 14  on U80
+NET "etxd(0)"                      LOC = "AM11";   ## 18  on U80
+NET "etxd(1)"                      LOC = "AL11";   ## 19  on U80
+NET "etxd(2)"                      LOC = "AG10";   ## 20  on U80
+NET "etxd(3)"                      LOC = "AG11";   ## 24  on U80
+NET "etxd(4)"                      LOC = "AL10";   ## 25  on U80
+NET "etxd(5)"                      LOC = "AM10";   ## 26  on U80
+NET "etxd(6)"                      LOC = "AE11";   ## 28  on U80
+NET "etxd(7)"                      LOC = "AF11";   ## 29  on U80
+NET "etx_er"                      LOC = "AH10";   ## 13  on U80
+
+NET "dsurx"                      LOC = "J24";    ## 24  on U34
+NET "dsutx"                      LOC = "J25";    ## 25  on U34
+
+#NET "GPIO_DIP_SW1"                  LOC = "D22";    ## 1   on SW1 DIP switch (active-high)
+#NET "GPIO_DIP_SW2"                  LOC = "C22";    ## 2   on SW1 DIP switch (active-high)
+#NET "GPIO_DIP_SW3"                  LOC = "L21";    ## 3   on SW1 DIP switch (active-high)
+#NET "GPIO_DIP_SW4"                  LOC = "L20";    ## 4   on SW1 DIP switch (active-high)
+#NET "GPIO_DIP_SW5"                  LOC = "C18";    ## 5   on SW1 DIP switch (active-high)
+NET "dsubre"                  LOC = "B18";    ## 6   on SW1 DIP switch (active-high)
+#NET "GPIO_DIP_SW7"                  LOC = "K22";    ## 7   on SW1 DIP switch (active-high)
+#NET "GPIO_DIP_SW8"                  LOC = "K21";    ## 8   on SW1 DIP switch (active-high)
+##
+
+NET "led(0)"                    LOC = "AC22";   ## 2   on LED DS12, 1 on J62
+NET "led(1)"                    LOC = "AC24";   ## 2   on LED DS11, 2 on J62
+NET "led(2)"                    LOC = "AE22";   ## 2   on LED DS9,  3 on J62
+NET "led(3)"                    LOC = "AE23";   ## 2   on LED DS10, 4 on J62
+NET "led(4)"                    LOC = "AB23";   ## 2   on LED DS15, 5 on J62
+NET "led(5)"                    LOC = "AG23";   ## 2   on LED DS14, 6 on J62
+NET "led(6)"                    LOC = "AE24";   ## 2   on LED DS22, 7 on J62
+#NET "led(7)"                    LOC = "AD24";   ## 2   on LED DS21, 8 on J62
+
+NET "dvi_iic_scl"                   LOC = "AN10";   ## 2   on Q5, 15 on U38
+NET "iic_scl_main"               LOC = "AK9";    ## 2   on Q19
+#NET "IIC_SCL_SFP"                   LOC = "AA34";   ## 2   on Q23
+NET "dvi_iic_sda"                   LOC = "AP10";   ## 2   on Q6, 14 on U38
+NET "iic_sda_main"               LOC = "AE9";    ## 2   on Q20
+#NET "IIC_SDA_SFP"                   LOC = "AA33";   ## 2   on Q21
+
+NET "tft_lcd_data(0)"                        LOC = "AJ19";   ## 63 on U38 (thru series R111 47.5 ohm)
+NET "tft_lcd_data(1)"                        LOC = "AH19";   ## 62 on U38 (thru series R110 47.5 ohm)
+NET "tft_lcd_data(2)"                        LOC = "AM17";   ## 61 on U38 (thru series R109 47.5 ohm)
+NET "tft_lcd_data(3)"                        LOC = "AM16";   ## 60 on U38 (thru series R108 47.5 ohm)
+NET "tft_lcd_data(4)"                        LOC = "AD17";   ## 59 on U38 (thru series R107 47.5 ohm)
+NET "tft_lcd_data(5)"                        LOC = "AE17";   ## 58 on U38 (thru series R106 47.5 ohm)
+NET "tft_lcd_data(6)"                        LOC = "AK18";   ## 55 on U38 (thru series R105 47.5 ohm)
+NET "tft_lcd_data(7)"                        LOC = "AK17";   ## 54 on U38 (thru series R104 47.5 ohm)
+NET "tft_lcd_data(8)"                        LOC = "AE18";   ## 53 on U38 (thru series R103 47.5 ohm)
+NET "tft_lcd_data(9)"                        LOC = "AF18";   ## 52 on U38 (thru series R102 47.5 ohm)
+NET "tft_lcd_data(10)"                       LOC = "AL16";   ## 51 on U38 (thru series R101 47.5 ohm)
+NET "tft_lcd_data(11)"                       LOC = "AK16";   ## 50 on U38 (thru series R100 47.5 ohm)
+NET "tft_lcd_de"                        LOC = "AD16";   ## 2  on U38 (thru series R112 47.5 ohm)
+#NET "DVI_GPIO1_FMC_C2M_PG_LS"       LOC = "K9";     ## 18 on U32 (not wired to U38)
+NET "tft_lcd_hsync"                         LOC = "AN17";   ## 4  on U38 (thru series R113 47.5 ohm)
+NET "tft_lcd_reset_b"                LOC = "AP17";   ## 2  on U32 (DVI_RESET_B pin 13 on U38)
+NET "tft_lcd_vsync"                         LOC = "AD15";   ## 5  on U38 (thru series R114 47.5 ohm)
+NET "tft_lcd_clk_n"                    LOC = "AC17";   ## 56 on U38
+NET "tft_lcd_clk_p"                    LOC = "AC18";   ## 57 on U38
+
+#NET "SYSACE_CFGTDI"                 LOC = "AC8";    ## 81  on U19
+NET "sysace_d(0)"                     LOC = "AM15";   ## 66  on U19
+NET "sysace_d(1)"                     LOC = "AJ17";   ## 65  on U19
+NET "sysace_d(2)"                     LOC = "AJ16";   ## 63  on U19
+NET "sysace_d(3)"                     LOC = "AP16";   ## 62  on U19
+NET "sysace_d(4)"                     LOC = "AG16";   ## 61  on U19
+NET "sysace_d(5)"                     LOC = "AH15";   ## 60  on U19
+NET "sysace_d(6)"                     LOC = "AF16";   ## 59  on U19
+NET "sysace_d(7)"                     LOC = "AN15";   ## 58  on U19
+NET "sysace_mpa(0)"                  LOC = "AC15";   ## 70  on U19
+NET "sysace_mpa(1)"                  LOC = "AP15";   ## 69  on U19
+NET "sysace_mpa(2)"                  LOC = "AG17";   ## 68  on U19
+NET "sysace_mpa(3)"                  LOC = "AH17";   ## 67  on U19
+NET "sysace_mpa(4)"                  LOC = "AG15";   ## 45  on U19
+NET "sysace_mpa(5)"                  LOC = "AF15";   ## 44  on U19
+NET "sysace_mpa(6)"                  LOC = "AK14";   ## 43  on U19
+#NET "SYSACE_MPBRDY"                 LOC = "AJ15";   ## 39  on U19
+NET "sysace_mpce"                   LOC = "AJ14";   ## 42  on U19
+NET "sysace_mpirq"                  LOC = "L9";     ## 41  on U19
+NET "sysace_mpoe"                   LOC = "AL15";   ## 77  on U19
+NET "sysace_mpwe"                   LOC = "AL14";   ## 76  on U19
+NET "clk_33"              LOC = "AE16";   ## 93  on U19
+NET "clk_33" PERIOD = 30.000 ;
+OFFSET = IN : 20.000 : BEFORE clk_33 ;
+OFFSET = OUT : 20.000 : AFTER clk_33 ;
+
+
+NET "clkm" 		TNM_NET = "clkm";
+NET "clk_ddr" 		TNM_NET = "clk_ddr";
+
+TIMESPEC "TS_clkm_clk_ddr" = FROM "clkm" TO "clk_ddr" TIG;
+TIMESPEC "TS_clk_ddr_clkm" = FROM "clk_ddr" TO "clkm" TIG;
+
+NET "erx_clk" PERIOD = 8.000 ;
+OFFSET = IN : 5.000 : BEFORE erx_clk ;
+#OFFSET = IN : 2.000 : BEFORE erx_clk ;
+
+NET "etx_clk" PERIOD = 40.000 ;
+OFFSET = OUT : 15.000 : AFTER etx_clk ;
+OFFSET = IN : 8.000 : BEFORE etx_clk ;
+
+NET "etx_clk" MAXSKEW= 1.0 ns;
+NET "erx_clk" MAXSKEW= 1.0 ns;
+
+#NET "egtx_clk" PERIOD = 8.000 ;
+#OFFSET = OUT : 5.500 : AFTER egtx_clk;
+#NET "egtx_clk" CLOCK_DEDICATED_ROUTE = FALSE;
+
+NET "gmiiclk_p"                 LOC = "H6";
+NET "gmiiclk_n"                 LOC = "H5";
+NET "gmiiclk_p" PERIOD = 8.000 ;
+OFFSET = OUT : 12.000 : AFTER gmiiclk_p;
+
+////////////////////////////////////////////////////////////////////////////
+// VGA clock
+////////////////////////////////////////////////////////////////////////////
+#NET "clkvga" TNM_NET = "clkvga" | PERIOD = 15.385;
+#TIMESPEC "TSPLB_TFT25" = FROM "clkm" TO "clkvga" TIG;
+#TIMESPEC "TSPLB_TFT40" = FROM "clkvga" TO "clkm" TIG;
+
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/leon3mp.ucf work/leon3-xilinx-ml605/leon3mp.ucf
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/leon3mp.ucf	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/leon3mp.ucf	2019-12-29 15:59:50.134753990 +0100
@@ -0,0 +1,613 @@
+############################################################################
+## 
+##  Xilinx, Inc. 2006            www.xilinx.com 
+##  Mon Aug 30 10:34:47 2010
+##  Generated by MIG Version 3.6
+##  
+############################################################################
+##  File name :       example_top.ucf
+## 
+##  Details :     Constraints file
+##                    FPGA family:       virtex6
+##                    FPGA:              xc6vlx240t-ff1156
+##                    Speedgrade:        -1
+##                    Design Entry:      VERILOG
+##                    Design:            with Test bench
+##                    No.Of Controllers: 1
+##
+############################################################################ 
+##  Modifications for ML605 with LX240T FPGA
+##  Start with UCF file generated by MIG 3.4 (ISE 12.1 build M.53.d)
+##     
+##  1. Majority of ML605 board specific pin assignments entered via MIG3.4 GUI!
+##     A. Add LOC and IOSTANDARD for LED indicator "heartbeat" 
+##     B. Add LOC and IOSTANDARD for LED indicator "pll_lock" 
+##     C. Comment out "sda" and "scl" signals 
+##     D. ML605 DCI_CASCADE is correct as defined in MIG3.4 GUI.
+##        BANK 26 = left column I/O master; BANK 36 = right column I/O master 
+##  2. Change IOSTANDARD for sys_rst to SSTL15 
+##  3. Board specific clocking definitions
+##     A. Default MIG 3.5 example design assumes 2 clock inputs to design:
+##        1. clk_ref to IDELAY_CTRL element (200 MHz)
+##        2. sys_clk to PLL circuit (SMA inputs)
+##     B. ML605 single clock source, modify constraint file to use 200 MHz 
+##        LVDS clock "clk_ref" input for DDR3 SODIMM design @800 Mbps data rate. 
+##        - Delete sys_clk_p and sys_clk_n inputs (HDL and LOC constraints)
+##        - Comment out sys_clk timing specification
+##        - Modify TS_MC_PHY_INIT_SEL to use value "2.5 ns" in multiplication 
+##  4. Optional: comment out CONFIG_PROHIBIT lines (pins reserved for MIG)
+##     Since this design has LOC'ed I/O don't need to reserve these pins.
+##  5. ML605 MIG3.4 BUFIO pin assignments
+##         BUFIO:0 pin C13 => X2Y137
+##         BUFIO:1 pin L13 => X2Y141
+##         BUFIO:2 pin K14 => X2Y143
+##         BUFIO:3 pin F21 => X1Y179
+##         BUFIO:4 pin B20 => X1Y181
+##         BUFIO:5 pin F25 => X1Y137
+##         BUFIO:6 pin C28 => X1Y141
+##         BUFIO:7 pin D24 => X1Y143
+##  6. ML605 MIG3.4 BUFR pin assignments
+##         BUFR:0 pin M12 => X2Y139
+##         BUFR:1 pin C29 => X1Y139
+##
+############################################################################
+# Timing constraints                                                        #
+############################################################################
+## ML605 comment out the following 2 lines for single 200MHz input clock
+## NET "sys_clk_p" TNM_NET = TNM_sys_clk;
+## TIMESPEC "TS_sys_clk" = PERIOD "TNM_sys_clk" 2.5 ns;
+
+NET "clk_ref_p" TNM_NET = TNM_clk_ref;
+TIMESPEC "TS_clk_ref" = PERIOD "TNM_clk_ref" 5 ns ;
+
+# Constrain BUFR clocks used to synchronize data from IOB to fabric logic
+# Note that ISE cannot infer this from other PERIOD constraints because
+# of the use of OSERDES blocks in the BUFR clock generation path
+NET "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/clk_rsync(?)" TNM_NET = TNM_clk_rsync;
+TIMESPEC "TS_clk_rsync" = PERIOD "TNM_clk_rsync" 5 ns;
+
+# Paths between DQ/DQS ISERDES.Q outputs and CLB flops clocked by falling 
+# edge of BUFR will by design only be used if DYNCLKDIVSEL is asserted for 
+# that particular flop. Mark this path as being a full-cycle, rather than 
+# a half cycle path for timing purposes. NOTE: This constraint forces full-
+# cycle timing to be applied globally for all rising->falling edge paths 
+# in all resynchronizaton clock domains. If the user had modified the logic
+# in the resync clock domain such that other rising->falling edge paths 
+# exist, then constraint below should be modified to utilize pattern 
+# matching to specific affect only the DQ/DQS ISERDES.Q outputs
+TIMEGRP "TG_clk_rsync_rise" = RISING  "TNM_clk_rsync";
+TIMEGRP "TG_clk_rsync_fall" = FALLING "TNM_clk_rsync";
+TIMESPEC "TS_clk_rsync_rise_to_fall" = 
+  FROM "TG_clk_rsync_rise" TO "TG_clk_rsync_fall" "TS_sys_clk" * 2;
+
+# Signal to select between controller and physical layer signals. Four divided by two clock
+# cycles (8 memory clock cycles) are provided by design for the signal to settle down.
+# Used only by the phy modules.
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_init/u_ff_phy_init_data_sel" TNM = "TNM_PHY_INIT_SEL";
+TIMESPEC "TS_MC_PHY_INIT_SEL" = FROM "TNM_PHY_INIT_SEL" TO FFS = 10 ns;  ## = "2.5ns * 4" ML605 single clock
+
+disable = reg_sr_o;
+disable = reg_sr_r;
+############################################################################
+########################################################################
+# Controller 0
+# Memory Device: DDR3_SDRAM->SODIMMs->MT4JSF6464HY-1G1
+# Data Width:     64
+# Frequency:      400
+# Time Period:      2500
+# Data Mask:     1
+########################################################################
+
+
+################################################################################
+# I/O STANDARDS
+################################################################################
+
+NET  "ddr3_dq(*)"                               IOSTANDARD = SSTL15_T_DCI;
+NET  "ddr3_addr(*)"                             IOSTANDARD = SSTL15;
+NET  "ddr3_ba(*)"                               IOSTANDARD = SSTL15;
+NET  "ddr3_ras_n"                               IOSTANDARD = SSTL15;
+NET  "ddr3_cas_n"                               IOSTANDARD = SSTL15;
+NET  "ddr3_we_n"                                IOSTANDARD = SSTL15;
+NET  "ddr3_reset_n"                             IOSTANDARD = SSTL15;
+NET  "ddr3_cke(*)"                              IOSTANDARD = SSTL15;
+NET  "ddr3_odt(*)"                              IOSTANDARD = SSTL15;
+NET  "ddr3_cs_n(*)"                             IOSTANDARD = SSTL15;
+NET  "ddr3_dm(*)"                               IOSTANDARD = SSTL15;
+## NET  "sys_clk_p"                                IOSTANDARD = LVDS_25;
+## NET  "sys_clk_n"                                IOSTANDARD = LVDS_25;
+NET  "clk_ref_p"                                IOSTANDARD = LVDS_25;
+NET  "clk_ref_n"                                IOSTANDARD = LVDS_25;
+## NET  "sda"                                      IOSTANDARD = LVCMOS25;
+## NET  "scl"                                      IOSTANDARD = LVCMOS25;
+NET  "reset"                                  IOSTANDARD = SSTL15;      ## ML605 
+#NET  "phy_init_done"                            IOSTANDARD = LVCMOS25;
+NET  "errorn"                                    IOSTANDARD = LVCMOS25;
+NET  "ddr3_dqs_p(*)"                            IOSTANDARD = DIFF_SSTL15_T_DCI;
+NET  "ddr3_dqs_n(*)"                            IOSTANDARD = DIFF_SSTL15_T_DCI;
+NET  "ddr3_ck_p(*)"                             IOSTANDARD = DIFF_SSTL15;
+NET  "ddr3_ck_n(*)"                             IOSTANDARD = DIFF_SSTL15;
+
+################################################################################
+##SAVE attributes to reserve the pins
+################################################################################
+## NET  "sda"                                      S;
+## NET  "scl"                                      S;
+
+###############################################################################
+#DCI_CASCADING
+#Syntax : CONFIG DCI_CASCADE = "<master> <slave1> <slave2> ..";
+###############################################################################
+CONFIG DCI_CASCADE = "26 25";
+CONFIG DCI_CASCADE = "36 35";
+
+
+##################################################################################
+# Location Constraints
+##################################################################################
+NET  "ddr3_dq(0)"                                LOC = "J11" ;          #Bank 35
+NET  "ddr3_dq(1)"                                LOC = "E13" ;          #Bank 35
+NET  "ddr3_dq(2)"                                LOC = "F13" ;          #Bank 35
+NET  "ddr3_dq(3)"                                LOC = "K11" ;          #Bank 35
+NET  "ddr3_dq(4)"                                LOC = "L11" ;          #Bank 35
+NET  "ddr3_dq(5)"                                LOC = "K13" ;          #Bank 35
+NET  "ddr3_dq(6)"                                LOC = "K12" ;          #Bank 35
+NET  "ddr3_dq(7)"                                LOC = "D11" ;          #Bank 35
+NET  "ddr3_dq(8)"                                LOC = "M13" ;          #Bank 35
+NET  "ddr3_dq(9)"                                LOC = "J14" ;          #Bank 35
+NET  "ddr3_dq(10)"                               LOC = "B13" ;          #Bank 35
+NET  "ddr3_dq(11)"                               LOC = "B12" ;          #Bank 35
+NET  "ddr3_dq(12)"                               LOC = "G10" ;          #Bank 35
+NET  "ddr3_dq(13)"                               LOC = "M11" ;          #Bank 35
+NET  "ddr3_dq(14)"                               LOC = "C12" ;          #Bank 35
+NET  "ddr3_dq(15)"                               LOC = "A11" ;          #Bank 35
+NET  "ddr3_dq(16)"                               LOC = "G11" ;          #Bank 35
+NET  "ddr3_dq(17)"                               LOC = "F11" ;          #Bank 35
+NET  "ddr3_dq(18)"                               LOC = "D14" ;          #Bank 35
+NET  "ddr3_dq(19)"                               LOC = "C14" ;          #Bank 35
+NET  "ddr3_dq(20)"                               LOC = "G12" ;          #Bank 35
+NET  "ddr3_dq(21)"                               LOC = "G13" ;          #Bank 35
+NET  "ddr3_dq(22)"                               LOC = "F14" ;          #Bank 35
+NET  "ddr3_dq(23)"                               LOC = "H14" ;          #Bank 35
+NET  "ddr3_dq(24)"                               LOC = "C19" ;          #Bank 26
+NET  "ddr3_dq(25)"                               LOC = "G20" ;          #Bank 26
+NET  "ddr3_dq(26)"                               LOC = "E19" ;          #Bank 26
+NET  "ddr3_dq(27)"                               LOC = "F20" ;          #Bank 26
+NET  "ddr3_dq(28)"                               LOC = "A20" ;          #Bank 26
+NET  "ddr3_dq(29)"                               LOC = "A21" ;          #Bank 26
+NET  "ddr3_dq(30)"                               LOC = "E22" ;          #Bank 26
+NET  "ddr3_dq(31)"                               LOC = "E23" ;          #Bank 26
+NET  "ddr3_dq(32)"                               LOC = "G21" ;          #Bank 26
+NET  "ddr3_dq(33)"                               LOC = "B21" ;          #Bank 26
+NET  "ddr3_dq(34)"                               LOC = "A23" ;          #Bank 26
+NET  "ddr3_dq(35)"                               LOC = "A24" ;          #Bank 26
+NET  "ddr3_dq(36)"                               LOC = "C20" ;          #Bank 26
+NET  "ddr3_dq(37)"                               LOC = "D20" ;          #Bank 26
+NET  "ddr3_dq(38)"                               LOC = "J20" ;          #Bank 26
+NET  "ddr3_dq(39)"                               LOC = "G22" ;          #Bank 26
+NET  "ddr3_dq(40)"                               LOC = "D26" ;          #Bank 25
+NET  "ddr3_dq(41)"                               LOC = "F26" ;          #Bank 25
+NET  "ddr3_dq(42)"                               LOC = "B26" ;          #Bank 25
+NET  "ddr3_dq(43)"                               LOC = "E26" ;          #Bank 25
+NET  "ddr3_dq(44)"                               LOC = "C24" ;          #Bank 25
+NET  "ddr3_dq(45)"                               LOC = "D25" ;          #Bank 25
+NET  "ddr3_dq(46)"                               LOC = "D27" ;          #Bank 25
+NET  "ddr3_dq(47)"                               LOC = "C25" ;          #Bank 25
+NET  "ddr3_dq(48)"                               LOC = "C27" ;          #Bank 25
+NET  "ddr3_dq(49)"                               LOC = "B28" ;          #Bank 25
+NET  "ddr3_dq(50)"                               LOC = "D29" ;          #Bank 25
+NET  "ddr3_dq(51)"                               LOC = "B27" ;          #Bank 25
+NET  "ddr3_dq(52)"                               LOC = "G27" ;          #Bank 25
+NET  "ddr3_dq(53)"                               LOC = "A28" ;          #Bank 25
+NET  "ddr3_dq(54)"                               LOC = "E24" ;          #Bank 25
+NET  "ddr3_dq(55)"                               LOC = "G25" ;          #Bank 25
+NET  "ddr3_dq(56)"                               LOC = "F28" ;          #Bank 25
+NET  "ddr3_dq(57)"                               LOC = "B31" ;          #Bank 25
+NET  "ddr3_dq(58)"                               LOC = "H29" ;          #Bank 25
+NET  "ddr3_dq(59)"                               LOC = "H28" ;          #Bank 25
+NET  "ddr3_dq(60)"                               LOC = "B30" ;          #Bank 25
+NET  "ddr3_dq(61)"                               LOC = "A30" ;          #Bank 25
+NET  "ddr3_dq(62)"                               LOC = "E29" ;          #Bank 25
+NET  "ddr3_dq(63)"                               LOC = "F29" ;          #Bank 25
+NET  "ddr3_addr(12)"                             LOC = "H15" ;          #Bank 36
+NET  "ddr3_addr(11)"                             LOC = "M15" ;          #Bank 36
+NET  "ddr3_addr(10)"                             LOC = "M16" ;          #Bank 36
+NET  "ddr3_addr(9)"                              LOC = "F15" ;          #Bank 36
+NET  "ddr3_addr(8)"                              LOC = "G15" ;          #Bank 36
+NET  "ddr3_addr(7)"                              LOC = "B15" ;          #Bank 36
+NET  "ddr3_addr(6)"                              LOC = "A15" ;          #Bank 36
+NET  "ddr3_addr(5)"                              LOC = "J17" ;          #Bank 36
+NET  "ddr3_addr(4)"                              LOC = "D16" ;          #Bank 36
+NET  "ddr3_addr(3)"                              LOC = "E16" ;          #Bank 36
+NET  "ddr3_addr(2)"                              LOC = "B16" ;          #Bank 36
+NET  "ddr3_addr(1)"                              LOC = "A16" ;          #Bank 36
+NET  "ddr3_addr(0)"                              LOC = "L14" ;          #Bank 36
+NET  "ddr3_ba(2)"                                LOC = "L15" ;          #Bank 36
+NET  "ddr3_ba(1)"                                LOC = "J19" ;          #Bank 36
+NET  "ddr3_ba(0)"                                LOC = "K19" ;          #Bank 36
+NET  "ddr3_ras_n"                                LOC = "L19" ;          #Bank 36
+NET  "ddr3_cas_n"                                LOC = "C17" ;          #Bank 36
+NET  "ddr3_we_n"                                 LOC = "B17" ;          #Bank 36
+NET  "ddr3_reset_n"                              LOC = "E18" ;          #Bank 36
+NET  "ddr3_cke(0)"                               LOC = "M18" ;          #Bank 36
+NET  "ddr3_odt(0)"                               LOC = "F18" ;          #Bank 36
+NET  "ddr3_cs_n(0)"                              LOC = "K18" ;          #Bank 36
+NET  "ddr3_dm(0)"                                LOC = "E11" ;          #Bank 35
+NET  "ddr3_dm(1)"                                LOC = "B11" ;          #Bank 35
+NET  "ddr3_dm(2)"                                LOC = "E14" ;          #Bank 35
+NET  "ddr3_dm(3)"                                LOC = "D19" ;          #Bank 26
+NET  "ddr3_dm(4)"                                LOC = "B22" ;          #Bank 26
+NET  "ddr3_dm(5)"                                LOC = "A26" ;          #Bank 25
+NET  "ddr3_dm(6)"                                LOC = "A29" ;          #Bank 25
+NET  "ddr3_dm(7)"                                LOC = "A31" ;          #Bank 25
+## NET  "sys_clk_p"                                 LOC = "J9" ;          #Bank 34
+## NET  "sys_clk_n"                                 LOC = "H9" ;          #Bank 34
+NET  "clk_ref_p"                                 LOC = "J9" ;          #Bank 34
+NET  "clk_ref_n"                                 LOC = "H9" ;          #Bank 34
+## NET  "sda"                                       LOC = "F9" ;          #Bank 34
+## NET  "scl"                                       LOC = "F10" ;          #Bank 34
+NET  "reset"                                   LOC = "H10" ;          #ML605 CPU_RESET switch
+#NET  "phy_init_done"                             LOC = "AE23" ;         #ML605 GPIO LED 3
+NET  "errorn"                                     LOC = "AD24" ;         #ML605 GPIO LED 2
+NET  "ddr3_dqs_p(0)"                             LOC = "D12" ;          #Bank 35
+NET  "ddr3_dqs_n(0)"                             LOC = "E12" ;          #Bank 35
+NET  "ddr3_dqs_p(1)"                             LOC = "H12" ;          #Bank 35
+NET  "ddr3_dqs_n(1)"                             LOC = "J12" ;          #Bank 35
+NET  "ddr3_dqs_p(2)"                             LOC = "A13" ;          #Bank 35
+NET  "ddr3_dqs_n(2)"                             LOC = "A14" ;          #Bank 35
+NET  "ddr3_dqs_p(3)"                             LOC = "H19" ;          #Bank 26
+NET  "ddr3_dqs_n(3)"                             LOC = "H20" ;          #Bank 26
+NET  "ddr3_dqs_p(4)"                             LOC = "B23" ;          #Bank 26
+NET  "ddr3_dqs_n(4)"                             LOC = "C23" ;          #Bank 26
+NET  "ddr3_dqs_p(5)"                             LOC = "B25" ;          #Bank 25
+NET  "ddr3_dqs_n(5)"                             LOC = "A25" ;          #Bank 25
+NET  "ddr3_dqs_p(6)"                             LOC = "H27" ;          #Bank 25
+NET  "ddr3_dqs_n(6)"                             LOC = "G28" ;          #Bank 25
+NET  "ddr3_dqs_p(7)"                             LOC = "C30" ;          #Bank 25
+NET  "ddr3_dqs_n(7)"                             LOC = "D30" ;          #Bank 25
+NET  "ddr3_ck_p(0)"                              LOC = "G18" ;          #Bank 36
+NET  "ddr3_ck_n(0)"                              LOC = "H18" ;          #Bank 36
+
+
+##################################################################################################
+##The following locations must be reserved and cannot be used for external I/O because          ##
+##the I/O elements associated with these sites (IODELAY, OSERDES, and associated routing)       ##
+##are used to generate and route the clocks necessary for read data capture and synchronization ##
+##to the core clock domain. These pins should not be routed out on the user's PCB               ##
+##################################################################################################
+
+##################################################################################################
+##The logic of this pin is used internally to drive a BUFR in the column. This chosen pin must  ##
+##be a clock pin capable of spanning to all of the banks containing data bytes in the particular##
+##column. That is, all byte groups must be within +/- 1 bank of this pin. This pin cannot be    ##
+##used for other functions and should not be connected externally. If a different pin is chosen,##
+##he corresponding LOC constraint must also be changed.                                         ##
+##################################################################################################
+
+CONFIG PROHIBIT = C29,M12;
+
+######################################################################################
+##Place RSYNC OSERDES and IODELAY:                                                  ##
+######################################################################################
+
+##Site: C29 -- Bank 25
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_loop_col1.u_oserdes_rsync"
+  LOC = "OLOGIC_X1Y139";
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_loop_col1.u_odelay_rsync"
+  LOC = "IODELAY_X1Y139";
+
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_loop_col1.u_bufr_rsync"
+  LOC = "BUFR_X1Y6";
+
+##Site: M12 -- Bank 35
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_loop_col0.u_oserdes_rsync"
+  LOC = "OLOGIC_X2Y139";
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_loop_col0.u_odelay_rsync"
+  LOC = "IODELAY_X2Y139";
+
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_loop_col0.u_bufr_rsync"
+  LOC = "BUFR_X2Y6";
+
+##################################################################################################
+##The logic of this pin is used internally to drive a BUFIO for the byte group. Any clock       ##
+##capable pin in the same bank as the data byte group (DQS, DQ, DM if used) can be used for     ##
+##this pin. This pin cannot be used for other functions and should not be connected externally. ##
+##If a different pin is chosen, the corresponding LOC constraint must also be changed.          ##
+##################################################################################################
+
+CONFIG PROHIBIT = B20,C13,C28,D24,F21,F25,K14,L13;
+
+######################################################################################
+##Place CPT OSERDES and IODELAY:                                                    ##
+######################################################################################
+
+##Site: C13 -- Bank 35
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*0*u_oserdes_cpt"
+  LOC = "OLOGIC_X2Y137";
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*0*u_odelay_cpt"
+  LOC = "IODELAY_X2Y137";
+
+##Site: L13 -- Bank 35
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*1*u_oserdes_cpt"
+  LOC = "OLOGIC_X2Y141";
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*1*u_odelay_cpt"
+  LOC = "IODELAY_X2Y141";
+
+##Site: K14 -- Bank 35
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*2*u_oserdes_cpt"
+  LOC = "OLOGIC_X2Y143";
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*2*u_odelay_cpt"
+  LOC = "IODELAY_X2Y143";
+
+##Site: F21 -- Bank 26
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*3*u_oserdes_cpt"
+  LOC = "OLOGIC_X1Y179";
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*3*u_odelay_cpt"
+  LOC = "IODELAY_X1Y179";
+
+##Site: B20 -- Bank 26
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*4*u_oserdes_cpt"
+  LOC = "OLOGIC_X1Y181";
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*4*u_odelay_cpt"
+  LOC = "IODELAY_X1Y181";
+
+##Site: F25 -- Bank 25
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*5*u_oserdes_cpt"
+  LOC = "OLOGIC_X1Y137";
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*5*u_odelay_cpt"
+  LOC = "IODELAY_X1Y137";
+
+##Site: C28 -- Bank 25
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*6*u_oserdes_cpt"
+  LOC = "OLOGIC_X1Y141";
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*6*u_odelay_cpt"
+  LOC = "IODELAY_X1Y141";
+
+##Site: D24 -- Bank 25
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*7*u_oserdes_cpt"
+  LOC = "OLOGIC_X1Y143";
+INST "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_read/u_phy_rdclk_gen/gen_ck_cpt*7*u_odelay_cpt"
+  LOC = "IODELAY_X1Y143";
+
+
+######################################################################################
+## MMCM_ADV CONSTRAINTS                                                             ##
+######################################################################################
+
+INST "ddr3ctrl/u_infrastructure/u_mmcm_adv"      LOC = "MMCM_ADV_X0Y8"; #Banks 16, 26, 36
+
+
+
+###########################################################################
+##  ML605 additions
+###########################################################################
+#NET  "pll_lock"                 IOSTANDARD = LVCMOS25;
+#NET  "heartbeat"                IOSTANDARD = LVCMOS25;
+
+#NET  "heartbeat"                LOC = "AC24";   # ML605 GPIO LED 1
+#NET  "pll_lock"                 LOC = "AC22" ;  # ML605 GPIO LED 0
+
+
+NET "address(0)"                      LOC = "AL8";    ## 29 on U4, A1 on U27
+NET "address(1)"                      LOC = "AK8";    ## 25 on U4, B1 on U27
+NET "address(2)"                      LOC = "AC9";    ## 24 on U4, C1 on U27
+NET "address(3)"                      LOC = "AD10";   ## 23 on U4, D1 on U27
+NET "address(4)"                      LOC = "C8";     ## 22 on U4, D2 on U27
+NET "address(5)"                      LOC = "B8";     ## 21 on U4, A2 on U27
+NET "address(6)"                      LOC = "E9";     ## 20 on U4, C2 on U27
+NET "address(7)"                      LOC = "E8";     ## 19 on U4, A3 on U27
+NET "address(8)"                      LOC = "A8";     ## 8  on U4, B3 on U27
+NET "address(9)"                      LOC = "A9";     ## 7  on U4, C3 on U27
+NET "address(10)"                     LOC = "D9";     ## 6  on U4, D3 on U27
+NET "address(11)"                     LOC = "C9";     ## 5  on U4, C4 on U27
+NET "address(12)"                     LOC = "D10";    ## 4  on U4, A5 on U27
+NET "address(13)"                     LOC = "C10";    ## 3  on U4, B5 on U27
+NET "address(14)"                     LOC = "F10";    ## 2  on U4, C5 on U27
+NET "address(15)"                     LOC = "F9";     ## 1  on U4, D7 on U27
+NET "address(16)"                     LOC = "AH8";    ## 55 on U4, D8 on U27
+NET "address(17)"                     LOC = "AG8";    ## 18 on U4, A7 on U27
+NET "address(18)"                     LOC = "AP9";    ## 17 on U4, B7 on U27
+NET "address(19)"                     LOC = "AN9";    ## 16 on U4, C7 on U27
+NET "address(20)"                     LOC = "AF10";   ## 11 on U4, C8 on U27
+NET "address(21)"                     LOC = "AF9";    ## 10 on U4, A8 on U27
+NET "address(22)"                     LOC = "AL9";    ## 9  on U4, G1 on U27
+NET "address(23)"                     LOC = "AA23";   ## 26 on U4
+NET "data(0)"                      LOC = "AF24";   ## 34 on U4, F2 on U27
+NET "data(1)"                      LOC = "AF25";   ## 36 on U4, E2 on U27
+NET "data(2)"                      LOC = "W24";    ## 39 on U4, G3 on U27
+NET "data(3)"                      LOC = "V24";    ## 41 on U4, E4 on U27
+NET "data(4)"                      LOC = "H24";    ## 47 on U4, E5 on U27
+NET "data(5)"                      LOC = "H25";    ## 49 on U4, G5 on U27
+NET "data(6)"                      LOC = "P24";    ## 51 on U4, G6 on U27
+NET "data(7)"                      LOC = "R24";    ## 53 on U4, H7 on U27
+NET "data(8)"                      LOC = "G23";    ## 35 on U4, E1 on U27
+NET "data(9)"                      LOC = "H23";    ## 37 on U4, E3 on U27
+NET "data(10)"                     LOC = "N24";    ## 40 on U4, F3 on U27
+NET "data(11)"                     LOC = "N23";    ## 42 on U4, F4 on U27
+NET "data(12)"                     LOC = "F23";    ## 48 on U4, F5 on U27
+NET "data(13)"                     LOC = "F24";    ## 50 on U4, H5 on U27
+NET "data(14)"                     LOC = "L24";    ## 52 on U4, G7 on U27
+NET "data(15)"                     LOC = "M23";    ## 54 on U4, E7 on U27
+#NET "FLASH_WAIT"                    LOC = "J26";    ## 56 on U4
+NET "writen"                    LOC = "AF23";   ## 14 on U4, G8 on U27
+NET "oen"                    LOC = "AA24";   ## 32 on U4, F8 on U27
+#NET "FPGA_CCLK"                     LOC = "K8";     ##           F1 on U27
+NET "alatch"                 LOC = "AC23";   ##           H1 on U27
+NET "romsn"                    LOC = "Y24";    ## 30 on U4, B4 on U27 (U10 and switch S2.2 setting select either U4 or U27)
+##
+
+NET "erx_col"                       LOC = "AK13";   ## 114 on U80
+NET "erx_crs"                       LOC = "AL13";   ## 115 on U80
+NET "emdint"                       LOC = "AH14";   ## 32  on U80
+NET "emdc"                       LOC = "AP14";   ## 35  on U80
+NET "emdio"                      LOC = "AN14";   ## 33  on U80
+NET "erstn"                     LOC = "AH13";   ## 36  on U80
+NET "erx_clk"                     LOC = "AP11";   ## 7   on U80
+NET "erx_dv"                LOC = "AM13";   ## 4   on U80
+NET "erxd(0)"                      LOC = "AN13";   ## 3   on U80
+NET "erxd(1)"                      LOC = "AF14";   ## 128 on U80
+NET "erxd(2)"                      LOC = "AE14";   ## 126 on U80
+NET "erxd(3)"                      LOC = "AN12";   ## 125 on U80
+NET "erxd(4)"                      LOC = "AM12";   ## 124 on U80
+NET "erxd(5)"                      LOC = "AD11";   ## 123 on U80
+NET "erxd(6)"                      LOC = "AC12";   ## 121 on U80
+NET "erxd(7)"                      LOC = "AC13";   ## 120 on U80
+NET "erx_er"                      LOC = "AG12";   ## 9   on U80
+NET "etx_clk"                     LOC = "AD12";   ## 10  on U80
+NET "etx_en"                LOC = "AJ10";   ## 16  on U80
+NET "egtx_clk"                LOC = "AH12";   ## 14  on U80
+NET "etxd(0)"                      LOC = "AM11";   ## 18  on U80
+NET "etxd(1)"                      LOC = "AL11";   ## 19  on U80
+NET "etxd(2)"                      LOC = "AG10";   ## 20  on U80
+NET "etxd(3)"                      LOC = "AG11";   ## 24  on U80
+NET "etxd(4)"                      LOC = "AL10";   ## 25  on U80
+NET "etxd(5)"                      LOC = "AM10";   ## 26  on U80
+NET "etxd(6)"                      LOC = "AE11";   ## 28  on U80
+NET "etxd(7)"                      LOC = "AF11";   ## 29  on U80
+NET "etx_er"                      LOC = "AH10";   ## 13  on U80
+
+NET "dsurx"                      LOC = "J24";    ## 24  on U34
+NET "dsutx"                      LOC = "J25";    ## 25  on U34
+
+#NET "GPIO_DIP_SW1"                  LOC = "D22";    ## 1   on SW1 DIP switch (active-high)
+#NET "GPIO_DIP_SW2"                  LOC = "C22";    ## 2   on SW1 DIP switch (active-high)
+#NET "GPIO_DIP_SW3"                  LOC = "L21";    ## 3   on SW1 DIP switch (active-high)
+#NET "GPIO_DIP_SW4"                  LOC = "L20";    ## 4   on SW1 DIP switch (active-high)
+#NET "GPIO_DIP_SW5"                  LOC = "C18";    ## 5   on SW1 DIP switch (active-high)
+NET "dsubre"                  LOC = "B18";    ## 6   on SW1 DIP switch (active-high)
+#NET "GPIO_DIP_SW7"                  LOC = "K22";    ## 7   on SW1 DIP switch (active-high)
+#NET "GPIO_DIP_SW8"                  LOC = "K21";    ## 8   on SW1 DIP switch (active-high)
+##
+
+NET "led(0)"                    LOC = "AC22";   ## 2   on LED DS12, 1 on J62
+NET "led(1)"                    LOC = "AC24";   ## 2   on LED DS11, 2 on J62
+NET "led(2)"                    LOC = "AE22";   ## 2   on LED DS9,  3 on J62
+NET "led(3)"                    LOC = "AE23";   ## 2   on LED DS10, 4 on J62
+NET "led(4)"                    LOC = "AB23";   ## 2   on LED DS15, 5 on J62
+NET "led(4)"                    LOC = "AB23";   ## 2   on LED DS15, 5 on J62
+NET "led(5)"                    LOC = "AG23";   ## 2   on LED DS14, 6 on J62
+#NET "GPIO_LED_5"                    LOC = "AG23";   ## 2   on LED DS14, 6 on J62
+#NET "GPIO_LED_6"                    LOC = "AE24";   ## 2   on LED DS22, 7 on J62
+#NET "GPIO_LED_7"                    LOC = "AD24";   ## 2   on LED DS21, 8 on J62
+
+NET "dvi_iic_scl"                   LOC = "AN10";   ## 2   on Q5, 15 on U38
+NET "iic_scl_main"               LOC = "AK9";    ## 2   on Q19
+#NET "IIC_SCL_SFP"                   LOC = "AA34";   ## 2   on Q23
+NET "dvi_iic_sda"                   LOC = "AP10";   ## 2   on Q6, 14 on U38
+NET "iic_sda_main"               LOC = "AE9";    ## 2   on Q20
+#NET "IIC_SDA_SFP"                   LOC = "AA33";   ## 2   on Q21
+
+NET "tft_lcd_data(0)"                        LOC = "AJ19";   ## 63 on U38 (thru series R111 47.5 ohm)
+NET "tft_lcd_data(1)"                        LOC = "AH19";   ## 62 on U38 (thru series R110 47.5 ohm)
+NET "tft_lcd_data(2)"                        LOC = "AM17";   ## 61 on U38 (thru series R109 47.5 ohm)
+NET "tft_lcd_data(3)"                        LOC = "AM16";   ## 60 on U38 (thru series R108 47.5 ohm)
+NET "tft_lcd_data(4)"                        LOC = "AD17";   ## 59 on U38 (thru series R107 47.5 ohm)
+NET "tft_lcd_data(5)"                        LOC = "AE17";   ## 58 on U38 (thru series R106 47.5 ohm)
+NET "tft_lcd_data(6)"                        LOC = "AK18";   ## 55 on U38 (thru series R105 47.5 ohm)
+NET "tft_lcd_data(7)"                        LOC = "AK17";   ## 54 on U38 (thru series R104 47.5 ohm)
+NET "tft_lcd_data(8)"                        LOC = "AE18";   ## 53 on U38 (thru series R103 47.5 ohm)
+NET "tft_lcd_data(9)"                        LOC = "AF18";   ## 52 on U38 (thru series R102 47.5 ohm)
+NET "tft_lcd_data(10)"                       LOC = "AL16";   ## 51 on U38 (thru series R101 47.5 ohm)
+NET "tft_lcd_data(11)"                       LOC = "AK16";   ## 50 on U38 (thru series R100 47.5 ohm)
+NET "tft_lcd_de"                        LOC = "AD16";   ## 2  on U38 (thru series R112 47.5 ohm)
+#NET "DVI_GPIO1_FMC_C2M_PG_LS"       LOC = "K9";     ## 18 on U32 (not wired to U38)
+NET "tft_lcd_hsync"                         LOC = "AN17";   ## 4  on U38 (thru series R113 47.5 ohm)
+NET "tft_lcd_reset_b"                LOC = "AP17";   ## 2  on U32 (DVI_RESET_B pin 13 on U38)
+NET "tft_lcd_vsync"                         LOC = "AD15";   ## 5  on U38 (thru series R114 47.5 ohm)
+NET "tft_lcd_clk_n"                    LOC = "AC17";   ## 56 on U38
+NET "tft_lcd_clk_p"                    LOC = "AC18";   ## 57 on U38
+
+#NET "SYSACE_CFGTDI"                 LOC = "AC8";    ## 81  on U19
+NET "sysace_d(0)"                     LOC = "AM15";   ## 66  on U19
+NET "sysace_d(1)"                     LOC = "AJ17";   ## 65  on U19
+NET "sysace_d(2)"                     LOC = "AJ16";   ## 63  on U19
+NET "sysace_d(3)"                     LOC = "AP16";   ## 62  on U19
+NET "sysace_d(4)"                     LOC = "AG16";   ## 61  on U19
+NET "sysace_d(5)"                     LOC = "AH15";   ## 60  on U19
+NET "sysace_d(6)"                     LOC = "AF16";   ## 59  on U19
+NET "sysace_d(7)"                     LOC = "AN15";   ## 58  on U19
+NET "sysace_mpa(0)"                  LOC = "AC15";   ## 70  on U19
+NET "sysace_mpa(1)"                  LOC = "AP15";   ## 69  on U19
+NET "sysace_mpa(2)"                  LOC = "AG17";   ## 68  on U19
+NET "sysace_mpa(3)"                  LOC = "AH17";   ## 67  on U19
+NET "sysace_mpa(4)"                  LOC = "AG15";   ## 45  on U19
+NET "sysace_mpa(5)"                  LOC = "AF15";   ## 44  on U19
+NET "sysace_mpa(6)"                  LOC = "AK14";   ## 43  on U19
+#NET "SYSACE_MPBRDY"                 LOC = "AJ15";   ## 39  on U19
+NET "sysace_mpce"                   LOC = "AJ14";   ## 42  on U19
+NET "sysace_mpirq"                  LOC = "L9";     ## 41  on U19
+NET "sysace_mpoe"                   LOC = "AL15";   ## 77  on U19
+NET "sysace_mpwe"                   LOC = "AL14";   ## 76  on U19
+NET "clk_33"              LOC = "AE16";   ## 93  on U19
+NET "clk_33" PERIOD = 30.000 ;
+OFFSET = IN : 20.000 : BEFORE clk_33 ;
+OFFSET = OUT : 20.000 : AFTER clk_33 ;
+
+
+NET "clkm" 		TNM_NET = "clkm";
+NET "clk_ddr" 		TNM_NET = "clk_ddr";
+
+TIMESPEC "TS_clkm_clk_ddr" = FROM "clkm" TO "clk_ddr" TIG;
+TIMESPEC "TS_clk_ddr_clkm" = FROM "clk_ddr" TO "clkm" TIG;
+
+NET "erx_clk" PERIOD = 8.000 ;
+OFFSET = IN : 5.000 : BEFORE erx_clk ;
+#OFFSET = IN : 2.000 : BEFORE erx_clk ;
+
+NET "etx_clk" PERIOD = 40.000 ;
+OFFSET = OUT : 15.000 : AFTER etx_clk ;
+OFFSET = IN : 8.000 : BEFORE etx_clk ;
+
+NET "etx_clk" MAXSKEW= 1.0 ns;
+NET "erx_clk" MAXSKEW= 1.0 ns;
+
+#NET "egtx_clk" PERIOD = 8.000 ;
+#OFFSET = OUT : 5.500 : AFTER egtx_clk;
+#NET "egtx_clk" CLOCK_DEDICATED_ROUTE = FALSE;
+
+NET "gmiiclk_p"                 LOC = "H6";
+NET "gmiiclk_n"                 LOC = "H5";
+NET "gmiiclk_p" PERIOD = 8.000 ;
+OFFSET = OUT : 12.000 : AFTER gmiiclk_p;
+
+////////////////////////////////////////////////////////////////////////////
+// VGA clock
+////////////////////////////////////////////////////////////////////////////
+#NET "clkvga" TNM_NET = "clkvga" | PERIOD = 15.385;
+#TIMESPEC "TSPLB_TFT25" = FROM "clkm" TO "clkvga" TIG;
+#TIMESPEC "TSPLB_TFT40" = FROM "clkvga" TO "clkm" TIG;
+
+
+
+######################################################################################
+## MMCM_ADV CONSTRAINTS                                                             ##
+######################################################################################
+
+INST "uddr3ctrl/_infrastructure/u_mmcm_adv"      LOC = "MMCM_ADV_X0Y8"; #Banks 16, 26, 36
+
+# Constrain BUFR clocks used to synchronize data from IOB to fabric logic
+# Note that ISE cannot infer this from other PERIOD constraints because
+# of the use of OSERDES blocks in the BUFR clock generation path
+NET "ddr3ctrl/u_memc_ui_top/u_mem_intfc/phy_top0/clk_rsync[?]" TNM_NET = TNM_clk_rsync_xst;
+TIMESPEC "TS_clk_rsync_xst" = PERIOD "TNM_clk_rsync_xst" 5 ns;
+
+# Paths between DQ/DQS ISERDES.Q outputs and CLB flops clocked by falling 
+# edge of BUFR will by design only be used if DYNCLKDIVSEL is asserted for 
+# that particular flop. Mark this path as being a full-cycle, rather than 
+# a half cycle path for timing purposes. NOTE: This constraint forces full-
+# cycle timing to be applied globally for all rising->falling edge paths 
+# in all resynchronizaton clock domains. If the user had modified the logic
+# in the resync clock domain such that other rising->falling edge paths 
+# exist, then constraint below should be modified to utilize pattern 
+# matching to specific affect only the DQ/DQS ISERDES.Q outputs
+TIMEGRP "TG_clk_rsync_rise_xst" = RISING  "TNM_clk_rsync_xst";
+TIMEGRP "TG_clk_rsync_fall_xst" = FALLING "TNM_clk_rsync_xst";
+TIMESPEC "TS_clk_rsync_rise_to_fall_xst" = 
+  FROM "TG_clk_rsync_rise_xst" TO "TG_clk_rsync_fall_xst" "TS_sys_clk" * 2;
+
+# Signal to select between controller and physical layer signals. Four divided by two clock
+# cycles (8 memory clock cycles) are provided by design for the signal to settle down.
+# Used only by the phy modules.
+#INST "u_memc_ui_top/u_mem_intfc/phy_top0/u_phy_init/u_ff_phy_init_data_sel" TNM = "TNM_PHY_INIT_SEL";
+#TIMESPEC "TS_MC_PHY_INIT_SEL" = FROM "TNM_PHY_INIT_SEL" TO FFS = 10 ns;  ## = "2.5ns * 4" ML605 single clock
+
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/leon3mp.vhd work/leon3-xilinx-ml605/leon3mp.vhd
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/leon3mp.vhd	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/leon3mp.vhd	2019-12-29 15:59:50.136754003 +0100
@@ -0,0 +1,852 @@
+------------------------------------------------------------------------------
+--  LEON3 Demonstration design
+--  Copyright (C) 2006 Jiri Gaisler, Gaisler Research
+------------------------------------------------------------------------------
+--  This file is a part of the GRLIB VHDL IP LIBRARY
+--  Copyright (C) 2003 - 2008, Gaisler Research
+--  Copyright (C) 2008 - 2014, Aeroflex Gaisler
+--
+--  This program is free software; you can redistribute it and/or modify
+--  it under the terms of the GNU General Public License as published by
+--  the Free Software Foundation; either version 2 of the License, or
+--  (at your option) any later version.
+--
+--  This program is distributed in the hope that it will be useful,
+--  but WITHOUT ANY WARRANTY; without even the implied warranty of
+--  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+--  GNU General Public License for more details.
+--
+--  You should have received a copy of the GNU General Public License
+--  along with this program; if not, write to the Free Software
+--  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA 
+------------------------------------------------------------------------------
+
+library ieee;
+use ieee.std_logic_1164.all;
+use ieee.numeric_std.all;
+
+library grlib;
+use grlib.config.all;
+use grlib.amba.all;
+use grlib.stdlib.all;
+use grlib.devices.all;
+library techmap;
+use techmap.gencomp.all;
+use techmap.allclkgen.all;
+library gaisler;
+use gaisler.memctrl.all;
+use gaisler.leon3.all;
+use gaisler.uart.all;
+use gaisler.misc.all;
+use gaisler.i2c.all;
+use gaisler.net.all;
+use gaisler.jtag.all;
+library esa;
+use esa.memoryctrl.all;
+use work.config.all;
+use work.ml605.all;
+use work.pcie.all;
+-- pragma translate_off
+use gaisler.sim.all;
+-- pragma translate_on
+
+entity leon3mp is
+  generic (
+    fabtech  : integer := CFG_FABTECH;
+    memtech  : integer := CFG_MEMTECH;
+    padtech  : integer := CFG_PADTECH;
+    disas    : integer := CFG_DISAS;     -- Enable disassembly to console
+    dbguart  : integer := CFG_DUART;     -- Print UART on console
+    pclow    : integer := CFG_PCLOW;
+    SIM_BYPASS_INIT_CAL : string := "OFF"
+    );
+  port (
+    reset     : in    std_ulogic;
+    errorn    : out   std_ulogic;
+    clk_ref_p     : in    std_logic;
+    clk_ref_n     : in    std_logic;
+
+    -- PROM interface
+    address   : out   std_logic_vector(23 downto 0);
+    data      : inout std_logic_vector(15 downto 0);
+    romsn     : out   std_ulogic;
+    oen       : out   std_ulogic;
+    writen    : out   std_ulogic;
+    alatch    : out   std_ulogic;
+
+    -- DDR3 memory
+    ddr3_dq       : inout std_logic_vector(DQ_WIDTH-1 downto 0);
+    ddr3_dm       : out   std_logic_vector(DM_WIDTH-1 downto 0);
+    ddr3_addr     : out   std_logic_vector(ROW_WIDTH-1 downto 0);
+    ddr3_ba       : out   std_logic_vector(BANK_WIDTH-1 downto 0);
+    ddr3_ras_n    : out   std_logic;
+    ddr3_cas_n    : out   std_logic;
+    ddr3_we_n     : out   std_logic;
+    ddr3_reset_n  : out   std_logic;
+    ddr3_cs_n     : out   std_logic_vector((CS_WIDTH*nCS_PER_RANK)-1 downto 0);
+    ddr3_odt      : out   std_logic_vector((CS_WIDTH*nCS_PER_RANK)-1 downto 0);
+    ddr3_cke      : out   std_logic_vector(CKE_WIDTH-1 downto 0);
+    ddr3_dqs_p    : inout std_logic_vector(DQS_WIDTH-1 downto 0);
+    ddr3_dqs_n    : inout std_logic_vector(DQS_WIDTH-1 downto 0);
+    ddr3_ck_p     : out   std_logic_vector(CK_WIDTH-1 downto 0);
+    ddr3_ck_n     : out   std_logic_vector(CK_WIDTH-1 downto 0);
+
+    -- Debug support unit
+    dsubre    : in    std_ulogic;       -- Debug Unit break (connect to button)
+
+    -- AHB Uart
+    dsurx     : in    std_ulogic;
+    dsutx     : out   std_ulogic;
+
+    -- Ethernet signals
+    gmiiclk_p : in    std_ulogic;
+    gmiiclk_n : in    std_ulogic;
+    egtx_clk  : out   std_ulogic;
+    etx_clk   : in    std_ulogic;
+    erx_clk   : in    std_ulogic;
+    erxd      : in    std_logic_vector(7 downto 0);
+    erx_dv    : in    std_ulogic;
+    erx_er    : in    std_ulogic;
+    erx_col   : in    std_ulogic;
+    erx_crs   : in    std_ulogic;
+    emdint    : in std_ulogic;
+    etxd      : out   std_logic_vector(7 downto 0);
+    etx_en    : out   std_ulogic;
+    etx_er    : out   std_ulogic;
+    emdc      : out   std_ulogic;
+    emdio     : inout std_logic;
+    erstn     : out   std_ulogic;
+
+    iic_scl_main    : inout std_ulogic;
+    iic_sda_main    : inout std_ulogic;
+
+    dvi_iic_scl     : inout std_logic;
+    dvi_iic_sda     : inout std_logic;
+
+    tft_lcd_data    : out std_logic_vector(11 downto 0);
+    tft_lcd_clk_p   : out std_ulogic;
+    tft_lcd_clk_n   : out std_ulogic;
+    tft_lcd_hsync   : out std_ulogic;
+    tft_lcd_vsync   : out std_ulogic;
+    tft_lcd_de      : out std_ulogic;
+    tft_lcd_reset_b : out std_ulogic;
+
+    clk_33          : in  std_ulogic;	-- SYSACE clock
+    sysace_mpa      : out std_logic_vector(6 downto 0);
+    sysace_mpce     : out std_ulogic;
+    sysace_mpirq    : in  std_ulogic;
+    sysace_mpoe     : out std_ulogic;
+    sysace_mpwe     : out std_ulogic;
+    sysace_d        : inout std_logic_vector(7 downto 0);
+
+    pci_exp_txp : out std_logic_vector(CFG_NO_OF_LANES-1 downto 0);
+    pci_exp_txn : out std_logic_vector(CFG_NO_OF_LANES-1 downto 0);
+    pci_exp_rxp : in std_logic_vector(CFG_NO_OF_LANES-1 downto 0);
+    pci_exp_rxn : in std_logic_vector(CFG_NO_OF_LANES-1 downto 0);
+
+    sys_clk_p   : in  std_logic;
+    sys_clk_n   : in  std_logic;
+    sys_reset_n : in  std_logic;
+
+
+    -- Output signals to LEDs
+    led       : out   std_logic_vector(6 downto 0)
+    );
+end;
+
+architecture rtl of leon3mp is
+
+  signal vcc : std_logic;
+  signal gnd : std_logic;
+
+  signal memi : memory_in_type;
+  signal memo : memory_out_type;
+  signal wpo  : wprot_out_type;
+
+  signal gpioi : gpio_in_type;
+  signal gpioo : gpio_out_type;
+
+  signal apbi  : apb_slv_in_type;
+  signal apbo  : apb_slv_out_vector := (others => apb_none);
+  signal ahbsi : ahb_slv_in_type;
+  signal ahbso : ahb_slv_out_vector := (others => ahbs_none);
+  signal ahbmi : ahb_mst_in_type;
+  signal ahbmo : ahb_mst_out_vector := (others => ahbm_none);
+
+  signal u1i, dui : uart_in_type;
+  signal u1o, duo : uart_out_type;
+
+  signal irqi : irq_in_vector(0 to CFG_NCPU-1);
+  signal irqo : irq_out_vector(0 to CFG_NCPU-1);
+
+  signal dbgi : l3_debug_in_vector(0 to CFG_NCPU-1);
+  signal dbgo : l3_debug_out_vector(0 to CFG_NCPU-1);
+
+  signal dsui : dsu_in_type;
+  signal dsuo : dsu_out_type;
+
+  signal fpi : grfpu_in_vector_type;
+  signal fpo : grfpu_out_vector_type;
+
+  signal ethi : eth_in_type;
+  signal etho : eth_out_type;
+
+  signal gpti : gptimer_in_type;
+
+  signal lclk, clk_ddr, lclk200      : std_ulogic;
+  signal clkm, rstn, clkml  : std_ulogic;
+  signal tck, tms, tdi, tdo : std_ulogic;
+  signal rstraw             : std_logic;
+  signal lock               : std_logic;
+
+  signal tb_rst        : std_logic;
+  signal tb_clk        : std_logic;
+  signal phy_init_done : std_logic;
+  signal lerrorn        : std_logic;
+
+  -- RS232 APB Uart
+  signal rxd1 : std_logic;
+  signal txd1 : std_logic;
+
+-- VGA
+  signal vgao  : apbvga_out_type;
+  signal lcd_datal : std_logic_vector(11 downto 0);
+  signal lcd_hsyncl, lcd_vsyncl, lcd_del, lcd_reset_bl : std_ulogic;
+  signal clk_sel : std_logic_vector(1 downto 0);
+  signal clk100 : std_ulogic;
+  signal clkvga, clkvga_p, clkvga_n : std_ulogic;
+
+-- IIC
+
+  signal i2ci, dvi_i2ci : i2c_in_type;
+  signal i2co, dvi_i2co : i2c_out_type;
+
+-- SYSACE
+  signal clkace : std_ulogic;
+  signal acei   : gracectrl_in_type;
+  signal aceo   : gracectrl_out_type;
+
+  -- Used for connecting input/output signals to the DDR3 controller
+  signal migi		: mig_app_in_type;
+  signal migo		: mig_app_out_type;
+
+  attribute keep                     : boolean;
+  attribute syn_keep                 : boolean;
+  attribute syn_preserve             : boolean;
+  attribute syn_keep of lock         : signal is true;
+  attribute syn_keep of clk_ddr        : signal is true;
+  attribute syn_keep of clkm         : signal is true;
+  attribute syn_preserve of clkm     : signal is true;
+  attribute syn_preserve of clk_ddr     : signal is true;
+  attribute keep of lock             : signal is true;
+  attribute keep of clkm             : signal is true;
+  attribute keep of clk_ddr             : signal is true;
+
+  constant VCO_FREQ  : integer := 1200000;                               -- MMCM VCO frequency in KHz
+  constant CPU_FREQ   : integer := VCO_FREQ / CFG_MIG_CLK4;  -- cpu frequency in KHz
+  constant I2C_FILTER : integer := (CPU_FREQ*5+50000)/100000+1;
+
+begin
+
+----------------------------------------------------------------------
+---  Reset and Clock generation  -------------------------------------
+----------------------------------------------------------------------
+
+  vcc <= '1';
+  gnd <= '0';
+  alatch <= '0';
+  erstn <= rstn;
+
+  -- Glitch free reset that can be used for the Eth Phy and flash memory
+
+  rst0 : rstgen generic map (acthigh => 1)
+    port map (reset, clkm, lock, rstn, rstraw);
+
+----------------------------------------------------------------------
+---  AHB CONTROLLER --------------------------------------------------
+----------------------------------------------------------------------
+
+  ahb0 : ahbctrl
+    generic map (defmast => CFG_DEFMST, split => CFG_SPLIT,
+                 rrobin  => CFG_RROBIN, ioaddr => CFG_AHBIO, ioen => 1,
+                 nahbm => CFG_NCPU+CFG_AHB_UART+CFG_AHB_JTAG+CFG_GRETH+CFG_SVGA_ENABLE+CFG_PCIEXP,
+                 nahbs => 9)
+    port map (rstn, clkm, ahbmi, ahbmo, ahbsi, ahbso);
+
+----------------------------------------------------------------------
+---  LEON3 processor and DSU -----------------------------------------
+----------------------------------------------------------------------
+
+  -- LEON3 processor
+  nosh : if CFG_GRFPUSH = 0 generate
+    cpu : for i in 0 to CFG_NCPU-1 generate
+      l3ft : if CFG_LEON3FT_EN /= 0 generate
+        leon3ft0 : leon3ft		-- LEON3 processor
+        generic map (i, fabtech, memtech, CFG_NWIN, CFG_DSU, CFG_FPU*(1-CFG_GRFPUSH), CFG_V8,
+  	  0, CFG_MAC, pclow, CFG_NOTAG, CFG_NWP, CFG_ICEN, CFG_IREPL, CFG_ISETS, CFG_ILINE,
+	  CFG_ISETSZ, CFG_ILOCK, CFG_DCEN, CFG_DREPL, CFG_DSETS, CFG_DLINE, CFG_DSETSZ,
+	  CFG_DLOCK, CFG_DSNOOP, CFG_ILRAMEN, CFG_ILRAMSZ, CFG_ILRAMADDR, CFG_DLRAMEN,
+          CFG_DLRAMSZ, CFG_DLRAMADDR, CFG_MMUEN, CFG_ITLBNUM, CFG_DTLBNUM, CFG_TLB_TYPE, CFG_TLB_REP,
+          CFG_LDDEL, disas, CFG_ITBSZ, CFG_PWD, CFG_SVT, CFG_RSTADDR, CFG_NCPU-1,
+	  CFG_IUFT_EN, CFG_FPUFT_EN, CFG_CACHE_FT_EN, CFG_RF_ERRINJ,
+	  CFG_CACHE_ERRINJ, CFG_DFIXED, CFG_LEON3_NETLIST, CFG_SCAN, CFG_MMU_PAGE)
+        port map (clkm, rstn, ahbmi, ahbmo(i), ahbsi, ahbso,
+    		irqi(i), irqo(i), dbgi(i), dbgo(i), clkm);
+      end generate;
+
+      l3s : if CFG_LEON3FT_EN = 0 generate
+        u0 : leon3s 		-- LEON3 processor
+        generic map (i, fabtech, memtech, CFG_NWIN, CFG_DSU, CFG_FPU*(1-CFG_GRFPUSH), CFG_V8,
+	  0, CFG_MAC, pclow, CFG_NOTAG, CFG_NWP, CFG_ICEN, CFG_IREPL, CFG_ISETS, CFG_ILINE,
+	  CFG_ISETSZ, CFG_ILOCK, CFG_DCEN, CFG_DREPL, CFG_DSETS, CFG_DLINE, CFG_DSETSZ,
+	  CFG_DLOCK, CFG_DSNOOP, CFG_ILRAMEN, CFG_ILRAMSZ, CFG_ILRAMADDR, CFG_DLRAMEN,
+          CFG_DLRAMSZ, CFG_DLRAMADDR, CFG_MMUEN, CFG_ITLBNUM, CFG_DTLBNUM, CFG_TLB_TYPE, CFG_TLB_REP,
+          CFG_LDDEL, disas, CFG_ITBSZ, CFG_PWD, CFG_SVT, CFG_RSTADDR, CFG_NCPU-1,
+	  CFG_DFIXED, CFG_SCAN, CFG_MMU_PAGE)
+        port map (clkm, rstn, ahbmi, ahbmo(i), ahbsi, ahbso,
+    		irqi(i), irqo(i), dbgi(i), dbgo(i));
+      end generate;
+    end generate;
+  end generate;
+
+  sh : if CFG_GRFPUSH = 1 generate
+    cpu : for i in 0 to CFG_NCPU-1 generate
+      l3ft : if CFG_LEON3FT_EN /= 0 generate
+        leon3ft0 : leon3ftsh		-- LEON3 processor
+        generic map (i, fabtech, memtech, CFG_NWIN, CFG_DSU, CFG_FPU, CFG_V8,
+  	  0, CFG_MAC, pclow, CFG_NOTAG, CFG_NWP, CFG_ICEN, CFG_IREPL, CFG_ISETS, CFG_ILINE,
+	  CFG_ISETSZ, CFG_ILOCK, CFG_DCEN, CFG_DREPL, CFG_DSETS, CFG_DLINE, CFG_DSETSZ,
+	  CFG_DLOCK, CFG_DSNOOP, CFG_ILRAMEN, CFG_ILRAMSZ, CFG_ILRAMADDR, CFG_DLRAMEN,
+          CFG_DLRAMSZ, CFG_DLRAMADDR, CFG_MMUEN, CFG_ITLBNUM, CFG_DTLBNUM, CFG_TLB_TYPE, CFG_TLB_REP,
+          CFG_LDDEL, disas, CFG_ITBSZ, CFG_PWD, CFG_SVT, CFG_RSTADDR, CFG_NCPU-1,
+	  CFG_IUFT_EN, CFG_FPUFT_EN, CFG_CACHE_FT_EN, CFG_RF_ERRINJ,
+	  CFG_CACHE_ERRINJ, CFG_DFIXED, CFG_LEON3_NETLIST, CFG_SCAN, CFG_MMU_PAGE)
+        port map (clkm, rstn, ahbmi, ahbmo(i), ahbsi, ahbso,
+    		irqi(i), irqo(i), dbgi(i), dbgo(i), clkm,  fpi(i), fpo(i));
+
+      end generate;
+      l3s : if CFG_LEON3FT_EN = 0 generate
+        u0 : leon3sh 		-- LEON3 processor
+        generic map (i, fabtech, memtech, CFG_NWIN, CFG_DSU, CFG_FPU, CFG_V8,
+	  0, CFG_MAC, pclow, CFG_NOTAG, CFG_NWP, CFG_ICEN, CFG_IREPL, CFG_ISETS, CFG_ILINE,
+	  CFG_ISETSZ, CFG_ILOCK, CFG_DCEN, CFG_DREPL, CFG_DSETS, CFG_DLINE, CFG_DSETSZ,
+	  CFG_DLOCK, CFG_DSNOOP, CFG_ILRAMEN, CFG_ILRAMSZ, CFG_ILRAMADDR, CFG_DLRAMEN,
+          CFG_DLRAMSZ, CFG_DLRAMADDR, CFG_MMUEN, CFG_ITLBNUM, CFG_DTLBNUM, CFG_TLB_TYPE, CFG_TLB_REP,
+          CFG_LDDEL, disas, CFG_ITBSZ, CFG_PWD, CFG_SVT, CFG_RSTADDR, CFG_NCPU-1,
+	  CFG_DFIXED, CFG_SCAN, CFG_MMU_PAGE)
+        port map (clkm, rstn, ahbmi, ahbmo(i), ahbsi, ahbso,
+    		irqi(i), irqo(i), dbgi(i), dbgo(i), fpi(i), fpo(i));
+      end generate;
+    end generate;
+
+    grfpush0 : grfpushwx generic map ((CFG_FPU-1), CFG_NCPU, fabtech)
+    port map (clkm, rstn, fpi, fpo);
+
+  end generate;
+
+  lerrorn <= dbgo(0).error and rstn;
+  error_pad : odpad generic map (level => cmos, voltage => x25v, tech => padtech) port map (errorn, lerrorn);
+
+  dsugen : if CFG_DSU = 1 generate
+    -- LEON3 Debug Support Unit
+    dsugen : if CFG_DSU = 1 generate
+      dsu0 : dsu3
+        generic map (hindex => 2, haddr => 16#900#, hmask => 16#F00#,
+                     ncpu   => CFG_NCPU, tbits => 30, tech => memtech, irq => 0, kbytes => CFG_ATBSZ)
+        port map (rstn, clkm, ahbmi, ahbsi, ahbso(2), dbgo, dbgi, dsui, dsuo);
+
+      dsubre_pad : inpad generic map (level => cmos, voltage => x15v, tech  => padtech) port map (dsubre, dsui.break);
+
+      dsui.enable <= '1';
+      led(2) <= dsuo.active;
+    end generate;
+  end generate;
+  nodsu : if CFG_DSU = 0 generate
+    ahbso(2) <= ahbs_none; dsuo.tstop <= '0'; dsuo.active <= '0';
+  end generate;
+
+  -- Debug UART
+  dcomgen : if CFG_AHB_UART = 1 generate
+    dcom0 : ahbuart
+      generic map (hindex => CFG_NCPU, pindex => 4, paddr => 7)
+      port map (rstn, clkm, dui, duo, apbi, apbo(4), ahbmi, ahbmo(CFG_NCPU));
+    dsurx_pad : inpad generic map (level => cmos, voltage => x25v, tech  => padtech) port map (dsurx, dui.rxd);
+    dsutx_pad : outpad generic map (level => cmos, voltage => x25v, tech => padtech) port map (dsutx, duo.txd);
+    led(0) <= not dui.rxd;
+    led(1) <= not duo.txd;
+  end generate;
+  nouah : if CFG_AHB_UART = 0 generate apbo(4) <= apb_none; end generate;
+
+  ahbjtaggen0 :if CFG_AHB_JTAG = 1 generate
+    ahbjtag0 : ahbjtag generic map(tech => fabtech, hindex => CFG_NCPU+CFG_AHB_UART)
+      port map(rstn, clkm, tck, tms, tdi, tdo, ahbmi, ahbmo(CFG_NCPU+CFG_AHB_UART),
+               open, open, open, open, open, open, open, gnd);
+  end generate;
+
+----------------------------------------------------------------------
+---  Memory controllers ----------------------------------------------
+----------------------------------------------------------------------
+
+  mg2 : if CFG_MCTRL_LEON2 = 1 generate        -- LEON2 memory controller
+    sr1 : mctrl generic map (hindex => 5, pindex => 0, paddr => 0,
+	ram8 => CFG_MCTRL_RAM8BIT, ram16 => CFG_MCTRL_RAM16BIT, iomask => 0, rammask => 0)
+      port map (rstn, clkm, memi, memo, ahbsi, ahbso(5), apbi, apbo(0), wpo, open);
+  end generate;
+
+  memi.brdyn  <= '1';
+  memi.bexcn  <= '1';
+  memi.writen <= '1';
+  memi.wrn    <= "1111";
+  memi.bwidth <= "01";
+
+  mg0 : if (CFG_MCTRL_LEON2 = 0) generate
+    apbo(0) <= apb_none;
+    ahbso(5) <= ahbs_none;
+    roms_pad : outpad generic map (level => cmos, voltage => x25v, tech => padtech)
+      port map (romsn, vcc);
+    memo.bdrive(0) <= '1';
+  end generate;
+
+  mgpads : if (CFG_MCTRL_LEON2 /= 0) generate
+    addr_pad : outpadv generic map (level => cmos, voltage => x25v, tech => padtech, width => 24)
+      port map (address, memo.address(24 downto 1));
+    roms_pad : outpad generic map (level => cmos, voltage => x25v, tech => padtech)
+      port map (romsn, memo.romsn(0));
+    oen_pad : outpad generic map (level => cmos, voltage => x25v, tech => padtech)
+      port map (oen, memo.oen);
+    wri_pad : outpad generic map (level => cmos, voltage => x25v, tech => padtech)
+      port map (writen, memo.writen);
+  end generate;
+
+  bdr : iopadvv generic map (level => cmos, voltage => x25v, tech => padtech, width => 16)
+    port map (data(15 downto 0), memo.data(31 downto 16),
+              memo.vbdrive(31 downto 16), memi.data(31 downto 16));
+
+----------------------------------------------------------------------
+---  DDR3 memory controller ------------------------------------------
+----------------------------------------------------------------------
+
+--  mig_gen : if (CFG_MIG_DDR2 = 1) generate
+
+    ahb2mig0 : ahb2mig_ml605
+      generic map ( hindex => 0, haddr => 16#400#, hmask => 16#E00#,
+    MHz => 400, Mbyte => 512, nosync => boolean'pos(CFG_MIG_CLK4=12)) --CFG_CLKDIV/12)
+      port map (
+    rst => rstn, clk_ahb => clkm, clk_ddr => clk_ddr,
+    ahbsi => ahbsi, ahbso => ahbso(0), migi => migi, migo => migo);
+
+    ddr3ctrl : entity work.mig_37
+     generic map (SIM_BYPASS_INIT_CAL => SIM_BYPASS_INIT_CAL,CLKOUT_DIVIDE4 => work.config.CFG_MIG_CLK4)
+     port map(
+      clk_ref_p         =>   clk_ref_p,
+      clk_ref_n         =>   clk_ref_n,
+      ddr3_dq           =>   ddr3_dq,
+      ddr3_addr         =>   ddr3_addr,
+      ddr3_ba           =>   ddr3_ba,
+      ddr3_ras_n        =>   ddr3_ras_n,
+      ddr3_cas_n        =>   ddr3_cas_n,
+      ddr3_we_n         =>   ddr3_we_n,
+      ddr3_reset_n      =>   ddr3_reset_n,
+      ddr3_cs_n         =>   ddr3_cs_n,
+      ddr3_odt          =>   ddr3_odt,
+      ddr3_cke          =>   ddr3_cke,
+      ddr3_dm           =>   ddr3_dm,
+      ddr3_dqs_p        =>   ddr3_dqs_p,
+      ddr3_dqs_n        =>   ddr3_dqs_n,
+      ddr3_ck_p         =>   ddr3_ck_p,
+      ddr3_ck_n         =>   ddr3_ck_n,
+      app_wdf_wren      =>   migi.app_wdf_wren,
+      app_wdf_data      =>   migi.app_wdf_data,
+      app_wdf_mask      =>   migi.app_wdf_mask,
+      app_wdf_end       =>   migi.app_wdf_end,
+      app_addr          =>   migi.app_addr,
+      app_cmd           =>   migi.app_cmd,
+      app_en            =>   migi.app_en,
+      app_rdy           =>   migo.app_rdy,
+      app_wdf_rdy       =>   migo.app_wdf_rdy,
+      app_rd_data       =>   migo.app_rd_data,
+      app_rd_data_valid =>   migo.app_rd_data_valid,
+      tb_rst            =>   open,
+      tb_clk            =>   clk_ddr,
+      clk_ahb           =>   clkm,
+      clk100            =>   clk100,
+      phy_init_done     =>   phy_init_done,
+      sys_rst_13        =>   reset,
+      sys_rst_14        =>   rstraw
+    );
+
+    led(3)  <= phy_init_done;
+    led(4)  <= rstn;
+    led(5)  <= reset;
+    led(6)  <= '0';
+    lock    <= phy_init_done; -- and cgo.clklock;
+
+--    end generate;
+--    noddr : if (CFG_DDR2SP+CFG_MIG_DDR2) = 0 generate lock <= cgo.clklock; end generate;
+ 
+----------------------------------------------------------------------
+---  System ACE I/F Controller ---------------------------------------
+----------------------------------------------------------------------
+
+  grace: if CFG_GRACECTRL = 1 generate
+    grace0 : gracectrl generic map (hindex => 7, hirq => 10, mode => 2,
+        haddr => 16#002#, hmask => 16#fff#, split => CFG_SPLIT)
+      port map (rstn, clkm, clkace, ahbsi, ahbso(7), acei, aceo);
+  end generate;
+  nograce: if CFG_GRACECTRL /= 1 generate
+    aceo <= gracectrl_none;
+  end generate;
+
+  clk_33_pad : clkpad generic map (level => cmos, voltage => x25v, tech => padtech)
+        port map (clk_33, clkace);
+  sysace_mpa_pads : outpadv generic map (level => cmos, voltage => x25v, width => 7, tech => padtech)
+    port map (sysace_mpa, aceo.addr);
+  sysace_mpce_pad : outpad generic map (level => cmos, voltage => x25v, tech => padtech)
+    port map (sysace_mpce, aceo.cen);
+  sysace_d_pads : iopadv generic map (level => cmos, voltage => x25v, tech => padtech, width => 8)
+    port map (sysace_d(7 downto 0), aceo.do(7 downto 0), aceo.doen, acei.di(7 downto 0));
+  acei.di(15 downto 8) <= (others => '0');
+  sysace_mpoe_pad : outpad generic map (level => cmos, voltage => x25v, tech => padtech)
+    port map (sysace_mpoe, aceo.oen);
+  sysace_mpwe_pad : outpad generic map (level => cmos, voltage => x25v, tech => padtech)
+    port map (sysace_mpwe, aceo.wen);
+  sysace_mpirq_pad : inpad generic map (level => cmos, voltage => x25v, tech => padtech)
+    port map (sysace_mpirq, acei.irq);
+
+-----------------PCI-EXPRESS-Master-Target------------------------------------------
+    pcie_mt : if CFG_PCIE_TYPE = 1 generate	-- master/target without fifo
+EP: pcie_master_target_virtex
+  generic map (
+    fabtech          => fabtech,
+    hmstndx          => CFG_NCPU+CFG_AHB_UART+CFG_AHB_JTAG+CFG_GRETH+CFG_SVGA_ENABLE,
+    hslvndx          => 8,
+    abits            => 21,
+    device_id        => CFG_PCIEXPDID,	       -- PCIE device ID
+    vendor_id        => CFG_PCIEXPVID,	 -- PCIE vendor ID
+    pcie_bar_mask    => 16#FFE#,
+    nsync            => 2,   -- 1 or 2 sync regs between clocks
+    haddr            => 16#a00#,    
+    hmask            => 16#fff#,   
+    pindex           => 5,   
+    paddr            => 5,   
+    pmask            => 16#fff#,
+    Master           => CFG_PCIE_SIM_MAS,  
+    lane_width       => CFG_NO_OF_LANES  
+          )
+  port map( 
+    rst              => rstn,
+    clk              => clkm,
+    -- System Interface
+    sys_clk_p        => sys_clk_p,
+    sys_clk_n        => sys_clk_n,
+    sys_reset_n      => sys_reset_n,
+    -- PCI Express Fabric Interface
+    pci_exp_txp      => pci_exp_txp,
+    pci_exp_txn      => pci_exp_txn,
+    pci_exp_rxp      => pci_exp_rxp,
+    pci_exp_rxn      => pci_exp_rxn,
+    
+    ahbso            => ahbso(8),        
+    ahbsi            => ahbsi,         
+    apbi             => apbi,	      
+    apbo             => apbo(5),	      
+    ahbmi            => ahbmi,
+    ahbmo            => ahbmo(CFG_NCPU+CFG_AHB_UART+CFG_AHB_JTAG+CFG_GRETH+CFG_SVGA_ENABLE)    
+  );
+    end generate;
+------------------PCI-EXPRESS-Master-FIFO------------------------------------------
+pcie_mf : if CFG_PCIE_TYPE = 3 generate	-- master with fifo and DMA
+dma:pciedma
+      generic map (fabtech => fabtech, memtech => memtech, dmstndx =>(CFG_NCPU+CFG_AHB_UART+CFG_AHB_JTAG+CFG_GRETH+CFG_SVGA_ENABLE), 
+	  dapbndx => 8, dapbaddr => 8,dapbirq => 8, blength => 12, abits => 21,
+	  device_id => CFG_PCIEXPDID, vendor_id => CFG_PCIEXPVID, pcie_bar_mask => 16#FFE#,
+	  slvndx => 8, apbndx => 5, apbaddr => 5, haddr => 16#A00#,hmask=> 16#FFF#,
+	  nsync => 2,lane_width => CFG_NO_OF_LANES)
+
+port map( 
+    rst          => rstn,
+    clk          => clkm,
+    -- System Interface
+    sys_clk_p    => sys_clk_p,
+    sys_clk_n    => sys_clk_n,
+    sys_reset_n  => sys_reset_n,
+    -- PCI Express Fabric Interface
+    pci_exp_txp  => pci_exp_txp,
+    pci_exp_txn  => pci_exp_txn,
+    pci_exp_rxp  => pci_exp_rxp,
+    pci_exp_rxn  => pci_exp_rxn,
+    
+    dapbo        => apbo(8),
+    dahbmo       => ahbmo((CFG_NCPU+CFG_AHB_UART+CFG_AHB_JTAG+CFG_GRETH+CFG_SVGA_ENABLE)),
+    apbi         => apbi,
+    apbo         => apbo(5),
+    ahbmi        => ahbmi,
+    ahbsi        => ahbsi,
+    ahbso        => ahbso(8)
+  
+  );
+    end generate;
+----------------------------------------------------------------------
+pcie_mf_no_dma: if CFG_PCIE_TYPE = 2 generate	-- master with fifo 
+EP:pcie_master_fifo_virtex
+generic map (fabtech => fabtech, memtech => memtech, 
+   hslvndx => 8, abits => 21, device_id => CFG_PCIEXPDID, vendor_id => CFG_PCIEXPVID,
+   pcie_bar_mask => 16#FFE#, pindex => 5, paddr => 5,
+  haddr => 16#A00#, hmask => 16#FFF#, nsync => 2, lane_width => CFG_NO_OF_LANES)
+port map( 
+    rst          => rstn,
+    clk          => clkm,
+    -- System Interface
+    sys_clk_p    => sys_clk_p,
+    sys_clk_n    => sys_clk_n,
+    sys_reset_n  => sys_reset_n,
+    -- PCI Express Fabric Interface
+    pci_exp_txp  => pci_exp_txp,
+    pci_exp_txn  => pci_exp_txn,
+    pci_exp_rxp  => pci_exp_rxp,
+    pci_exp_rxn  => pci_exp_rxn,
+    
+    ahbso        => ahbso(8),        
+    ahbsi        => ahbsi,         
+    apbi         => apbi,        
+    apbo         => apbo(5)        
+  );
+end generate;
+----------------------------------------------------------------------
+
+---  APB Bridge and various periherals -------------------------------
+----------------------------------------------------------------------
+
+  -- APB Bridge
+  apb0 : apbctrl
+    generic map (hindex => 1, haddr => CFG_APBADDR)
+    port map (rstn, clkm, ahbsi, ahbso(1), apbi, apbo);
+
+  -- Interrupt controller
+  irqctrl : if CFG_IRQ3_ENABLE /= 0 generate
+    irqctrl0 : irqmp
+      generic map (pindex => 2, paddr => 2, ncpu => CFG_NCPU)
+      port map (rstn, clkm, apbi, apbo(2), irqo, irqi);
+  end generate;
+  irq3 : if CFG_IRQ3_ENABLE = 0 generate
+    x : for i in 0 to CFG_NCPU-1 generate
+      irqi(i).irl <= "0000";
+    end generate;
+    apbo(2) <= apb_none;
+  end generate;
+
+  -- Time Unit
+  gpt : if CFG_GPT_ENABLE /= 0 generate
+    timer0 : gptimer
+      generic map (pindex => 3, paddr => 3, pirq => CFG_GPT_IRQ,
+                   sepirq => CFG_GPT_SEPIRQ, sbits => CFG_GPT_SW,
+                   ntimers => CFG_GPT_NTIM, nbits  => CFG_GPT_TW)
+      port map (rstn, clkm, apbi, apbo(3), gpti, open);
+    gpti.dhalt  <= dsuo.tstop;
+    gpti.extclk <= '0';
+  end generate;
+  notim : if CFG_GPT_ENABLE = 0 generate apbo(3) <= apb_none; end generate;
+
+  -- GPIO Unit
+  gpio0 : if CFG_GRGPIO_ENABLE /= 0 generate
+    grgpio0: grgpio
+      generic map(pindex => 11, paddr => 11, imask => CFG_GRGPIO_IMASK, nbits => 12)
+      port map(rstn, clkm, apbi, apbo(11), gpioi, gpioo);
+  end generate;
+
+  ua1 : if CFG_UART1_ENABLE /= 0 generate
+    uart1 : apbuart                     -- UART 1
+      generic map (pindex   => 1, paddr => 1, pirq => 2, console => dbguart, fifosize => CFG_UART1_FIFO)
+      port map (rstn, clkm, apbi, apbo(1), u1i, u1o);
+    u1i.rxd    <= rxd1;
+    u1i.ctsn   <= '0';
+    u1i.extclk <= '0';
+    txd1       <= u1o.txd;
+    serrx_pad : inpad generic map (level => cmos, voltage => x25v, tech  => padtech) port map (dsurx, rxd1);
+    sertx_pad : outpad generic map (level => cmos, voltage => x25v, tech => padtech) port map (dsutx, txd1);
+    led(0) <= not rxd1;
+    led(1) <= not txd1;
+  end generate;
+  noua0 : if CFG_UART1_ENABLE = 0 generate apbo(1) <= apb_none; end generate;
+
+
+  i2cm: if CFG_I2C_ENABLE = 1 generate  -- I2C master
+    i2c0 : i2cmst
+    generic map (pindex => 12, paddr => 12, pmask => 16#FFF#,
+                 pirq => 11, filter => I2C_FILTER)
+    port map (rstn, clkm, apbi, apbo(12), i2ci, i2co);
+    i2c_scl_pad : iopad generic map (level => cmos, voltage => x25v, tech => padtech)
+      port map (iic_scl_main, i2co.scl, i2co.scloen, i2ci.scl);
+    i2c_sda_pad : iopad generic map (level => cmos, voltage => x25v, tech => padtech)
+      port map (iic_sda_main, i2co.sda, i2co.sdaoen, i2ci.sda);
+  end generate i2cm;
+
+-----------------------------------------------------------------------
+---  VGA + IIC --------------------------------------------------------
+-----------------------------------------------------------------------
+
+  vga : if CFG_VGA_ENABLE /= 0 generate
+    vga0 : apbvga generic map(memtech => memtech, pindex => 6, paddr => 6)
+      port map(rstn, clkm, clkvga, apbi, apbo(6), vgao);
+      clk_sel <= "00";
+  end generate;
+
+  svga : if CFG_SVGA_ENABLE /= 0 generate
+    svga0 : svgactrl generic map(memtech => memtech, pindex => 6, paddr => 6,
+        hindex => CFG_NCPU+CFG_AHB_UART+CFG_AHB_JTAG, clk0 => 40000,
+	clk1 => 24000, clk2 => 20000, clk3 => 16000, burstlen => 4,
+                                 ahbaccsz => CFG_AHBDW)
+       port map(rstn, clkm, clkvga, apbi, apbo(6), vgao, ahbmi,
+		ahbmo(CFG_NCPU+CFG_AHB_UART+CFG_AHB_JTAG), clk_sel);
+  end generate;
+
+  vgadvi : if (CFG_VGA_ENABLE + CFG_SVGA_ENABLE) /= 0 generate
+    dvi0 : entity work.svga2ch7301c generic map (tech => fabtech, idf => 2)
+      port map (clk100, ethi.gtx_clk, lock, clk_sel, vgao, clkvga, clkvga_p, clkvga_n,
+                lcd_datal, lcd_hsyncl, lcd_vsyncl, lcd_del);
+
+    i2cdvi : i2cmst
+      generic map (pindex => 9, paddr => 9, pmask => 16#FFF#,
+                   pirq => 7, filter => I2C_FILTER)
+      port map (rstn, clkm, apbi, apbo(9), dvi_i2ci, dvi_i2co);
+  end generate;
+
+  novga : if (CFG_VGA_ENABLE + CFG_SVGA_ENABLE) = 0 generate
+     apbo(6) <= apb_none;
+     lcd_datal <= (others => '0'); clkvga_p <= '0'; clkvga_n <= '0';
+     lcd_hsyncl <= '0'; lcd_vsyncl <= '0'; lcd_del <= '0';
+     dvi_i2co.scloen <= '1'; dvi_i2co.sdaoen <= '1';
+  end generate;
+
+  tft_lcd_data_pad : outpadv generic map (level => cmos, voltage => x25v, width => 12, tech => padtech)
+        port map (tft_lcd_data, lcd_datal);
+  tft_lcd_clkp_pad : outpad generic map (level => cmos, voltage => x25v, tech => padtech)
+    port map (tft_lcd_clk_p, clkvga_p);
+  tft_lcd_clkn_pad : outpad generic map (level => cmos, voltage => x25v, tech => padtech)
+    port map (tft_lcd_clk_n, clkvga_n);
+  tft_lcd_hsync_pad : outpad generic map (level => cmos, voltage => x25v, tech => padtech)
+    port map (tft_lcd_hsync, lcd_hsyncl);
+  tft_lcd_vsync_pad : outpad generic map (level => cmos, voltage => x25v, tech => padtech)
+    port map (tft_lcd_vsync, lcd_vsyncl);
+  tft_lcd_de_pad : outpad generic map (level => cmos, voltage => x25v, tech => padtech)
+    port map (tft_lcd_de, lcd_del);
+  tft_lcd_reset_pad : outpad generic map (level => cmos, voltage => x25v, tech => padtech)
+    port map (tft_lcd_reset_b, rstn);
+  dvi_i2c_scl_pad : iopad generic map (level => cmos, voltage => x25v, tech => padtech)
+    port map (dvi_iic_scl, dvi_i2co.scl, dvi_i2co.scloen, dvi_i2ci.scl);
+  dvi_i2c_sda_pad : iopad generic map (level => cmos, voltage => x25v, tech => padtech)
+    port map (dvi_iic_sda, dvi_i2co.sda, dvi_i2co.sdaoen, dvi_i2ci.sda);
+
+-----------------------------------------------------------------------
+---  ETHERNET ---------------------------------------------------------
+-----------------------------------------------------------------------
+
+  eth0 : if CFG_GRETH = 1 generate -- Gaisler ethernet MAC
+    e1 : grethm
+      generic map(hindex => CFG_NCPU+CFG_AHB_UART+CFG_AHB_JTAG+CFG_SVGA_ENABLE,
+        pindex => 15, paddr => 15, pirq => 12, memtech => memtech,
+        mdcscaler => CPU_FREQ/1000, enable_mdio => 1, fifosize => CFG_ETH_FIFO,
+        nsync => 1, edcl => CFG_DSU_ETH, edclbufsz => CFG_ETH_BUF,
+        macaddrh => CFG_ETH_ENM, macaddrl => CFG_ETH_ENL, phyrstadr => 7,
+        ipaddrh => CFG_ETH_IPM, ipaddrl => CFG_ETH_IPL, giga => CFG_GRETH1G,
+	enable_mdint => 1)
+      port map(rst => rstn, clk => clkm, ahbmi => ahbmi,
+               ahbmo => ahbmo(CFG_NCPU+CFG_AHB_UART+CFG_AHB_JTAG+CFG_SVGA_ENABLE),
+               apbi => apbi, apbo => apbo(15), ethi => ethi, etho => etho);
+  end generate;
+
+--  greth1g: if CFG_GRETH1G = 1 generate
+    gtxclk0 : entity work.gtxclk port map (
+	clk_p => gmiiclk_p, clk_n => gmiiclk_n, clkint => ethi.gtx_clk,
+	clkout => egtx_clk);
+--  end generate;
+
+  ethpads : if (CFG_GRETH = 1) generate -- eth pads
+    emdio_pad : iopad generic map (level => cmos, voltage => x25v, tech => padtech)
+      port map (emdio, etho.mdio_o, etho.mdio_oe, ethi.mdio_i);
+    etxc_pad : clkpad generic map (level => cmos, voltage => x25v, tech => padtech, arch => 2)
+      port map (etx_clk, ethi.tx_clk);
+    erxc_pad : clkpad generic map (level => cmos, voltage => x25v, tech => padtech, arch => 2)
+      port map (erx_clk, ethi.rx_clk);
+    erxd_pad : inpadv generic map (level => cmos, voltage => x25v, tech => padtech, width => 8)
+      port map (erxd, ethi.rxd(7 downto 0));
+    erxdv_pad : inpad generic map (level => cmos, voltage => x25v, tech => padtech)
+      port map (erx_dv, ethi.rx_dv);
+    erxer_pad : inpad generic map (level => cmos, voltage => x25v, tech => padtech)
+      port map (erx_er, ethi.rx_er);
+    erxco_pad : inpad generic map (level => cmos, voltage => x25v, tech => padtech)
+      port map (erx_col, ethi.rx_col);
+    erxcr_pad : inpad generic map (level => cmos, voltage => x25v, tech => padtech)
+      port map (erx_crs, ethi.rx_crs);
+    emdint_pad : inpad generic map (level => cmos, voltage => x25v, tech => padtech)
+      port map (emdint, ethi.mdint);
+
+
+    etxd_pad : outpadv generic map (level => cmos, voltage => x25v, tech => padtech, width => 8)
+      port map (etxd, etho.txd(7 downto 0));
+    etxen_pad : outpad generic map (level => cmos, voltage => x25v, tech => padtech)
+      port map (etx_en, etho.tx_en);
+    etxer_pad : outpad generic map (level => cmos, voltage => x25v, tech => padtech)
+      port map (etx_er, etho.tx_er);
+    emdc_pad : outpad generic map (level => cmos, voltage => x25v, tech => padtech)
+      port map (emdc, etho.mdc);
+  end generate;
+
+-----------------------------------------------------------------------
+---  AHB ROM ----------------------------------------------------------
+-----------------------------------------------------------------------
+
+  bpromgen : if CFG_AHBROMEN /= 0 generate
+    brom : entity work.ahbrom
+      generic map (hindex => 6, haddr => CFG_AHBRODDR, pipe => CFG_AHBROPIP)
+      port map ( rstn, clkm, ahbsi, ahbso(6));
+  end generate;
+  nobpromgen : if CFG_AHBROMEN = 0 generate
+     ahbso(6) <= ahbs_none;
+  end generate;
+
+-----------------------------------------------------------------------
+---  AHB RAM ----------------------------------------------------------
+-----------------------------------------------------------------------
+
+  ahbramgen : if CFG_AHBRAMEN = 1 generate
+    ahbram0 : ahbram
+      generic map (hindex => 3, haddr => CFG_AHBRADDR, tech => CFG_MEMTECH,
+                   kbytes => CFG_AHBRSZ, pipe => CFG_AHBRPIPE)
+      port map (rstn, clkm, ahbsi, ahbso(3));
+  end generate;
+  nram : if CFG_AHBRAMEN = 0 generate ahbso(3) <= ahbs_none; end generate;
+
+-----------------------------------------------------------------------
+---  Test report module  ----------------------------------------------
+-----------------------------------------------------------------------
+
+-- pragma translate_off
+
+  test0 : ahbrep generic map (hindex => 4, haddr => 16#200#)
+	port map (rstn, clkm, ahbsi, ahbso(4));
+
+-- pragma translate_on
+
+-----------------------------------------------------------------------
+---  Drive unused bus elements  ---------------------------------------
+-----------------------------------------------------------------------
+
+  nam1 : for i in (CFG_NCPU+CFG_AHB_UART+CFG_AHB_JTAG+CFG_GRETH+1+CFG_PCIEXP) to NAHBMST-1 generate
+    ahbmo(i) <= ahbm_none;
+  end generate;
+
+-----------------------------------------------------------------------
+---  Boot message  ----------------------------------------------------
+-----------------------------------------------------------------------
+
+-- pragma translate_off
+  x : report_design
+    generic map (
+      msg1 => "LEON3 Demonstration design for Xilinx Virtex6 ML605 board",
+      fabtech => tech_table(fabtech), memtech => tech_table(memtech),
+      mdel => 1
+      );
+-- pragma translate_on
+
+end rtl;
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/leon3mp.xcf work/leon3-xilinx-ml605/leon3mp.xcf
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/leon3mp.xcf	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/leon3mp.xcf	2019-12-29 15:59:50.136754003 +0100
@@ -0,0 +1,21 @@
+
+NET gmiiclk_p 	PERIOD = 8.000 ;
+NET clk_ref_p	PERIOD = 5.000 ;
+NET erx_clk	PERIOD = 40.000 ;
+NET etx_clk	PERIOD = 40.000 ;
+NET clk_33	PERIOD = 30.000 ;
+#NET clkvga	PERIOD = 15.000 ;
+NET clkm	PERIOD = 10.000 ;
+
+OFFSET = IN  : 10.000 : BEFORE erx_clk ;
+OFFSET = OUT : 20.000 : AFTER  etx_clk ;
+OFFSET = IN  : 8.000  : BEFORE etx_clk ;
+
+#TIMESPEC "TS_sepclk1" = FROM "clkgen0_clkin" TO "ddrsp0_ddr_phy0_clk" TIG;
+#TIMESPEC "TS_sepclk2" = FROM "ddrsp0_ddr_phy0_clk" TO "clkgen0_clkin" TIG;
+
+NET "clkm" 	 TNM_NET = "clkm";
+#NET "clkml"	 TNM_NET = "clkml";
+#TIMESPEC "TS_clkm_clkml" = FROM "clkm" TO "clkml" TIG;
+#TIMESPEC "TS_clkml_clkm" = FROM "clkml" TO "clkm" TIG;
+NET "lock"  TIG;
\ No newline at end of file
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/linkprom work/leon3-xilinx-ml605/linkprom
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/linkprom	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/linkprom	2019-12-29 15:59:50.136754003 +0100
@@ -0,0 +1,155 @@
+/*  linkcmds
+ *
+ *  $Id: linkcmds,v 1.8.2.1 2000/05/24 17:06:38 joel Exp $
+ */
+
+OUTPUT_ARCH(sparc)
+__DYNAMIC  =  0;
+
+/*
+ * The memory map looks like this:
+ * +--------------------+ <- low memory
+ * | .text              |
+ * |        etext       |
+ * |        ctor list   | the ctor and dtor lists are for
+ * |        dtor list   | C++ support
+ * |        _endtext    |
+ * +--------------------+
+ * | .data              | initialized data goes here
+ * |        _sdata      |
+ * |        _edata      |
+ * +--------------------+
+ * | .bss               |
+ * |        __bss_start | start of bss, cleared by crt0
+ * |        _end        | start of heap, used by sbrk()
+ * +--------------------+
+ * |    heap space      |
+ * |        _ENDHEAP    |
+ * |    stack space     | 
+ * |        __stack     | top of stack
+ * +--------------------+ <- high memory
+ */
+
+
+/* Default values, can be overridden */
+
+_PROM_SIZE = 2M;
+_RAM_SIZE = 4M;
+
+_RAM_START = 0x02000000;
+_RAM_END = _RAM_START + _RAM_SIZE;
+
+_PROM_START = 0x00000000;
+_PROM_END = _PROM_START + _PROM_SIZE;
+
+/*
+ *  Alternate names without leading _.
+ */
+
+PROM_START = _PROM_START;
+PROM_SIZE = _PROM_SIZE;
+PROM_END = _PROM_END;
+
+RAM_START = _RAM_START;
+RAM_SIZE = _RAM_SIZE;
+RAM_END = _RAM_END;
+
+_LEON_REG = 0x80000000;
+LEON_REG = 0x80000000;
+
+/* these are the maximum values */
+
+MEMORY
+{
+  rom     : ORIGIN = 0x00000000, LENGTH = 16M
+  ram     : ORIGIN = 0x40000000, LENGTH = 1024M
+}
+
+SECTIONS
+{
+  .text :
+  {
+    CREATE_OBJECT_SYMBOLS
+    text_start = .;
+    _text_start = .;
+    *(.text)
+    . = ALIGN (16);
+
+    *(.eh_frame)
+    . = ALIGN (16);
+
+    *(.gnu.linkonce.t*)
+
+    /*
+     * C++ constructors
+     */
+    __CTOR_LIST__ = .;
+    LONG((__CTOR_END__ - __CTOR_LIST__) / 4 - 2)
+    *(.ctors)
+    LONG(0)
+    __CTOR_END__ = .;
+    __DTOR_LIST__ = .;
+    LONG((__DTOR_END__ - __DTOR_LIST__) / 4 - 2)
+    *(.dtors)
+    LONG(0)
+    __DTOR_END__ = .;
+
+    _rodata_start = . ;
+    *(.rodata*)
+    *(.gnu.linkonce.r*)
+    _erodata = ALIGN( 0x10 ) ;
+
+    etext = ALIGN(0x10);
+    _etext = .;
+    *(.init)
+    *(.fini)
+    *(.lit)
+    *(.shdata)
+    . = ALIGN (16);
+    _endtext = .;
+  } > rom
+  .dynamic	  : { *(.dynamic) 	} >ram
+  .got		  : { *(.got) 		} >ram
+  .plt   	  : { *(.plt) 		} >ram
+  .hash		  : { *(.hash)		} >ram
+  .dynrel	  : { *(.dynrel)	} >ram
+  .dynsym	  : { *(.dynsym)	} >ram
+  .dynstr	  : { *(.dynstr)	} >ram
+  .hash		  : { *(.hash)		} >ram
+  .data :
+  {
+    data_start = .;
+    _data_start = .;
+    _sdata = . ;
+    *(.data)
+    *(.gnu.linkonce.d*)
+    *(.gcc_except_table)
+    . = ALIGN(0x10);
+    edata = .;
+    _edata = .;
+  } > ram
+  .shbss :
+  {
+    *(.shbss)
+  } > ram
+  .bss :
+  {
+    __bss_start = ALIGN(0x8);
+    _bss_start = .;
+    bss_start = .;
+    *(.bss)
+    *(COMMON)
+    end = .;
+    _end = ALIGN(0x8);
+    __end = ALIGN(0x8);
+  } > ram
+  .jcr . (NOLOAD)  : { *(.jcr) 		}
+  .stab . (NOLOAD) :
+  {
+    [ .stab ]
+  }
+  .stabstr . (NOLOAD) :
+  {
+    [ .stabstr ]
+  }
+}
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/Makefile work/leon3-xilinx-ml605/Makefile
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/Makefile	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/Makefile	2019-12-29 15:59:50.136754003 +0100
@@ -0,0 +1,202 @@
+include .config
+GRLIB=../..
+TOP=leon3mp
+DESIGN=leon3-xilinx-ml605
+BOARD=xilinx-ml605-xc6vlx240t
+include $(GRLIB)/boards/$(BOARD)/Makefile.inc
+DEVICE=$(PART)-$(PACKAGE)$(SPEED)
+#UCF=$(GRLIB)/boards/$(BOARD)/$(TOP).ucf
+UCF=$(TOP).ucf
+UCF_PLANAHEAD=$(TOP)_mig39.ucf
+#ISEMAPOPT=-timing
+QSF=$(GRLIB)/boards/$(BOARD)/$(TOP).qsf
+EFFORT=high
+XSTOPT=-uc leon3mp.xcf
+SYNPOPT="set_option -pipe 1; set_option -retiming 0; set_option -enable_prepacking 1;\
+set_option -write_apr_constraint 0;set_option -resource_sharing 1; set_option -symbolic_fsm_compiler 1"
+VHDLOPTSYNFILES= \
+	mig_37/user_design/rtl/controller/arb_mux.vhd \
+	mig_37/user_design/rtl/controller/arb_row_col.vhd \
+	mig_37/user_design/rtl/controller/arb_select.vhd \
+	mig_37/user_design/rtl/controller/bank_cntrl.vhd \
+	mig_37/user_design/rtl/controller/bank_common.vhd \
+	mig_37/user_design/rtl/controller/bank_compare.vhd \
+	mig_37/user_design/rtl/controller/bank_mach.vhd \
+	mig_37/user_design/rtl/controller/bank_queue.vhd \
+	mig_37/user_design/rtl/controller/bank_state.vhd \
+	mig_37/user_design/rtl/controller/col_mach.vhd \
+	mig_37/user_design/rtl/controller/mc.vhd \
+	mig_37/user_design/rtl/controller/rank_cntrl.vhd \
+	mig_37/user_design/rtl/controller/rank_common.vhd \
+	mig_37/user_design/rtl/controller/rank_mach.vhd \
+	mig_37/user_design/rtl/controller/round_robin_arb.vhd \
+	mig_37/user_design/rtl/ecc/ecc_buf.vhd \
+	mig_37/user_design/rtl/ecc/ecc_dec_fix.vhd \
+	mig_37/user_design/rtl/ecc/ecc_gen.vhd \
+	mig_37/user_design/rtl/ecc/ecc_merge_enc.vhd \
+	mig_37/user_design/rtl/ip_top/clk_ibuf.vhd \
+	mig_37/user_design/rtl/ip_top/ddr2_ddr3_chipscope.vhd \
+	mig_37/user_design/rtl/ip_top/infrastructure.vhd \
+	mig_37/user_design/rtl/ip_top/iodelay_ctrl.vhd \
+	mig_37/user_design/rtl/ip_top/mem_intfc.vhd \
+	mig_37/user_design/rtl/ip_top/memc_ui_top.vhd \
+	mig_37/user_design/rtl/ip_top/mig_37.vhd \
+	mig_37/user_design/rtl/phy/circ_buffer.vhd \
+	mig_37/user_design/rtl/phy/phy_ck_iob.vhd \
+	mig_37/user_design/rtl/phy/phy_clock_io.vhd \
+	mig_37/user_design/rtl/phy/phy_control_io.vhd \
+	mig_37/user_design/rtl/phy/phy_data_io.vhd \
+	mig_37/user_design/rtl/phy/phy_dly_ctrl.vhd \
+	mig_37/user_design/rtl/phy/phy_dm_iob.vhd \
+	mig_37/user_design/rtl/phy/phy_dq_iob.vhd \
+	mig_37/user_design/rtl/phy/phy_dqs_iob.vhd \
+	mig_37/user_design/rtl/phy/phy_init.vhd \
+	mig_37/user_design/rtl/phy/phy_pd.vhd \
+	mig_37/user_design/rtl/phy/phy_pd_top.vhd \
+	mig_37/user_design/rtl/phy/phy_rdclk_gen.vhd \
+	mig_37/user_design/rtl/phy/phy_rdctrl_sync.vhd \
+	mig_37/user_design/rtl/phy/phy_rddata_sync.vhd \
+	mig_37/user_design/rtl/phy/phy_rdlvl.vhd \
+	mig_37/user_design/rtl/phy/phy_read.vhd \
+	mig_37/user_design/rtl/phy/phy_top.vhd \
+	mig_37/user_design/rtl/phy/phy_write.vhd \
+	mig_37/user_design/rtl/phy/phy_wrlvl.vhd \
+	mig_37/user_design/rtl/phy/rd_bitslip.vhd \
+	mig_37/user_design/rtl/ui/ui_cmd.vhd \
+	mig_37/user_design/rtl/ui/ui_rd_data.vhd \
+	mig_37/user_design/rtl/ui/ui_top.vhd \
+	mig_37/user_design/rtl/ui/ui_wr_data.vhd \
+	pcie/v6_pcie_v1_7/source/*.vhd \
+	$(GRLIB)/lib/gaisler/pcie/pcie.vhd
+
+ifeq ("$(CONFIG_PCIEXP_MASTER_TARGET)","y")
+  ifeq ("$(CONFIG_LANE_WIDTH1)","y")
+  UCF+=pcie_ucf/pcie_master_target_lane1.ucf
+  UCF_PLANAHEAD+=pcie_ucf/pcie_master_target_lane1.ucf
+  endif
+  ifeq ("$(CONFIG_LANE_WIDTH2)","y")
+  UCF+=pcie_ucf/pcie_master_target_lane2.ucf
+  UCF_PLANAHEAD+=pcie_ucf/pcie_master_target_lane2.ucf
+  endif
+  ifeq ("$(CONFIG_LANE_WIDTH4)","y")
+  UCF+=pcie_ucf/pcie_master_target_lane4.ucf
+  UCF_PLANAHEAD+=pcie_ucf/pcie_master_target_lane4.ucf
+  endif
+  ifeq ("$(CONFIG_LANE_WIDTH8)","y")
+  UCF+=pcie_ucf/pcie_master_target_lane8.ucf
+  UCF_PLANAHEAD+=pcie_ucf/pcie_master_target_lane8.ucf
+  endif
+VHDLOPTSYNFILES+=$(GRLIB)/lib/gaisler/pcie/pcie_master_target_virtex.vhd
+endif
+ifeq ("$(CONFIG_PCIEXP_MASTER_FIFO)","y")
+  ifeq ("$(CONFIG_PCIEXP_MASTER_FIFO_DMA)","y")
+    ifeq ("$(CONFIG_LANE_WIDTH1)","y")
+    UCF+=pcie_ucf/pcie_master_fifo_dma_lane1.ucf
+    UCF_PLANAHEAD+=pcie_ucf/pcie_master_fifo_dma_lane1.ucf
+    endif
+    ifeq ("$(CONFIG_LANE_WIDTH2)","y")
+    UCF+=pcie_ucf/pcie_master_fifo_dma_lane2.ucf
+    UCF_PLANAHEAD+=pcie_ucf/pcie_master_fifo_dma_lane2.ucf
+    endif
+    ifeq ("$(CONFIG_LANE_WIDTH4)","y")
+    UCF+=pcie_ucf/pcie_master_fifo_dma_lane4.ucf
+    UCF_PLANAHEAD+=pcie_ucf/pcie_master_fifo_dma_lane4.ucf
+    endif
+VHDLOPTSYNFILES+=$(GRLIB)/lib/gaisler/pcie/pcie_master_fifo_virtex.vhd
+VHDLOPTSYNFILES+=$(GRLIB)/lib/gaisler/pcie/pciedma.vhd
+  endif
+  ifneq ("$(CONFIG_PCIEXP_MASTER_FIFO_DMA)","y")
+    ifeq ("$(CONFIG_LANE_WIDTH1)","y")
+    UCF+=pcie_ucf/pcie_master_fifo_lane1.ucf
+    UCF_PLANAHEAD+=pcie_ucf/pcie_master_fifo_lane1.ucf
+    endif
+    ifeq ("$(CONFIG_LANE_WIDTH2)","y")
+    UCF+=pcie_ucf/pcie_master_fifo_lane2.ucf
+    UCF_PLANAHEAD+=pcie_ucf/pcie_master_fifo_lane2.ucf
+    endif
+    ifeq ("$(CONFIG_LANE_WIDTH4)","y")
+    UCF+=pcie_ucf/pcie_master_fifo_lane4.ucf
+    UCF_PLANAHEAD+=pcie_ucf/pcie_master_fifo_lane4.ucf
+    endif
+VHDLOPTSYNFILES+=$(GRLIB)/lib/gaisler/pcie/pcie_master_fifo_virtex.vhd
+  endif
+endif
+
+VERILOGOPTSYNFILES= \
+	mig/user_design/rtl/controller/*.v \
+	mig/user_design/rtl/ecc/*.v \
+	mig/user_design/rtl/ip_top/*.v \
+	mig/user_design/rtl/phy/*.v \
+	mig/user_design/rtl/phy/*.v \
+	mig/user_design/rtl/ui/*.v \
+	$$XILINX/verilog/src/glbl.v
+VHDLSYNFILES= \
+	ahb2mig_ml605.vhd config.vhd ahbrom.vhd \
+	svga2ch7301c.vhd gtxclk.vhd leon3mp.vhd
+
+VHDLSIMFILES=testbench.vhd
+
+ifeq ("$(CONFIG_PCIEXP_MASTER_TARGET)","y")
+VHDLSIMFILES+=$(GRLIB)/lib/tech/unisim/ise/GTPA1_DUAL.vhd $(GRLIB)/lib/tech/unisim/ise/GTP_DUAL.vhd \
+$(GRLIB)/lib/tech/unisim/ise/GTXE1.vhd $(GRLIB)/lib/tech/unisim/ise/GTX_DUAL.vhd \
+$(GRLIB)/lib/tech/unisim/ise/PCIE_2_0.vhd $(GRLIB)/lib/tech/unisim/ise/PCIE_A1.vhd
+else 
+ifeq ("$(CONFIG_PCIEXP_MASTER_FIFO)","y")
+VHDLSIMFILES+=$(GRLIB)/lib/tech/unisim/ise/GTPA1_DUAL.vhd $(GRLIB)/lib/tech/unisim/ise/GTP_DUAL.vhd \
+$(GRLIB)/lib/tech/unisim/ise/GTXE1.vhd $(GRLIB)/lib/tech/unisim/ise/GTX_DUAL.vhd \
+$(GRLIB)/lib/tech/unisim/ise/PCIE_2_0.vhd $(GRLIB)/lib/tech/unisim/ise/PCIE_A1.vhd
+endif
+endif
+
+SIMTOP=testbench
+SDCFILE=default.sdc
+BITGEN=$(GRLIB)/boards/$(BOARD)/default.ut
+CLEAN=soft-clean migclean pcieclean
+TECHLIBS = secureip unisim
+VLOGOPT= -O0
+VCOMOPT= -explicit -O0 
+ifeq ("$(GRLIB_SIMULATOR)","ALDEC")
+VSIMOPT= +access +w -t ps -novopt +notimingchecks -L secureip_ver -L xilinxcorelib_ver -L unisims_ver glbl $(SIMTOP)
+else
+VSIMOPT= -t ps -novopt +notimingchecks -L secureip_ver -L xilinxcorelib_ver -L unisims_ver glbl $(SIMTOP)
+endif
+
+LIBSKIP = core1553bbc core1553brm core1553brt gr1553 corePCIF \
+	tmtc openchip ihp usbhc spw gsi cypress hynix \
+	spansion
+DIRSKIP = b1553 pci/pcif leon2 leon2ft crypto satcan ambatest can \
+	usb grusbhc spacewire ascs slink spi hcan \
+	leon4 leon4v0 l2cache pwm gr1553b iommu ac97
+FILESKIP = grcan.vhd ddr2.v mobile_ddr.v
+GRLIB_CONFIG = grlib_config.vhd
+
+include $(GRLIB)/bin/Makefile
+include $(GRLIB)/software/leon3/Makefile
+
+##################  project specific targets ##########################
+
+mig_37 mig:
+	cp grlib_mig/mig.* .
+	coregen -b mig.xco -p mig.cgp
+	patch -p1 < grlib_mig/mig.diff
+	patch -p0 < grlib_mig/mig_reset13.diff
+mig39:
+	cp grlib_mig/mig39.* .
+	coregen -b mig39.xco -p mig39.cgp
+	patch -p1 < grlib_mig/mig_patch.txt
+	patch -p1 < grlib_mig/mig_iodelay_ctrl_patch.txt
+	patch -p1 < grlib_mig/mig_infrastructure_patch.txt
+	patch -p1 < grlib_mig/mig_ucf_patch.txt
+	patch -p0 < grlib_mig/mig_reset14.diff
+
+migclean:
+	-rm -rf tmp coregen* mig*
+
+pcie:
+	coregen -b pcie/pcie.xco -p pcie
+	patch -p0 < pcie.diff
+
+pcieclean:
+	-rm -rf pcie/v6_pcie_v1_7* pcie/tmp pcie/coregen.cgc tx.dat rx.dat
+
+.PHONY : pcie pcieclean
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/pcie.diff work/leon3-xilinx-ml605/pcie.diff
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/pcie.diff	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/pcie.diff	2019-12-29 15:59:50.136754003 +0100
@@ -0,0 +1,19 @@
+diff -Naur pcie.org/v6_pcie_v1_7/source/v6_pcie_v1_7.vhd pcie/v6_pcie_v1_7/source/v6_pcie_v1_7.vhd
+--- pcie.org/v6_pcie_v1_7/source/v6_pcie_v1_7.vhd	2013-07-16 16:50:59.000000000 +0200
++++ pcie/v6_pcie_v1_7/source/v6_pcie_v1_7.vhd	2012-08-10 12:23:30.000000000 +0200
+@@ -752,10 +752,10 @@
+       VSEC_CAP_ON                              : boolean;
+       VSEC_CAP_VERSION                         : bit_vector);
+     port (
+-      PCIEXPRXN                           : in  std_logic_vector(7 downto 0);
+-      PCIEXPRXP                           : in  std_logic_vector(7 downto 0);
+-      PCIEXPTXN                           : out std_logic_vector(7 downto 0);
+-      PCIEXPTXP                           : out std_logic_vector(7 downto 0);
++      PCIEXPRXN                           : in  std_logic_vector(LINK_CAP_MAX_LINK_WIDTH_int-1 downto 0);
++      PCIEXPRXP                           : in  std_logic_vector(LINK_CAP_MAX_LINK_WIDTH_int-1 downto 0);
++      PCIEXPTXN                           : out std_logic_vector(LINK_CAP_MAX_LINK_WIDTH_int-1 downto 0);
++      PCIEXPTXP                           : out std_logic_vector(LINK_CAP_MAX_LINK_WIDTH_int-1 downto 0);
+       SYSCLK                              : in  std_logic;
+       FUNDRSTN                            : in  std_logic;
+       TRNLNKUPN                           : out std_logic;
+
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/prom.h work/leon3-xilinx-ml605/prom.h
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/prom.h	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/prom.h	2019-12-29 15:59:50.142754050 +0100
@@ -0,0 +1,10 @@
+#define MCFG1 0x10380133
+#define MCFG2 0xe6B80e50
+#define MCFG3 0x000ff000
+#define ASDCFG 0xfff00100
+#define DSDCFG 0x922083cd
+#define L2MCTRLIO 0x80000000
+#define IRQCTRL   0x80000200
+#define RAMSTART  0x40000000
+#define RAMSIZE   0x00100000
+
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/prom.srec work/leon3-xilinx-ml605/prom.srec
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/prom.srec	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/prom.srec	2019-12-29 15:59:50.142754050 +0100
@@ -0,0 +1,37 @@
+S00C000070726F6D2E737265635A
+S113000081D8200003000004821060E08188400051
+S1130010819000008198000081800000A180000090
+S113002001000000030020408210600FC2A00040C5
+S11300308410000001000000010000000100000025
+S11300400100000001000000801080020100000097
+S11300500100000001000000010000000100000098
+S1130060874440008608E01F881000008A100000C2
+S11300708C1000008E100000A0100000A2100000E0
+S1130080A4100000A6100000A8100000AA10000090
+S1130090AC100000AE1000009010000092100000A0
+S11300A09410000096100000981000009A100000B0
+S11300B09C1000009E10000086A0E00116BFFFEF18
+S11300C081E00000821020028190400003000004BF
+S11300D0821060E0818840000100000001000000FF
+S11300E001000000834800008330600C80886001B8
+S11300F00280002401000000070000008610E1785F
+S1130100C108C000C118C000C518C000C918C0008B
+S1130110CD18C000D118C000D518C000D918C0002F
+S1130120DD18C000E118C000E518C000E918C000DF
+S1130130ED18C000F118C000F518C000F918C0008F
+S1130140FD18C000010000000100000001000000D3
+S1130150010000000100000089A008420100000025
+S113016001000000010000000100000010800005F3
+S11301700100000001000000000000000000000079
+S1130180874440008730E01C8688E00F1280001608
+S11301900320000005040E008410A133C420400095
+S11301A00539AE038410A250C4206004050003FC8A
+S11301B0C420600882103860C40040008530A00C60
+S11301C0030000048210600980A04002128000062F
+S11301D0033FFC0082106100052488208410A3CD15
+S11301E0C4204000050000808210000080A0E000D0
+S11301F002800005010000008200400210BFFFFCE5
+S11302008620E0013D1003FFBC17A3E0BC2780015A
+S11302109C27A0600310000081C040000100000082
+S113022000000000000000000000000000000000CA
+S9030000FC
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/README.txt work/leon3-xilinx-ml605/README.txt
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/README.txt	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/README.txt	2019-12-29 15:59:50.142754050 +0100
@@ -0,0 +1,291 @@
+This leon3 design is tailored to the Xilinx Virtex-6 ML605 board
+
+http://www.xilinx.com/ml605
+
+Note: This design requires that the GRLIB_SIMULATOR variable is
+correctly set. Please refer to the documentation in doc/grlib.pdf for
+additional information.
+
+Simulation and synthesis for ISE-13
+-----------------------------------
+
+The design uses the Xilinx MIG memory interface and Xilinx PCI Express endpoint
+with an AHB-2.0 interface. The source code cannot be distributed due to the
+prohibitive Xilinx license, so they must be re-generated with coregen before
+simulation and synthesis can be done.
+
+To generate the MIG and PCI Express and to install the Xilinx unisim
+simulation library, do as follows:
+
+  make mig
+  make pcie (do if PCI Express is enabled)
+  make install-secureip
+
+This will ONLY work with ISE-13 installed, and the XILINX variable
+properly set in the shell. To synthesize the design, do
+
+  make ise
+
+and then
+
+  make ise-prog-fpga
+
+to program the FPGA.
+
+Simulation and synthesis for ISE-14
+-----------------------------------
+
+The design uses the Xilinx MIG memory interface and Xilinx PCI Express endpoint
+with an AHB-2.0 interface. The source code cannot be distributed due to the
+prohibitive Xilinx license, so they must be re-generated with coregen before
+simulation and synthesis can be done.
+
+To generate the MIG and PCI Express and to install the Xilinx unisim
+simulation library, do as follows:
+
+  make mig39
+  make pcie (do if PCI Express is enabled)
+  make install-secureip (do if PCI Express is enabled)
+  make compile_xilinx_verilog_lib
+  make vsim
+  make map_xilinx_verilog_lib
+
+To simulate and run systest.c on the Leon design using the memory 
+controller from Xilinx use the make targets:
+
+  make soft
+  make vsim-launch
+  
+This will ONLY work with ISE-14 installed, and the XILINX variable
+properly set in the shell. To build the design, do
+
+  make planahead
+
+and then
+
+  make ise-prog-fpga
+
+to program the FPGA.
+
+Using the Xilinx ML605 rev E with 1 GiB of DDR3 SDRAM
+-----------------------------------------------------
+
+In order to update the MIG39 (ISE-14) flow the following steps
+should be taken:
+
+Change mig39.prj:
+
+-change the memory device to MT4JSF12864HZ-1G4
+Line 14:
+<MemoryDevice>DDR3_SDRAM/SODIMMs/MT4JSF12864HZ-1G4</MemoryDevice>
+-add another bit to the row address changing RowAddress from 13
+to 14
+Line 21:<RowAddress>14</RowAddress>
+-add a new line with the map of the new bit with the
+corresponding pin J15
+<Pin SignalName="ddr3_addr[13]" PINNumber="J15" SignalGroup="Address"
+Bank="36" />
+
+
+Change ahb2mig_ml605.vhd:
+
+-change ROW_WIDTH from 13 to 14
+Line 42: constant ROW_WIDTH : integer :=14;
+-change ADDR_WIDTH from 27 to 28:
+Line 44: constant ADDR_WIDTH : integer := 28;
+-use the new bit when generating mig address, changing "28
+downto 6" to "29 downto 6"
+Line 317: migi.app_addr <= '0' & ra.acc.haddr(29 downto 6) &
+"000";
+
+Change leon3mp.vhd:
+
+-change hmask of ahb2mig_ml605 instance to have a bit less, and
+change size to 1024MB
+ahb2mig0 : ahb2mig_ml605
+generic map ( hindex => 0, haddr => 16#400#, hmask =>
+16#C00#,--previous version E00
+MHz => 400, Mbyte => 1024, nosync =>
+boolean'pos(CFG_MIG_CLK4=12)) --CFG_CLKDIV/12)
+
+References:
+http://www.xilinx.com/support/answers/44814.htm
+http://tech.groups.yahoo.com/group/leon_sparc/message/22687
+
+Design specifics
+----------------
+
+* Synthesis should be done using ISE-13 or ISE-14
+
+* The DDR3 controller is implemented with Xilinx MIG-3.7 and 
+  runs of the 200 MHz clock. The DDR3 memory runs at 400 MHz
+  (DDR3-800). grmon-1.1.47 or later is needed to detect the
+   DDR3 memory.
+
+* The AHB clock is generated by the MMCM module in the DDR3
+  controller, and can be set to 80, 100 and 120 MHz.
+
+* System reset is mapped to the CPU RESET button
+
+* DSU break is mapped to GPIO south button
+
+* LED 0 UART RX active
+
+* LED 1 UART TX active
+
+* LED 2 indicates processor in debug mode
+
+* LED 7 indicates processor in error mode
+
+* The GRETH core is enabled and runs without problems at both
+  100 and 1000 Mbit. The 1000 Mbit operation requires the commercial
+  version of grlib. The ethernet debug link is enabled by default,
+  using IP address 192.168.0.52.
+
+* 16-bit flash prom can be read at address 0. It can be programmed
+  with GRMON version 1.1.16 or later.
+
+* When using ISE-13 the system can be simulated if the secure IP models are installed:
+
+  make install-secureip
+
+  Then rebuild the scripts and simulation model:
+
+  make distclean vsim
+
+  Modelsim v6.5e or newer is required to build the secure IP models.
+
+* When using ISE-14 the system can be simulated if xilinx core libs are installed:
+
+  make compile_xilinx_verilog_lib
+  make map_xilinx_verilog_lib
+
+  Then rebuild the scripts and simulation model:
+
+  make distclean vsim-launch
+
+  Modelsim v10.1a has been used to run systest.c.
+
+* The application UART1 is connected to the USB/RS232 connector
+
+* The JTAG DSU interface is enabled and accesible via the USB/JTAG port.
+  Start grmon with -xilusb to connect.
+
+* The GRACECTRL core is instantiated and connected to the System ACE
+  device. GRACECTRL is configured to fake a 16-bit System ACE i/f
+  while the boards actual interface is 8-bit wide.
+
+* Output from GRMON is:
+
+grmon -eth -ip 192.168.0.51 -u -nb
+
+ GRMON LEON debug monitor v1.1.47 professional version
+
+ Copyright (C) 2004-2010 Aeroflex Gaisler - all rights reserved.
+ For latest updates, go to http://www.gaisler.com/
+ Comments or bug-reports to support@gaisler.com
+
+ ethernet startup.
+ GRLIB build version: 4113
+
+ initialising ...............
+ detected frequency:  75 MHz
+ SRAM waitstates: 1
+
+ Component                            Vendor
+ LEON3 SPARC V8 Processor             Gaisler Research
+ AHB Debug JTAG TAP                   Gaisler Research
+ SVGA Controller                      Gaisler Research
+ GR Ethernet MAC                      Gaisler Research
+ Xilinx MIG DDR2 controller           Gaisler Research
+ AHB/APB Bridge                       Gaisler Research
+ LEON3 Debug Support Unit             Gaisler Research
+ LEON2 Memory Controller              European Space Agency
+ System ACE I/F Controller            Gaisler Research
+ Generic APB UART                     Gaisler Research
+ Multi-processor Interrupt Ctrl       Gaisler Research
+ Modular Timer Unit                   Gaisler Research
+ AMBA Wrapper for OC I2C-master       Gaisler Research
+ General purpose I/O port             Gaisler Research
+ AMBA Wrapper for OC I2C-master       Gaisler Research
+
+ Use command 'info sys' to print a detailed report of attached cores
+
+grlib> inf sys
+00.01:003   Gaisler Research  LEON3 SPARC V8 Processor (ver 0x0)
+             ahb master 0
+01.01:01c   Gaisler Research  AHB Debug JTAG TAP (ver 0x1)
+             ahb master 1
+02.01:063   Gaisler Research  SVGA Controller (ver 0x0)
+             ahb master 2
+             apb: 80000600 - 80000700
+             clk0: 25.00 MHz  clk1: 41.67 MHz  clk2: 50.00 MHz  clk3: 62.50 MHz
+03.01:01d   Gaisler Research  GR Ethernet MAC (ver 0x0)
+             ahb master 3, irq 12
+             apb: 80000f00 - 80001000
+             Device index: dev0
+             edcl ip 192.168.0.51, buffer 16 kbyte
+00.01:06b   Gaisler Research  Xilinx MIG DDR2 controller (ver 0x0)
+             ahb: 40000000 - 60000000
+             DDR2: 512 Mbyte
+01.01:006   Gaisler Research  AHB/APB Bridge (ver 0x0)
+             ahb: 80000000 - 80100000
+02.01:004   Gaisler Research  LEON3 Debug Support Unit (ver 0x1)
+             ahb: 90000000 - a0000000
+             AHB trace 256 lines, 32-bit bus, stack pointer 0x5ffffff0
+             CPU#0 win 8, hwbp 2, itrace 256, V8 mul/div, srmmu, lddel 1
+                   icache 2 * 8 kbyte, 32 byte/line lru
+                   dcache 2 * 4 kbyte, 16 byte/line lru
+05.04:00f   European Space Agency  LEON2 Memory Controller (ver 0x1)
+             ahb: 00000000 - 20000000
+             apb: 80000000 - 80000100
+             16-bit prom @ 0x00000000
+07.01:067   Gaisler Research  System ACE I/F Controller (ver 0x0)
+             irq 10
+             ahb: fff00200 - fff00300
+01.01:00c   Gaisler Research  Generic APB UART (ver 0x1)
+             irq 2
+             apb: 80000100 - 80000200
+             baud rate 38422, DSU mode (FIFO debug)
+02.01:00d   Gaisler Research  Multi-processor Interrupt Ctrl (ver 0x3)
+             apb: 80000200 - 80000300
+03.01:011   Gaisler Research  Modular Timer Unit (ver 0x0)
+             irq 8
+             apb: 80000300 - 80000400
+             16-bit scaler, 2 * 32-bit timers, divisor 75
+09.01:028   Gaisler Research  AMBA Wrapper for OC I2C-master (ver 0x3)
+             irq 14
+             apb: 80000900 - 80000a00
+             Controller index for use in GRMON: 1
+0b.01:01a   Gaisler Research  General purpose I/O port (ver 0x1)
+             apb: 80000b00 - 80000c00
+0c.01:028   Gaisler Research  AMBA Wrapper for OC I2C-master (ver 0x3)
+             irq 11
+             apb: 80000c00 - 80000d00
+             Controller index for use in GRMON: 2
+grlib> fla
+
+ Intel-style 16-bit flash on D[31:16]
+
+ Manuf.    Intel               
+ Device    Strataflash P30   
+
+ Device ID ca29ffff242640e7    
+ User   ID ffffffffffffffff    
+
+
+ 1 x 32 Mbyte = 32 Mbyte total @ 0x00000000
+
+
+ CFI info
+ flash family  : 1
+ flash size    : 256 Mbit
+ erase regions : 2
+ erase blocks  : 259
+ write buffer  : 1024 bytes
+ lock-down     : yes
+ region  0     : 255 blocks of 128 Kbytes
+ region  1     : 4 blocks of 32 Kbytes
+
+grlib> 
+
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/sim.do work/leon3-xilinx-ml605/sim.do
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/sim.do	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/sim.do	2019-12-29 15:59:50.142754050 +0100
@@ -0,0 +1,147 @@
+###############################################################################
+## (c) Copyright 2008  2009 Xilinx, Inc. All rights reserved.
+##
+## This file contains confidential and proprietary information
+## of Xilinx, Inc. and is protected under U.S. and
+## international copyright and other intellectual property
+## laws.
+##
+## DISCLAIMER
+## This disclaimer is not a license and does not grant any
+## rights to the materials distributed herewith. Except as
+## otherwise provided in a valid license issued to you by
+## Xilinx, and to the maximum extent permitted by applicable
+## law: (1) THESE MATERIALS ARE MADE AVAILABLE "AS IS" AND
+## WITH ALL FAULTS, AND XILINX HEREBY DISCLAIMS ALL WARRANTIES
+## AND CONDITIONS, EXPRESS, IMPLIED, OR STATUTORY, INCLUDING
+## BUT NOT LIMITED TO WARRANTIES OF MERCHANTABILITY, NON-
+## INFRINGEMENT, OR FITNESS FOR ANY PARTICULAR PURPOSE; and
+## (2) Xilinx shall not be liable (whether in contract or tort,
+## including negligence, or under any other theory of
+## liability) for any loss or damage of any kind or nature
+## related to, arising under or in connection with these
+## materials, including for any direct, or any indirect,
+## special, incidental, or consequential loss or damage
+## (including loss of data, profits, goodwill, or any type of
+## loss or damage suffered as a result of any action brought
+## by a third party) even if such damage or loss was
+## reasonably foreseeable or Xilinx had been advised of the
+## possibility of the same.
+##
+## CRITICAL APPLICATIONS
+## Xilinx products are not designed or intended to be fail-
+## safe, or for use in any application requiring fail-safe
+## performance, such as life-support or safety devices or
+## systems, Class III medical devices, nuclear facilities,
+## applications related to the deployment of airbags, or any
+## other applications that could lead to death, personal
+## injury, or severe property or environmental damage
+## (individually and collectively, "Critical
+## Applications"). Customer assumes the sole risk and
+## liability of any use of Xilinx products in Critical
+## Applications, subject only to applicable laws and
+## regulations governing limitations on product liability.
+##
+## THIS COPYRIGHT NOTICE AND DISCLAIMER MUST BE RETAINED AS
+## PART OF THIS FILE AT ALL TIMES.
+##
+###############################################################################
+##   ____  ____
+##  /   /\/   /
+## /___/  \  /    Vendor             : Xilinx
+## \   \   \/     Version            : 3.7
+##  \   \         Application        : MIG
+##  /   /         Filename           : sim.do
+## /___/   /\     Date Last Modified : $Date: 2010/10/05 16:43:05 $
+## \   \  /  \    Date Created       : Mon Jun 23 2008
+##  \___\/\___\
+##
+## Device           : Virtex-6
+## Purpose          :
+##                   Sample sim .do file to compile and simulate memory interface
+##                   design and run the simulation for specified period of time.
+##                   Display the waveforms that are listed with "add wave" command.
+## Assumptions      :
+##                   Simulation takes place in \sim folder of MIG output directory.
+## Reference        :
+## Revision History :
+###############################################################################
+
+#vlib work
+
+#Map the required libraries here#
+#vlib modelsim
+#vlib modelsim/unisims_ver
+#vmap unisims_ver modelsim/unisims_ver
+#vmap unisim <unisim lib path>
+#vmap secureip <secureip lib path>
+
+#Compile all modules#
+#vlog  ../rtl/ip_top/ddr2_ddr3_chipscope.*
+#vlog  ../rtl/ip_top/*
+#vlog  ../rtl/controller/*
+#vlog  ../rtl/phy/*
+#vlog  ../rtl/ui/*
+#vlog  ../rtl/ecc/*
+
+
+#Compile all traffic_gen modules#
+#vlog  ../rtl/traffic_gen/*
+
+#Compile files in sim folder (excluding model parameter file)#
+#$XILINX variable must be set
+#vlog  $env(XILINX)/verilog/src/glbl.v
+#vlog  ../sim/wiredly.*
+#vlog  ../sim/sim_tb_top.*
+
+
+#Pass the parameters for memory model parameter file#
+#vlog  +incdir+. +define+x1Gb +define+sg187E +define+x16 ddr3_model.v
+
+#Load the design. Use required libraries.#
+vsim -t fs -novopt +notimingchecks -L unisims_ver work.sim_tb_top glbl
+
+onerror {resume}
+#Log all the objects in design. These will appear in .wlf file#
+log -r /*
+#View sim_tb_top signals in waveform#
+add wave sim:/sim_tb_top/*
+#Change radix to Hexadecimal#
+radix hex
+#Supress Numeric Std package and Arith package warnings.#
+#For VHDL designs we get some warnings due to unknown values on some signals at startup#
+# ** Warning: NUMERIC_STD.TO_INTEGER: metavalue detected, returning 0#
+#We may also get some Arithmetic packeage warnings because of unknown values on#
+#some of the signals that are used in an Arithmetic operation.#
+#In order to suppress these warnings, we use following two commands#
+set NumericStdNoWarnings 1
+set StdArithNoWarnings 1
+
+#Choose simulation run time by inserting a breakpoint and then run for specified #
+#period. For more details, refer to user guide (UG406).#
+when {/sim_tb_top/phy_init_done = 1} {
+if {[when -label a_100] == ""} {
+when -label a_100 { $now = 50 us } {
+nowhen a_100
+report simulator control
+report simulator state
+if {[examine /sim_tb_top/error] == 0} {
+echo "TEST PASSED"
+stop
+}
+if {[examine /sim_tb_top/error] != 0} {
+echo "TEST FAILED: DATA ERROR"
+stop
+}
+}
+}
+}
+
+#In case calibration fails to complete, choose the run time and then stop#
+when {$now = @1000 us and /sim_tb_top/phy_init_done != 1} {
+echo "TEST FAILED: CALIBRATION DID NOT COMPLETE"
+stop
+}
+
+run -all
+stop
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/svga2ch7301c.vhd work/leon3-xilinx-ml605/svga2ch7301c.vhd
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/svga2ch7301c.vhd	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/svga2ch7301c.vhd	2019-12-29 15:59:50.142754050 +0100
@@ -0,0 +1,221 @@
+------------------------------------------------------------------------------
+--  This file is a part of the GRLIB VHDL IP LIBRARY
+--  Copyright (C) 2003 - 2008, Gaisler Research
+--  Copyright (C) 2008 - 2014, Aeroflex Gaisler
+--
+--  This program is free software; you can redistribute it and/or modify
+--  it under the terms of the GNU General Public License as published by
+--  the Free Software Foundation; either version 2 of the License, or
+--  (at your option) any later version.
+--
+--  This program is distributed in the hope that it will be useful,
+--  but WITHOUT ANY WARRANTY; without even the implied warranty of
+--  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+--  GNU General Public License for more details.
+--
+--  You should have received a copy of the GNU General Public License
+--  along with this program; if not, write to the Free Software
+--  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA 
+-------------------------------------------------------------------------------
+-- Entity:      svga2ch7301c
+-- File:        svga2ch7301c.vhd
+-- Author:      Jan Andersson - Aeroflex Gaisler AB
+--              jan@gaisler.com
+--
+-- Description: Converter inteneded to connect a SVGACTRL core to a Chrontel
+--              CH7301C DVI transmitter. Multiplexes data and generates clocks.
+--              Tailored for use on the Xilinx ML50x boards with Leon3/GRLIB
+--              template designs.
+--
+-- This multiplexer has been developed for use with the Chrontel CH7301C DVI
+-- transmitter. Supported multiplexed formats are, as in the CH7301 datasheet:
+--
+-- IDF   Description
+--  0    12-bit multiplexed RGB input (24-bit color), (scheme 1)
+--  1    12-bit multiplexed RGB2 input (24-bit color), (scheme 2)
+--  2    8-bit multiplexed RGB input (16-bit color, 565)
+--  3    8-bit multiplexed RGB input (15-bit color, 555)
+--
+-- This core assumes a 100 MHz input clock on the 'clk' input.
+--
+-- If the generic 'dynamic' is non-zero the core uses the value vgao.bitdepth
+-- to decide if multiplexing should be done according to IDF 0 or IDF 2.
+-- vago.bitdepth = "11" gives IDF 0, others give IDF2.
+-- The 'idf' generic is not used when the 'dynamic' generic is non-zero.
+-- Note that if dynamic selection is enabled you will need to reconfigure
+-- the DVI transmitter when the VGA core changes bit depth.
+-- 
+
+library ieee;
+use ieee.std_logic_1164.all;
+
+library gaisler;
+use gaisler.misc.all;
+
+library grlib;
+use grlib.stdlib.all;
+
+-- pragma translate_off
+library unisim;
+use unisim.BUFG;
+use unisim.DCM;
+-- pragma translate_on
+
+library techmap;
+use techmap.gencomp.all;
+
+entity svga2ch7301c is
+  
+  generic (
+    tech    : integer := 0;
+    idf     : integer := 0;
+    dynamic : integer := 0
+    );
+  port (
+    clk100      : in  std_ulogic;
+    clk125      : in  std_ulogic;
+    rstn        : in  std_ulogic;
+    clksel      : in  std_logic_vector(1 downto 0);
+    vgao        : in  apbvga_out_type;
+    clkvga     : out std_ulogic;
+    dclk_p      : out std_ulogic;
+    dclk_n      : out std_ulogic;
+    data        : out std_logic_vector(11 downto 0);
+    hsync       : out std_ulogic;
+    vsync       : out std_ulogic;
+    de          : out std_ulogic
+    );
+  
+end svga2ch7301c;
+
+architecture rtl of svga2ch7301c is
+
+  component BUFG port (O : out std_logic; I : in std_logic); end component;
+
+  constant VERSION : integer := 1;
+  
+  signal vcc, gnd : std_logic;
+  signal d0, d1 : std_logic_vector(11 downto 0);
+  signal red, green, blue : std_logic_vector(7 downto 0);
+
+  signal lvgaclk, vgaclk, clk40, clk65, clk50, clk25 : std_ulogic;
+  
+  signal clkval : std_logic_vector(1 downto 0);
+  signal clkval40 : std_logic_vector(1 downto 0);
+  signal clkval65 : std_logic_vector(1 downto 0);
+  
+begin  -- rtl
+
+  vcc <= '1'; gnd <= '0';
+
+  -----------------------------------------------------------------------------
+  -- RGB data multiplexer
+  -----------------------------------------------------------------------------
+  red <= vgao.video_out_r;
+  green <= vgao.video_out_g;
+  blue <= vgao.video_out_b;
+  clkvga <= vgaclk;
+
+  static: if dynamic = 0 generate
+    idf0: if (idf = 0) generate
+      d0 <= green(3 downto 0) & blue(7 downto 0);
+      d1 <= red(7 downto 0) & green(7 downto 4);
+    end generate;
+
+    idf1: if (idf = 1) generate
+      d0 <= green(4 downto 2) & blue(7 downto 3) & green(0) & blue(2 downto 0);
+      d1 <= red(7 downto 3) & green(7 downto 5) & red(2 downto 0) & green(1);
+    end generate;
+
+    idf2: if (idf = 2) generate
+      d0(11 downto 4) <= green(4 downto 2) & blue(7 downto 3);
+      d0(3 downto 0) <= (others => '0');
+      d1(11 downto 4) <= red(7 downto 3) & green(7 downto 5);
+      d1(3 downto 0) <= (others => '0');
+      data(3 downto 0) <= (others => '0');
+    end generate;
+
+    idf3: if (idf = 3) generate
+      d0(11 downto 4) <= green(5 downto 3) & blue(7 downto 3);
+      d0(3 downto 0) <= (others => '0');
+      d1(11 downto 4) <= '0' & red(7 downto 3) & green(7 downto 6);
+      d1(3 downto 0) <= (others => '0');
+      data(3 downto 0) <= (others => '0');
+    end generate idf3;
+
+    -- DDR regs
+    dataregs: for i in 11 downto (4*(idf/2)) generate
+      ddr_oreg0 : ddr_oreg generic map (tech)
+        port map (q => data(i), c1 => vgaclk, c2 => gnd, ce => vcc,
+                  d1 => d0(i), d2 => d1(i), r => gnd, s => gnd);
+    end generate;
+  end generate;
+  
+  nostatic: if dynamic /= 0 generate
+    d0 <= green(3 downto 0) & blue(7 downto 0) when vgao.bitdepth = "11" else
+          green(4 downto 2) & blue(7 downto 3) & "0000";
+
+    d1 <= red(7 downto 0) & green(7 downto 4) when vgao.bitdepth = "11" else
+          red(7 downto 3) & green(7 downto 5) & "0000";
+
+    dataregs: for i in 11 downto 0 generate
+      ddr_oreg0 : ddr_oreg generic map (tech)
+        port map (q => data(i), c1 => vgaclk, c2 => gnd, ce => vcc,
+                  d1 => d0(i), d2 => d1(i), r => gnd, s => gnd);
+    end generate;
+  end generate;
+
+  -----------------------------------------------------------------------------
+  -- Sync signals
+  -----------------------------------------------------------------------------
+  
+  process (vgaclk)
+  begin  -- process
+    if rising_edge(vgaclk) then
+      hsync <= vgao.hsync;
+      vsync <= vgao.vsync;
+      de    <= vgao.blank;
+    end if;
+  end process;
+  
+  -----------------------------------------------------------------------------
+  -- Clock generation
+  -----------------------------------------------------------------------------
+
+  ddroreg_p : ddr_oreg generic map (tech)
+    port map (q => dclk_p, c1 => vgaclk, c2 => gnd, ce => vcc,
+              d1 => vcc, d2 => gnd, r => gnd, s => gnd);
+  ddroreg_n : ddr_oreg generic map (tech)
+    port map (q => dclk_n, c1 => vgaclk, c2 => gnd, ce => vcc,
+              d1 => gnd, d2 => vcc, r => gnd, s => gnd);
+  
+  -- Clock selection
+  bufg00 : BUFG port map (I => lvgaclk, O => vgaclk);
+  lvgaclk <= clk25 when clksel = "00" else clk40 when clksel = "01"
+ 	else clk50 when clksel = "10" else clk65;
+  
+  -- Generate clocks
+  clkdiv : process(clk100, rstn)
+  begin
+    if rstn = '0' then clkval <= "00";
+    elsif rising_edge(clk100) then
+      clkval <= clkval + 1;
+    end if;
+  end process;
+
+  clkdiv65 : process(clk125, rstn)
+  begin
+    if rstn = '0' then clkval65 <= "00"; clkval40 <= "00";
+    elsif rising_edge(clk125) then
+      clkval65 <= clkval65 + 1;
+      if clkval40 = "10" then clkval40 <= "00";
+      else clkval40 <= clkval40 + 1; end if;
+    end if;
+  end process;
+
+  clk25 <= clkval(1);
+  clk50 <= clkval(0);
+  clk40 <= clkval40(1);
+  clk65 <= clkval65(0);
+  
+end rtl;
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/systest.c work/leon3-xilinx-ml605/systest.c
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/systest.c	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/systest.c	2019-12-29 15:59:50.142754050 +0100
@@ -0,0 +1,10 @@
+
+main()
+
+{
+	report_start();
+
+	base_test();
+
+	report_end();
+}
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/testbench.vhd work/leon3-xilinx-ml605/testbench.vhd
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/testbench.vhd	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/testbench.vhd	2019-12-29 15:59:50.142754050 +0100
@@ -0,0 +1,377 @@
+-----------------------------------------------------------------------------
+--  LEON3 Demonstration design test bench
+--  Copyright (C) 2004 Jiri Gaisler, Gaisler Research
+------------------------------------------------------------------------------
+--  This file is a part of the GRLIB VHDL IP LIBRARY
+--  Copyright (C) 2003 - 2008, Gaisler Research
+--  Copyright (C) 2008 - 2014, Aeroflex Gaisler
+--
+--  This program is free software; you can redistribute it and/or modify
+--  it under the terms of the GNU General Public License as published by
+--  the Free Software Foundation; either version 2 of the License, or
+--  (at your option) any later version.
+--
+--  This program is distributed in the hope that it will be useful,
+--  but WITHOUT ANY WARRANTY; without even the implied warranty of
+--  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+--  GNU General Public License for more details.
+--
+--  You should have received a copy of the GNU General Public License
+--  along with this program; if not, write to the Free Software
+--  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA 
+------------------------------------------------------------------------------
+
+library ieee;
+use ieee.std_logic_1164.all;
+library gaisler;
+use gaisler.libdcom.all;
+use gaisler.sim.all;
+library techmap;
+use techmap.gencomp.all;
+use work.debug.all;
+
+use work.config.all;
+use work.ml605.all;
+
+entity testbench is
+  generic (
+    fabtech   : integer := CFG_FABTECH;
+    memtech   : integer := CFG_MEMTECH;
+    padtech   : integer := CFG_PADTECH;
+    disas     : integer := CFG_DISAS;   -- Enable disassembly to console
+    dbguart   : integer := CFG_DUART;   -- Print UART on console
+    pclow     : integer := CFG_PCLOW;
+    clkperiod : integer := 37
+    );
+end;
+
+architecture behav of testbench is
+
+-- DDR3 Simulation parameters
+constant SIM_BYPASS_INIT_CAL : string := "FAST";
+          -- # = "OFF" -  Complete memory init &
+          --               calibration sequence
+          -- # = "SKIP" - Not supported
+          -- # = "FAST" - Complete memory init & use
+          --              abbreviated calib sequence
+
+
+  constant promfile  : string  := "prom.srec";        -- rom contents
+  constant ramfile   : string  := "ram.srec";       -- sdram contents
+
+  constant lresp    : boolean := false;
+  constant ct       : integer := clkperiod/2;
+
+  signal clk        : std_logic := '0';
+  signal clk200p    : std_logic := '1';
+  signal clk200n    : std_logic := '0';
+  signal rst        : std_logic := '0';
+  signal rstn1      : std_logic;
+  signal rstn2      : std_logic;
+  signal error      : std_logic;
+
+  -- PROM flash
+  signal address    : std_logic_vector(24 downto 0);
+  signal data       : std_logic_vector(15 downto 0);
+  signal romsn      : std_logic;
+  signal oen        : std_ulogic;
+  signal writen     : std_ulogic;
+  signal iosn       : std_ulogic;
+
+  -- DDR3 memory
+
+  signal ddr3_dq       : std_logic_vector(DQ_WIDTH-1 downto 0);
+  signal ddr3_dm       : std_logic_vector(DM_WIDTH-1 downto 0);
+  signal ddr3_addr     : std_logic_vector(ROW_WIDTH-1 downto 0);
+  signal ddr3_ba       : std_logic_vector(BANK_WIDTH-1 downto 0);
+  signal ddr3_ras_n    : std_logic;
+  signal ddr3_cas_n    : std_logic;
+  signal ddr3_we_n     : std_logic;
+  signal ddr3_reset_n  : std_logic;
+  signal ddr3_cs_n     : std_logic_vector((CS_WIDTH*nCS_PER_RANK)-1 downto 0);
+  signal ddr3_odt      : std_logic_vector((CS_WIDTH*nCS_PER_RANK)-1 downto 0);
+  signal ddr3_cke      : std_logic_vector(CKE_WIDTH-1 downto 0);
+  signal ddr3_dqs_p    : std_logic_vector(DQS_WIDTH-1 downto 0);
+  signal ddr3_dqs_n    : std_logic_vector(DQS_WIDTH-1 downto 0);
+  signal ddr3_tdqs_n   : std_logic_vector(DQS_WIDTH-1 downto 0);
+  signal ddr3_ck_p     : std_logic_vector(CK_WIDTH-1 downto 0);
+  signal ddr3_ck_n     : std_logic_vector(CK_WIDTH-1 downto 0);
+
+  
+  -- Debug support unit
+  signal dsubre     : std_ulogic;
+
+  -- AHB Uart
+  signal dsurx      : std_ulogic;
+  signal dsutx      : std_ulogic;
+
+  -- APB Uart
+  signal urxd       : std_ulogic;
+  signal utxd       : std_ulogic;
+
+  -- Ethernet signals
+  signal etx_clk    : std_ulogic;
+  signal erx_clk    : std_ulogic;
+  signal erxdt      : std_logic_vector(7 downto 0);
+  signal erx_dv     : std_ulogic;
+  signal erx_er     : std_ulogic;
+  signal erx_col    : std_ulogic;
+  signal erx_crs    : std_ulogic;
+  signal etxdt      : std_logic_vector(7 downto 0);
+  signal etx_en     : std_ulogic;
+  signal etx_er     : std_ulogic;
+  signal emdc       : std_ulogic;
+  signal emdio      : std_logic;
+  signal emdint     : std_logic;
+  signal egtx_clk   : std_logic;
+  signal gmiiclk_p  : std_logic := '1';
+  signal gmiiclk_n  : std_logic := '0';
+
+  -- Output signals for LEDs
+  signal led       : std_logic_vector(6 downto 0);
+
+signal iic_scl_main, iic_sda_main : std_logic;
+signal iic_scl_dvi, iic_sda_dvi : std_logic;
+signal tft_lcd_data    : std_logic_vector(11 downto 0);
+signal tft_lcd_clk_p   : std_logic;
+signal tft_lcd_clk_n   : std_logic;
+signal tft_lcd_hsync   : std_logic;
+signal tft_lcd_vsync   : std_logic;
+signal tft_lcd_de      : std_logic;
+signal tft_lcd_reset_b : std_logic;
+signal sysace_mpa      : std_logic_vector(6 downto 0);
+signal sysace_mpce     : std_ulogic;
+signal sysace_mpirq    : std_ulogic;
+signal sysace_mpoe     : std_ulogic;
+signal sysace_mpwe     : std_ulogic;
+signal sysace_d        : std_logic_vector(7 downto 0);
+signal clk_33          : std_ulogic := '0';
+
+  signal brdyn     : std_ulogic;
+
+---------------------pcie----------------------------------------------
+signal cor_sys_reset_n : std_logic := '1';
+signal ep_sys_clk_p    : std_logic;
+signal ep_sys_clk_n    : std_logic;
+signal rp_sys_clk      : std_logic;
+
+signal cor_pci_exp_txn : std_logic_vector(CFG_NO_OF_LANES-1 downto 0);
+signal cor_pci_exp_txp : std_logic_vector(CFG_NO_OF_LANES-1 downto 0);
+signal cor_pci_exp_rxn : std_logic_vector(CFG_NO_OF_LANES-1 downto 0);
+signal cor_pci_exp_rxp : std_logic_vector(CFG_NO_OF_LANES-1 downto 0);
+
+---------------------pcie end---------------------------------------------
+
+begin
+
+  -- clock and reset
+  clk        <= not clk after ct * 1 ns;
+  clk200p    <= not clk200p after 2.5 ns;
+  clk200n    <= not clk200n after 2.5 ns;
+  gmiiclk_p    <= not gmiiclk_p after 4 ns;
+  gmiiclk_n    <= not gmiiclk_n after 4 ns;
+  clk_33       <= not clk_33 after 15 ns;
+  rst        <= '1', '0' after 200 us;
+  rstn1      <= not rst;
+  dsubre     <= '0';
+  urxd       <= 'H';
+  
+  d3 : entity work.leon3mp
+    generic map (fabtech, memtech, padtech, disas, dbguart, pclow,
+                 SIM_BYPASS_INIT_CAL)
+    port map (
+      reset     => rst,
+      errorn    => error,
+      clk_ref_p    => clk200p,
+      clk_ref_n    => clk200n,
+
+      -- PROM
+      address   => address(24 downto 1),
+      data      => data(15 downto 0),
+      romsn     => romsn,
+      oen       => oen,
+      writen    => writen,
+
+      -- DDR3
+      ddr3_dq       => ddr3_dq,
+      ddr3_dm       => ddr3_dm,
+      ddr3_addr     => ddr3_addr,
+      ddr3_ba       => ddr3_ba,
+      ddr3_ras_n    => ddr3_ras_n,
+      ddr3_cas_n    => ddr3_cas_n,
+      ddr3_we_n     => ddr3_we_n,
+      ddr3_reset_n  => ddr3_reset_n,
+      ddr3_cs_n     => ddr3_cs_n,
+      ddr3_odt      => ddr3_odt,
+      ddr3_cke      => ddr3_cke,
+      ddr3_dqs_p    => ddr3_dqs_p,
+      ddr3_dqs_n    => ddr3_dqs_n,
+      ddr3_ck_p     => ddr3_ck_p,
+      ddr3_ck_n     => ddr3_ck_n,
+      
+      -- Debug Unit
+      dsubre    => dsubre,
+
+      -- AHB Uart
+      dsutx     => dsutx,
+      dsurx     => dsurx,
+
+      -- PHY
+      gmiiclk_p  => gmiiclk_p,
+      gmiiclk_n  => gmiiclk_n,
+      egtx_clk  => egtx_clk,
+      etx_clk   => etx_clk,
+      erx_clk   => erx_clk,
+      erxd      => erxdt(7 downto 0),
+      erx_dv    => erx_dv,
+      erx_er    => erx_er,
+      erx_col   => erx_col,
+      erx_crs   => erx_crs,
+      emdint    => emdint,
+      etxd      => etxdt(7 downto 0),
+      etx_en    => etx_en,
+      etx_er    => etx_er,
+      emdc      => emdc,
+      emdio     => emdio,
+
+      -- Output signals for LEDs
+        iic_scl_main => iic_scl_main, 
+	iic_sda_main => iic_sda_main,
+        dvi_iic_scl => iic_scl_dvi, 
+	dvi_iic_sda => iic_sda_dvi,
+        tft_lcd_data => tft_lcd_data, 
+	tft_lcd_clk_p => tft_lcd_clk_p, 
+	tft_lcd_clk_n => tft_lcd_clk_n, 
+	tft_lcd_hsync => tft_lcd_hsync,
+        tft_lcd_vsync => tft_lcd_vsync, 
+	tft_lcd_de => tft_lcd_de, 
+	tft_lcd_reset_b => tft_lcd_reset_b,
+        clk_33 => clk_33, 
+        sysace_mpa => sysace_mpa, 
+	sysace_mpce => sysace_mpce, 
+	sysace_mpirq => sysace_mpirq, 
+	sysace_mpoe => sysace_mpoe,
+        sysace_mpwe => sysace_mpwe, 
+	sysace_d => sysace_d,
+        pci_exp_txp=> cor_pci_exp_txp,
+        pci_exp_txn=> cor_pci_exp_txn,
+        pci_exp_rxp=> cor_pci_exp_rxp,
+        pci_exp_rxn=> cor_pci_exp_rxn,
+        sys_clk_p=> ep_sys_clk_p,   
+        sys_clk_n=> ep_sys_clk_n,
+        sys_reset_n=> cor_sys_reset_n,
+        led => led
+      );
+
+
+  u1 : ddr3ram
+    generic map (
+      width     => 64,
+      abits     => 13,
+      colbits   => 10,
+      rowbits   => 13,
+      implbanks => 1,
+      fname     => ramfile,
+      lddelay   => (0 ns),
+      ldguard   => 1,
+      speedbin  => 9, --DDR3-1600K
+      density   => 3,
+      pagesize  => 1,
+      changeendian => 32)
+    port map (
+      ck     => ddr3_ck_p(0),
+      ckn    => ddr3_ck_n(0),
+      cke    => ddr3_cke(0),
+      csn    => ddr3_cs_n(0),
+      odt    => ddr3_odt(0),
+      rasn   => ddr3_ras_n,
+      casn   => ddr3_cas_n,
+      wen    => ddr3_we_n,
+      dm     => ddr3_dm,
+      ba     => ddr3_ba,
+      a      => ddr3_addr,
+      resetn => ddr3_reset_n,
+      dq     => ddr3_dq,
+      dqs    => ddr3_dqs_p,
+      dqsn   => ddr3_dqs_n,
+      doload => led(3)
+      );
+  
+  address(0) <= '0';
+  prom0 : for i in 0 to 1 generate
+      sr0 : sram generic map (index => i+4, abits => 24, fname => promfile)
+        port map (address(24 downto 1), data(15-i*8 downto 8-i*8), romsn,
+                  writen, oen);
+  end generate;
+
+  phy0 : if (CFG_GRETH = 1) generate
+    emdio <= 'H';
+    p0: phy
+      generic map (address => 7)
+      port map(rstn1, emdio, etx_clk, erx_clk, erxdt, erx_dv, erx_er,
+               erx_col, erx_crs, etxdt, etx_en, etx_er, emdc, egtx_clk);
+  end generate;
+
+--  spimem0: if CFG_SPIMCTRL = 1 generate
+--    s0 : spi_flash generic map (ftype => 4, debug => 0, fname => promfile,
+--                                readcmd => CFG_SPIMCTRL_READCMD,
+--                                dummybyte => CFG_SPIMCTRL_DUMMYBYTE,
+--                                dualoutput => 0)  -- Dual output is not supported in this design
+--      port map (spi_clk, spi_mosi, data(24), spi_sel_n);
+--  end generate spimem0;
+
+  error <= 'H';                         -- ERROR pull-up
+
+  iuerr : process
+  begin
+     wait for 210 us; -- This is for proper DDR3 behaviour durign init phase not needed durin simulation
+     wait on led(3);  -- DDR3 Memory Init ready
+     wait for 5000 ns;
+    assert (to_X01(error) = '1')
+      report "*** IU in error mode, simulation halted ***"
+      severity failure;
+  end process;
+
+  data <= buskeep(data) after 5 ns;
+
+  dsucom : process
+    procedure dsucfg(signal dsurx : in std_ulogic; signal dsutx : out std_ulogic) is
+      variable w32 : std_logic_vector(31 downto 0);
+      variable c8  : std_logic_vector(7 downto 0);
+      constant txp : time := 160 * 1 ns;
+    begin
+      dsutx  <= '1';
+      wait;
+      wait for 5000 ns;
+      txc(dsutx, 16#55#, txp);          -- sync uart
+      txc(dsutx, 16#a0#, txp);
+      txa(dsutx, 16#40#, 16#00#, 16#00#, 16#00#, txp);
+      rxi(dsurx, w32, txp, lresp);
+
+-- txc(dsutx, 16#c0#, txp);
+-- txa(dsutx, 16#90#, 16#00#, 16#00#, 16#00#, txp);
+-- txa(dsutx, 16#00#, 16#00#, 16#00#, 16#ef#, txp);
+--
+-- txc(dsutx, 16#c0#, txp);
+-- txa(dsutx, 16#90#, 16#00#, 16#00#, 16#20#, txp);
+-- txa(dsutx, 16#00#, 16#00#, 16#ff#, 16#ff#, txp);
+--
+-- txc(dsutx, 16#c0#, txp);
+-- txa(dsutx, 16#90#, 16#40#, 16#00#, 16#48#, txp);
+-- txa(dsutx, 16#00#, 16#00#, 16#00#, 16#12#, txp);
+--
+-- txc(dsutx, 16#c0#, txp);
+-- txa(dsutx, 16#90#, 16#40#, 16#00#, 16#60#, txp);
+-- txa(dsutx, 16#00#, 16#00#, 16#12#, 16#10#, txp);
+--
+-- txc(dsutx, 16#80#, txp);
+-- txa(dsutx, 16#90#, 16#00#, 16#00#, 16#00#, txp);
+-- rxi(dsurx, w32, txp, lresp);
+    end;
+  begin
+    dsucfg(dsutx, dsurx);
+    wait;
+  end process;
+end;
+
+
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/tkconfig2.h work/leon3-xilinx-ml605/tkconfig2.h
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/tkconfig2.h	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/tkconfig2.h	2019-12-29 15:59:50.142754050 +0100
@@ -0,0 +1,12 @@
+
+#if defined CONFIG_FREQ60
+#define CFG_SYS_FREQ_DIV 20
+#elif defined CONFIG_FREQ75
+#define CFG_SYS_FREQ_DIV 16
+#elif defined CONFIG_FREQ80
+#define CFG_SYS_FREQ_DIV 15
+#elif defined CONFIG_FREQ100
+#define CFG_SYS_FREQ_DIV 12
+#else
+#define CFG_SYS_FREQ_DIV 10
+#endif
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/tkconfig.h work/leon3-xilinx-ml605/tkconfig.h
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/tkconfig.h	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/tkconfig.h	2019-12-29 15:59:50.142754050 +0100
@@ -0,0 +1,997 @@
+#if defined CONFIG_SYN_INFERRED
+#define CONFIG_SYN_TECH inferred
+#elif defined CONFIG_SYN_UMC
+#define CONFIG_SYN_TECH umc
+#elif defined CONFIG_SYN_RHUMC
+#define CONFIG_SYN_TECH rhumc
+#elif defined CONFIG_SYN_DARE
+#define CONFIG_SYN_TECH dare
+#elif defined CONFIG_SYN_SAED32
+#define CONFIG_SYN_TECH saed32
+#elif defined CONFIG_SYN_ATC18
+#define CONFIG_SYN_TECH atc18s
+#elif defined CONFIG_SYN_ATC18RHA
+#define CONFIG_SYN_TECH atc18rha
+#elif defined CONFIG_SYN_AXCEL
+#define CONFIG_SYN_TECH axcel
+#elif defined CONFIG_SYN_AXDSP
+#define CONFIG_SYN_TECH axdsp
+#elif defined CONFIG_SYN_PROASICPLUS
+#define CONFIG_SYN_TECH proasic
+#elif defined CONFIG_SYN_ALTERA
+#define CONFIG_SYN_TECH altera
+#elif defined CONFIG_SYN_STRATIX
+#define CONFIG_SYN_TECH stratix1
+#elif defined CONFIG_SYN_STRATIXII
+#define CONFIG_SYN_TECH stratix2
+#elif defined CONFIG_SYN_STRATIXIII
+#define CONFIG_SYN_TECH stratix3
+#elif defined CONFIG_SYN_STRATIXIV
+#define CONFIG_SYN_TECH stratix4
+#elif defined CONFIG_SYN_CYCLONEII
+#define CONFIG_SYN_TECH stratix2
+#elif defined CONFIG_SYN_CYCLONEIII
+#define CONFIG_SYN_TECH cyclone3
+#elif defined CONFIG_SYN_CYCLONEIV
+#define CONFIG_SYN_TECH cyclone3
+#elif defined CONFIG_SYN_EASIC45
+#define CONFIG_SYN_TECH easic45
+#elif defined CONFIG_SYN_EASIC90
+#define CONFIG_SYN_TECH easic90
+#elif defined CONFIG_SYN_IHP25
+#define CONFIG_SYN_TECH ihp25
+#elif defined CONFIG_SYN_IHP25RH
+#define CONFIG_SYN_TECH ihp25rh
+#elif defined CONFIG_SYN_CMOS9SF
+#define CONFIG_SYN_TECH cmos9sf
+#elif defined CONFIG_SYN_LATTICE
+#define CONFIG_SYN_TECH lattice
+#elif defined CONFIG_SYN_ECLIPSE
+#define CONFIG_SYN_TECH eclipse
+#elif defined CONFIG_SYN_PEREGRINE
+#define CONFIG_SYN_TECH peregrine
+#elif defined CONFIG_SYN_PROASIC
+#define CONFIG_SYN_TECH proasic
+#elif defined CONFIG_SYN_PROASIC3
+#define CONFIG_SYN_TECH apa3
+#elif defined CONFIG_SYN_PROASIC3E
+#define CONFIG_SYN_TECH apa3e
+#elif defined CONFIG_SYN_PROASIC3L
+#define CONFIG_SYN_TECH apa3l
+#elif defined CONFIG_SYN_IGLOO
+#define CONFIG_SYN_TECH apa3
+#elif defined CONFIG_SYN_FUSION
+#define CONFIG_SYN_TECH actfus
+#elif defined CONFIG_SYN_SPARTAN2
+#define CONFIG_SYN_TECH virtex
+#elif defined CONFIG_SYN_VIRTEX
+#define CONFIG_SYN_TECH virtex
+#elif defined CONFIG_SYN_VIRTEXE
+#define CONFIG_SYN_TECH virtex
+#elif defined CONFIG_SYN_SPARTAN3
+#define CONFIG_SYN_TECH spartan3
+#elif defined CONFIG_SYN_SPARTAN3E
+#define CONFIG_SYN_TECH spartan3e
+#elif defined CONFIG_SYN_SPARTAN6
+#define CONFIG_SYN_TECH spartan6
+#elif defined CONFIG_SYN_VIRTEX2
+#define CONFIG_SYN_TECH virtex2
+#elif defined CONFIG_SYN_VIRTEX4
+#define CONFIG_SYN_TECH virtex4
+#elif defined CONFIG_SYN_VIRTEX5
+#define CONFIG_SYN_TECH virtex5
+#elif defined CONFIG_SYN_VIRTEX6
+#define CONFIG_SYN_TECH virtex6
+#elif defined CONFIG_SYN_VIRTEX7
+#define CONFIG_SYN_TECH virtex7
+#elif defined CONFIG_SYN_KINTEX7
+#define CONFIG_SYN_TECH kintex7
+#elif defined CONFIG_SYN_ARTIX7
+#define CONFIG_SYN_TECH artix7
+#elif defined CONFIG_SYN_ZYNQ7000
+#define CONFIG_SYN_TECH zynq7000
+#elif defined CONFIG_SYN_ARTIX77
+#define CONFIG_SYN_TECH artix7
+#elif defined CONFIG_SYN_ZYNQ7000
+#define CONFIG_SYN_TECH zynq7000
+#elif defined CONFIG_SYN_RH_LIB18T
+#define CONFIG_SYN_TECH rhlib18t
+#elif defined CONFIG_SYN_SMIC13
+#define CONFIG_SYN_TECH smic013
+#elif defined CONFIG_SYN_UT025CRH
+#define CONFIG_SYN_TECH ut25
+#elif defined CONFIG_SYN_UT130HBD
+#define CONFIG_SYN_TECH ut130
+#elif defined CONFIG_SYN_UT90NHBD
+#define CONFIG_SYN_TECH ut90
+#elif defined CONFIG_SYN_TSMC90
+#define CONFIG_SYN_TECH tsmc90
+#elif defined CONFIG_SYN_TM65GPLUS
+#define CONFIG_SYN_TECH tm65gplus
+#elif defined CONFIG_SYN_CUSTOM1
+#define CONFIG_SYN_TECH custom1
+#else
+#error "unknown target technology"
+#endif
+
+#if defined CONFIG_SYN_INFER_RAM
+#define CFG_RAM_TECH inferred
+#elif defined CONFIG_MEM_UMC
+#define CFG_RAM_TECH umc
+#elif defined CONFIG_MEM_RHUMC
+#define CFG_RAM_TECH rhumc
+#elif defined CONFIG_MEM_DARE
+#define CFG_RAM_TECH dare
+#elif defined CONFIG_MEM_SAED32
+#define CFG_RAM_TECH saed32
+#elif defined CONFIG_MEM_VIRAGE
+#define CFG_RAM_TECH memvirage
+#elif defined CONFIG_MEM_ARTISAN
+#define CFG_RAM_TECH memartisan
+#elif defined CONFIG_MEM_CUSTOM1
+#define CFG_RAM_TECH custom1
+#elif defined CONFIG_MEM_VIRAGE90
+#define CFG_RAM_TECH memvirage90
+#elif defined CONFIG_MEM_INFERRED
+#define CFG_RAM_TECH inferred
+#else
+#define CFG_RAM_TECH CONFIG_SYN_TECH
+#endif
+
+#if defined CONFIG_SYN_INFER_PADS
+#define CFG_PAD_TECH inferred
+#else
+#define CFG_PAD_TECH CONFIG_SYN_TECH
+#endif
+
+#ifndef CONFIG_SYN_NO_ASYNC
+#define CONFIG_SYN_NO_ASYNC 0
+#endif
+
+#ifndef CONFIG_SYN_SCAN
+#define CONFIG_SYN_SCAN 0
+#endif
+
+#ifndef CONFIG_LEON3
+#define CONFIG_LEON3 0
+#endif
+
+#ifndef CONFIG_PROC_NUM
+#define CONFIG_PROC_NUM 1
+#endif
+
+#ifndef CONFIG_IU_NWINDOWS
+#define CONFIG_IU_NWINDOWS 8
+#endif
+
+#ifndef CONFIG_IU_RSTADDR
+#define CONFIG_IU_RSTADDR 8
+#endif
+
+#ifndef CONFIG_IU_LDELAY
+#define CONFIG_IU_LDELAY 1
+#endif
+
+#ifndef CONFIG_IU_WATCHPOINTS
+#define CONFIG_IU_WATCHPOINTS 0
+#endif
+
+#ifdef CONFIG_IU_V8MULDIV
+#ifdef CONFIG_IU_MUL_LATENCY_4
+#define CFG_IU_V8 1
+#elif defined CONFIG_IU_MUL_LATENCY_5
+#define CFG_IU_V8 2
+#elif defined CONFIG_IU_MUL_LATENCY_2
+#define CFG_IU_V8 16#32#
+#endif
+#else
+#define CFG_IU_V8 0
+#endif
+
+#ifdef CONFIG_IU_MUL_MODGEN
+#define CFG_IU_MUL_STRUCT 1
+#elif defined CONFIG_IU_MUL_TECHSPEC
+#define CFG_IU_MUL_STRUCT 2
+#elif defined CONFIG_IU_MUL_DW
+#define CFG_IU_MUL_STRUCT 3
+#else
+#define CFG_IU_MUL_STRUCT 0
+#endif
+
+#ifndef CONFIG_PWD
+#define CONFIG_PWD 0
+#endif
+
+#ifndef CONFIG_IU_MUL_MAC
+#define CONFIG_IU_MUL_MAC 0
+#endif
+
+#ifndef CONFIG_IU_BP
+#define CONFIG_IU_BP 0
+#endif
+
+#ifndef CONFIG_NOTAG
+#define CONFIG_NOTAG 0
+#endif
+
+#ifndef CONFIG_IU_SVT
+#define CONFIG_IU_SVT 0
+#endif
+
+#if defined CONFIG_FPU_GRFPC1
+#define CONFIG_FPU_GRFPC 1
+#elif defined CONFIG_FPU_GRFPC2
+#define CONFIG_FPU_GRFPC 2
+#else
+#define CONFIG_FPU_GRFPC 0
+#endif
+
+#if defined CONFIG_FPU_GRFPU_INFMUL
+#define CONFIG_FPU_GRFPU_MUL 0
+#elif defined CONFIG_FPU_GRFPU_DWMUL
+#define CONFIG_FPU_GRFPU_MUL 1
+#elif defined CONFIG_FPU_GRFPU_MODGEN
+#define CONFIG_FPU_GRFPU_MUL 2
+#elif defined CONFIG_FPU_GRFPU_TECHSPEC
+#define CONFIG_FPU_GRFPU_MUL 3
+#else
+#define CONFIG_FPU_GRFPU_MUL 0
+#endif
+
+#if defined CONFIG_FPU_GRFPU_SH
+#define CONFIG_FPU_GRFPU_SHARED 1
+#else
+#define CONFIG_FPU_GRFPU_SHARED 0
+#endif
+
+#if defined CONFIG_FPU_GRFPU
+#define CONFIG_FPU (1+CONFIG_FPU_GRFPU_MUL)
+#elif defined CONFIG_FPU_MEIKO
+#define CONFIG_FPU 15
+#elif defined CONFIG_FPU_GRFPULITE
+#define CONFIG_FPU (8+CONFIG_FPU_GRFPC)
+#else
+#define CONFIG_FPU 0
+#endif
+
+#ifndef CONFIG_FPU_NETLIST
+#define CONFIG_FPU_NETLIST 0
+#endif
+
+#ifndef CONFIG_ICACHE_ENABLE
+#define CONFIG_ICACHE_ENABLE 0
+#endif
+
+#if defined CONFIG_ICACHE_ASSO1
+#define CFG_IU_ISETS 1
+#elif defined CONFIG_ICACHE_ASSO2
+#define CFG_IU_ISETS 2
+#elif defined CONFIG_ICACHE_ASSO3
+#define CFG_IU_ISETS 3
+#elif defined CONFIG_ICACHE_ASSO4
+#define CFG_IU_ISETS 4
+#else
+#define CFG_IU_ISETS 1
+#endif
+
+#if defined CONFIG_ICACHE_SZ1
+#define CFG_ICACHE_SZ 1
+#elif defined CONFIG_ICACHE_SZ2
+#define CFG_ICACHE_SZ 2
+#elif defined CONFIG_ICACHE_SZ4
+#define CFG_ICACHE_SZ 4
+#elif defined CONFIG_ICACHE_SZ8
+#define CFG_ICACHE_SZ 8
+#elif defined CONFIG_ICACHE_SZ16
+#define CFG_ICACHE_SZ 16
+#elif defined CONFIG_ICACHE_SZ32
+#define CFG_ICACHE_SZ 32
+#elif defined CONFIG_ICACHE_SZ64
+#define CFG_ICACHE_SZ 64
+#elif defined CONFIG_ICACHE_SZ128
+#define CFG_ICACHE_SZ 128
+#elif defined CONFIG_ICACHE_SZ256
+#define CFG_ICACHE_SZ 256
+#else
+#define CFG_ICACHE_SZ 1
+#endif
+
+#ifdef CONFIG_ICACHE_LZ16
+#define CFG_ILINE_SZ 4
+#else
+#define CFG_ILINE_SZ 8
+#endif
+
+#if defined CONFIG_ICACHE_ALGODIR
+#define CFG_ICACHE_ALGORND 3
+#elif defined CONFIG_ICACHE_ALGORND
+#define CFG_ICACHE_ALGORND 2
+#elif defined CONFIG_ICACHE_ALGOLRR
+#define CFG_ICACHE_ALGORND 1
+#else
+#define CFG_ICACHE_ALGORND 0
+#endif
+
+#ifndef CONFIG_ICACHE_LOCK
+#define CONFIG_ICACHE_LOCK 0
+#endif
+
+#ifndef CONFIG_ICACHE_LRAM
+#define CONFIG_ICACHE_LRAM 0
+#endif
+
+#ifndef CONFIG_ICACHE_LRSTART
+#define CONFIG_ICACHE_LRSTART 8E
+#endif
+
+#if defined CONFIG_ICACHE_LRAM_SZ2
+#define CFG_ILRAM_SIZE 2
+#elif defined CONFIG_ICACHE_LRAM_SZ4
+#define CFG_ILRAM_SIZE 4
+#elif defined CONFIG_ICACHE_LRAM_SZ8
+#define CFG_ILRAM_SIZE 8
+#elif defined CONFIG_ICACHE_LRAM_SZ16
+#define CFG_ILRAM_SIZE 16
+#elif defined CONFIG_ICACHE_LRAM_SZ32
+#define CFG_ILRAM_SIZE 32
+#elif defined CONFIG_ICACHE_LRAM_SZ64
+#define CFG_ILRAM_SIZE 64
+#elif defined CONFIG_ICACHE_LRAM_SZ128
+#define CFG_ILRAM_SIZE 128
+#elif defined CONFIG_ICACHE_LRAM_SZ256
+#define CFG_ILRAM_SIZE 256
+#else
+#define CFG_ILRAM_SIZE 1
+#endif
+
+
+#ifndef CONFIG_DCACHE_ENABLE
+#define CONFIG_DCACHE_ENABLE 0
+#endif
+
+#if defined CONFIG_DCACHE_ASSO1
+#define CFG_IU_DSETS 1
+#elif defined CONFIG_DCACHE_ASSO2
+#define CFG_IU_DSETS 2
+#elif defined CONFIG_DCACHE_ASSO3
+#define CFG_IU_DSETS 3
+#elif defined CONFIG_DCACHE_ASSO4
+#define CFG_IU_DSETS 4
+#else
+#define CFG_IU_DSETS 1
+#endif
+
+#if defined CONFIG_DCACHE_SZ1
+#define CFG_DCACHE_SZ 1
+#elif defined CONFIG_DCACHE_SZ2
+#define CFG_DCACHE_SZ 2
+#elif defined CONFIG_DCACHE_SZ4
+#define CFG_DCACHE_SZ 4
+#elif defined CONFIG_DCACHE_SZ8
+#define CFG_DCACHE_SZ 8
+#elif defined CONFIG_DCACHE_SZ16
+#define CFG_DCACHE_SZ 16
+#elif defined CONFIG_DCACHE_SZ32
+#define CFG_DCACHE_SZ 32
+#elif defined CONFIG_DCACHE_SZ64
+#define CFG_DCACHE_SZ 64
+#elif defined CONFIG_DCACHE_SZ128
+#define CFG_DCACHE_SZ 128
+#elif defined CONFIG_DCACHE_SZ256
+#define CFG_DCACHE_SZ 256
+#else
+#define CFG_DCACHE_SZ 1
+#endif
+
+#ifdef CONFIG_DCACHE_LZ16
+#define CFG_DLINE_SZ 4
+#else
+#define CFG_DLINE_SZ 8
+#endif
+
+#if defined CONFIG_DCACHE_ALGODIR
+#define CFG_DCACHE_ALGORND 3
+#elif defined CONFIG_DCACHE_ALGORND
+#define CFG_DCACHE_ALGORND 2
+#elif defined CONFIG_DCACHE_ALGOLRR
+#define CFG_DCACHE_ALGORND 1
+#else
+#define CFG_DCACHE_ALGORND 0
+#endif
+
+#ifndef CONFIG_DCACHE_LOCK
+#define CONFIG_DCACHE_LOCK 0
+#endif
+
+#ifndef CONFIG_DCACHE_SNOOP
+#define CONFIG_DCACHE_SNOOP 0
+#endif
+
+#ifndef CONFIG_DCACHE_SNOOP_SEPTAG
+#define CONFIG_DCACHE_SNOOP_SEPTAG 0
+#endif
+
+#ifndef CONFIG_CACHE_FIXED
+#define CONFIG_CACHE_FIXED 0
+#endif
+
+#ifndef CONFIG_DCACHE_LRAM
+#define CONFIG_DCACHE_LRAM 0
+#endif
+
+#ifndef CONFIG_DCACHE_LRSTART
+#define CONFIG_DCACHE_LRSTART 8F
+#endif
+
+#if defined CONFIG_DCACHE_LRAM_SZ2
+#define CFG_DLRAM_SIZE 2
+#elif defined CONFIG_DCACHE_LRAM_SZ4
+#define CFG_DLRAM_SIZE 4
+#elif defined CONFIG_DCACHE_LRAM_SZ8
+#define CFG_DLRAM_SIZE 8
+#elif defined CONFIG_DCACHE_LRAM_SZ16
+#define CFG_DLRAM_SIZE 16
+#elif defined CONFIG_DCACHE_LRAM_SZ32
+#define CFG_DLRAM_SIZE 32
+#elif defined CONFIG_DCACHE_LRAM_SZ64
+#define CFG_DLRAM_SIZE 64
+#elif defined CONFIG_DCACHE_LRAM_SZ128
+#define CFG_DLRAM_SIZE 128
+#elif defined CONFIG_DCACHE_LRAM_SZ256
+#define CFG_DLRAM_SIZE 256
+#else
+#define CFG_DLRAM_SIZE 1
+#endif
+
+#if defined CONFIG_MMU_PAGE_4K
+#define CONFIG_MMU_PAGE 0
+#elif defined CONFIG_MMU_PAGE_8K
+#define CONFIG_MMU_PAGE 1
+#elif defined CONFIG_MMU_PAGE_16K
+#define CONFIG_MMU_PAGE 2
+#elif defined CONFIG_MMU_PAGE_32K
+#define CONFIG_MMU_PAGE 3
+#elif defined CONFIG_MMU_PAGE_PROG
+#define CONFIG_MMU_PAGE 4
+#else
+#define CONFIG_MMU_PAGE 0
+#endif
+
+#ifdef CONFIG_MMU_ENABLE
+#define CONFIG_MMUEN 1
+
+#ifdef CONFIG_MMU_SPLIT
+#define CONFIG_TLB_TYPE 0
+#endif
+#ifdef CONFIG_MMU_COMBINED
+#define CONFIG_TLB_TYPE 1
+#endif
+
+#ifdef CONFIG_MMU_REPARRAY
+#define CONFIG_TLB_REP 0
+#endif
+#ifdef CONFIG_MMU_REPINCREMENT
+#define CONFIG_TLB_REP 1
+#endif
+
+#ifdef CONFIG_MMU_I2
+#define CONFIG_ITLBNUM 2
+#endif
+#ifdef CONFIG_MMU_I4
+#define CONFIG_ITLBNUM 4
+#endif
+#ifdef CONFIG_MMU_I8
+#define CONFIG_ITLBNUM 8
+#endif
+#ifdef CONFIG_MMU_I16
+#define CONFIG_ITLBNUM 16
+#endif
+#ifdef CONFIG_MMU_I32
+#define CONFIG_ITLBNUM 32
+#endif
+#ifdef CONFIG_MMU_I64
+#define CONFIG_ITLBNUM 64
+#endif
+
+
+#define CONFIG_DTLBNUM 2
+#ifdef CONFIG_MMU_D2
+#undef CONFIG_DTLBNUM
+#define CONFIG_DTLBNUM 2
+#endif
+#ifdef CONFIG_MMU_D4
+#undef CONFIG_DTLBNUM
+#define CONFIG_DTLBNUM 4
+#endif
+#ifdef CONFIG_MMU_D8
+#undef CONFIG_DTLBNUM
+#define CONFIG_DTLBNUM 8
+#endif
+#ifdef CONFIG_MMU_D16
+#undef CONFIG_DTLBNUM
+#define CONFIG_DTLBNUM 16
+#endif
+#ifdef CONFIG_MMU_D32
+#undef CONFIG_DTLBNUM
+#define CONFIG_DTLBNUM 32
+#endif
+#ifdef CONFIG_MMU_D64
+#undef CONFIG_DTLBNUM
+#define CONFIG_DTLBNUM 64
+#endif
+#ifdef CONFIG_MMU_FASTWB
+#define CFG_MMU_FASTWB 1
+#else
+#define CFG_MMU_FASTWB 0
+#endif
+
+#else
+#define CONFIG_MMUEN 0
+#define CONFIG_ITLBNUM 2
+#define CONFIG_DTLBNUM 2
+#define CONFIG_TLB_TYPE 1
+#define CONFIG_TLB_REP 1
+#define CFG_MMU_FASTWB 0
+#endif
+
+#ifndef CONFIG_DSU_ENABLE
+#define CONFIG_DSU_ENABLE 0
+#endif
+
+#if defined CONFIG_DSU_ITRACESZ1
+#define CFG_DSU_ITB 1
+#elif CONFIG_DSU_ITRACESZ2
+#define CFG_DSU_ITB 2
+#elif CONFIG_DSU_ITRACESZ4
+#define CFG_DSU_ITB 4
+#elif CONFIG_DSU_ITRACESZ8
+#define CFG_DSU_ITB 8
+#elif CONFIG_DSU_ITRACESZ16
+#define CFG_DSU_ITB 16
+#else
+#define CFG_DSU_ITB 0
+#endif
+
+#if defined CONFIG_DSU_ATRACESZ1
+#define CFG_DSU_ATB 1
+#elif CONFIG_DSU_ATRACESZ2
+#define CFG_DSU_ATB 2
+#elif CONFIG_DSU_ATRACESZ4
+#define CFG_DSU_ATB 4
+#elif CONFIG_DSU_ATRACESZ8
+#define CFG_DSU_ATB 8
+#elif CONFIG_DSU_ATRACESZ16
+#define CFG_DSU_ATB 16
+#else
+#define CFG_DSU_ATB 0
+#endif
+
+#ifndef CONFIG_LEON3FT_EN
+#define CONFIG_LEON3FT_EN 0
+#endif
+
+#if defined CONFIG_IUFT_PAR
+#define CONFIG_IUFT_EN 1
+#elif defined CONFIG_IUFT_DMR
+#define CONFIG_IUFT_EN 2
+#elif defined CONFIG_IUFT_BCH
+#define CONFIG_IUFT_EN 3
+#elif defined CONFIG_IUFT_TMR
+#define CONFIG_IUFT_EN 4
+#else
+#define CONFIG_IUFT_EN 0
+#endif
+#ifndef CONFIG_RF_ERRINJ
+#define CONFIG_RF_ERRINJ 0
+#endif
+
+#if defined CONFIG_FPUFT_PAR
+#define CONFIG_FPUFT 1
+#elif defined CONFIG_FPUFT_DMR
+#define CONFIG_FPUFT 2
+#elif defined CONFIG_FPUFT_TMR
+#define CONFIG_FPUFT 4
+#else
+#define CONFIG_FPUFT 0
+#endif
+
+#ifndef CONFIG_CACHE_FT_EN
+#define CONFIG_CACHE_FT_EN 0
+#endif
+#ifndef CONFIG_CACHE_ERRINJ
+#define CONFIG_CACHE_ERRINJ 0
+#endif
+
+#ifndef CONFIG_LEON3_NETLIST
+#define CONFIG_LEON3_NETLIST 0
+#endif
+
+#ifdef CONFIG_DEBUG_PC32
+#define CFG_DEBUG_PC32 0
+#else
+#define CFG_DEBUG_PC32 2
+#endif
+#ifndef CONFIG_IU_DISAS
+#define CONFIG_IU_DISAS 0
+#endif
+#ifndef CONFIG_IU_DISAS_NET
+#define CONFIG_IU_DISAS_NET 0
+#endif
+
+
+#ifndef CONFIG_AHB_SPLIT
+#define CONFIG_AHB_SPLIT 0
+#endif
+
+#ifndef CONFIG_AHB_RROBIN
+#define CONFIG_AHB_RROBIN 0
+#endif
+
+#ifndef CONFIG_AHB_FPNPEN
+#define CONFIG_AHB_FPNPEN 0
+#endif
+
+#ifndef CONFIG_AHB_IOADDR
+#define CONFIG_AHB_IOADDR FFF
+#endif
+
+#ifndef CONFIG_APB_HADDR
+#define CONFIG_APB_HADDR 800
+#endif
+
+#ifndef CONFIG_AHB_MON
+#define CONFIG_AHB_MON 0
+#endif
+
+#ifndef CONFIG_AHB_MONERR
+#define CONFIG_AHB_MONERR 0
+#endif
+
+#ifndef CONFIG_AHB_MONWAR
+#define CONFIG_AHB_MONWAR 0
+#endif
+
+#ifndef CONFIG_AHB_DTRACE
+#define CONFIG_AHB_DTRACE 0
+#endif
+
+#ifndef CONFIG_DSU_UART
+#define CONFIG_DSU_UART 0
+#endif
+
+
+#ifndef CONFIG_DSU_JTAG
+#define CONFIG_DSU_JTAG 0
+#endif
+
+#ifndef CONFIG_DSU_ETH
+#define CONFIG_DSU_ETH 0
+#endif
+
+#ifndef CONFIG_DSU_IPMSB
+#define CONFIG_DSU_IPMSB C0A8
+#endif
+
+#ifndef CONFIG_DSU_IPLSB
+#define CONFIG_DSU_IPLSB 0033
+#endif
+
+#ifndef CONFIG_DSU_ETHMSB
+#define CONFIG_DSU_ETHMSB 020000
+#endif
+
+#ifndef CONFIG_DSU_ETHLSB
+#define CONFIG_DSU_ETHLSB 000009
+#endif
+
+#if defined CONFIG_DSU_ETHSZ1
+#define CFG_DSU_ETHB 1
+#elif CONFIG_DSU_ETHSZ2
+#define CFG_DSU_ETHB 2
+#elif CONFIG_DSU_ETHSZ4
+#define CFG_DSU_ETHB 4
+#elif CONFIG_DSU_ETHSZ8
+#define CFG_DSU_ETHB 8
+#elif CONFIG_DSU_ETHSZ16
+#define CFG_DSU_ETHB 16
+#elif CONFIG_DSU_ETHSZ32
+#define CFG_DSU_ETHB 32
+#else
+#define CFG_DSU_ETHB 1
+#endif
+
+#ifndef CONFIG_DSU_ETH_PROG
+#define CONFIG_DSU_ETH_PROG 0
+#endif
+
+#ifndef CONFIG_DSU_ETH_DIS
+#define CONFIG_DSU_ETH_DIS 0
+#endif
+
+#ifndef CONFIG_MCTRL_LEON2
+#define CONFIG_MCTRL_LEON2 0
+#endif
+
+#ifndef CONFIG_MCTRL_SDRAM
+#define CONFIG_MCTRL_SDRAM 0
+#endif
+
+#ifndef CONFIG_MCTRL_SDRAM_SEPBUS
+#define CONFIG_MCTRL_SDRAM_SEPBUS 0
+#endif
+
+#ifndef CONFIG_MCTRL_SDRAM_INVCLK
+#define CONFIG_MCTRL_SDRAM_INVCLK 0
+#endif
+
+#ifndef CONFIG_MCTRL_SDRAM_BUS64
+#define CONFIG_MCTRL_SDRAM_BUS64 0
+#endif
+
+#ifndef CONFIG_MCTRL_8BIT
+#define CONFIG_MCTRL_8BIT 0
+#endif
+
+#ifndef CONFIG_MCTRL_16BIT
+#define CONFIG_MCTRL_16BIT 0
+#endif
+
+#ifndef CONFIG_MCTRL_5CS
+#define CONFIG_MCTRL_5CS 0
+#endif
+
+#ifndef CONFIG_MCTRL_EDAC
+#define CONFIG_MCTRL_EDAC 0
+#endif
+
+#ifndef CONFIG_MCTRL_PAGE
+#define CONFIG_MCTRL_PAGE 0
+#endif
+
+#ifndef CONFIG_MCTRL_PROGPAGE
+#define CONFIG_MCTRL_PROGPAGE 0
+#endif
+
+#ifndef CONFIG_AHBROM_ENABLE
+#define CONFIG_AHBROM_ENABLE 0
+#endif
+
+#ifndef CONFIG_AHBROM_START
+#define CONFIG_AHBROM_START 000
+#endif
+
+#ifndef CONFIG_AHBROM_PIPE
+#define CONFIG_AHBROM_PIPE 0
+#endif
+
+#if (CONFIG_AHBROM_START == 0) && (CONFIG_AHBROM_ENABLE == 1)
+#define CONFIG_ROM_START 100
+#else
+#define CONFIG_ROM_START 000
+#endif
+
+
+#ifndef CONFIG_AHBRAM_ENABLE
+#define CONFIG_AHBRAM_ENABLE 0
+#endif
+
+#ifndef CONFIG_AHBRAM_START
+#define CONFIG_AHBRAM_START A00
+#endif
+
+#if defined CONFIG_AHBRAM_SZ1
+#define CFG_AHBRAMSZ 1
+#elif CONFIG_AHBRAM_SZ2
+#define CFG_AHBRAMSZ 2
+#elif CONFIG_AHBRAM_SZ4
+#define CFG_AHBRAMSZ 4
+#elif CONFIG_AHBRAM_SZ8
+#define CFG_AHBRAMSZ 8
+#elif CONFIG_AHBRAM_SZ16
+#define CFG_AHBRAMSZ 16
+#elif CONFIG_AHBRAM_SZ32
+#define CFG_AHBRAMSZ 32
+#elif CONFIG_AHBRAM_SZ64
+#define CFG_AHBRAMSZ 64
+#elif CONFIG_AHBRAM_SZ128
+#define CFG_AHBRAMSZ 128
+#elif CONFIG_AHBRAM_SZ256
+#define CFG_AHBRAMSZ 256
+#elif CONFIG_AHBRAM_SZ512
+#define CFG_AHBRAMSZ 512
+#elif CONFIG_AHBRAM_SZ1024
+#define CFG_AHBRAMSZ 1024
+#elif CONFIG_AHBRAM_SZ2048
+#define CFG_AHBRAMSZ 2048
+#elif CONFIG_AHBRAM_SZ4096
+#define CFG_AHBRAMSZ 4096
+#else
+#define CFG_AHBRAMSZ 1
+#endif
+
+#ifndef CONFIG_AHBRAM_PIPE
+#define CONFIG_AHBRAM_PIPE 0
+#endif
+#ifndef CONFIG_GRETH_ENABLE
+#define CONFIG_GRETH_ENABLE 0
+#endif
+
+#ifndef CONFIG_GRETH_GIGA
+#define CONFIG_GRETH_GIGA 0
+#endif
+
+#if defined CONFIG_GRETH_FIFO4
+#define CFG_GRETH_FIFO 4
+#elif defined CONFIG_GRETH_FIFO8
+#define CFG_GRETH_FIFO 8
+#elif defined CONFIG_GRETH_FIFO16
+#define CFG_GRETH_FIFO 16
+#elif defined CONFIG_GRETH_FIFO32
+#define CFG_GRETH_FIFO 32
+#elif defined CONFIG_GRETH_FIFO64
+#define CFG_GRETH_FIFO 64
+#else
+#define CFG_GRETH_FIFO 8
+#endif
+
+#ifndef CONFIG_GRETH_FT
+#define CONFIG_GRETH_FT 0
+#endif
+
+#ifndef CONFIG_GRETH_EDCLFT
+#define CONFIG_GRETH_EDCLFT 0
+#endif
+#ifndef CONFIG_UART1_ENABLE
+#define CONFIG_UART1_ENABLE 0
+#endif
+
+#if defined CONFIG_UA1_FIFO1
+#define CFG_UA1_FIFO 1
+#elif defined CONFIG_UA1_FIFO2
+#define CFG_UA1_FIFO 2
+#elif defined CONFIG_UA1_FIFO4
+#define CFG_UA1_FIFO 4
+#elif defined CONFIG_UA1_FIFO8
+#define CFG_UA1_FIFO 8
+#elif defined CONFIG_UA1_FIFO16
+#define CFG_UA1_FIFO 16
+#elif defined CONFIG_UA1_FIFO32
+#define CFG_UA1_FIFO 32
+#else
+#define CFG_UA1_FIFO 1
+#endif
+
+#ifndef CONFIG_IRQ3_ENABLE
+#define CONFIG_IRQ3_ENABLE 0
+#endif
+#ifndef CONFIG_IRQ3_NSEC
+#define CONFIG_IRQ3_NSEC 0
+#endif
+#ifndef CONFIG_GPT_ENABLE
+#define CONFIG_GPT_ENABLE 0
+#endif
+
+#ifndef CONFIG_GPT_NTIM
+#define CONFIG_GPT_NTIM 1
+#endif
+
+#ifndef CONFIG_GPT_SW
+#define CONFIG_GPT_SW 8
+#endif
+
+#ifndef CONFIG_GPT_TW
+#define CONFIG_GPT_TW 8
+#endif
+
+#ifndef CONFIG_GPT_IRQ
+#define CONFIG_GPT_IRQ 8
+#endif
+
+#ifndef CONFIG_GPT_SEPIRQ
+#define CONFIG_GPT_SEPIRQ 0
+#endif
+#ifndef CONFIG_GPT_ENABLE
+#define CONFIG_GPT_ENABLE 0
+#endif
+
+#ifndef CONFIG_GPT_NTIM
+#define CONFIG_GPT_NTIM 1
+#endif
+
+#ifndef CONFIG_GPT_SW
+#define CONFIG_GPT_SW 8
+#endif
+
+#ifndef CONFIG_GPT_TW
+#define CONFIG_GPT_TW 8
+#endif
+
+#ifndef CONFIG_GPT_IRQ
+#define CONFIG_GPT_IRQ 8
+#endif
+
+#ifndef CONFIG_GPT_SEPIRQ
+#define CONFIG_GPT_SEPIRQ 0
+#endif
+
+#ifndef CONFIG_GPT_WDOGEN
+#define CONFIG_GPT_WDOGEN 0
+#endif
+
+#ifndef CONFIG_GPT_WDOG
+#define CONFIG_GPT_WDOG 0
+#endif
+
+#ifndef CONFIG_GRGPIO_ENABLE
+#define CONFIG_GRGPIO_ENABLE 0
+#endif
+#ifndef CONFIG_GRGPIO_IMASK
+#define CONFIG_GRGPIO_IMASK 0000
+#endif
+#ifndef CONFIG_GRGPIO_WIDTH
+#define CONFIG_GRGPIO_WIDTH 1
+#endif
+
+#ifndef CONFIG_I2C_ENABLE
+#define CONFIG_I2C_ENABLE 0
+#endif
+#ifndef CONFIG_VGA_ENABLE
+#define CONFIG_VGA_ENABLE 0
+#endif
+#ifndef CONFIG_SVGA_ENABLE
+#define CONFIG_SVGA_ENABLE 0
+#endif
+#ifndef CONFIG_KBD_ENABLE
+#define CONFIG_KBD_ENABLE 0
+#endif
+
+#ifndef CONFIG_GRACECTRL
+#define CONFIG_GRACECTRL 0
+#endif
+
+#if defined CONFIG_PCIEXP_SIMPLE_TARGET
+#define CFG_PCIE 1
+#define CFG_PCIETYPE 1
+#define CFG_PCIEMASTER 0
+#elif defined CONFIG_PCIEXP_MASTER_TARGET
+#define CFG_PCIE 1
+#define CFG_PCIETYPE 1
+#define CFG_PCIEMASTER 1
+#elif defined CONFIG_PCIEXP_MASTER_FIFO_DMA
+#define CFG_PCIE 1
+#define CFG_PCIETYPE 3
+#define CFG_PCIEMASTER 0
+#elif defined CONFIG_PCIEXP_MASTER_FIFO
+#define CFG_PCIE 0
+#define CFG_PCIETYPE 2
+#define CFG_PCIEMASTER 0
+#else
+#define CFG_PCIE 0
+#define CFG_PCIETYPE 0
+#define CFG_PCIEMASTER 0
+#endif
+
+#ifndef CONFIG_PCIEXP_VENDORID
+#define CONFIG_PCIEXP_VENDORID 0
+#endif
+#ifndef CONFIG_PCIEXP_DEVICEID
+#define CONFIG_PCIEXP_DEVICEID 0
+#endif
+
+
+#if defined CONFIG_LANE_WIDTH1
+#define CFG_LANE_WIDTH 1
+#elif defined CONFIG_LANE_WIDTH2
+#define CFG_LANE_WIDTH 2
+#elif defined CONFIG_LANE_WIDTH4
+#define CFG_LANE_WIDTH 4
+#elif defined CONFIG_LANE_WIDTH8
+#define CFG_LANE_WIDTH 8
+#else
+#define CFG_LANE_WIDTH 1
+#endif
+
+
+#ifndef CONFIG_DEBUG_UART
+#define CONFIG_DEBUG_UART 0
+#endif
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/wave.do work/leon3-xilinx-ml605/wave.do
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/leon3-xilinx-ml605/wave.do	1970-01-01 01:00:00.000000000 +0100
+++ work/leon3-xilinx-ml605/wave.do	2019-12-29 15:59:50.142754050 +0100
@@ -0,0 +1,76 @@
+onerror {resume}
+quietly WaveActivateNextPane {} 0
+add wave -noupdate -format Logic /testbench/d3/reset
+add wave -noupdate -format Logic /testbench/d3/errorn
+add wave -noupdate -format Logic /testbench/d3/clk_ref_p
+add wave -noupdate -format Logic /testbench/d3/clk_ref_n
+add wave -noupdate -format Literal -radix hexadecimal /testbench/d3/address
+add wave -noupdate -format Literal -radix hexadecimal /testbench/d3/data
+add wave -noupdate -format Logic /testbench/d3/romsn
+add wave -noupdate -format Logic /testbench/d3/oen
+add wave -noupdate -format Logic /testbench/d3/writen
+add wave -noupdate -format Literal -radix hexadecimal /testbench/d3/ddr3_dq
+add wave -noupdate -format Literal /testbench/d3/ddr3_dm
+add wave -noupdate -format Literal -radix hexadecimal /testbench/d3/ddr3_addr
+add wave -noupdate -format Literal -radix hexadecimal /testbench/d3/ddr3_ba
+add wave -noupdate -format Logic /testbench/d3/ddr3_ras_n
+add wave -noupdate -format Logic /testbench/d3/ddr3_cas_n
+add wave -noupdate -format Logic /testbench/d3/ddr3_we_n
+add wave -noupdate -format Logic /testbench/d3/ddr3_reset_n
+add wave -noupdate -format Literal /testbench/d3/ddr3_cs_n
+add wave -noupdate -format Literal /testbench/d3/ddr3_odt
+add wave -noupdate -format Literal /testbench/d3/ddr3_cke
+add wave -noupdate -format Literal /testbench/d3/ddr3_dqs_p
+add wave -noupdate -format Literal /testbench/d3/ddr3_dqs_n
+add wave -noupdate -format Literal /testbench/d3/ddr3_ck_p
+add wave -noupdate -format Literal /testbench/d3/ddr3_ck_n
+add wave -noupdate -format Logic /testbench/d3/dsubre
+add wave -noupdate -format Logic /testbench/d3/dsurx
+add wave -noupdate -format Logic /testbench/d3/dsutx
+add wave -noupdate -format Logic /testbench/d3/etx_clk
+add wave -noupdate -format Logic /testbench/d3/erx_clk
+add wave -noupdate -format Literal -radix hexadecimal /testbench/d3/erxd
+add wave -noupdate -format Logic /testbench/d3/erx_dv
+add wave -noupdate -format Logic /testbench/d3/erx_er
+add wave -noupdate -format Logic /testbench/d3/erx_col
+add wave -noupdate -format Logic /testbench/d3/erx_crs
+add wave -noupdate -format Literal -radix hexadecimal /testbench/d3/etxd
+add wave -noupdate -format Logic /testbench/d3/etx_en
+add wave -noupdate -format Logic /testbench/d3/etx_er
+add wave -noupdate -format Logic /testbench/d3/emdc
+add wave -noupdate -format Logic /testbench/d3/emdio
+add wave -noupdate -format Literal /testbench/d3/led
+add wave -noupdate -format Literal -radix hexadecimal /testbench/d3/apbi
+add wave -noupdate -format Literal -radix hexadecimal /testbench/d3/apbo
+add wave -noupdate -format Literal -radix hexadecimal /testbench/d3/ahbsi
+add wave -noupdate -format Literal -radix hexadecimal /testbench/d3/ahbso
+add wave -noupdate -format Literal -radix hexadecimal /testbench/d3/ahbmi
+add wave -noupdate -format Literal -radix hexadecimal /testbench/d3/ahbmo
+add wave -noupdate -format Logic /testbench/d3/clkm
+add wave -noupdate -format Logic /testbench/d3/rstn
+add wave -noupdate -format Logic /testbench/d3/ahb2mig0/clk_ddr
+add wave -noupdate -format Logic /testbench/d3/ahb2mig0/clk_ahb
+add wave -noupdate -format Literal -radix hexadecimal /testbench/d3/ahb2mig0/migi
+add wave -noupdate -format Literal -radix hexadecimal /testbench/d3/ahb2mig0/migo
+add wave -noupdate -format Literal -radix hexadecimal /testbench/d3/ahb2mig0/r
+add wave -noupdate -format Literal -radix hexadecimal /testbench/d3/ahb2mig0/ra
+add wave -noupdate -format Logic /testbench/d3/gmiiclk_p
+add wave -noupdate -format Logic /testbench/d3/gmiiclk_n
+add wave -noupdate -format Logic /testbench/d3/egtx_clk
+TreeUpdate [SetDefaultTree]
+WaveRestoreCursors {{Cursor 3} {54330000 ps} 0} {{Cursor 4} {54335000 ps} 0}
+configure wave -namecolwidth 228
+configure wave -valuecolwidth 169
+configure wave -justifyvalue left
+configure wave -signalnamewidth 0
+configure wave -snapdistance 10
+configure wave -datasetprefix 0
+configure wave -rowmargin 4
+configure wave -childrowmargin 2
+configure wave -gridoffset 0
+configure wave -gridperiod 1
+configure wave -griddelta 40
+configure wave -timeline 0
+configure wave -timelineunits ns
+update
+WaveRestoreZoom {54325843 ps} {54327644 ps}
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/Makefile work/Makefile
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/Makefile	2014-04-16 16:50:08.000000000 +0200
+++ work/Makefile	2019-12-29 15:59:50.142754050 +0100
@@ -1,5 +1,5 @@
 include .config
-GRLIB=../..
+GRLIB=../../../grlib/grlib-gpl-1.3.7-b4144
 TOP=leon3mp
 DESIGN=leon3-xilinx-ml605
 BOARD=xilinx-ml605-xc6vlx240t
@@ -14,151 +14,92 @@ EFFORT=high
 XSTOPT=-uc leon3mp.xcf
 SYNPOPT="set_option -pipe 1; set_option -retiming 0; set_option -enable_prepacking 1;\
 set_option -write_apr_constraint 0;set_option -resource_sharing 1; set_option -symbolic_fsm_compiler 1"
+
 VHDLOPTSYNFILES= \
-	mig_37/user_design/rtl/controller/arb_mux.vhd \
-	mig_37/user_design/rtl/controller/arb_row_col.vhd \
-	mig_37/user_design/rtl/controller/arb_select.vhd \
-	mig_37/user_design/rtl/controller/bank_cntrl.vhd \
-	mig_37/user_design/rtl/controller/bank_common.vhd \
-	mig_37/user_design/rtl/controller/bank_compare.vhd \
-	mig_37/user_design/rtl/controller/bank_mach.vhd \
-	mig_37/user_design/rtl/controller/bank_queue.vhd \
-	mig_37/user_design/rtl/controller/bank_state.vhd \
-	mig_37/user_design/rtl/controller/col_mach.vhd \
-	mig_37/user_design/rtl/controller/mc.vhd \
-	mig_37/user_design/rtl/controller/rank_cntrl.vhd \
-	mig_37/user_design/rtl/controller/rank_common.vhd \
-	mig_37/user_design/rtl/controller/rank_mach.vhd \
-	mig_37/user_design/rtl/controller/round_robin_arb.vhd \
-	mig_37/user_design/rtl/ecc/ecc_buf.vhd \
-	mig_37/user_design/rtl/ecc/ecc_dec_fix.vhd \
-	mig_37/user_design/rtl/ecc/ecc_gen.vhd \
-	mig_37/user_design/rtl/ecc/ecc_merge_enc.vhd \
-	mig_37/user_design/rtl/ip_top/clk_ibuf.vhd \
-	mig_37/user_design/rtl/ip_top/ddr2_ddr3_chipscope.vhd \
-	mig_37/user_design/rtl/ip_top/infrastructure.vhd \
-	mig_37/user_design/rtl/ip_top/iodelay_ctrl.vhd \
-	mig_37/user_design/rtl/ip_top/mem_intfc.vhd \
-	mig_37/user_design/rtl/ip_top/memc_ui_top.vhd \
-	mig_37/user_design/rtl/ip_top/mig_37.vhd \
-	mig_37/user_design/rtl/phy/circ_buffer.vhd \
-	mig_37/user_design/rtl/phy/phy_ck_iob.vhd \
-	mig_37/user_design/rtl/phy/phy_clock_io.vhd \
-	mig_37/user_design/rtl/phy/phy_control_io.vhd \
-	mig_37/user_design/rtl/phy/phy_data_io.vhd \
-	mig_37/user_design/rtl/phy/phy_dly_ctrl.vhd \
-	mig_37/user_design/rtl/phy/phy_dm_iob.vhd \
-	mig_37/user_design/rtl/phy/phy_dq_iob.vhd \
-	mig_37/user_design/rtl/phy/phy_dqs_iob.vhd \
-	mig_37/user_design/rtl/phy/phy_init.vhd \
-	mig_37/user_design/rtl/phy/phy_pd.vhd \
-	mig_37/user_design/rtl/phy/phy_pd_top.vhd \
-	mig_37/user_design/rtl/phy/phy_rdclk_gen.vhd \
-	mig_37/user_design/rtl/phy/phy_rdctrl_sync.vhd \
-	mig_37/user_design/rtl/phy/phy_rddata_sync.vhd \
-	mig_37/user_design/rtl/phy/phy_rdlvl.vhd \
-	mig_37/user_design/rtl/phy/phy_read.vhd \
-	mig_37/user_design/rtl/phy/phy_top.vhd \
-	mig_37/user_design/rtl/phy/phy_write.vhd \
-	mig_37/user_design/rtl/phy/phy_wrlvl.vhd \
-	mig_37/user_design/rtl/phy/rd_bitslip.vhd \
-	mig_37/user_design/rtl/ui/ui_cmd.vhd \
-	mig_37/user_design/rtl/ui/ui_rd_data.vhd \
-	mig_37/user_design/rtl/ui/ui_top.vhd \
-	mig_37/user_design/rtl/ui/ui_wr_data.vhd \
-	pcie/v6_pcie_v1_7/source/*.vhd \
-	$(GRLIB)/lib/gaisler/pcie/pcie.vhd
-
-ifeq ("$(CONFIG_PCIEXP_MASTER_TARGET)","y")
-  ifeq ("$(CONFIG_LANE_WIDTH1)","y")
-  UCF+=pcie_ucf/pcie_master_target_lane1.ucf
-  UCF_PLANAHEAD+=pcie_ucf/pcie_master_target_lane1.ucf
-  endif
-  ifeq ("$(CONFIG_LANE_WIDTH2)","y")
-  UCF+=pcie_ucf/pcie_master_target_lane2.ucf
-  UCF_PLANAHEAD+=pcie_ucf/pcie_master_target_lane2.ucf
-  endif
-  ifeq ("$(CONFIG_LANE_WIDTH4)","y")
-  UCF+=pcie_ucf/pcie_master_target_lane4.ucf
-  UCF_PLANAHEAD+=pcie_ucf/pcie_master_target_lane4.ucf
-  endif
-  ifeq ("$(CONFIG_LANE_WIDTH8)","y")
-  UCF+=pcie_ucf/pcie_master_target_lane8.ucf
-  UCF_PLANAHEAD+=pcie_ucf/pcie_master_target_lane8.ucf
-  endif
-VHDLOPTSYNFILES+=$(GRLIB)/lib/gaisler/pcie/pcie_master_target_virtex.vhd
-endif
-ifeq ("$(CONFIG_PCIEXP_MASTER_FIFO)","y")
-  ifeq ("$(CONFIG_PCIEXP_MASTER_FIFO_DMA)","y")
-    ifeq ("$(CONFIG_LANE_WIDTH1)","y")
-    UCF+=pcie_ucf/pcie_master_fifo_dma_lane1.ucf
-    UCF_PLANAHEAD+=pcie_ucf/pcie_master_fifo_dma_lane1.ucf
-    endif
-    ifeq ("$(CONFIG_LANE_WIDTH2)","y")
-    UCF+=pcie_ucf/pcie_master_fifo_dma_lane2.ucf
-    UCF_PLANAHEAD+=pcie_ucf/pcie_master_fifo_dma_lane2.ucf
-    endif
-    ifeq ("$(CONFIG_LANE_WIDTH4)","y")
-    UCF+=pcie_ucf/pcie_master_fifo_dma_lane4.ucf
-    UCF_PLANAHEAD+=pcie_ucf/pcie_master_fifo_dma_lane4.ucf
-    endif
-VHDLOPTSYNFILES+=$(GRLIB)/lib/gaisler/pcie/pcie_master_fifo_virtex.vhd
-VHDLOPTSYNFILES+=$(GRLIB)/lib/gaisler/pcie/pciedma.vhd
-  endif
-  ifneq ("$(CONFIG_PCIEXP_MASTER_FIFO_DMA)","y")
-    ifeq ("$(CONFIG_LANE_WIDTH1)","y")
-    UCF+=pcie_ucf/pcie_master_fifo_lane1.ucf
-    UCF_PLANAHEAD+=pcie_ucf/pcie_master_fifo_lane1.ucf
-    endif
-    ifeq ("$(CONFIG_LANE_WIDTH2)","y")
-    UCF+=pcie_ucf/pcie_master_fifo_lane2.ucf
-    UCF_PLANAHEAD+=pcie_ucf/pcie_master_fifo_lane2.ucf
-    endif
-    ifeq ("$(CONFIG_LANE_WIDTH4)","y")
-    UCF+=pcie_ucf/pcie_master_fifo_lane4.ucf
-    UCF_PLANAHEAD+=pcie_ucf/pcie_master_fifo_lane4.ucf
-    endif
-VHDLOPTSYNFILES+=$(GRLIB)/lib/gaisler/pcie/pcie_master_fifo_virtex.vhd
-  endif
-endif
+  mig_37/user_design/rtl/controller/arb_mux.vhd \
+  mig_37/user_design/rtl/controller/arb_row_col.vhd \
+  mig_37/user_design/rtl/controller/arb_select.vhd \
+  mig_37/user_design/rtl/controller/bank_cntrl.vhd \
+  mig_37/user_design/rtl/controller/bank_common.vhd \
+  mig_37/user_design/rtl/controller/bank_compare.vhd \
+  mig_37/user_design/rtl/controller/bank_mach.vhd \
+  mig_37/user_design/rtl/controller/bank_queue.vhd \
+  mig_37/user_design/rtl/controller/bank_state.vhd \
+  mig_37/user_design/rtl/controller/col_mach.vhd \
+  mig_37/user_design/rtl/controller/mc.vhd \
+  mig_37/user_design/rtl/controller/rank_cntrl.vhd \
+  mig_37/user_design/rtl/controller/rank_common.vhd \
+  mig_37/user_design/rtl/controller/rank_mach.vhd \
+  mig_37/user_design/rtl/controller/round_robin_arb.vhd \
+  mig_37/user_design/rtl/ecc/ecc_buf.vhd \
+  mig_37/user_design/rtl/ecc/ecc_dec_fix.vhd \
+  mig_37/user_design/rtl/ecc/ecc_gen.vhd \
+  mig_37/user_design/rtl/ecc/ecc_merge_enc.vhd \
+  mig_37/user_design/rtl/ip_top/clk_ibuf.vhd \
+  mig_37/user_design/rtl/ip_top/ddr2_ddr3_chipscope.vhd \
+  mig_37/user_design/rtl/ip_top/infrastructure.vhd \
+  mig_37/user_design/rtl/ip_top/iodelay_ctrl.vhd \
+  mig_37/user_design/rtl/ip_top/mem_intfc.vhd \
+  mig_37/user_design/rtl/ip_top/memc_ui_top.vhd \
+  mig_37/user_design/rtl/ip_top/mig_37.vhd \
+  mig_37/user_design/rtl/phy/circ_buffer.vhd \
+  mig_37/user_design/rtl/phy/phy_ck_iob.vhd \
+  mig_37/user_design/rtl/phy/phy_clock_io.vhd \
+  mig_37/user_design/rtl/phy/phy_control_io.vhd \
+  mig_37/user_design/rtl/phy/phy_data_io.vhd \
+  mig_37/user_design/rtl/phy/phy_dly_ctrl.vhd \
+  mig_37/user_design/rtl/phy/phy_dm_iob.vhd \
+  mig_37/user_design/rtl/phy/phy_dq_iob.vhd \
+  mig_37/user_design/rtl/phy/phy_dqs_iob.vhd \
+  mig_37/user_design/rtl/phy/phy_init.vhd \
+  mig_37/user_design/rtl/phy/phy_pd.vhd \
+  mig_37/user_design/rtl/phy/phy_pd_top.vhd \
+  mig_37/user_design/rtl/phy/phy_rdclk_gen.vhd \
+  mig_37/user_design/rtl/phy/phy_rdctrl_sync.vhd \
+  mig_37/user_design/rtl/phy/phy_rddata_sync.vhd \
+  mig_37/user_design/rtl/phy/phy_rdlvl.vhd \
+  mig_37/user_design/rtl/phy/phy_read.vhd \
+  mig_37/user_design/rtl/phy/phy_top.vhd \
+  mig_37/user_design/rtl/phy/phy_write.vhd \
+  mig_37/user_design/rtl/phy/phy_wrlvl.vhd \
+  mig_37/user_design/rtl/phy/rd_bitslip.vhd \
+  mig_37/user_design/rtl/ui/ui_cmd.vhd \
+  mig_37/user_design/rtl/ui/ui_rd_data.vhd \
+  mig_37/user_design/rtl/ui/ui_top.vhd \
+  mig_37/user_design/rtl/ui/ui_wr_data.vhd
 
 VERILOGOPTSYNFILES= \
-	mig/user_design/rtl/controller/*.v \
-	mig/user_design/rtl/ecc/*.v \
-	mig/user_design/rtl/ip_top/*.v \
-	mig/user_design/rtl/phy/*.v \
-	mig/user_design/rtl/phy/*.v \
-	mig/user_design/rtl/ui/*.v \
-	$$XILINX/verilog/src/glbl.v
+  mig/user_design/rtl/controller/*.v \
+  mig/user_design/rtl/ecc/*.v \
+  mig/user_design/rtl/ip_top/*.v \
+  mig/user_design/rtl/phy/*.v \
+  mig/user_design/rtl/ui/*.v \
+  $$XILINX/verilog/src/glbl.v
+
 VHDLSYNFILES= \
 	ahb2mig_ml605.vhd config.vhd ahbrom.vhd \
-	svga2ch7301c.vhd gtxclk.vhd leon3mp.vhd
+	svga2ch7301c.vhd gtxclk.vhd \
+	ptag.vhd gracectrl.vhd leon3mp.vhd 
 
-VHDLSIMFILES=testbench.vhd
+VERILOGSYNFILES = \
 
-ifeq ("$(CONFIG_PCIEXP_MASTER_TARGET)","y")
-VHDLSIMFILES+=$(GRLIB)/lib/tech/unisim/ise/GTPA1_DUAL.vhd $(GRLIB)/lib/tech/unisim/ise/GTP_DUAL.vhd \
-$(GRLIB)/lib/tech/unisim/ise/GTXE1.vhd $(GRLIB)/lib/tech/unisim/ise/GTX_DUAL.vhd \
-$(GRLIB)/lib/tech/unisim/ise/PCIE_2_0.vhd $(GRLIB)/lib/tech/unisim/ise/PCIE_A1.vhd
-else 
-ifeq ("$(CONFIG_PCIEXP_MASTER_FIFO)","y")
-VHDLSIMFILES+=$(GRLIB)/lib/tech/unisim/ise/GTPA1_DUAL.vhd $(GRLIB)/lib/tech/unisim/ise/GTP_DUAL.vhd \
-$(GRLIB)/lib/tech/unisim/ise/GTXE1.vhd $(GRLIB)/lib/tech/unisim/ise/GTX_DUAL.vhd \
-$(GRLIB)/lib/tech/unisim/ise/PCIE_2_0.vhd $(GRLIB)/lib/tech/unisim/ise/PCIE_A1.vhd
-endif
-endif
+
+VERILOGSIMFILES =
+VHDLSIMFILES= \
+	testbench.vhd
 
 SIMTOP=testbench
 SDCFILE=default.sdc
 BITGEN=$(GRLIB)/boards/$(BOARD)/default.ut
-CLEAN=soft-clean migclean pcieclean
+CLEAN=soft-clean migclean
 TECHLIBS = secureip unisim
-VLOGOPT= -O0
-VCOMOPT= -explicit -O0 
+EXTRALIBS=rvex-lib
+VLOGOPT= -O0 +incdir+../design/tb/include
+VCOMOPT= -explicit -O0
 ifeq ("$(GRLIB_SIMULATOR)","ALDEC")
 VSIMOPT= +access +w -t ps -novopt +notimingchecks -L secureip_ver -L xilinxcorelib_ver -L unisims_ver glbl $(SIMTOP)
 else
-VSIMOPT= -t ps -novopt +notimingchecks -L secureip_ver -L xilinxcorelib_ver -L unisims_ver glbl $(SIMTOP)
+VSIMOPT= -t ps -do ../phy.do -novopt +notimingchecks -L secureip_ver -L xilinxcorelib_ver -L unisims_ver glbl $(SIMTOP)
 endif
 
 LIBSKIP = core1553bbc core1553brm core1553brt gr1553 corePCIF \
@@ -166,8 +107,8 @@ LIBSKIP = core1553bbc core1553brm core15
 	spansion
 DIRSKIP = b1553 pci/pcif leon2 leon2ft crypto satcan ambatest can \
 	usb grusbhc spacewire ascs slink spi hcan \
-	leon4 leon4v0 l2cache pwm gr1553b iommu ac97
-FILESKIP = grcan.vhd ddr2.v mobile_ddr.v
+	leon3v3 leon4 leon4v0 l2cache pwm gr1553b iommu ac97
+FILESKIP = grcan.vhd ddr2.v mobile_ddr.v leaves.vhd gracectrl.vhd
 GRLIB_CONFIG = grlib_config.vhd
 
 include $(GRLIB)/bin/Makefile
@@ -175,6 +116,9 @@ include $(GRLIB)/software/leon3/Makefile
 
 ##################  project specific targets ##########################
 
+# Stop deleting logs!
+.SECONDARY:
+
 mig_37 mig:
 	cp grlib_mig/mig.* .
 	coregen -b mig.xco -p mig.cgp
@@ -192,11 +136,3 @@ mig39:
 migclean:
 	-rm -rf tmp coregen* mig*
 
-pcie:
-	coregen -b pcie/pcie.xco -p pcie
-	patch -p0 < pcie.diff
-
-pcieclean:
-	-rm -rf pcie/v6_pcie_v1_7* pcie/tmp pcie/coregen.cgc tx.dat rx.dat
-
-.PHONY : pcie pcieclean
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/pcie/coregen.cgp work/pcie/coregen.cgp
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/pcie/coregen.cgp	2014-04-16 16:50:08.000000000 +0200
+++ work/pcie/coregen.cgp	1970-01-01 01:00:00.000000000 +0100
@@ -1,22 +0,0 @@
-# Date: Wed Aug  8 14:52:14 2012
-
-SET addpads = false
-SET asysymbol = true
-SET busformat = BusFormatAngleBracketNotRipped
-SET createndf = false
-SET designentry = VHDL
-SET device = xc6vlx240t
-SET devicefamily = virtex6
-SET flowvendor = Other
-SET formalverification = false
-SET foundationsym = false
-SET implementationfiletype = Ngc
-SET package = ff1156
-SET removerpms = false
-SET simulationfiles = Behavioral
-SET speedgrade = -1
-SET verilogsim = false
-SET vhdlsim = true
-SET workingdirectory = ./tmp/
-
-# CRC: efb42278
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/pcie/pcie.xco work/pcie/pcie.xco
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/pcie/pcie.xco	2014-04-16 16:50:08.000000000 +0200
+++ work/pcie/pcie.xco	1970-01-01 01:00:00.000000000 +0100
@@ -1,205 +0,0 @@
-##############################################################
-#
-# Xilinx Core Generator version 13.2
-# Date: Wed Aug  8 14:55:22 2012
-#
-##############################################################
-#
-#  This file contains the customisation parameters for a
-#  Xilinx CORE Generator IP GUI. It is strongly recommended
-#  that you do not manually alter this file as it may cause
-#  unexpected and unsupported behavior.
-#
-##############################################################
-#
-#  Generated from component: xilinx.com:ip:v6_pcie:1.7
-#
-##############################################################
-#
-# BEGIN Project Options
-SET addpads = false
-SET asysymbol = true
-SET busformat = BusFormatAngleBracketNotRipped
-SET createndf = false
-SET designentry = VHDL
-SET device = xc6vlx240t
-SET devicefamily = virtex6
-SET flowvendor = Other
-SET formalverification = false
-SET foundationsym = false
-SET implementationfiletype = Ngc
-SET package = ff1156
-SET removerpms = false
-SET simulationfiles = Behavioral
-SET speedgrade = -1
-SET verilogsim = false
-SET vhdlsim = true
-# END Project Options
-# BEGIN Select
-SELECT Virtex-6_Integrated_Block_for_PCI_Express family Xilinx,_Inc. 1.7
-# END Select
-# BEGIN Parameters
-CSET acceptable_l0s_latency=Maximum_of_64_ns
-CSET acceptable_l1_latency=No_limit
-CSET ack_nak_timeout_func=Absolute
-CSET ack_nak_timeout_value=0000
-CSET bar0_64bit=false
-CSET bar0_enabled=true
-CSET bar0_prefetchable=false
-CSET bar0_scale=Megabytes
-CSET bar0_size=2
-CSET bar0_type=Memory
-CSET bar1_64bit=false
-CSET bar1_enabled=false
-CSET bar1_prefetchable=false
-CSET bar1_scale=Kilobytes
-CSET bar1_size=2
-CSET bar1_type=N/A
-CSET bar2_64bit=false
-CSET bar2_enabled=false
-CSET bar2_prefetchable=false
-CSET bar2_scale=Bytes
-CSET bar2_size=128
-CSET bar2_type=N/A
-CSET bar3_64bit=false
-CSET bar3_enabled=false
-CSET bar3_prefetchable=false
-CSET bar3_scale=Kilobytes
-CSET bar3_size=2
-CSET bar3_type=N/A
-CSET bar4_64bit=false
-CSET bar4_enabled=false
-CSET bar4_prefetchable=false
-CSET bar4_scale=Kilobytes
-CSET bar4_size=2
-CSET bar4_type=N/A
-CSET bar5_enabled=false
-CSET bar5_prefetchable=false
-CSET bar5_scale=Kilobytes
-CSET bar5_size=2
-CSET bar5_type=N/A
-CSET base_class_menu=Simple_communication_controllers
-CSET buf_opt_bma=false
-CSET cardbus_cis_pointer=00000000
-CSET class_code_base=05
-CSET class_code_interface=00
-CSET class_code_sub=00
-CSET component_name=v6_pcie_v1_7
-CSET cost_table=1
-CSET cpl_finite=false
-CSET cpl_timeout_disable_sup=false
-CSET cpl_timeout_range=Range_B
-CSET d0_pme_support=true
-CSET d0_power_consumed=0
-CSET d0_power_consumed_factor=0
-CSET d0_power_dissipated=0
-CSET d0_power_dissipated_factor=0
-CSET d1_pme_support=true
-CSET d1_power_consumed=0
-CSET d1_power_consumed_factor=0
-CSET d1_power_dissipated=0
-CSET d1_power_dissipated_factor=0
-CSET d1_support=false
-CSET d2_pme_support=true
-CSET d2_power_consumed=0
-CSET d2_power_consumed_factor=0
-CSET d2_power_dissipated=0
-CSET d2_power_dissipated_factor=0
-CSET d2_support=false
-CSET d3_power_consumed=0
-CSET d3_power_consumed_factor=0
-CSET d3_power_dissipated=0
-CSET d3_power_dissipated_factor=0
-CSET d3cold_pme_support=false
-CSET d3hot_pme_support=true
-CSET de_emph=0
-CSET device_id=0007
-CSET device_port_type=PCI_Express_Endpoint_device
-CSET device_specific_initialization=false
-CSET disable_tx_aspm_l0s=false
-CSET dll_link_active_cap=false
-CSET downstream_link_num=00
-CSET dsn_enabled=true
-CSET en_route_err_cor=false
-CSET en_route_err_ftl=false
-CSET en_route_err_nfl=false
-CSET en_route_inta=false
-CSET en_route_intb=false
-CSET en_route_intc=false
-CSET en_route_intd=false
-CSET en_route_pm_pme=false
-CSET en_route_pme_to=false
-CSET en_route_pme_to_ack=false
-CSET en_route_unlock=false
-CSET enable_ack_nak_timer=false
-CSET enable_lane_reversal=false
-CSET enable_replay_timer=true
-CSET enable_slot_clock_cfg=true
-CSET expansion_rom_enabled=false
-CSET expansion_rom_scale=Kilobytes
-CSET expansion_rom_size=2
-CSET ext_pci_cfg_space=false
-CSET ext_pci_cfg_space_addr=3FF
-CSET extended_tag_field=false
-CSET force_no_scrambling=false
-CSET hw_auton_spd_disable=false
-CSET intx_generation=true
-CSET io_base_limit_registers=Disabled
-CSET legacy_interrupt=INTA
-CSET link_speed=2.5_GT/s
-CSET max_payload_size=128_bytes
-CSET maximum_link_width=X8
-CSET msi_64b=true
-CSET msi_enabled=true
-CSET msi_vec_mask=false
-CSET msix_enabled=false
-CSET msix_pba_bir=BAR_0
-CSET msix_pba_offset=0
-CSET msix_table_bir=BAR_0
-CSET msix_table_offset=0
-CSET msix_table_size=1
-CSET multiple_message_capable=1_vector
-CSET no_soft_reset=true
-CSET pci_cfg_space=false
-CSET pci_cfg_space_addr=3F
-CSET pcie_blk_locn=X0Y0
-CSET pcie_cap_slot_implemented=false
-CSET pcie_debug_ports=false
-CSET perf_level=Good
-CSET phantom_functions=No_function_number_bits_used
-CSET pipe_pipeline=None
-CSET prefetchable_memory_base_limit_registers=Disabled
-CSET rcb=64_byte
-CSET ref_clk_freq=100_MHz
-CSET replay_timeout_func=Add
-CSET replay_timeout_value=0026
-CSET revision_id=00
-CSET root_cap_crs=false
-CSET slot_cap_attn_butn=false
-CSET slot_cap_attn_ind=false
-CSET slot_cap_elec_interlock=false
-CSET slot_cap_hotplug_cap=false
-CSET slot_cap_hotplug_surprise=false
-CSET slot_cap_mrl=false
-CSET slot_cap_no_cmd_comp_sup=false
-CSET slot_cap_physical_slot_num=0
-CSET slot_cap_pwr_ctrl=false
-CSET slot_cap_pwr_ind=false
-CSET slot_cap_pwr_limit_scale=0
-CSET slot_cap_pwr_limit_value=0
-CSET sub_class_interface_menu=Generic_XT_compatible_serial_controller
-CSET subsystem_id=0007
-CSET subsystem_vendor_id=10EE
-CSET trans_buf_pipeline=None
-CSET trgt_link_speed=4'h1
-CSET trim_tlp_digest=false
-CSET upconfigure_capable=true
-CSET user_clk_freq=250_default
-CSET vc_cap_enabled=false
-CSET vc_cap_reject_snoop=false
-CSET vendor_id=10EE
-CSET vsec_enabled=false
-CSET xlnx_ref_board=ML_605
-# END Parameters
-GENERATE
-# CRC: 1ab9c854
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/pcie.diff work/pcie.diff
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/pcie.diff	2014-04-16 16:50:08.000000000 +0200
+++ work/pcie.diff	1970-01-01 01:00:00.000000000 +0100
@@ -1,19 +0,0 @@
-diff -Naur pcie.org/v6_pcie_v1_7/source/v6_pcie_v1_7.vhd pcie/v6_pcie_v1_7/source/v6_pcie_v1_7.vhd
---- pcie.org/v6_pcie_v1_7/source/v6_pcie_v1_7.vhd	2013-07-16 16:50:59.000000000 +0200
-+++ pcie/v6_pcie_v1_7/source/v6_pcie_v1_7.vhd	2012-08-10 12:23:30.000000000 +0200
-@@ -752,10 +752,10 @@
-       VSEC_CAP_ON                              : boolean;
-       VSEC_CAP_VERSION                         : bit_vector);
-     port (
--      PCIEXPRXN                           : in  std_logic_vector(7 downto 0);
--      PCIEXPRXP                           : in  std_logic_vector(7 downto 0);
--      PCIEXPTXN                           : out std_logic_vector(7 downto 0);
--      PCIEXPTXP                           : out std_logic_vector(7 downto 0);
-+      PCIEXPRXN                           : in  std_logic_vector(LINK_CAP_MAX_LINK_WIDTH_int-1 downto 0);
-+      PCIEXPRXP                           : in  std_logic_vector(LINK_CAP_MAX_LINK_WIDTH_int-1 downto 0);
-+      PCIEXPTXN                           : out std_logic_vector(LINK_CAP_MAX_LINK_WIDTH_int-1 downto 0);
-+      PCIEXPTXP                           : out std_logic_vector(LINK_CAP_MAX_LINK_WIDTH_int-1 downto 0);
-       SYSCLK                              : in  std_logic;
-       FUNDRSTN                            : in  std_logic;
-       TRNLNKUPN                           : out std_logic;
-
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/pcie_ucf/pcie_master_fifo_dma_lane1.ucf work/pcie_ucf/pcie_master_fifo_dma_lane1.ucf
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/pcie_ucf/pcie_master_fifo_dma_lane1.ucf	2014-04-16 16:50:08.000000000 +0200
+++ work/pcie_ucf/pcie_master_fifo_dma_lane1.ucf	1970-01-01 01:00:00.000000000 +0100
@@ -1,29 +0,0 @@
-NET "sys_reset_n" TIG;
-NET "sys_reset_n" LOC = AE13 | IOSTANDARD = LVCMOS25 | PULLUP | NODELAY ;
-
-#NET "sys_clk_p" LOC = P6;
-#NET "sys_clk_n" LOC = P5;
-INST "pcie_mf.dma/EP/pcie_clk_v6.refclk_ibuf" LOC = IBUFDS_GTXE1_X0Y6;
-
-# PCIe Lane 0
-INST "pcie_mf.dma/EP/pcie_v6.v6_pcie_v1_7_i/pcie_2_0_i/pcie_gt_i/gtx_v6_i/GTXD[0].GTX" LOC = GTXE1_X0Y15;
-
-INST "pcie_mf.dma/EP/pcie_v6.v6_pcie_v1_7_i/pcie_2_0_i/pcie_block_i" LOC = PCIE_X0Y1;
-
-INST "pcie_mf.dma/EP/pcie_v6.v6_pcie_v1_7_i/pcie_clocking_i/mmcm_adv_i" LOC = MMCM_ADV_X0Y7;
-
-# Timing Constraints
-
-NET "pcie_mf.dma/EP/sys_clk_c" TNM_NET = "SYSCLK" ;
-NET "pcie_mf.dma/EP/pcie_v6.v6_pcie_v1_7_i/pcie_clocking_i/clk_125" TNM_NET = "CLK_125" ;
-NET "pcie_mf.dma/EP/pcie_v6.v6_pcie_v1_7_i/TxOutClk_bufg" TNM_NET = "TXOUTCLKBUFG";
-NET "pcie_mf.dma/EP/pcie_v6.v6_pcie_v1_7_i/pcie_clocking_i/user_clk_prebuf" TNM_NET = "CLK_USER_CLK" ;
-
-TIMESPEC "TS_SYSCLK"  = PERIOD "SYSCLK" 100 MHz HIGH 50 % PRIORITY 100 ;
-TIMESPEC "TS_CLK_125"  = PERIOD "CLK_125" TS_SYSCLK*1.25 HIGH 50 % PRIORITY 1 ;
-TIMESPEC "TS_TXOUTCLKBUFG"  = PERIOD "TXOUTCLKBUFG" 100 MHz HIGH 50 % PRIORITY 100 ;
-TIMESPEC "TS_USER_CLK" = PERIOD "CLK_USER_CLK" TS_SYSCLK/1.6 HIGH 50 % PRIORITY 1;
-
-PIN "pcie_mf.dma/EP/pcie_v6.v6_pcie_v1_7_i/trn_reset_n_int_i.CLR" TIG ;
-PIN "pcie_mf.dma/EP/pcie_v6.v6_pcie_v1_7_i/trn_reset_n_i.CLR" TIG ;
-PIN "pcie_mf.dma/EP/pcie_v6.v6_pcie_v1_7_i/pcie_clocking_i/mmcm_adv_i.RST" TIG ;
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/pcie_ucf/pcie_master_fifo_dma_lane2.ucf work/pcie_ucf/pcie_master_fifo_dma_lane2.ucf
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/pcie_ucf/pcie_master_fifo_dma_lane2.ucf	2014-04-16 16:50:08.000000000 +0200
+++ work/pcie_ucf/pcie_master_fifo_dma_lane2.ucf	1970-01-01 01:00:00.000000000 +0100
@@ -1,31 +0,0 @@
-NET "sys_reset_n" TIG;
-NET "sys_reset_n" LOC = AE13 | IOSTANDARD = LVCMOS25 | PULLUP | NODELAY ;
-
-#NET "sys_clk_p" LOC = P6;
-#NET "sys_clk_n" LOC = P5;
-INST "pcie_mf.dma/EP/pcie_clk_v6.refclk_ibuf" LOC = IBUFDS_GTXE1_X0Y6;
-
-# PCIe Lane 0
-INST "pcie_mf.dma/EP/pcie_v6.v6_pcie_v1_7_i/pcie_2_0_i/pcie_gt_i/gtx_v6_i/GTXD[0].GTX" LOC = GTXE1_X0Y15;
-# PCIe Lane 1
-INST "pcie_mf.dma/EP/pcie_v6.v6_pcie_v1_7_i/pcie_2_0_i/pcie_gt_i/gtx_v6_i/GTXD[1].GTX" LOC = GTXE1_X0Y14;
-
-INST "pcie_mf.dma/EP/pcie_v6.v6_pcie_v1_7_i/pcie_2_0_i/pcie_block_i" LOC = PCIE_X0Y1;
-
-INST "pcie_mf.dma/EP/pcie_v6.v6_pcie_v1_7_i/pcie_clocking_i/mmcm_adv_i" LOC = MMCM_ADV_X0Y7;
-
-# Timing Constraints
-
-NET "pcie_mf.dma/EP/sys_clk_c" TNM_NET = "SYSCLK" ;
-NET "pcie_mf.dma/EP/pcie_v6.v6_pcie_v1_7_i/pcie_clocking_i/clk_125" TNM_NET = "CLK_125" ;
-NET "pcie_mf.dma/EP/pcie_v6.v6_pcie_v1_7_i/TxOutClk_bufg" TNM_NET = "TXOUTCLKBUFG";
-NET "pcie_mf.dma/EP/pcie_v6.v6_pcie_v1_7_i/pcie_clocking_i/user_clk_prebuf" TNM_NET = "CLK_USER_CLK" ;
-
-TIMESPEC "TS_SYSCLK"  = PERIOD "SYSCLK" 100 MHz HIGH 50 % PRIORITY 100 ;
-TIMESPEC "TS_CLK_125"  = PERIOD "CLK_125" TS_SYSCLK*1.25 HIGH 50 % PRIORITY 1 ;
-TIMESPEC "TS_TXOUTCLKBUFG"  = PERIOD "TXOUTCLKBUFG" 100 MHz HIGH 50 % PRIORITY 100 ;
-TIMESPEC "TS_USER_CLK" = PERIOD "CLK_USER_CLK" TS_SYSCLK/1.6 HIGH 50 % PRIORITY 1;
-
-PIN "pcie_mf.dma/EP/pcie_v6.v6_pcie_v1_7_i/trn_reset_n_int_i.CLR" TIG ;
-PIN "pcie_mf.dma/EP/pcie_v6.v6_pcie_v1_7_i/trn_reset_n_i.CLR" TIG ;
-PIN "pcie_mf.dma/EP/pcie_v6.v6_pcie_v1_7_i/pcie_clocking_i/mmcm_adv_i.RST" TIG ;
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/pcie_ucf/pcie_master_fifo_dma_lane4.ucf work/pcie_ucf/pcie_master_fifo_dma_lane4.ucf
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/pcie_ucf/pcie_master_fifo_dma_lane4.ucf	2014-04-16 16:50:08.000000000 +0200
+++ work/pcie_ucf/pcie_master_fifo_dma_lane4.ucf	1970-01-01 01:00:00.000000000 +0100
@@ -1,33 +0,0 @@
-NET "sys_reset_n" TIG;
-NET "sys_reset_n" LOC = AE13 | IOSTANDARD = LVCMOS25 | PULLUP | NODELAY ;
-
-#NET "sys_clk_p" LOC = P6;
-#NET "sys_clk_n" LOC = P5;
-INST "pcie_mf.dma/EP/pcie_clk_v6.refclk_ibuf" LOC = IBUFDS_GTXE1_X0Y6;
-
-# PCIe Lane 0
-INST "pcie_mf.dma/EP/pcie_v6.v6_pcie_v1_7_i/pcie_2_0_i/pcie_gt_i/gtx_v6_i/GTXD[0].GTX" LOC = GTXE1_X0Y15;
-# PCIe Lane 1
-INST "pcie_mf.dma/EP/pcie_v6.v6_pcie_v1_7_i/pcie_2_0_i/pcie_gt_i/gtx_v6_i/GTXD[1].GTX" LOC = GTXE1_X0Y14;
-# PCIe Lane 2
-INST "pcie_mf.dma/EP/pcie_v6.v6_pcie_v1_7_i/pcie_2_0_i/pcie_gt_i/gtx_v6_i/GTXD[2].GTX" LOC = GTXE1_X0Y13;
-# PCIe Lane 3
-INST "pcie_mf.dma/EP/pcie_v6.v6_pcie_v1_7_i/pcie_2_0_i/pcie_gt_i/gtx_v6_i/GTXD[3].GTX" LOC = GTXE1_X0Y12;
-
-INST "pcie_mf.dma/EP/pcie_v6.v6_pcie_v1_7_i/pcie_2_0_i/pcie_block_i" LOC = PCIE_X0Y1;
-
-INST "pcie_mf.dma/EP/pcie_v6.v6_pcie_v1_7_i/pcie_clocking_i/mmcm_adv_i" LOC = MMCM_ADV_X0Y7;
-
-# Timing Constraints
-
-NET "pcie_mf.dma/EP/sys_clk_c" TNM_NET = "SYSCLK" ;
-NET "pcie_mf.dma/EP/pcie_v6.v6_pcie_v1_7_i/pcie_clocking_i/clk_125" TNM_NET = "CLK_125" ;
-NET "pcie_mf.dma/EP/pcie_v6.v6_pcie_v1_7_i/TxOutClk_bufg" TNM_NET = "TXOUTCLKBUFG";
-
-TIMESPEC "TS_SYSCLK"  = PERIOD "SYSCLK" 100 MHz HIGH 50 % PRIORITY 100 ;
-TIMESPEC "TS_CLK_125"  = PERIOD "CLK_125" TS_SYSCLK*1.25 HIGH 50 % PRIORITY 1 ;
-TIMESPEC "TS_TXOUTCLKBUFG"  = PERIOD "TXOUTCLKBUFG" 100 MHz HIGH 50 % PRIORITY 100 ;
-
-PIN "pcie_mf.dma/EP/pcie_v6.v6_pcie_v1_7_i/trn_reset_n_int_i.CLR" TIG ;
-PIN "pcie_mf.dma/EP/pcie_v6.v6_pcie_v1_7_i/trn_reset_n_i.CLR" TIG ;
-PIN "pcie_mf.dma/EP/pcie_v6.v6_pcie_v1_7_i/pcie_clocking_i/mmcm_adv_i.RST" TIG ;
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/pcie_ucf/pcie_master_fifo_lane1.ucf work/pcie_ucf/pcie_master_fifo_lane1.ucf
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/pcie_ucf/pcie_master_fifo_lane1.ucf	2014-04-16 16:50:08.000000000 +0200
+++ work/pcie_ucf/pcie_master_fifo_lane1.ucf	1970-01-01 01:00:00.000000000 +0100
@@ -1,29 +0,0 @@
-NET "sys_reset_n" TIG;
-NET "sys_reset_n" LOC = AE13 | IOSTANDARD = LVCMOS25 | PULLUP | NODELAY ;
-
-#NET "sys_clk_p" LOC = P6;
-#NET "sys_clk_n" LOC = P5;
-INST "pcie_mf_no_dma.EP/pcie_clk_v6.refclk_ibuf" LOC = IBUFDS_GTXE1_X0Y6;
-
-# PCIe Lane 0
-INST "pcie_mf_no_dma.EP/pcie_v6.v6_pcie_v1_7_i/pcie_2_0_i/pcie_gt_i/gtx_v6_i/GTXD[0].GTX" LOC = GTXE1_X0Y15;
-
-INST "pcie_mf_no_dma.EP/pcie_v6.v6_pcie_v1_7_i/pcie_2_0_i/pcie_block_i" LOC = PCIE_X0Y1;
-
-INST "pcie_mf_no_dma.EP/pcie_v6.v6_pcie_v1_7_i/pcie_clocking_i/mmcm_adv_i" LOC = MMCM_ADV_X0Y7;
-
-# Timing Constraints
-
-NET "pcie_mf_no_dma.EP/sys_clk_c" TNM_NET = "SYSCLK" ;
-NET "pcie_mf_no_dma.EP/pcie_v6.v6_pcie_v1_7_i/pcie_clocking_i/clk_125" TNM_NET = "CLK_125" ;
-NET "pcie_mf_no_dma.EP/pcie_v6.v6_pcie_v1_7_i/TxOutClk_bufg" TNM_NET = "TXOUTCLKBUFG";
-NET "pcie_mf_no_dma.EP/pcie_v6.v6_pcie_v1_7_i/pcie_clocking_i/user_clk_prebuf" TNM_NET = "CLK_USER_CLK" ;
-
-TIMESPEC "TS_SYSCLK"  = PERIOD "SYSCLK" 100 MHz HIGH 50 % PRIORITY 100 ;
-TIMESPEC "TS_CLK_125"  = PERIOD "CLK_125" TS_SYSCLK*1.25 HIGH 50 % PRIORITY 1 ;
-TIMESPEC "TS_TXOUTCLKBUFG"  = PERIOD "TXOUTCLKBUFG" 100 MHz HIGH 50 % PRIORITY 100 ;
-TIMESPEC "TS_USER_CLK" = PERIOD "CLK_USER_CLK" TS_SYSCLK/1.6 HIGH 50 % PRIORITY 1;
-
-PIN "pcie_mf_no_dma.EP/pcie_v6.v6_pcie_v1_7_i/trn_reset_n_int_i.CLR" TIG ;
-PIN "pcie_mf_no_dma.EP/pcie_v6.v6_pcie_v1_7_i/trn_reset_n_i.CLR" TIG ;
-PIN "pcie_mf_no_dma.EP/pcie_v6.v6_pcie_v1_7_i/pcie_clocking_i/mmcm_adv_i.RST" TIG ;
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/pcie_ucf/pcie_master_fifo_lane2.ucf work/pcie_ucf/pcie_master_fifo_lane2.ucf
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/pcie_ucf/pcie_master_fifo_lane2.ucf	2014-04-16 16:50:08.000000000 +0200
+++ work/pcie_ucf/pcie_master_fifo_lane2.ucf	1970-01-01 01:00:00.000000000 +0100
@@ -1,31 +0,0 @@
-NET "sys_reset_n" TIG;
-NET "sys_reset_n" LOC = AE13 | IOSTANDARD = LVCMOS25 | PULLUP | NODELAY ;
-
-#NET "sys_clk_p" LOC = P6;
-#NET "sys_clk_n" LOC = P5;
-INST "pcie_mf_no_dma.EP/pcie_clk_v6.refclk_ibuf" LOC = IBUFDS_GTXE1_X0Y6;
-
-# PCIe Lane 0
-INST "pcie_mf_no_dma.EP/pcie_v6.v6_pcie_v1_7_i/pcie_2_0_i/pcie_gt_i/gtx_v6_i/GTXD[0].GTX" LOC = GTXE1_X0Y15;
-# PCIe Lane 1
-INST "pcie_mf_no_dma.EP/pcie_v6.v6_pcie_v1_7_i/pcie_2_0_i/pcie_gt_i/gtx_v6_i/GTXD[1].GTX" LOC = GTXE1_X0Y14;
-
-INST "pcie_mf_no_dma.EP/pcie_v6.v6_pcie_v1_7_i/pcie_2_0_i/pcie_block_i" LOC = PCIE_X0Y1;
-
-INST "pcie_mf_no_dma.EP/pcie_v6.v6_pcie_v1_7_i/pcie_clocking_i/mmcm_adv_i" LOC = MMCM_ADV_X0Y7;
-
-# Timing Constraints
-
-NET "pcie_mf_no_dma.EP/sys_clk_c" TNM_NET = "SYSCLK" ;
-NET "pcie_mf_no_dma.EP/pcie_v6.v6_pcie_v1_7_i/pcie_clocking_i/clk_125" TNM_NET = "CLK_125" ;
-NET "pcie_mf_no_dma.EP/pcie_v6.v6_pcie_v1_7_i/TxOutClk_bufg" TNM_NET = "TXOUTCLKBUFG";
-NET "pcie_mf_no_dma.EP/pcie_v6.v6_pcie_v1_7_i/pcie_clocking_i/user_clk_prebuf" TNM_NET = "CLK_USER_CLK" ;
-
-TIMESPEC "TS_SYSCLK"  = PERIOD "SYSCLK" 100 MHz HIGH 50 % PRIORITY 100 ;
-TIMESPEC "TS_CLK_125"  = PERIOD "CLK_125" TS_SYSCLK*1.25 HIGH 50 % PRIORITY 1 ;
-TIMESPEC "TS_TXOUTCLKBUFG"  = PERIOD "TXOUTCLKBUFG" 100 MHz HIGH 50 % PRIORITY 100 ;
-TIMESPEC "TS_USER_CLK" = PERIOD "CLK_USER_CLK" TS_SYSCLK/1.6 HIGH 50 % PRIORITY 1;
-
-PIN "pcie_mf_no_dma.EP/pcie_v6.v6_pcie_v1_7_i/trn_reset_n_int_i.CLR" TIG ;
-PIN "pcie_mf_no_dma.EP/pcie_v6.v6_pcie_v1_7_i/trn_reset_n_i.CLR" TIG ;
-PIN "pcie_mf_no_dma.EP/pcie_v6.v6_pcie_v1_7_i/pcie_clocking_i/mmcm_adv_i.RST" TIG ;
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/pcie_ucf/pcie_master_fifo_lane4.ucf work/pcie_ucf/pcie_master_fifo_lane4.ucf
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/pcie_ucf/pcie_master_fifo_lane4.ucf	2014-04-16 16:50:08.000000000 +0200
+++ work/pcie_ucf/pcie_master_fifo_lane4.ucf	1970-01-01 01:00:00.000000000 +0100
@@ -1,34 +0,0 @@
-NET "sys_reset_n" TIG;
-NET "sys_reset_n" LOC = AE13 | IOSTANDARD = LVCMOS25 | PULLUP | NODELAY ;
-
-#NET "sys_clk_p" LOC = P6;
-#NET "sys_clk_n" LOC = P5;
-INST "pcie_mf_no_dma.EP/pcie_clk_v6.refclk_ibuf" LOC = IBUFDS_GTXE1_X0Y6;
-
-# PCIe Lane 0
-INST "pcie_mf_no_dma.EP/pcie_v6.v6_pcie_v1_7_i/pcie_2_0_i/pcie_gt_i/gtx_v6_i/GTXD[0].GTX" LOC = GTXE1_X0Y15;
-# PCIe Lane 1
-INST "pcie_mf_no_dma.EP/pcie_v6.v6_pcie_v1_7_i/pcie_2_0_i/pcie_gt_i/gtx_v6_i/GTXD[1].GTX" LOC = GTXE1_X0Y14;
-# PCIe Lane 2
-INST "pcie_mf_no_dma.EP/pcie_v6.v6_pcie_v1_7_i/pcie_2_0_i/pcie_gt_i/gtx_v6_i/GTXD[2].GTX" LOC = GTXE1_X0Y13;
-# PCIe Lane 3
-INST "pcie_mf_no_dma.EP/pcie_v6.v6_pcie_v1_7_i/pcie_2_0_i/pcie_gt_i/gtx_v6_i/GTXD[3].GTX" LOC = GTXE1_X0Y12;
-
-INST "pcie_mf_no_dma.EP/pcie_v6.v6_pcie_v1_7_i/pcie_2_0_i/pcie_block_i" LOC = PCIE_X0Y1;
-
-INST "pcie_mf_no_dma.EP/pcie_v6.v6_pcie_v1_7_i/pcie_clocking_i/mmcm_adv_i" LOC = MMCM_ADV_X0Y7;
-
-# Timing Constraints
-
-NET "pcie_mf_no_dma.EP/sys_clk_c" TNM_NET = "SYSCLK" ;
-NET "pcie_mf_no_dma.EP/pcie_v6.v6_pcie_v1_7_i/pcie_clocking_i/clk_125" TNM_NET = "CLK_125" ;
-NET "pcie_mf_no_dma.EP/pcie_v6.v6_pcie_v1_7_i/TxOutClk_bufg" TNM_NET = "TXOUTCLKBUFG";
-
-TIMESPEC "TS_SYSCLK"  = PERIOD "SYSCLK" 100 MHz HIGH 50 % PRIORITY 100 ;
-TIMESPEC "TS_CLK_125"  = PERIOD "CLK_125" TS_SYSCLK*1.25 HIGH 50 % PRIORITY 1 ;
-TIMESPEC "TS_TXOUTCLKBUFG"  = PERIOD "TXOUTCLKBUFG" 100 MHz HIGH 50 % PRIORITY 100 ;
-
-
-PIN "pcie_mf_no_dma.EP/pcie_v6.v6_pcie_v1_7_i/trn_reset_n_int_i.CLR" TIG ;
-PIN "pcie_mf_no_dma.EP/pcie_v6.v6_pcie_v1_7_i/trn_reset_n_i.CLR" TIG ;
-PIN "pcie_mf_no_dma.EP/pcie_v6.v6_pcie_v1_7_i/pcie_clocking_i/mmcm_adv_i.RST" TIG ;
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/pcie_ucf/pcie_master_target_lane1.ucf work/pcie_ucf/pcie_master_target_lane1.ucf
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/pcie_ucf/pcie_master_target_lane1.ucf	2014-04-16 16:50:08.000000000 +0200
+++ work/pcie_ucf/pcie_master_target_lane1.ucf	1970-01-01 01:00:00.000000000 +0100
@@ -1,29 +0,0 @@
-NET "sys_reset_n" TIG;
-NET "sys_reset_n" LOC = AE13 | IOSTANDARD = LVCMOS25 | PULLUP | NODELAY ;
-
-#NET "sys_clk_p" LOC = P6;
-#NET "sys_clk_n" LOC = P5;
-INST "pcie_mt.EP/pcie_clk_v6.refclk_ibuf" LOC = IBUFDS_GTXE1_X0Y6;
-
-# PCIe Lane 0
-INST "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/pcie_2_0_i/pcie_gt_i/gtx_v6_i/GTXD[0].GTX" LOC = GTXE1_X0Y15;
-
-INST "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/pcie_2_0_i/pcie_block_i" LOC = PCIE_X0Y1;
-
-INST "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/pcie_clocking_i/mmcm_adv_i" LOC = MMCM_ADV_X0Y7;
-
-# Timing Constraints
-
-NET "pcie_mt.EP/sys_clk_c" TNM_NET = "SYSCLK" ;
-NET "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/pcie_clocking_i/clk_125" TNM_NET = "CLK_125" ;
-NET "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/TxOutClk_bufg" TNM_NET = "TXOUTCLKBUFG";
-NET "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/pcie_clocking_i/user_clk_prebuf" TNM_NET = "CLK_USER_CLK" ;
-
-TIMESPEC "TS_SYSCLK"  = PERIOD "SYSCLK" 100 MHz HIGH 50 % PRIORITY 100 ;
-TIMESPEC "TS_CLK_125"  = PERIOD "CLK_125" TS_SYSCLK*1.25 HIGH 50 % PRIORITY 1 ;
-TIMESPEC "TS_TXOUTCLKBUFG"  = PERIOD "TXOUTCLKBUFG" 100 MHz HIGH 50 % PRIORITY 100 ;
-TIMESPEC "TS_USER_CLK" = PERIOD "CLK_USER_CLK" TS_SYSCLK/1.6 HIGH 50 % PRIORITY 1;
-
-PIN "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/trn_reset_n_int_i.CLR" TIG ;
-PIN "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/trn_reset_n_i.CLR" TIG ;
-PIN "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/pcie_clocking_i/mmcm_adv_i.RST" TIG ;
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/pcie_ucf/pcie_master_target_lane2.ucf work/pcie_ucf/pcie_master_target_lane2.ucf
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/pcie_ucf/pcie_master_target_lane2.ucf	2014-04-16 16:50:08.000000000 +0200
+++ work/pcie_ucf/pcie_master_target_lane2.ucf	1970-01-01 01:00:00.000000000 +0100
@@ -1,31 +0,0 @@
-NET "sys_reset_n" TIG;
-NET "sys_reset_n" LOC = AE13 | IOSTANDARD = LVCMOS25 | PULLUP | NODELAY ;
-
-#NET "sys_clk_p" LOC = P6;
-#NET "sys_clk_n" LOC = P5;
-INST "pcie_mt.EP/pcie_clk_v6.refclk_ibuf" LOC = IBUFDS_GTXE1_X0Y6;
-
-# PCIe Lane 0
-INST "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/pcie_2_0_i/pcie_gt_i/gtx_v6_i/GTXD[0].GTX" LOC = GTXE1_X0Y15;
-# PCIe Lane 1
-INST "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/pcie_2_0_i/pcie_gt_i/gtx_v6_i/GTXD[1].GTX" LOC = GTXE1_X0Y14;
-
-INST "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/pcie_2_0_i/pcie_block_i" LOC = PCIE_X0Y1;
-
-INST "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/pcie_clocking_i/mmcm_adv_i" LOC = MMCM_ADV_X0Y7;
-
-# Timing Constraints
-
-NET "pcie_mt.EP/sys_clk_c" TNM_NET = "SYSCLK" ;
-NET "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/pcie_clocking_i/clk_125" TNM_NET = "CLK_125" ;
-NET "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/TxOutClk_bufg" TNM_NET = "TXOUTCLKBUFG";
-NET "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/pcie_clocking_i/user_clk_prebuf" TNM_NET = "CLK_USER_CLK" ;
-
-TIMESPEC "TS_SYSCLK"  = PERIOD "SYSCLK" 100 MHz HIGH 50 % PRIORITY 100 ;
-TIMESPEC "TS_CLK_125"  = PERIOD "CLK_125" TS_SYSCLK*1.25 HIGH 50 % PRIORITY 1 ;
-TIMESPEC "TS_TXOUTCLKBUFG"  = PERIOD "TXOUTCLKBUFG" 100 MHz HIGH 50 % PRIORITY 100 ;
-TIMESPEC "TS_USER_CLK" = PERIOD "CLK_USER_CLK" TS_SYSCLK/1.6 HIGH 50 % PRIORITY 1;
-
-PIN "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/trn_reset_n_int_i.CLR" TIG ;
-PIN "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/trn_reset_n_i.CLR" TIG ;
-PIN "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/pcie_clocking_i/mmcm_adv_i.RST" TIG ;
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/pcie_ucf/pcie_master_target_lane4.ucf work/pcie_ucf/pcie_master_target_lane4.ucf
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/pcie_ucf/pcie_master_target_lane4.ucf	2014-04-16 16:50:08.000000000 +0200
+++ work/pcie_ucf/pcie_master_target_lane4.ucf	1970-01-01 01:00:00.000000000 +0100
@@ -1,33 +0,0 @@
-NET "sys_reset_n" TIG;
-NET "sys_reset_n" LOC = AE13 | IOSTANDARD = LVCMOS25 | PULLUP | NODELAY ;
-
-#NET "sys_clk_p" LOC = P6;
-#NET "sys_clk_n" LOC = P5;
-INST "pcie_mt.EP/pcie_clk_v6.refclk_ibuf" LOC = IBUFDS_GTXE1_X0Y6;
-
-# PCIe Lane 0
-INST "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/pcie_2_0_i/pcie_gt_i/gtx_v6_i/GTXD[0].GTX" LOC = GTXE1_X0Y15;
-# PCIe Lane 1
-INST "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/pcie_2_0_i/pcie_gt_i/gtx_v6_i/GTXD[1].GTX" LOC = GTXE1_X0Y14;
-# PCIe Lane 2
-INST "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/pcie_2_0_i/pcie_gt_i/gtx_v6_i/GTXD[2].GTX" LOC = GTXE1_X0Y13;
-# PCIe Lane 3
-INST "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/pcie_2_0_i/pcie_gt_i/gtx_v6_i/GTXD[3].GTX" LOC = GTXE1_X0Y12;
-
-INST "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/pcie_2_0_i/pcie_block_i" LOC = PCIE_X0Y1;
-
-INST "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/pcie_clocking_i/mmcm_adv_i" LOC = MMCM_ADV_X0Y7;
-
-# Timing Constraints
-
-NET "pcie_mt.EP/sys_clk_c" TNM_NET = "SYSCLK" ;
-NET "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/pcie_clocking_i/clk_125" TNM_NET = "CLK_125" ;
-NET "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/TxOutClk_bufg" TNM_NET = "TXOUTCLKBUFG";
-
-TIMESPEC "TS_SYSCLK"  = PERIOD "SYSCLK" 100 MHz HIGH 50 % PRIORITY 100 ;
-TIMESPEC "TS_CLK_125"  = PERIOD "CLK_125" TS_SYSCLK*1.25 HIGH 50 % PRIORITY 1 ;
-TIMESPEC "TS_TXOUTCLKBUFG"  = PERIOD "TXOUTCLKBUFG" 100 MHz HIGH 50 % PRIORITY 100 ;
-
-PIN "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/trn_reset_n_int_i.CLR" TIG ;
-PIN "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/trn_reset_n_i.CLR" TIG ;
-PIN "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/pcie_clocking_i/mmcm_adv_i.RST" TIG ;
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/pcie_ucf/pcie_master_target_lane8.ucf work/pcie_ucf/pcie_master_target_lane8.ucf
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/pcie_ucf/pcie_master_target_lane8.ucf	2014-04-16 16:50:08.000000000 +0200
+++ work/pcie_ucf/pcie_master_target_lane8.ucf	1970-01-01 01:00:00.000000000 +0100
@@ -1,46 +0,0 @@
-NET "sys_reset_n" TIG;
-NET "sys_reset_n" LOC = AE13 | IOSTANDARD = LVCMOS25 | PULLUP | NODELAY ;
-
-#NET "sys_clk_p" LOC = P6;
-#NET "sys_clk_n" LOC = P5;
-INST "pcie_mt.EP/pcie_clk_v6.refclk_ibuf" LOC = IBUFDS_GTXE1_X0Y6;
-
-# PCIe Lane 0
-INST "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/pcie_2_0_i/pcie_gt_i/gtx_v6_i/GTXD[0].GTX" LOC = GTXE1_X0Y15;
-# PCIe Lane 1
-INST "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/pcie_2_0_i/pcie_gt_i/gtx_v6_i/GTXD[1].GTX" LOC = GTXE1_X0Y14;
-# PCIe Lane 2
-INST "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/pcie_2_0_i/pcie_gt_i/gtx_v6_i/GTXD[2].GTX" LOC = GTXE1_X0Y13;
-# PCIe Lane 3
-INST "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/pcie_2_0_i/pcie_gt_i/gtx_v6_i/GTXD[3].GTX" LOC = GTXE1_X0Y12;
-# PCIe Lane 4
-INST "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/pcie_2_0_i/pcie_gt_i/gtx_v6_i/GTXD[4].GTX" LOC = GTXE1_X0Y11;
-# PCIe Lane 5
-INST "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/pcie_2_0_i/pcie_gt_i/gtx_v6_i/GTXD[5].GTX" LOC = GTXE1_X0Y10;
-# PCIe Lane 6
-INST "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/pcie_2_0_i/pcie_gt_i/gtx_v6_i/GTXD[6].GTX" LOC = GTXE1_X0Y9;
-# PCIe Lane 7
-INST "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/pcie_2_0_i/pcie_gt_i/gtx_v6_i/GTXD[7].GTX" LOC = GTXE1_X0Y8;
-
-INST "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/pcie_2_0_i/pcie_block_i" LOC = PCIE_X0Y1;
-
-INST "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/pcie_clocking_i/mmcm_adv_i" LOC = MMCM_ADV_X0Y7;
-
-# Timing Constraints
-
-NET "pcie_mt.EP/sys_clk_c" TNM_NET = "SYSCLK" ;
-NET "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/pcie_clocking_i/clk_125" TNM_NET = "CLK_125" ;
-NET "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/TxOutClk_bufg" TNM_NET = "TXOUTCLKBUFG";
-NET "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/pcie_clocking_i/clk_250" TNM_NET = "CLK_250" ;
-
-TIMESPEC "TS_SYSCLK"  = PERIOD "SYSCLK" 100 MHz HIGH 50 % ;
-TIMESPEC "TS_CLK_125"  = PERIOD "CLK_125" TS_SYSCLK*1.25 HIGH 50 % PRIORITY 100 ;
-TIMESPEC "TS_TXOUTCLKBUFG"  = PERIOD "TXOUTCLKBUFG" 100 MHz HIGH 50 % PRIORITY 100 ;
-TIMESPEC "TS_CLK_250" = PERIOD "CLK_250" TS_SYSCLK*2.5 HIGH 50 % PRIORITY 1;
-
-
-PIN "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/trn_reset_n_int_i.CLR" TIG ;
-PIN "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/trn_reset_n_i.CLR" TIG ;
-PIN "pcie_mt.EP/pcie_v6.v6_pcie_v1_7_i/pcie_clocking_i/mmcm_adv_i.RST" TIG ;
-
-#TIMESPEC "TS_RESETN" = FROM FFS(*) TO FFS(trn_reset_n_i) 8 ns;
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/svga2ch7301c.vhd work/svga2ch7301c.vhd
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/svga2ch7301c.vhd	2014-04-16 16:51:31.000000000 +0200
+++ work/svga2ch7301c.vhd	2019-12-29 15:59:50.142754050 +0100
@@ -98,9 +98,9 @@ architecture rtl of svga2ch7301c is
   signal d0, d1 : std_logic_vector(11 downto 0);
   signal red, green, blue : std_logic_vector(7 downto 0);
 
-  signal lvgaclk, vgaclk, clk40, clk65, clk50, clk25 : std_ulogic;
+  signal lvgaclk, vgaclk, clk40, clk6, clk12, clk25 : std_ulogic;
   
-  signal clkval : std_logic_vector(1 downto 0);
+  signal clkval : std_logic_vector(3 downto 0);
   signal clkval40 : std_logic_vector(1 downto 0);
   signal clkval65 : std_logic_vector(1 downto 0);
   
@@ -191,13 +191,13 @@ begin  -- rtl
   
   -- Clock selection
   bufg00 : BUFG port map (I => lvgaclk, O => vgaclk);
-  lvgaclk <= clk25 when clksel = "00" else clk40 when clksel = "01"
- 	else clk50 when clksel = "10" else clk65;
+  lvgaclk <= clk25 when clksel = "00" else clk12 when clksel = "01"
+ 	else clk6 when clksel = "10" else clk40;
   
   -- Generate clocks
   clkdiv : process(clk100, rstn)
   begin
-    if rstn = '0' then clkval <= "00";
+    if rstn = '0' then clkval <= "0000";
     elsif rising_edge(clk100) then
       clkval <= clkval + 1;
     end if;
@@ -214,8 +214,8 @@ begin  -- rtl
   end process;
 
   clk25 <= clkval(1);
-  clk50 <= clkval(0);
+  clk12 <= clkval(2);
+  clk6  <= clkval(3);
   clk40 <= clkval40(1);
-  clk65 <= clkval65(0);
   
 end rtl;
diff -rupN '--exclude=ram.srec' '--exclude=ptag.vhd' /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/testbench.vhd work/testbench.vhd
--- /home/user/workspace/rvex-rewrite/grlib/grlib-gpl-1.3.7-b4144/designs/leon3-xilinx-ml605/testbench.vhd	2014-04-16 16:51:31.000000000 +0200
+++ work/testbench.vhd	2019-12-29 15:59:50.142754050 +0100
@@ -18,7 +18,7 @@
 --
 --  You should have received a copy of the GNU General Public License
 --  along with this program; if not, write to the Free Software
---  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA 
+--  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
 ------------------------------------------------------------------------------
 
 library ieee;
@@ -38,9 +38,6 @@ entity testbench is
     fabtech   : integer := CFG_FABTECH;
     memtech   : integer := CFG_MEMTECH;
     padtech   : integer := CFG_PADTECH;
-    disas     : integer := CFG_DISAS;   -- Enable disassembly to console
-    dbguart   : integer := CFG_DUART;   -- Print UART on console
-    pclow     : integer := CFG_PCLOW;
     clkperiod : integer := 37
     );
 end;
@@ -97,7 +94,7 @@ constant SIM_BYPASS_INIT_CAL : string :=
   signal ddr3_ck_p     : std_logic_vector(CK_WIDTH-1 downto 0);
   signal ddr3_ck_n     : std_logic_vector(CK_WIDTH-1 downto 0);
 
-  
+
   -- Debug support unit
   signal dsubre     : std_ulogic;
 
@@ -128,7 +125,9 @@ constant SIM_BYPASS_INIT_CAL : string :=
   signal gmiiclk_n  : std_logic := '0';
 
   -- Output signals for LEDs
-  signal led       : std_logic_vector(6 downto 0);
+  signal led       : std_logic_vector(12 downto 0) := (others => '0');
+  signal dipsw     : std_logic_vector(7 downto 0) := (others => '0');
+  signal pbtn      : std_logic_vector(4 downto 0) := (others => '0');
 
 signal iic_scl_main, iic_sda_main : std_logic;
 signal iic_scl_dvi, iic_sda_dvi : std_logic;
@@ -149,19 +148,6 @@ signal clk_33          : std_ulogic := '
 
   signal brdyn     : std_ulogic;
 
----------------------pcie----------------------------------------------
-signal cor_sys_reset_n : std_logic := '1';
-signal ep_sys_clk_p    : std_logic;
-signal ep_sys_clk_n    : std_logic;
-signal rp_sys_clk      : std_logic;
-
-signal cor_pci_exp_txn : std_logic_vector(CFG_NO_OF_LANES-1 downto 0);
-signal cor_pci_exp_txp : std_logic_vector(CFG_NO_OF_LANES-1 downto 0);
-signal cor_pci_exp_rxn : std_logic_vector(CFG_NO_OF_LANES-1 downto 0);
-signal cor_pci_exp_rxp : std_logic_vector(CFG_NO_OF_LANES-1 downto 0);
-
----------------------pcie end---------------------------------------------
-
 begin
 
   -- clock and reset
@@ -171,26 +157,21 @@ begin
   gmiiclk_p    <= not gmiiclk_p after 4 ns;
   gmiiclk_n    <= not gmiiclk_n after 4 ns;
   clk_33       <= not clk_33 after 15 ns;
-  rst        <= '1', '0' after 200 us;
+  rst        <= '1', '0' after 20 us;
   rstn1      <= not rst;
   dsubre     <= '0';
   urxd       <= 'H';
-  
+
   d3 : entity work.leon3mp
-    generic map (fabtech, memtech, padtech, disas, dbguart, pclow,
-                 SIM_BYPASS_INIT_CAL)
+    generic map (fabtech, memtech, padtech,
+                 SIM_BYPASS_INIT_CAL, true)
     port map (
-      reset     => rst,
-      errorn    => error,
-      clk_ref_p    => clk200p,
-      clk_ref_n    => clk200n,
-
-      -- PROM
-      address   => address(24 downto 1),
-      data      => data(15 downto 0),
-      romsn     => romsn,
-      oen       => oen,
-      writen    => writen,
+      reset         => rst,
+      clk_ref_p     => clk200p,
+      clk_ref_n     => clk200n,
+      gmiiclk_p     => gmiiclk_p,
+      gmiiclk_n     => gmiiclk_n,
+      clk_33        => clk_33,
 
       -- DDR3
       ddr3_dq       => ddr3_dq,
@@ -208,61 +189,17 @@ begin
       ddr3_dqs_n    => ddr3_dqs_n,
       ddr3_ck_p     => ddr3_ck_p,
       ddr3_ck_n     => ddr3_ck_n,
-      
-      -- Debug Unit
-      dsubre    => dsubre,
 
-      -- AHB Uart
-      dsutx     => dsutx,
-      dsurx     => dsurx,
-
-      -- PHY
-      gmiiclk_p  => gmiiclk_p,
-      gmiiclk_n  => gmiiclk_n,
-      egtx_clk  => egtx_clk,
-      etx_clk   => etx_clk,
-      erx_clk   => erx_clk,
-      erxd      => erxdt(7 downto 0),
-      erx_dv    => erx_dv,
-      erx_er    => erx_er,
-      erx_col   => erx_col,
-      erx_crs   => erx_crs,
-      emdint    => emdint,
-      etxd      => etxdt(7 downto 0),
-      etx_en    => etx_en,
-      etx_er    => etx_er,
-      emdc      => emdc,
-      emdio     => emdio,
+      -- Debug UART
+      dsutx         => dsutx,
+      dsurx         => dsurx,
 
       -- Output signals for LEDs
-        iic_scl_main => iic_scl_main, 
-	iic_sda_main => iic_sda_main,
-        dvi_iic_scl => iic_scl_dvi, 
-	dvi_iic_sda => iic_sda_dvi,
-        tft_lcd_data => tft_lcd_data, 
-	tft_lcd_clk_p => tft_lcd_clk_p, 
-	tft_lcd_clk_n => tft_lcd_clk_n, 
-	tft_lcd_hsync => tft_lcd_hsync,
-        tft_lcd_vsync => tft_lcd_vsync, 
-	tft_lcd_de => tft_lcd_de, 
-	tft_lcd_reset_b => tft_lcd_reset_b,
-        clk_33 => clk_33, 
-        sysace_mpa => sysace_mpa, 
-	sysace_mpce => sysace_mpce, 
-	sysace_mpirq => sysace_mpirq, 
-	sysace_mpoe => sysace_mpoe,
-        sysace_mpwe => sysace_mpwe, 
-	sysace_d => sysace_d,
-        pci_exp_txp=> cor_pci_exp_txp,
-        pci_exp_txn=> cor_pci_exp_txn,
-        pci_exp_rxp=> cor_pci_exp_rxp,
-        pci_exp_rxn=> cor_pci_exp_rxn,
-        sys_clk_p=> ep_sys_clk_p,   
-        sys_clk_n=> ep_sys_clk_n,
-        sys_reset_n=> cor_sys_reset_n,
-        led => led
-      );
-
+      led           => led,
+      dipsw         => dipsw,
+      pbtn          => pbtn
+      
+    );
 
   u1 : ddr3ram
     generic map (
@@ -289,14 +226,14 @@ begin
       wen    => ddr3_we_n,
       dm     => ddr3_dm,
       ba     => ddr3_ba,
-      a      => ddr3_addr,
+      a      => ddr3_addr(12 downto 0),
       resetn => ddr3_reset_n,
       dq     => ddr3_dq,
       dqs    => ddr3_dqs_p,
       dqsn   => ddr3_dqs_n,
       doload => led(3)
       );
-  
+
   address(0) <= '0';
   prom0 : for i in 0 to 1 generate
       sr0 : sram generic map (index => i+4, abits => 24, fname => promfile)
@@ -304,14 +241,6 @@ begin
                   writen, oen);
   end generate;
 
-  phy0 : if (CFG_GRETH = 1) generate
-    emdio <= 'H';
-    p0: phy
-      generic map (address => 7)
-      port map(rstn1, emdio, etx_clk, erx_clk, erxdt, erx_dv, erx_er,
-               erx_col, erx_crs, etxdt, etx_en, etx_er, emdc, egtx_clk);
-  end generate;
-
 --  spimem0: if CFG_SPIMCTRL = 1 generate
 --    s0 : spi_flash generic map (ftype => 4, debug => 0, fname => promfile,
 --                                readcmd => CFG_SPIMCTRL_READCMD,
